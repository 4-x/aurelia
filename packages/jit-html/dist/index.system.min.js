System.register("jitHtml",["@aurelia/jit","@aurelia/runtime-html","@aurelia/kernel","@aurelia/runtime"],function(t){"use strict";var getTarget,BindingCommandResource,attributePattern,AttrSyntax,PlainElementSymbol,CustomElementSymbol,LetElementSymbol,BindableInfo,BindingSymbol,TextSymbol,TemplateControllerSymbol,CustomAttributeSymbol,PlainAttributeSymbol,ReplacePartSymbol,ResourceModel,IAttributeParser,e,DefaultBindingSyntax,n,TriggerBindingInstruction,DelegateBindingInstruction,CaptureBindingInstruction,AttributeBindingInstruction,TextBindingInstruction,SetAttributeInstruction,i,Profiler,Tracer,camelCase,DI,Registration,PLATFORM,BindingMode,IDOM,ITemplateCompiler,LetBindingInstruction,LetElementInstruction,HydrateElementInstruction,HydrateTemplateController,SetPropertyInstruction,InterpolationInstruction,HydrateAttributeInstruction,RefBindingInstruction,IExpressionParser;return{t:[function(t){getTarget=t.getTarget,BindingCommandResource=t.BindingCommandResource,attributePattern=t.attributePattern,AttrSyntax=t.AttrSyntax,PlainElementSymbol=t.PlainElementSymbol,CustomElementSymbol=t.CustomElementSymbol,LetElementSymbol=t.LetElementSymbol,BindableInfo=t.BindableInfo,BindingSymbol=t.BindingSymbol,TextSymbol=t.TextSymbol,TemplateControllerSymbol=t.TemplateControllerSymbol,CustomAttributeSymbol=t.CustomAttributeSymbol,PlainAttributeSymbol=t.PlainAttributeSymbol,ReplacePartSymbol=t.ReplacePartSymbol,ResourceModel=t.ResourceModel,IAttributeParser=t.IAttributeParser,e=t.DefaultComponents,DefaultBindingSyntax=t.DefaultBindingSyntax,n=t.DefaultBindingLanguage},function(t){TriggerBindingInstruction=t.TriggerBindingInstruction,DelegateBindingInstruction=t.DelegateBindingInstruction,CaptureBindingInstruction=t.CaptureBindingInstruction,AttributeBindingInstruction=t.AttributeBindingInstruction,TextBindingInstruction=t.TextBindingInstruction,SetAttributeInstruction=t.SetAttributeInstruction,i=t.BasicConfiguration},function(t){Profiler=t.Profiler,Tracer=t.Tracer,camelCase=t.camelCase,DI=t.DI,Registration=t.Registration,PLATFORM=t.PLATFORM},function(t){BindingMode=t.BindingMode,IDOM=t.IDOM,ITemplateCompiler=t.ITemplateCompiler,LetBindingInstruction=t.LetBindingInstruction,LetElementInstruction=t.LetElementInstruction,HydrateElementInstruction=t.HydrateElementInstruction,HydrateTemplateController=t.HydrateTemplateController,SetPropertyInstruction=t.SetPropertyInstruction,InterpolationInstruction=t.InterpolationInstruction,HydrateAttributeInstruction=t.HydrateAttributeInstruction,RefBindingInstruction=t.RefBindingInstruction,IExpressionParser=t.IExpressionParser}],i(){function s(t){const e=t.index,{length:n,input:i}=t;for(;n>t.index&&58!==i.charCodeAt(++t.index););return i.slice(e,t.index).trim()}function r(t){++t.index;const{length:e,input:n}=t;let i="",s=0;for(;e>t.index;){switch(s=n.charCodeAt(t.index)){case 59:return++t.index,i.trim();case 47:s=n.charCodeAt(++t.index),i+=`\\${p(s)}`;break;case 39:i+="'";break;default:i+=p(s)}++t.index}return i.trim()}function stringifyDOM(t,e){let n=" ".repeat(e);if(n+=`Node: ${t.nodeName}`,3===t.nodeType&&(n+=` "${t.textContent}"`),1===t.nodeType){let e,i=0;const s=t.attributes,r=s.length;for(;r>i;++i)n+=` ${(e=s[i]).name}=${e.value}`}if(n+="\n",1===t.nodeType){let i=0,childNodes=t.childNodes,s=childNodes.length;for(;s>i;++i)n+=stringifyDOM(childNodes[i],e+1);if("TEMPLATE"===t.nodeName)for(i=0,s=(childNodes=t.content.childNodes).length;s>i;++i)n+=stringifyDOM(childNodes[i],e+1)}return n}function stringifyInstructions(t,e){let n=" ".repeat(e);switch(t.type){case"ha":n+="textBinding\n";break;case"rh":n+="callBinding\n";break;case"rk":n+="iteratorBinding\n";break;case"hb":n+="listenerBinding\n";break;case"rg":n+="propertyBinding\n";break;case"rj":n+="refBinding\n";break;case"hd":n+="stylePropertyBinding\n";break;case"re":n+="setProperty\n";break;case"he":n+="setAttribute\n";break;case"rf":n+="interpolation\n";break;case"rd":n+="hydrateLetElement\n",t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)});break;case"rb":n+=`hydrateAttribute: ${t.res}\n`,t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)});break;case"ra":n+=`hydrateElement: ${t.res}\n`,t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)});break;case"rc":n+=`hydrateTemplateController: ${t.res}\n`,n+=stringifyTemplateDefinition(t.def,e+1),t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)})}return n}function stringifyTemplateDefinition(def,t){const e=" ".repeat(t);let n=e;return n+=`TemplateDefinition: ${def.name}\n`,n+=stringifyDOM(def.template,t+1),n+=`${e} Instructions:\n`,def.instructions.forEach(i=>{n+=`${e}  Row:\n`,i.forEach(e=>{n+=stringifyInstructions(e,t+3)})}),n}t({stringifyDOM,stringifyInstructions,stringifyTemplateDefinition});class TriggerBindingCommand{constructor(){this.s=86}compile(t){return new TriggerBindingInstruction(t.l,getTarget(t,0))}}t("TriggerBindingCommand",TriggerBindingCommand),BindingCommandResource.o("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.s=88}compile(t){return new DelegateBindingInstruction(t.l,getTarget(t,0))}}t("DelegateBindingCommand",DelegateBindingCommand),BindingCommandResource.o("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.s=87}compile(t){return new CaptureBindingInstruction(t.l,getTarget(t,0))}}t("CaptureBindingCommand",CaptureBindingCommand),BindingCommandResource.o("capture",CaptureBindingCommand);class AttrBindingCommand{constructor(){this.s=32}compile(t){const e=getTarget(t,0);return new AttributeBindingInstruction(e,t.l,e)}}t("AttrBindingCommand",AttrBindingCommand),BindingCommandResource.o("attr",AttrBindingCommand);class StyleBindingCommand{constructor(){this.s=32}compile(t){return new AttributeBindingInstruction("style",t.l,getTarget(t,0))}}t("StyleBindingCommand",StyleBindingCommand),BindingCommandResource.o("style",StyleBindingCommand);class ClassBindingCommand{constructor(){this.s=32}compile(t){return new AttributeBindingInstruction("class",t.l,getTarget(t,0))}}t("ClassBindingCommand",ClassBindingCommand),BindingCommandResource.o("class",ClassBindingCommand);class l{u(t,e,parts){return new AttrSyntax(t,e,parts[1],"attr")}m(t,e,parts){return new AttrSyntax(t,e,parts[0],"attr")}}attributePattern({pattern:"attr.PART",symbols:"."},{pattern:"PART.attr",symbols:"."})(l);class o{p(t,e,parts){return new AttrSyntax(t,e,parts[1],"style")}g(t,e,parts){return new AttrSyntax(t,e,parts[0],"style")}}attributePattern({pattern:"style.PART",symbols:"."},{pattern:"PART.style",symbols:"."})(o);class a{T(t,e,parts){return new AttrSyntax(t,e,parts[1],"class")}A(t,e,parts){return new AttrSyntax(t,e,parts[0],"class")}}attributePattern({pattern:"class.PART",symbols:"."},{pattern:"PART.class",symbols:"."})(a);const c=[].slice,{B:u,C:m}=Profiler.P("TemplateBinder"),d={id:1,R:1,k:1},f={v:1,R:1,k:1};class TemplateBinder{constructor(dom,t,e,n){this.dom=dom,this.M=t,this.$=e,this.L=n,this.D=null,this.manifest=null,this.S=null,this.I=null,this.N=null}bind(t){Tracer.enabled&&Tracer.B("TemplateBinder","bind",c.call(arguments)),Profiler.enabled&&u();const e=this.D,n=this.I,i=this.S,s=this.manifest,r=this.D=this.manifest=new PlainElementSymbol(t),l=t.attributes;let o=0;for(;l.length>o;){const t=l[o],e=this.$.parse(t.name,t.value);if(1==d[e.target])throw Profiler.enabled&&m(),Error(`Invalid surrogate attribute: ${e.target}`);const n=this.M.j(e);if(null==n)this.F(e,t);else{if(n.isTemplateController)throw Profiler.enabled&&m(),Error("Cannot have template controller on surrogate element.");this.O(e,n)}++o}return this.q(t),this.D=e,this.I=n,this.S=i,this.manifest=s,Profiler.enabled&&m(),Tracer.enabled&&Tracer.C(),r}H(t,e){switch(Tracer.enabled&&Tracer.B("TemplateBinder","bindManifest",c.call(arguments)),e.nodeName){case"LET":return this.G(t,e),void(Tracer.enabled&&Tracer.C());case"SLOT":this.D.hasSlots=1}const n=this.I,i=this.S,s=this.manifest;this.N=e.getAttribute("part");let r=void 0,name=e.getAttribute("as-element");null==name&&(name=e.nodeName.toLowerCase());const l=this.M.J(name);null==l?this.manifest=new PlainElementSymbol(e):(this.I=this.S,r=this.S=this.manifest=new CustomElementSymbol(this.dom,e,l)),this.q(e),this.K(e,t),null!=r&&r.U?e.parentNode.replaceChild(r.marker,e):this.manifest.V&&e.classList.add("au"),this.I=n,this.S=i,this.manifest=s,Tracer.enabled&&Tracer.C()}G(t,e){const n=new LetElementSymbol(this.dom,e);t.childNodes.push(n);const i=e.attributes;let s=0;for(;i.length>s;){const t=i[s];if("to-view-model"===t.name){e.removeAttribute("to-view-model"),n.toViewModel=1;continue}const r=this.$.parse(t.name,t.value),l=this.M.W(r),o=this.L.parse(r.X,null==l?2048:l.s),to=camelCase(r.target),a=new BindableInfo(to,BindingMode.Y);n.Z.push(new BindingSymbol(l,a,o,r.X,to)),++s}e.parentNode.replaceChild(n.marker,e)}K(t,e){Tracer.enabled&&Tracer.B("TemplateBinder","bindAttributes",c.call(arguments));const{I:n,S:i,manifest:s}=this;let r=s;const l=this.tt(t);let o=void 0,a=void 0;const u=t.attributes;let m=0;for(;u.length>m;){const t=u[m];if(++m,1==f[t.name])continue;const e=this.$.parse(t.name,t.value),n=this.M.j(e);null==n?this.F(e,t):n.isTemplateController?(a=s.templateController=this.et(e,n),r===s?(a.template=s,r=a):(a.templateController=o,a.template=o.template,o.template=a),o=a):this.O(e,n)}(function(dom,t,e){const n=e.nt;let i,s=t;for(;s!==e;)s.template===e?(n.parentNode.replaceChild(s.marker,n),"TEMPLATE"===n.nodeName?(s.nt=n,n.remove()):(i=s.nt=dom.it()).content.appendChild(n)):(i=s.nt=dom.it()).content.appendChild(s.marker),n.removeAttribute(s.rt.st),s=s.template})(this.dom,r,s),null==l?e.childNodes.push(r):(l.parent=e,l.template=r,(s===i?n:i).parts.push(l),null!=e.templateController&&e.templateController.parts.push(l),(function(dom,t,e){let n,i;"TEMPLATE"===(n=512&e.flags?e.marker:e.nt).nodeName?t.nt=n:(i=t.nt=dom.it()).content.appendChild(n)})(this.dom,l,r)),Tracer.enabled&&Tracer.C()}q(t){let e,n;for(Tracer.enabled&&Tracer.B("TemplateBinder","bindChildNodes",c.call(arguments)),e="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!=e;)switch(e.nodeType){case 1:n=e.nextSibling,this.H(this.manifest,e),e=n;break;case 3:e=this.lt(e).nextSibling;break;case 4:case 7:case 8:case 10:e=e.nextSibling;break;case 9:case 11:e=e.firstChild}Tracer.enabled&&Tracer.C()}lt(t){Tracer.enabled&&Tracer.B("TemplateBinder","bindText",c.call(arguments));const e=this.L.parse(t.wholeText,2048);if(null!=e){const n=new TextSymbol(this.dom,t,e);this.manifest.childNodes.push(n),(function(t){const e=t.nt,n=e.parentNode;for(;null!=e.nextSibling&&3===e.nextSibling.nodeType;)n.removeChild(e.nextSibling);e.textContent="",n.insertBefore(t.marker,e)})(n)}for(;null!=t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return Tracer.enabled&&Tracer.C(),t}et(t,e){let n;Tracer.enabled&&Tracer.B("TemplateBinder","declareTemplateController",c.call(arguments));const i=this.M.W(t);if(null==i&&e.ot)n=new TemplateControllerSymbol(this.dom,t,e,this.N),this.N=null,this.at(n,e,t.X);else{n=new TemplateControllerSymbol(this.dom,t,e,this.N);const s=this.L.parse(t.X,null==i?2048:i.s);n.Z.push(new BindingSymbol(i,e.bindable,s,t.X,t.target)),this.N=null}return Tracer.enabled&&Tracer.C(),n}O(t,e){Tracer.enabled&&Tracer.B("TemplateBinder","bindCustomAttribute",c.call(arguments));const n=this.M.W(t);let i;if(null==n&&e.ot)i=new CustomAttributeSymbol(t,e),this.at(i,e,t.X);else{i=new CustomAttributeSymbol(t,e);const s=this.L.parse(t.X,null==n?2048:n.s);i.Z.push(new BindingSymbol(n,e.bindable,s,t.X,t.target))}this.manifest.attributes.push(i),this.manifest.V=1,Tracer.enabled&&Tracer.C()}at(t,e,value){Tracer.enabled&&Tracer.B("TemplateBinder","bindMultiAttribute",c.call(arguments));const n=(function(t){const e=[],n=new ParserState(t),i=n.length;let name,value;for(;i>n.index;){if(0===(name=s(n)).length)return e;value=r(n),e.push({name,value})}return e})(value);let i;for(let s=0,r=n.length;r>s;++s){const r=this.$.parse((i=n[s]).name,i.value),l=this.M.W(r),o=this.L.parse(r.X,null==l?2048:l.s);let bindable=e.bindables[r.target];void 0===bindable&&(bindable=e.bindables[r.target]=new BindableInfo(r.target,BindingMode.Y)),t.Z.push(new BindingSymbol(l,bindable,o,r.X,r.target))}Tracer.enabled&&Tracer.C()}F(t,e){if(Tracer.enabled&&Tracer.B("TemplateBinder","bindPlainAttribute",c.call(arguments)),0===t.X.length)return void(Tracer.enabled&&Tracer.C());const n=this.M.W(t),i=this.manifest,s=this.L.parse(t.X,null==n?2048:n.s);if(16&i.flags){const bindable=i.bindables[t.target];null!=bindable?(i.Z.push(new BindingSymbol(n,bindable,s,t.X,t.target)),i.V=1):null==s&&"ref"!==t.target||(i.attributes.push(new PlainAttributeSymbol(t,n,s)),i.V=1)}else null!=s||"ref"===t.target?(i.attributes.push(new PlainAttributeSymbol(t,n,s)),i.V=1):i===this.D&&i.attributes.push(new PlainAttributeSymbol(t,n,s));null==n&&null!=s&&(e.value=""),Tracer.enabled&&Tracer.C()}tt(t){Tracer.enabled&&Tracer.B("TemplateBinder","declareReplacePart",c.call(arguments));const name=t.getAttribute("replace-part");if(null==name)return Tracer.enabled&&Tracer.C(),null;t.removeAttribute("replace-part");const e=new ReplacePartSymbol(name);return this.q(t),Tracer.enabled&&Tracer.C(),e}}t("TemplateBinder",TemplateBinder);class ParserState{constructor(t){this.input=t,this.index=0,this.length=t.length}}const p=String.fromCharCode;var Char;(function(Char){Char[Char.ct=34]="DoubleQuote",Char[Char.ht=39]="SingleQuote",Char[Char.ut=47]="Slash",Char[Char.dt=59]="Semicolon",Char[Char.ft=58]="Colon"})(Char||(Char={}));const ITemplateElementFactory=t("ITemplateElementFactory",DI.bt("ITemplateElementFactory").pt()),{B:b,C:g}=Profiler.P("TemplateElementFactory"),w={};class T{constructor(dom){this.dom=dom,this.template=dom.it()}static register(t){return Registration.singleton(ITemplateElementFactory,this).register(t)}it(t){if(Profiler.enabled&&b(),"string"==typeof t){let e=w[t];if(void 0===e){const template=this.template;template.innerHTML=t;const n=template.content.firstElementChild;null==n||"TEMPLATE"!==n.nodeName||null!=n.nextElementSibling?(this.template=this.dom.it(),e=template):(template.content.removeChild(n),e=n),w[t]=e}return Profiler.enabled&&g(),e.cloneNode(1)}if("TEMPLATE"!==t.nodeName){const template=this.dom.it();return template.content.appendChild(t),Profiler.enabled&&g(),template}return null!=t.parentNode&&t.parentNode.removeChild(t),Profiler.enabled&&g(),t}}T.inject=[IDOM];const A=Object.freeze({required:0,compiler:"default"}),{B:y,C:B}=Profiler.P("TemplateCompiler");class C{constructor(t,e,n){this.gt=t,this.$=e,this.L=n,this.wt=null,this.parts=null}get name(){return"default"}static register(t){return Registration.singleton(ITemplateCompiler,this).register(t)}compile(dom,t,e){Profiler.enabled&&y();const n=new TemplateBinder(dom,new ResourceModel(e),this.$,this.L),template=t.template=this.gt.it(t.template),i=n.bind(template);void 0!==t.instructions&&t.instructions!==PLATFORM.Tt||(t.instructions=[]),1==i.hasSlots&&(t.hasSlots=1),this.wt=t.instructions,this.parts={};const s=i.attributes,r=s.length;if(r>0){let surrogates;void 0!==t.surrogates&&t.surrogates!==PLATFORM.Tt||(t.surrogates=Array(r)),surrogates=t.surrogates;for(let t=0;r>t;++t)surrogates[t]=this.At(s[t])}return this.yt(i),this.wt=null,this.parts=null,t.build=A,Profiler.enabled&&B(),t}yt(t){if(8192&t.flags){const{childNodes}=t;let e;const n=childNodes.length;for(let t=0;n>t;++t)if(128&(e=childNodes[t]).flags)this.wt.push([new TextBindingInstruction(e.Bt)]);else if(32&e.flags){const t=e.Z,instructions=[];let n;const i=t.length;for(let e=0;i>e;++e)instructions[e]=new LetBindingInstruction((n=t[e]).l,n.target);this.wt.push([new LetElementInstruction(instructions,e.toViewModel)])}else this.Ct(e)}}Pt(t){const e=this.Rt(t,1);e[0]=new HydrateElementInstruction(t.res,this.Et(t),this.kt(t)),this.wt.push(e),this.yt(t)}vt(t){const e=this.Rt(t,0);e.length>0&&this.wt.push(e),this.yt(t)}Ct(t){switch(511&t.flags){case 16:this.Pt(t);break;case 64:this.vt(t);break;case 1:this.Mt(t)}}Mt(t){const e=this.Et(t),n=this.wt,i=this.wt=[];this.Ct(t.template),this.wt=n;const def={name:null==t.N?t.res:t.N,template:t.nt,instructions:i,build:A};let parts=void 0;if((16384&t.flags)>0){parts={};for(const e of t.parts)parts[e.name]=this.parts[e.name]}this.wt.push([new HydrateTemplateController(def,t.res,e,"else"===t.res,parts)])}Et(t){let e;if(4096&t.flags){const{Z:n}=t,i=n.length;e=Array(i);let s=0;for(;i>s;++s)e[s]=this.$t(n[s])}else e=PLATFORM.Tt;return e}$t(t){return null==t.command?null==t.l?new SetPropertyInstruction(t.X,t.bindable.Lt):new InterpolationInstruction(t.l,t.bindable.Lt):t.command.compile(t)}Rt(t,e){let n;if(2048&t.flags){const{attributes:i}=t,s=i.length;n=Array(e+s);for(let t=0;s>t;++t)n[t+e]=this.At(i[t])}else n=e>0?Array(e):PLATFORM.Tt;return n}Dt(t){const e=this.Et(t);return new HydrateAttributeInstruction(t.res,e)}St(t){return null==t.command?null==t.l?new SetAttributeInstruction(t.rt.X,t.rt.target):new InterpolationInstruction(t.l,t.rt.target):t.command.compile(t)}At(t){return"ref"===t.rt.target?new RefBindingInstruction(t.rt.X):4&t.flags?this.Dt(t):this.St(t)}kt(t){let parts;if(16384&t.flags){parts={};const e=t.parts,n=e.length;let i,s,r;for(let t=0;n>t;++t)r=e[t],i=this.wt,s=this.wt=[],this.Ct(r.template),this.parts[r.name]=parts[r.name]={name:r.name,template:r.nt,instructions:s,build:A},this.wt=i}else parts=PLATFORM.It;return parts}}C.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const ITemplateCompilerRegistration=t("ITemplateCompilerRegistration",C),ITemplateElementFactoryRegistration=t("ITemplateElementFactoryRegistration",T),DefaultComponents=t("DefaultComponents",[ITemplateCompilerRegistration,ITemplateElementFactoryRegistration]),P=[o,a,l],TriggerBindingCommandRegistration=t("TriggerBindingCommandRegistration",TriggerBindingCommand),DelegateBindingCommandRegistration=t("DelegateBindingCommandRegistration",DelegateBindingCommand),CaptureBindingCommandRegistration=t("CaptureBindingCommandRegistration",CaptureBindingCommand),AttrBindingCommandRegistration=t("AttrBindingCommandRegistration",AttrBindingCommand),ClassBindingCommandRegistration=t("ClassBindingCommandRegistration",ClassBindingCommand),StyleBindingCommandRegistration=t("StyleBindingCommandRegistration",StyleBindingCommand),DefaultBindingLanguage=t("DefaultBindingLanguage",[TriggerBindingCommandRegistration,DelegateBindingCommandRegistration,CaptureBindingCommandRegistration,ClassBindingCommandRegistration,StyleBindingCommandRegistration,AttrBindingCommandRegistration]);t("BasicConfiguration",{register:t=>i.register(t).register(...e,...DefaultBindingSyntax,...P,...n,...DefaultComponents,...DefaultBindingLanguage),Nt(){return this.register(DI.Nt())}})}}});
