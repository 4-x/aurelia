System.register("jitHtml",["@aurelia/jit","@aurelia/runtime-html","@aurelia/kernel","@aurelia/runtime"],function(t){"use strict";var getTarget,BindingCommandResource,attributePattern,AttrSyntax,PlainElementSymbol,CustomElementSymbol,LetElementSymbol,BindableInfo,BindingSymbol,TextSymbol,TemplateControllerSymbol,CustomAttributeSymbol,PlainAttributeSymbol,ReplacePartSymbol,ResourceModel,IAttributeParser,e,DefaultBindingSyntax,n,TriggerBindingInstruction,DelegateBindingInstruction,CaptureBindingInstruction,AttributeBindingInstruction,TextBindingInstruction,SetAttributeInstruction,s,Profiler,PLATFORM,DI,Registration,BindingMode,IDOM,ITemplateCompiler,LetBindingInstruction,LetElementInstruction,HydrateElementInstruction,HydrateTemplateController,SetPropertyInstruction,InterpolationInstruction,HydrateAttributeInstruction,RefBindingInstruction,IExpressionParser;return{t:[function(t){getTarget=t.getTarget,BindingCommandResource=t.BindingCommandResource,attributePattern=t.attributePattern,AttrSyntax=t.AttrSyntax,PlainElementSymbol=t.PlainElementSymbol,CustomElementSymbol=t.CustomElementSymbol,LetElementSymbol=t.LetElementSymbol,BindableInfo=t.BindableInfo,BindingSymbol=t.BindingSymbol,TextSymbol=t.TextSymbol,TemplateControllerSymbol=t.TemplateControllerSymbol,CustomAttributeSymbol=t.CustomAttributeSymbol,PlainAttributeSymbol=t.PlainAttributeSymbol,ReplacePartSymbol=t.ReplacePartSymbol,ResourceModel=t.ResourceModel,IAttributeParser=t.IAttributeParser,e=t.DefaultComponents,DefaultBindingSyntax=t.DefaultBindingSyntax,n=t.DefaultBindingLanguage},function(t){TriggerBindingInstruction=t.TriggerBindingInstruction,DelegateBindingInstruction=t.DelegateBindingInstruction,CaptureBindingInstruction=t.CaptureBindingInstruction,AttributeBindingInstruction=t.AttributeBindingInstruction,TextBindingInstruction=t.TextBindingInstruction,SetAttributeInstruction=t.SetAttributeInstruction,s=t.BasicConfiguration},function(t){Profiler=t.Profiler,PLATFORM=t.PLATFORM,DI=t.DI,Registration=t.Registration},function(t){BindingMode=t.BindingMode,IDOM=t.IDOM,ITemplateCompiler=t.ITemplateCompiler,LetBindingInstruction=t.LetBindingInstruction,LetElementInstruction=t.LetElementInstruction,HydrateElementInstruction=t.HydrateElementInstruction,HydrateTemplateController=t.HydrateTemplateController,SetPropertyInstruction=t.SetPropertyInstruction,InterpolationInstruction=t.InterpolationInstruction,HydrateAttributeInstruction=t.HydrateAttributeInstruction,RefBindingInstruction=t.RefBindingInstruction,IExpressionParser=t.IExpressionParser}],s(){function i(t){const e=t.index,{length:n,input:s}=t;for(;n>t.index&&58!==s.charCodeAt(++t.index););return s.slice(e,t.index).trim()}function r(t){++t.index;const{length:e,input:n}=t;let s="",i=0;for(;e>t.index;){switch(i=n.charCodeAt(t.index)){case 59:return++t.index,s.trim();case 47:i=n.charCodeAt(++t.index),s+=`\\${m(i)}`;break;case 39:s+="'";break;default:s+=m(i)}++t.index}return s.trim()}function stringifyDOM(t,e){let n=" ".repeat(e);if(n+=`Node: ${t.nodeName}`,3===t.nodeType&&(n+=` "${t.textContent}"`),1===t.nodeType){let e,s=0;const i=t.attributes,r=i.length;for(;r>s;++s)n+=` ${(e=i[s]).name}=${e.value}`}if(n+="\n",1===t.nodeType){let s=0,childNodes=t.childNodes,i=childNodes.length;for(;i>s;++s)n+=stringifyDOM(childNodes[s],e+1);if("TEMPLATE"===t.nodeName)for(s=0,i=(childNodes=t.content.childNodes).length;i>s;++s)n+=stringifyDOM(childNodes[s],e+1)}return n}function stringifyInstructions(t,e){let n=" ".repeat(e);switch(t.type){case"ha":n+="textBinding\n";break;case"rh":n+="callBinding\n";break;case"rk":n+="iteratorBinding\n";break;case"hb":n+="listenerBinding\n";break;case"rg":n+="propertyBinding\n";break;case"rj":n+="refBinding\n";break;case"hd":n+="stylePropertyBinding\n";break;case"re":n+="setProperty\n";break;case"he":n+="setAttribute\n";break;case"rf":n+="interpolation\n";break;case"rd":n+="hydrateLetElement\n",t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)});break;case"rb":n+=`hydrateAttribute: ${t.res}\n`,t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)});break;case"ra":n+=`hydrateElement: ${t.res}\n`,t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)});break;case"rc":n+=`hydrateTemplateController: ${t.res}\n`,n+=stringifyTemplateDefinition(t.def,e+1),t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)})}return n}function stringifyTemplateDefinition(def,t){const e=" ".repeat(t);let n=e;return n+=`TemplateDefinition: ${def.name}\n`,n+=stringifyDOM(def.template,t+1),n+=`${e} Instructions:\n`,def.instructions.forEach(s=>{n+=`${e}  Row:\n`,s.forEach(e=>{n+=stringifyInstructions(e,t+3)})}),n}t({stringifyDOM,stringifyInstructions,stringifyTemplateDefinition});class TriggerBindingCommand{constructor(){this.i=86}compile(t){return new TriggerBindingInstruction(t.l,getTarget(t,0))}}t("TriggerBindingCommand",TriggerBindingCommand),BindingCommandResource.o("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.i=88}compile(t){return new DelegateBindingInstruction(t.l,getTarget(t,0))}}t("DelegateBindingCommand",DelegateBindingCommand),BindingCommandResource.o("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.i=87}compile(t){return new CaptureBindingInstruction(t.l,getTarget(t,0))}}t("CaptureBindingCommand",CaptureBindingCommand),BindingCommandResource.o("capture",CaptureBindingCommand);class AttrBindingCommand{constructor(){this.i=32}compile(t){const e=getTarget(t,0);return new AttributeBindingInstruction(e,t.l,e)}}t("AttrBindingCommand",AttrBindingCommand),BindingCommandResource.o("attr",AttrBindingCommand);class StyleBindingCommand{constructor(){this.i=32}compile(t){return new AttributeBindingInstruction("style",t.l,getTarget(t,0))}}t("StyleBindingCommand",StyleBindingCommand),BindingCommandResource.o("style",StyleBindingCommand);class ClassBindingCommand{constructor(){this.i=32}compile(t){return new AttributeBindingInstruction("class",t.l,getTarget(t,0))}}t("ClassBindingCommand",ClassBindingCommand),BindingCommandResource.o("class",ClassBindingCommand);class l{h(t,e,parts){return new AttrSyntax(t,e,parts[1],"attr")}u(t,e,parts){return new AttrSyntax(t,e,parts[0],"attr")}}attributePattern({pattern:"attr.PART",symbols:"."},{pattern:"PART.attr",symbols:"."})(l);class o{m(t,e,parts){return new AttrSyntax(t,e,parts[1],"style")}p(t,e,parts){return new AttrSyntax(t,e,parts[0],"style")}}attributePattern({pattern:"style.PART",symbols:"."},{pattern:"PART.style",symbols:"."})(o);class a{g(t,e,parts){return new AttrSyntax(t,e,parts[1],"class")}T(t,e,parts){return new AttrSyntax(t,e,parts[0],"class")}}attributePattern({pattern:"class.PART",symbols:"."},{pattern:"PART.class",symbols:"."})(a),Profiler.A("TemplateBinder");const c={id:1,C:1,P:1},h={B:1,C:1,P:1};class TemplateBinder{constructor(dom,t,e,n){this.dom=dom,this.R=t,this.k=e,this.v=n,this.$=null,this.manifest=null,this.L=null,this.M=null,this.D=null}bind(t){const e=this.$,n=this.M,s=this.L,i=this.manifest,r=this.$=this.manifest=new PlainElementSymbol(t),l=t.attributes;let o=0;for(;l.length>o;){const t=l[o],e=this.k.parse(t.name,t.value);if(1==c[e.target])throw Error(`Invalid surrogate attribute: ${e.target}`);const n=this.R.S(e);if(null===n)this.I(e,t);else{if(n.isTemplateController)throw Error("Cannot have template controller on surrogate element.");this.N(e,n)}++o}return this.j(t),this.$=e,this.M=n,this.L=s,this.manifest=i,r}F(t,e){switch(e.nodeName){case"LET":return void this.O(t,e);case"SLOT":return void(this.$.hasSlots=1)}const n=this.M,s=this.L,i=this.manifest;let r;this.D=e.getAttribute("part");let name=e.getAttribute("as-element");null===name&&(name=e.nodeName.toLowerCase());const l=this.R.q(name);null===l?this.manifest=new PlainElementSymbol(e):(this.M=this.L,r=this.L=this.manifest=new CustomElementSymbol(this.dom,e,l)),this.j(e),this.H(e,t),void 0!==r&&r.G?e.parentNode.replaceChild(r.marker,e):this.manifest.J&&e.classList.add("au"),this.M=n,this.L=s,this.manifest=i}O(t,e){const n=new LetElementSymbol(this.dom,e);t.childNodes.push(n);const s=e.attributes;let i=0;for(;s.length>i;){const t=s[i];if("to-view-model"===t.name){e.removeAttribute("to-view-model"),n.toViewModel=1;continue}const r=this.k.parse(t.name,t.value),l=this.R.K(r),o=this.v.parse(r.U,null===l?2048:l.i),to=PLATFORM.V(r.target),a=new BindableInfo(to,BindingMode.W);n.X.push(new BindingSymbol(l,a,o,r.U,to)),++i}e.parentNode.replaceChild(n.marker,e)}H(t,e){const{M:n,L:s,manifest:i}=this;let r=i;const l=this.Y(t);let o,a;const c=t.attributes;let u=0;for(;c.length>u;){const t=c[u];if(++u,1==h[t.name])continue;const e=this.k.parse(t.name,t.value),n=this.R.S(e);null===n?this.I(e,t):n.isTemplateController?(a=i.templateController=this.Z(e,n),r===i?(a.template=i,r=a):(a.templateController=o,a.template=o.template,o.template=a),o=a):this.N(e,n)}(function(dom,t,e){const n=e._;let s,i=t;for(;i!==e;)i.template===e?(n.parentNode.replaceChild(i.marker,n),"TEMPLATE"===n.nodeName?(i._=n,n.remove()):(s=i._=dom.tt()).content.appendChild(n)):(s=i._=dom.tt()).content.appendChild(i.marker),n.removeAttribute(i.nt.et),i=i.template})(this.dom,r,i),null===l?e.childNodes.push(r):(l.parent=e,l.template=r,(i===s?n:s).parts.push(l),(function(dom,t,e){let n,s;"TEMPLATE"===(n=512&e.flags?e.marker:e._).nodeName?t._=n:(s=t._=dom.tt()).content.appendChild(n)})(this.dom,l,r))}j(t){let e,n;for(e="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==e;)switch(e.nodeType){case 1:n=e.nextSibling,this.F(this.manifest,e),e=n;break;case 3:e=this.st(e).nextSibling;break;case 4:case 7:case 8:case 10:e=e.nextSibling;break;case 9:case 11:e=e.firstChild}}st(t){const e=this.v.parse(t.wholeText,2048);if(null!==e){const n=new TextSymbol(this.dom,t,e);this.manifest.childNodes.push(n),(function(t){const e=t._,n=e.parentNode;for(;null!==e.nextSibling&&3===e.nextSibling.nodeType;)n.removeChild(e.nextSibling);e.textContent="",n.insertBefore(t.marker,e)})(n)}for(;null!==t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return t}Z(t,e){let n;const s=this.R.K(t);if(null===s&&e.it)n=new TemplateControllerSymbol(this.dom,t,e,this.D),this.D=null,this.rt(n,e,t.U);else{n=new TemplateControllerSymbol(this.dom,t,e,this.D);const i=this.v.parse(t.U,null===s?2048:s.i);n.X.push(new BindingSymbol(s,e.bindable,i,t.U,t.target)),this.D=null}return n}N(t,e){const n=this.R.K(t);let s;if(null===n&&e.it)s=new CustomAttributeSymbol(t,e),this.rt(s,e,t.U);else{s=new CustomAttributeSymbol(t,e);const i=this.v.parse(t.U,null===n?2048:n.i);s.X.push(new BindingSymbol(n,e.bindable,i,t.U,t.target))}this.manifest.attributes.push(s),this.manifest.J=1}rt(t,e,value){const n=(function(t){const e=[],n=new u(t),s=n.length;let name,value;for(;s>n.index;){if(0===(name=i(n)).length)return e;value=r(n),e.push({name,value})}return e})(value);let s;for(let i=0,r=n.length;r>i;++i){const r=this.k.parse((s=n[i]).name,s.value),l=this.R.K(r),o=this.v.parse(r.U,null===l?2048:l.i);let bindable=e.bindables[r.target];void 0===bindable&&(bindable=e.bindables[r.target]=new BindableInfo(r.target,BindingMode.W)),t.X.push(new BindingSymbol(l,bindable,o,r.U,r.target))}}I(t,e){if(0===t.U.length)return;const n=this.R.K(t),s=this.manifest,i=this.v.parse(t.U,null===n?2048:n.i);if(16&s.flags){const bindable=s.bindables[t.target];void 0!==bindable?(s.X.push(new BindingSymbol(n,bindable,i,t.U,t.target)),s.J=1):null===i&&"ref"!==t.target||(s.attributes.push(new PlainAttributeSymbol(t,n,i)),s.J=1)}else null!==i||"ref"===t.target?(s.attributes.push(new PlainAttributeSymbol(t,n,i)),s.J=1):s===this.$&&s.attributes.push(new PlainAttributeSymbol(t,n,i));null===n&&null!==i&&(e.value="")}Y(t){const name=t.getAttribute("replace-part");return null===name?null:(t.removeAttribute("replace-part"),new ReplacePartSymbol(name))}}t("TemplateBinder",TemplateBinder);class u{constructor(t){this.input=t,this.index=0,this.length=t.length}}const m=String.fromCharCode;var d;(function(t){t[t.lt=34]="DoubleQuote",t[t.ot=39]="SingleQuote",t[t.at=47]="Slash",t[t.ct=59]="Semicolon",t[t.ht=58]="Colon"})(d||(d={}));const ITemplateElementFactory=t("ITemplateElementFactory",DI.dt("ITemplateElementFactory").ut());Profiler.A("TemplateElementFactory");class f{constructor(dom){this.dom=dom,this.template=dom.tt()}static register(t){return Registration.singleton(ITemplateElementFactory,this).register(t)}tt(t){if("string"==typeof t){const template=this.template;template.innerHTML=t;const e=template.content.firstElementChild;return null===e||"TEMPLATE"!==e.nodeName||null!==e.nextElementSibling?(this.template=this.dom.tt(),template):(template.content.removeChild(e),e)}if("TEMPLATE"!==t.nodeName){const template=this.dom.tt();return template.content.appendChild(t),template}return null!==t.parentNode&&t.parentNode.removeChild(t),t}}f.inject=[IDOM];const p=Object.freeze({required:0,compiler:"default"});Profiler.A("TemplateCompiler");class g{constructor(t,e,n){this.ft=t,this.k=e,this.v=n,this.pt=null}get name(){return"default"}static register(t){return Registration.singleton(ITemplateCompiler,this).register(t)}compile(dom,t,e){const n=new TemplateBinder(dom,new ResourceModel(e),this.k,this.v),template=t.template=this.ft.tt(t.template),s=n.bind(template);void 0!==t.instructions&&t.instructions!==PLATFORM.gt||(t.instructions=[]),1==s.hasSlots&&(t.hasSlots=1),this.pt=t.instructions;const i=s.attributes,r=i.length;if(r>0){let surrogates;void 0!==t.surrogates&&t.surrogates!==PLATFORM.gt||(t.surrogates=Array(r)),surrogates=t.surrogates;for(let t=0;r>t;++t)surrogates[t]=this.wt(i[t])}return this.bt(s),this.pt=null,t}bt(t){if(8192&t.flags){const{childNodes}=t;let e;const n=childNodes.length;for(let t=0;n>t;++t)if(128&(e=childNodes[t]).flags)this.pt.push([new TextBindingInstruction(e.Tt)]);else if(32&e.flags){const t=e.X,instructions=[];let n;const s=t.length;for(let e=0;s>e;++e)instructions[e]=new LetBindingInstruction((n=t[e]).l,n.target);this.pt.push([new LetElementInstruction(instructions,e.toViewModel)])}else this.yt(e)}}At(t){const e=this.Ct(t,1);e[0]=new HydrateElementInstruction(t.res,this.Pt(t),this.Bt(t)),this.pt.push(e)}Et(t){const e=this.Ct(t,0);e.length>0&&this.pt.push(e),this.bt(t)}yt(t){switch(511&t.flags){case 16:this.At(t);break;case 64:this.Et(t);break;case 1:this.Rt(t)}}Rt(t){const e=this.Pt(t),n=this.pt,s=this.pt=[];this.yt(t.template),this.pt=n,this.pt.push([new HydrateTemplateController({name:null===t.D?t.res:t.D,template:t._,instructions:s,build:p},t.res,e,"else"===t.res)])}Pt(t){let e;if(4096&t.flags){const{X:n}=t,s=n.length;e=Array(s);let i=0;for(;s>i;++i)e[i]=this.kt(n[i])}else e=PLATFORM.gt;return e}kt(t){return null===t.command?null===t.l?new SetPropertyInstruction(t.U,t.bindable.vt):new InterpolationInstruction(t.l,t.bindable.vt):t.command.compile(t)}Ct(t,e){let n;if(2048&t.flags){const{attributes:s}=t,i=s.length;n=Array(e+i);for(let t=0;i>t;++t)n[t+e]=this.wt(s[t])}else n=e>0?Array(e):PLATFORM.gt;return n}$t(t){const e=this.Pt(t);return new HydrateAttributeInstruction(t.res,e)}Lt(t){return null===t.command?null===t.l?new SetAttributeInstruction(t.nt.U,t.nt.target):new InterpolationInstruction(t.l,t.nt.target):t.command.compile(t)}wt(t){return"ref"===t.nt.target?new RefBindingInstruction(t.nt.U):4&t.flags?this.$t(t):this.Lt(t)}Bt(t){let parts;if(16384&t.flags){parts={};const e=t.parts,n=e.length;let s,i,r;for(let t=0;n>t;++t)r=e[t],s=this.pt,i=this.pt=[],this.yt(r.template),parts[r.name]={name:r.name,template:r._,instructions:i,build:p},this.pt=s}else parts=PLATFORM.Mt;return parts}}g.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const ITemplateCompilerRegistration=t("ITemplateCompilerRegistration",g),ITemplateElementFactoryRegistration=t("ITemplateElementFactoryRegistration",f),DefaultComponents=t("DefaultComponents",[ITemplateCompilerRegistration,ITemplateElementFactoryRegistration]),w=[o,a,l],TriggerBindingCommandRegistration=t("TriggerBindingCommandRegistration",TriggerBindingCommand),DelegateBindingCommandRegistration=t("DelegateBindingCommandRegistration",DelegateBindingCommand),CaptureBindingCommandRegistration=t("CaptureBindingCommandRegistration",CaptureBindingCommand),AttrBindingCommandRegistration=t("AttrBindingCommandRegistration",AttrBindingCommand),ClassBindingCommandRegistration=t("ClassBindingCommandRegistration",ClassBindingCommand),StyleBindingCommandRegistration=t("StyleBindingCommandRegistration",StyleBindingCommand),DefaultBindingLanguage=t("DefaultBindingLanguage",[TriggerBindingCommandRegistration,DelegateBindingCommandRegistration,CaptureBindingCommandRegistration,ClassBindingCommandRegistration,StyleBindingCommandRegistration,AttrBindingCommandRegistration]);t("BasicConfiguration",{register:t=>s.register(t).register(...e,...DefaultBindingSyntax,...w,...n,...DefaultComponents,...DefaultBindingLanguage),Dt(){return this.register(DI.Dt())}})}}});
