this.au=this.au||{},this.au.runtime=(function(t,kernel){"use strict";function i(t,i,s,e){var n,r,o=arguments.length,c=3>o?i:null===e?e=Object.getOwnPropertyDescriptor(i,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,s,e);else for(r=t.length-1;r>=0;r--)(n=t[r])&&(c=(3>o?n(c):o>3?n(i,s,c):n(i,s))||c);return o>3&&c&&Object.defineProperty(i,s,c),c}function subscriberCollection(){return function(t){const i=t.prototype;i.t=0,i.i=s,i.s=r,i.o=d,i.u=u,i.l=b,void 0===i.subscribe&&(i.subscribe=s),void 0===i.unsubscribe&&(i.unsubscribe=r)}}function proxySubscriberCollection(){return function(t){const i=t.prototype;i.v=0,i.g=e,i.p=o,i.m=f,i.C=l,i.O=g,void 0===i.A&&(i.A=e),void 0===i.j&&(i.j=o)}}function collectionSubscriberCollection(){return function(t){const i=t.prototype;i.S=0,i.k=n,i.R=c,i.B=v,i.T=a,i.I=p,void 0===i.V&&(i.V=n),void 0===i.P&&(i.P=c)}}function s(t){if(this.o(t))return 0;const i=this.t;return 0==(1&i)?(this.$=t,this.t|=1):0==(2&i)?(this.L=t,this.t|=2):0==(4&i)?(this.M=t,this.t|=4):0==(8&i)?(this.F=[t],this.t|=8):this.F.push(t),1}function e(t){if(this.m(t))return 0;const i=this.v;return 0==(1&i)?(this.D=t,this.v|=1):0==(2&i)?(this.N=t,this.v|=2):0==(4&i)?(this.U=t,this.v|=4):0==(8&i)?(this.K=[t],this.v|=8):this.K.push(t),1}function n(t){if(this.B(t))return 0;const i=this.S;return 0==(1&i)?(this.W=t,this.S|=1):0==(2&i)?(this.q=t,this.S|=2):0==(4&i)?(this.H=t,this.S|=4):0==(8&i)?(this.G=[t],this.S|=8):this.G.push(t),1}function r(t){const i=this.t;if((1&i)>0&&this.$===t)return this.$=void 0,this.t=1^(1|this.t),1;if((2&i)>0&&this.L===t)return this.L=void 0,this.t=2^(2|this.t),1;if((4&i)>0&&this.M===t)return this.M=void 0,this.t=4^(4|this.t),1;if((8&i)>0){const i=this.F;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.t=8^(8|this.t)),1}return 0}function o(t){const i=this.v;if((1&i)>0&&this.D===t)return this.D=void 0,this.v=1^(1|this.v),1;if((2&i)>0&&this.N===t)return this.N=void 0,this.v=2^(2|this.v),1;if((4&i)>0&&this.U===t)return this.U=void 0,this.v=4^(4|this.v),1;if((8&i)>0){const i=this.K;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.v=8^(8|this.v)),1}return 0}function c(t){const i=this.S;if((1&i)>0&&this.W===t)return this.W=void 0,this.S=1^(1|this.S),1;if((2&i)>0&&this.q===t)return this.q=void 0,this.S=2^(2|this.S),1;if((4&i)>0&&this.H===t)return this.H=void 0,this.S=4^(4|this.S),1;if((8&i)>0){const i=this.G;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.S=8^(8|this.S)),1}return 0}function u(){return 0!==this.t}function l(){return 0!==this.v}function a(){return 0!==this.S}function d(t){const i=this.t;if((1&i)>0&&this.$===t)return 1;if((2&i)>0&&this.L===t)return 1;if((4&i)>0&&this.M===t)return 1;if((8&i)>0){const i=this.F;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function f(t){const i=this.v;if((1&i)>0&&this.D===t)return 1;if((2&i)>0&&this.N===t)return 1;if((4&i)>0&&this.U===t)return 1;if((8&i)>0){const i=this.K;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function v(t){const i=this.S;if((1&i)>0&&this.W===t)return 1;if((2&i)>0&&this.q===t)return 1;if((4&i)>0&&this.H===t)return 1;if((8&i)>0){const i=this.G;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function b(t,i,s){const e=this.$,n=this.L,r=this.M;let o=this.F;if(void 0!==o&&(o=o.slice()),void 0!==e&&w(e,t,i,s,void 0===e.id?0:this[e.id]),void 0!==n&&w(n,t,i,s,void 0===n.id?0:this[n.id]),void 0!==r&&w(r,t,i,s,void 0===r.id?0:this[r.id]),void 0!==o){const{length:e}=o;let n;for(let r=0;e>r;++r)void 0!==(n=o[r])&&w(n,t,i,s,void 0===n.id?0:this[n.id])}}function w(t,i,s,e,n){t.J(i,s,48^(48|e)|n)}function g(t,i,s,e){const n=this.D,r=this.N,o=this.U;let c=this.K;if(void 0!==c&&(c=c.slice()),void 0!==n&&n.X(t,i,s,e),void 0!==r&&r.X(t,i,s,e),void 0!==o&&o.X(t,i,s,e),void 0!==c){const{length:n}=c;let r;for(let o=0;n>o;++o)void 0!==(r=c[o])&&r.X(t,i,s,e)}}function p(t,i){const s=this.W,e=this.q,n=this.H;let r=this.G;if(void 0!==r&&(r=r.slice()),void 0!==s&&s.Y(t,i),void 0!==e&&e.Y(t,i),void 0!==n&&n.Y(t,i),void 0!==r){const{length:s}=r;let e;for(let n=0;s>n;++n)void 0!==(e=r[n])&&e.Y(t,i)}}function m(t){const i=BindingBehaviorResource.Z(this.description.name);t.register(kernel.Registration.singleton(i,this)),t.register(kernel.Registration.singleton(this,this))}function y(t){const i=this.kind.Z(this.description.name);t.register(kernel.Registration.singleton(i,this)),t.register(kernel.Registration.singleton(this,this))}function hasBind(t){return 2048==(2048&t.tt)}function hasUnbind(t){return 4096==(4096&t.tt)}function isLiteral(t){return 16384==(16384&t.tt)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let i=0;t.length>i;++i)if(!isPureLiteral(t[i]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.tt){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.it);case 17925:return 1}return 0}function C(t,i,s,e){const n=e.length,r=Array(n);for(let o=0;n>o;++o)r[o]=e[o].evaluate(t,i,s);return r}function O(t,i,name){const s=null==i?null:i[name];if("function"==typeof s)return s;if(!(2097152&t)&&null==s)return null;throw kernel.Reporter.error(207,i,name,s)}function A(strategy){return 0==(strategy&ct)?1|strategy:strategy}function j(t){if(t===At){const i=Ct.length=Ot.length=(At+=5)+1;for(let s=t+1;i>s;++s)Ct[s]=`_observer${s}`,Ot[s]=`_observerVersion${s}`}}function S(t){const i=null==this.st?0:this.st;let s=i;for(;s--&&this[Ct[s]]!==t;);if(-1===s){for(s=0;this[Ct[s]];)s++;this[Ct[s]]=t,t.subscribe(this),t[this.id]|=16,s===i&&(this.st=s+1)}null==this.version&&(this.version=0),this[Ot[s]]=this.version,j(s)}function k(t,i,s){kernel.Tracer.enabled&&kernel.Tracer.et(this.constructor.name,"observeProperty",yt.call(arguments));const e=this.nt.ht(t,i,s);this.rt(e),kernel.Tracer.enabled&&kernel.Tracer.ot()}function R(all){const t=this.st;let i,s;if(1==all)for(let e=0;t>e;++e)null!=(s=this[i=Ct[e]])&&(this[i]=void 0,s.unsubscribe(this),s[this.id]&=-17);else{const e=this.version;for(let n=0;t>n;++n)this[Ot[n]]!==e&&null!=(s=this[i=Ct[n]])&&(this[i]=void 0,s.unsubscribe(this),s[this.id]&=-17)}}function B(t){const i=t.prototype;return i.hasOwnProperty("observeProperty")||(i.ct=k),i.hasOwnProperty("unobserve")||(i.unobserve=R),i.hasOwnProperty("addObserver")||(i.rt=S),t}function connectable(t){return null==t?B:B(t)}function createIndexMap(t=0){const i=Array(t);let s=0;for(;t>s;)i[s]=s++;return i.ut=[],i.isIndexMap=1,i}function T(t,i){return t===i?0:(i=null===i?"null":""+i)>(t=null===t?"null":""+t)?-1:1}function I(t,i){return void 0===t?void 0===i?0:1:void 0===i?-1:0}function V(t,i,from,to,s){let e,n,r,o,c,u,l;for(u=from+1;to>u;u++){for(e=t[u],n=i[u],l=u-1;l>=from&&(o=i[l],(c=s(r=t[l],e))>0);l--)t[l+1]=r,i[l+1]=o;t[l+1]=e,i[l+1]=n}}function P(t,i,from,to,s){let e,n,r,o,c,u,l,a,d,f,v,b,w,g,p,m,y,C,O,A=0,j=0;for(;;){if(10>=to-from)return void V(t,i,from,to,s);o=i[from],c=i[to-1],r=t[A=from+(to-from>>1)],u=i[A],(l=s(e=t[from],n=t[to-1]))>0&&(f=e,v=o,e=n,o=c,n=f,c=v),0>(a=s(e,r))?(d=s(n,r))>0&&(f=n,v=c,n=r,c=u,r=f,u=v):(f=e,v=o,e=r,o=u,r=n,u=c,n=f,c=v),t[from]=e,i[from]=o,t[to-1]=r,i[to-1]=u,b=n,w=c,p=to-1,t[A]=t[g=from+1],i[A]=i[g],t[g]=b,i[g]=w;t:for(j=g+1;p>j;j++)if(y=i[j],0>(C=s(m=t[j],b)))t[j]=t[g],i[j]=i[g],t[g]=m,i[g]=y,g++;else if(C>0){do{if(--p==j)break t;C=s(O=t[p],b)}while(C>0);t[j]=t[p],i[j]=i[p],t[p]=m,i[p]=y,0>C&&(m=t[j],y=i[j],t[j]=t[g],i[j]=i[g],t[g]=m,i[g]=y,g++)}g-from>to-p?(P(t,i,p,to,s),to=g):(P(t,i,from,g,s),from=p)}}function enableArrayObservation(){for(const t of Kt)1!=Et[t].lt&&def(Et,t,{...Wt,value:Qt[t]})}function $(i,s,e){return void 0===e.at&&(e.at=new t.ArrayObserver(i,s,e)),e.at}function enableMapObservation(){for(const t of Zt)1!=Gt[t].lt&&si(Gt,t,{...ii,value:ti[t]})}function E(i,s,e){return void 0===e.at&&(e.at=new t.MapObserver(i,s,e)),e.at}function enableSetObservation(){for(const t of li)1!=ni[t].lt&&fi(ni,t,{...di,value:ai[t]})}function L(i,s,e){return void 0===e.at&&(e.at=new t.SetObserver(i,s,e)),e.at}function createComputedObserver(i,s,e,n,r,o,c){if(0==c.dt)return e.ft(r,o);if(c.get){const e=r.constructor.computed&&r.constructor.computed[o]||gi;return c.set?e.vt?new t.GetterObserver(i,e,r,o,c,s,n):new t.CustomSetterObserver(r,o,c):new t.GetterObserver(i,e,r,o,c,s,n)}throw kernel.Reporter.error(18,o)}function getCollectionObserver(i,s,e){const n=e instanceof Object?t.ProxyObserver.bt(e):e;switch(ji.call(e)){case"[object Array]":return $(i,s,n);case"[object Map]":return E(i,s,n);case"[object Set]":return L(i,s,n)}}function M(t,i,s){const e=this.wt;kernel.PLATFORM.global.clearTimeout(e.gt),e.gt=kernel.PLATFORM.global.setTimeout(()=>{this.pt(t,i,s)},e.yt)}function F(t,i,s){const e=this.wt;if(kernel.PLATFORM.global.clearTimeout(e.gt),!(s&e.Ct))return e.oldValue=Ti,void this.pt(t,i,s);e.oldValue===Ti&&(e.oldValue=i);const n=kernel.PLATFORM.global.setTimeout(()=>{const i=e.oldValue;e.oldValue=Ti,this.pt(t,i,s)},e.yt);e.gt=n}function D(t){const i=this.Ot,s=+new Date-i.At;if(s>=i.yt)return kernel.PLATFORM.global.clearTimeout(i.gt),i.gt=-1,i.At=+new Date,void this.jt(t);if(i.newValue=t,-1===i.gt){const t=kernel.PLATFORM.global.setTimeout(()=>{i.gt=-1,i.At=+new Date,this.jt(i.newValue)},i.yt-s);i.gt=t}}function x(name){return`${Vi}:${name}`}function N(t){return t.St}function U(name){return`${Pi}:${name}`}function buildTemplateDefinition(t,i,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,strategy){const def=new Li,s=arguments.length;switch(s){case 13:null!=strategy&&(def.strategy=A(strategy));case 12:null!=hasSlots&&(def.hasSlots=hasSlots);case 11:null!=shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!=containerless&&(def.containerless=containerless);case 9:null!=surrogates&&(def.surrogates=kernel.toArray(surrogates));case 8:null!=dependencies&&(def.dependencies=kernel.toArray(dependencies));case 7:null!=instructions&&(def.instructions=kernel.toArray(instructions));case 6:null!=bindables&&(def.bindables={...bindables});case 5:null!=build&&(def.build=1==build?$i:0==build?Ei:{...build});case 4:null!=cache&&(def.cache=cache);case 3:null!=template&&(def.template=template);case 2:null!=t&&(t.bindables&&(def.bindables=Bindable.for(t).get()),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions),t.prototype&&(def.kt=new HooksDefinition(t.prototype))),"string"==typeof i?i.length>0&&(def.name=i):null!=i&&(def.strategy=A(i.strategy),Mi.forEach(t=>{i[t]&&(def[t]=i[t])}),Fi.forEach(t=>{i[t]&&(def[t]=kernel.toArray(i[t]))}),i.bindables&&(def.bindables===kernel.PLATFORM.Rt?def.bindables=Bindable.for(i).get():Object.assign(def.bindables,i.bindables)))}return 2!==s||null===t||"string"!=typeof i&&"build"in i||(def.build=$i),def}function z(t){const i=this.description,s=this.kind.Z(i.name),aliases=i.aliases;t.register(kernel.Registration.transient(s,this)),t.register(kernel.Registration.transient(this,this));for(let i=0,e=aliases.length;e>i;++i){const e=this.kind.Z(aliases[i]);t.register(kernel.Registration.Bt(s,e))}}function K(t){return t.Tt=1,t}function Q(value){return!(void 0===value||1==value.done)}function W(t){const i=this.kind.Z(this.description.name);t.register(kernel.Registration.transient(i,this)),t.register(kernel.Registration.transient(this,this))}function q(t){return t.containerless=1,t}function createRenderContext(dom,t,dependencies,i){const s=t.It(),e=new kernel.InstanceProvider,n=new kernel.InstanceProvider,r=new kernel.InstanceProvider,o=new Hi,c=new kernel.InstanceProvider,u=s.get(IRenderer);return dom.Vt(s,n),s.Pt(IViewFactory,o),s.Pt(IController,e),s.Pt(ITargetedInstruction,r),s.Pt(IRenderLocation,c),null!=dependencies&&s.register(...dependencies),i&&i.register(s),s.$t=function(t,i,targets,s,host,parts){u.$t(t,dom,this,i,targets,s,host,parts)},s.Et=function(t,i,u,l,parts,a){return e.Lt(t),n.Lt(i),r.Lt(u),l&&o.Lt(l,parts),a&&c.Lt(a),s},s.Mt=function(){o.Mt(),e.Mt(),r.Mt(),n.Mt(),c.Mt()},s}function H(t){const i=[];for(let s=0,e=t.length;e>s;++s){const component=N(t[s]);null!=component&&i.push(component)}return i}function instructionRenderer(t){return function(i){const s=function(...s){const e=new i(...s);return e.Ft=t,e};s.register=function(t){return kernel.Registration.singleton(IInstructionRenderer,s).register(t,IInstructionRenderer)};const e=Object.getOwnPropertyDescriptors(i);return Object.keys(e).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,e[t])}),s}}function ensureExpression(t,i,s){return"string"==typeof i?t.parse(i,s):i}function addBinding(t,i){kernel.Tracer.enabled&&kernel.Tracer.et("Renderer","addBinding",is.call(arguments)),null==t.Dt?t.Dt=[i]:t.Dt.push(i),kernel.Tracer.enabled&&kernel.Tracer.ot()}function addComponent(t,component){kernel.Tracer.enabled&&kernel.Tracer.et("Renderer","addComponent",is.call(arguments)),null==t.xt?t.xt=[component]:t.xt.push(component),kernel.Tracer.enabled&&kernel.Tracer.ot()}function getTarget(t){return void 0!==t.Nt?t.Nt:t}var G,J,X,Y,BindingMode,BindingStrategy,State,Hooks,LifecycleFlags,ExpressionKind,ViewModelKind,Priority,BindingType,DelegationStrategy,CollectionKind,TargetedInstructionType,ViewCompileFlags;const Z=[].slice,tt=new WeakMap;let it=class{constructor(i,s,e){kernel.Tracer.enabled&&kernel.Tracer.et("ProxySubscriberCollection","constructor",Z.call(arguments)),this.Ut=0,this.raw=s,this.key=e,this.zt=i,this.subscribe=this.i,this.unsubscribe=this.s,s[e]instanceof Object&&(s[e]=t.ProxyObserver.Kt(s[e]).zt),kernel.Tracer.enabled&&kernel.Tracer.ot()}Qt(value,t){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.l(value,i,18|t))}Wt(){return this.raw[this.key]}qt(t){}};it=i([subscriberCollection()],it),t.ProxyObserver=G=class{constructor(t){kernel.Tracer.enabled&&kernel.Tracer.et("ProxyObserver","constructor",Z.call(arguments)),this.raw=t,this.zt=new Proxy(t,this),tt.set(t,this.zt),this.Ht={},kernel.Tracer.enabled&&kernel.Tracer.ot()}static Gt(t){if(void 0===t._t){const i=tt.get(t);return void 0===i?t:i}return t}static bt(t){const i=t._t;return void 0===i?t:i}static Kt(t,i){let s;if(void 0===t._t){const i=tt.get(t);s=void 0===i?new G(t):i.at}else s=t.at;if(void 0===i)return s;let e=s.Ht[i];if(void 0===e){const n=this.bt(t);e=s.Ht[i]=new it(s.zt,n,i)}return e}static Jt(t){return void 0!==t._t}get(t,i,s){return"$observer"===i?this:"$raw"===i?t:t[i]}set(t,i,value,s){const e=t[i];return e!==value&&(t[i]=value,this.Xt(value,e,i),this.O(i,value,e,18)),1}deleteProperty(t,i){const s=t[i];return Reflect.deleteProperty(t,i)?(void 0!==s&&(this.Xt(void 0,s,i),this.O(i,void 0,s,18)),1):0}defineProperty(t,i,s){const e=t[i];return Reflect.defineProperty(t,i,s)?(s.value!==e&&(this.Xt(s.value,e,i),this.O(i,s.value,e,18)),1):0}apply(t,i,s=kernel.PLATFORM.Yt){return Reflect.apply(t,t,s)}subscribe(t,i){if(void 0===i)this.g(t);else{let s=this.Ht[i];void 0===s&&(s=this.Ht[i]=new it(this.zt,this.raw,i)),s.i(t)}}unsubscribe(t,i){if(void 0===i)this.p(t);else{const s=this.Ht[i];void 0!==s&&s.s(t)}}Xt(t,i,s){const e=this.Ht[s];void 0!==e&&e.l(t,i,18)}},t.ProxyObserver=G=i([proxySubscriberCollection()],t.ProxyObserver),t.SetterObserver=class{constructor(t,i,s,e){this.Zt=t,this.ti=s,this.ii=e,this.si=void 0,this.oldValue=void 0,this.Ut=0,this.lt=0,this.ei=536870927&i,kernel.Tracer.enabled&&kernel.Tracer.ot()}Wt(){return this.si}Qt(t,i){if(this.lt){const s=this.si;this.si=t,0===this.Zt.ni.hi?0==(4096&i)&&this.l(t,s,this.ei|i):this.Ut||(this.Ut=1,this.oldValue=s,this.Zt.ni.add(this))}else this.ti[this.ii]=t}qt(t){this.Ut=0;const i=this.si,s=this.oldValue;this.oldValue=i,this.l(i,s,this.ei|t)}subscribe(t){0==this.lt&&(this.lt=1,this.si=this.ti[this.ii],Reflect.defineProperty(this.ti,this.ii,{ri:1,dt:1,get:()=>this.Wt(),set:value=>{this.Qt(value,0)}})||kernel.Reporter.write(1,this.ii,this.ti)),this.i(t)}},t.SetterObserver=i([subscriberCollection()],t.SetterObserver);const st=[].slice;(function(t){t[t.oi=250]="NilScope",t[t.ci=252]="NilOverrideContext",t[t.ui=253]="NilParentScope"})(J||(J={}));class et{Kt(i,s,e,n){return kernel.Tracer.enabled&&kernel.Tracer.et("InternalObserversLookup","getOrCreate",st.call(arguments)),void 0===this[n]&&(this[n]=new t.SetterObserver(i,s,e,n)),kernel.Tracer.enabled&&kernel.Tracer.ot(),this[n]}}class BindingContext{constructor(t,value){if(this.li=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}static create(i,s,value){const e=new BindingContext(s,value);return 2&i?t.ProxyObserver.Kt(e).zt:e}static get(t,name,i,s){if(kernel.Tracer.enabled&&kernel.Tracer.et("BindingContext","get",st.call(arguments)),null==t)throw kernel.Reporter.error(250);let e=t.ai;if(i>0){for(;i>0;){if(null==e.di)return void(kernel.Tracer.enabled&&kernel.Tracer.ot());i--,e=e.di}return kernel.Tracer.enabled&&kernel.Tracer.ot(),name in e?e:e.Nt}for(;e&&!(name in e)&&!(e.Nt&&name in e.Nt);)e=e.di;if(e)return kernel.Tracer.enabled&&kernel.Tracer.ot(),name in e?e:e.Nt;if((536870912&s)>0){const e=this.get(t.fi[BindingContext.vi],name,i,-536870913&s|16777216);if(null!==e)return kernel.Tracer.enabled&&kernel.Tracer.ot(),e}return 16777216&s?(kernel.Tracer.enabled&&kernel.Tracer.ot(),null):(kernel.Tracer.enabled&&kernel.Tracer.ot(),t.Nt||t.ai)}bi(t){return kernel.Tracer.enabled&&kernel.Tracer.et("BindingContext","getObservers",st.call(arguments)),null==this.wi&&(this.wi=new et),kernel.Tracer.enabled&&kernel.Tracer.ot(),this.wi}}BindingContext.vi=null;class Scope{constructor(t,i){this.Nt=t,this.ai=i,this.fi=void 0}static create(t,i,s){return kernel.Tracer.enabled&&kernel.Tracer.et("Scope","create",st.call(arguments)),kernel.Tracer.enabled&&kernel.Tracer.ot(),new Scope(i,null==s?OverrideContext.create(t,i,s):s)}static gi(t,i){if(kernel.Tracer.enabled&&kernel.Tracer.et("Scope","fromOverride",st.call(arguments)),null==i)throw kernel.Reporter.error(252);return kernel.Tracer.enabled&&kernel.Tracer.ot(),new Scope(i.Nt,i)}static pi(t,i,s){if(kernel.Tracer.enabled&&kernel.Tracer.et("Scope","fromParent",st.call(arguments)),null==i)throw kernel.Reporter.error(253);return kernel.Tracer.enabled&&kernel.Tracer.ot(),new Scope(s,OverrideContext.create(t,s,i.ai))}}class OverrideContext{constructor(t,i){this.li=1,this.Nt=t,this.di=i}static create(t,i,s){return kernel.Tracer.enabled&&kernel.Tracer.et("OverrideContext","create",st.call(arguments)),kernel.Tracer.enabled&&kernel.Tracer.ot(),new OverrideContext(i,void 0===s?null:s)}bi(){return kernel.Tracer.enabled&&kernel.Tracer.et("OverrideContext","getObservers",st.call(arguments)),void 0===this.wi&&(this.wi=new et),kernel.Tracer.enabled&&kernel.Tracer.ot(),this.wi}}const ISignaler=kernel.DI.yi("ISignaler").mi(t=>t.singleton(ht));class ht{constructor(){this.Ci=Object.create(null)}Oi(name,t){const i=this.Ci[name];if(void 0!==i)for(const s of i.keys())s.J(void 0,void 0,16|t)}Ai(name,t){const i=this.Ci,s=i[name];void 0===s?i[name]=new Set([t]):s.add(t)}ji(name,t){const i=this.Ci[name];i&&i.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",Z(name){return`${this.name}:${name}`},Si(t){return t.kind===this},ki(t,i){const s=i,e=s,n="string"==typeof t?{name:t}:t;return e.kind=BindingBehaviorResource,e.description=n,s.register=m,s}},ValueConverterResource={name:"value-converter",Z(name){return`${this.name}:${name}`},Si(t){return t.kind===this},ki(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=ValueConverterResource,s.description=e,s.register=y,s}};(function(t){t[t.Ri=202]="NoLocator",t[t.Bi=203]="NoBehaviorFound",t[t.Ti=204]="BehaviorAlreadyApplied",t[t.Ii=205]="NoConverterFound",t[t.Vi=206]="NoBinding",t[t.Pi=207]="NotAFunction",t[t.$i=208]="UnknownOperator",t[t.oi=250]="NilScope"})(X||(X={}));class AccessThis{constructor(t=0){this.tt=1793,this.assign=kernel.PLATFORM.Ei,this.connect=kernel.PLATFORM.Ei,this.Li=t}evaluate(t,i,s){if(null==i)throw kernel.Reporter.error(250,this);let e=i.ai,n=this.Li;for(;n--&&e;)e=e.di;return 1>n&&e?e.Nt:void 0}accept(t){return t.Mi(this)}}AccessThis.Fi=new AccessThis(0),AccessThis.Di=new AccessThis(1);class AccessScope{constructor(name,t=0){this.tt=10082,this.name=name,this.Li=t}evaluate(t,i,s){return BindingContext.get(i,this.name,this.Li,t)[this.name]}assign(t,i,s,value){const e=BindingContext.get(i,this.name,this.Li,t);if(e instanceof Object)return void 0!==e.wi&&void 0!==e.wi[this.name]?(e.wi[this.name].Qt(value,t),value):e[this.name]=value}connect(t,i,s){const e=BindingContext.get(i,this.name,this.Li,t);s.ct(t,e,this.name)}accept(t){return t.xi(this)}}class AccessMember{constructor(t,name){this.tt=9323,this.object=t,this.name=name}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);return null==e?e:e[this.name]}assign(t,i,s,value){const e=this.object.evaluate(t,i,s);return e instanceof Object?void 0!==e.wi&&void 0!==e.wi[this.name]?e.wi[this.name].Qt(value,t):e[this.name]=value:this.object.assign(t,i,s,{[this.name]:value}),value}connect(t,i,s){const e=this.object.evaluate(t,i,null);this.object.connect(t,i,s),e instanceof Object&&s.ct(t,e,this.name)}accept(t){return t.Ni(this)}}class CallScope{constructor(name,t,i=0){this.tt=1448,this.assign=kernel.PLATFORM.Ei,this.name=name,this.Ui=t,this.Li=i}evaluate(t,i,s){const e=C(t,i,s,this.Ui),n=BindingContext.get(i,this.name,this.Li,t),r=O(t,n,this.name);if(r)return r.apply(n,e)}connect(t,i,s){const e=this.Ui;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.zi(this)}}class CallMember{constructor(t,name,i){this.tt=1161,this.assign=kernel.PLATFORM.Ei,this.object=t,this.name=name,this.Ui=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s),n=C(t,i,s,this.Ui),r=O(t,e,this.name);if(r)return r.apply(e,n)}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),O(-2097153&t,e,this.name)){const e=this.Ui;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.Ki(this)}}class PrimitiveLiteral{constructor(value){this.tt=17925,this.assign=kernel.PLATFORM.Ei,this.connect=kernel.PLATFORM.Ei,this.value=value}evaluate(t,i,s){return this.value}accept(t){return t.Qi(this)}}PrimitiveLiteral.Wi=new PrimitiveLiteral(void 0),PrimitiveLiteral.qi=new PrimitiveLiteral(null),PrimitiveLiteral.Hi=new PrimitiveLiteral(1),PrimitiveLiteral.Gi=new PrimitiveLiteral(0),PrimitiveLiteral._i=new PrimitiveLiteral("");class ArrayLiteral{constructor(t){this.tt=17955,this.assign=kernel.PLATFORM.Ei,this.elements=t}evaluate(t,i,s){const e=this.elements,n=e.length,r=Array(n);for(let o=0;n>o;++o)r[o]=e[o].evaluate(t,i,s);return r}connect(t,i,s){const e=this.elements;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.Ji(this)}}ArrayLiteral._i=new ArrayLiteral(kernel.PLATFORM.Yt);class ObjectLiteral{constructor(t,i){this.tt=17956,this.assign=kernel.PLATFORM.Ei,this.keys=t,this.values=i}evaluate(t,i,s){const e={},n=this.keys,r=this.values;for(let o=0,c=n.length;c>o;++o)e[n[o]]=r[o].evaluate(t,i,s);return e}connect(t,i,s){const e=this.values;for(let n=0,r=this.keys.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.Xi(this)}}ObjectLiteral._i=new ObjectLiteral(kernel.PLATFORM.Yt,kernel.PLATFORM.Yt);class Template{constructor(t,i){this.tt=17958,this.assign=kernel.PLATFORM.Ei,this.Yi=t,this.it=void 0===i?kernel.PLATFORM.Yt:i}evaluate(t,i,s){const e=this.it,n=this.Yi;let r=n[0];for(let o=0,c=e.length;c>o;++o)r+=e[o].evaluate(t,i,s),r+=n[o+1];return r}connect(t,i,s){const e=this.it;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s),n++}accept(t){return t.Zi(this)}}Template._i=new Template([""]);const nt={}.toString,rt={ts(i,s,e){if(33554434==(33554434&i)){const i=t.ProxyObserver.bt(s),n=i.length;let r,o=0;for(;n>o;++o)(r=i[o])instanceof Object&&(r=i[o]=t.ProxyObserver.Kt(r).zt),e(i,o,r)}else for(let t=0,i=s.length;i>t;++t)e(s,t,s[t])},ss(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.entries())e[++n]=t;rt["ts"](-33554433&t,e,s)},es(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.keys())e[++n]=t;rt["ts"](-33554433&t,e,s)},hs(t,i,s){const e=Array(i);for(let t=0;i>t;++t)e[t]=t;rt["ts"](-33554433&t,e,s)},ns(t,i,s){},rs(t,i,s){}},ot={ts:t=>t.length,ss:t=>t.size,es:t=>t.size,hs:t=>t,ns:()=>0,rs:()=>0};(BindingMode=t.BindingMode||(t.BindingMode={}))[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.os=2]="toView",BindingMode[BindingMode.cs=4]="fromView",BindingMode[BindingMode.us=6]="twoWay",BindingMode[BindingMode.default=8]="default",(BindingStrategy=t.BindingStrategy||(t.BindingStrategy={}))[BindingStrategy.ls=1]="getterSetter",BindingStrategy[BindingStrategy.as=2]="proxies";const ct=3;(State=t.State||(t.State={}))[State.ds=0]="none",State[State.fs=1]="isBinding",State[State.vs=2]="isUnbinding",State[State.bs=4]="isBound",State[State.ws=5]="isBoundOrBinding",State[State.gs=6]="isBoundOrUnbinding",State[State.ps=8]="isAttaching",State[State.ms=16]="isDetaching",State[State.ys=32]="isAttached",State[State.Cs=40]="isAttachedOrAttaching",State[State.Os=48]="isAttachedOrDetaching",State[State.As=64]="isMounted",State[State.js=128]="isCached",State[State.Ss=256]="needsBind",State[State.ks=512]="needsUnbind",State[State.Rs=1024]="needsAttach",State[State.Bs=2048]="needsDetach",State[State.Ts=4096]="needsMount",State[State.Is=8192]="needsUnmount",State[State.Vs=16384]="hasLockedScope",State[State.Ps=32768]="canBeCached",State[State.$s=65536]="inBoundQueue",State[State.Es=131072]="inUnboundQueue",State[State.Ls=262144]="inAttachedQueue",State[State.Ms=524288]="inDetachedQueue",State[State.Fs=1048576]="inMountQueue",State[State.Ds=2097152]="inUnmountQueue",(Hooks=t.Hooks||(t.Hooks={}))[Hooks.ds=1]="none",Hooks[Hooks.xs=2]="hasCreated",Hooks[Hooks.Ns=4]="hasBinding",Hooks[Hooks.Us=8]="hasBound",Hooks[Hooks.zs=16]="hasAttaching",Hooks[Hooks.Ks=32]="hasAttached",Hooks[Hooks.Qs=64]="hasDetaching",Hooks[Hooks.Ws=128]="hasDetached",Hooks[Hooks.qs=256]="hasUnbinding",Hooks[Hooks.Hs=512]="hasUnbound",Hooks[Hooks.Gs=1024]="hasRender",Hooks[Hooks._s=2048]="hasCaching",(LifecycleFlags=t.LifecycleFlags||(t.LifecycleFlags={}))[LifecycleFlags.ds=0]="none",LifecycleFlags[LifecycleFlags.Js=536870927]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Xs=536870912]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.Ys=15]="bindingStrategy",LifecycleFlags[LifecycleFlags.Zs=1]="getterSetterStrategy",LifecycleFlags[LifecycleFlags.te=2]="proxyStrategy",LifecycleFlags[LifecycleFlags.update=48]="update",LifecycleFlags[LifecycleFlags.ie=16]="updateTargetInstance",LifecycleFlags[LifecycleFlags.se=32]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524224]="from",LifecycleFlags[LifecycleFlags.ee=960]="fromFlush",LifecycleFlags[LifecycleFlags.he=64]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.ne=128]="fromSyncFlush",LifecycleFlags[LifecycleFlags.re=256]="fromTick",LifecycleFlags[LifecycleFlags.oe=512]="fromBatch",LifecycleFlags[LifecycleFlags.ce=1024]="fromStartTask",LifecycleFlags[LifecycleFlags.ue=2048]="fromStopTask",LifecycleFlags[LifecycleFlags.le=4096]="fromBind",LifecycleFlags[LifecycleFlags.ae=8192]="fromUnbind",LifecycleFlags[LifecycleFlags.de=16384]="fromAttach",LifecycleFlags[LifecycleFlags.fe=32768]="fromDetach",LifecycleFlags[LifecycleFlags.ve=65536]="fromCache",LifecycleFlags[LifecycleFlags.be=131072]="fromDOMEvent",LifecycleFlags[LifecycleFlags.we=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.ge=524288]="allowPublishRoundtrip",LifecycleFlags[LifecycleFlags.pe=1048576]="isPublishing",LifecycleFlags[LifecycleFlags.me=2097152]="mustEvaluate",LifecycleFlags[LifecycleFlags.ye=4194304]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.Ce=8388608]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Oe=16777216]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Ae=33554432]="isOriginalArray",LifecycleFlags[LifecycleFlags.je=67108864]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Se=134217728]="updateOneTimeBindings",LifecycleFlags[LifecycleFlags.ke=268435456]="reorderNodes",(ExpressionKind=t.ExpressionKind||(t.ExpressionKind={}))[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Re=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Be=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation",(ViewModelKind=t.ViewModelKind||(t.ViewModelKind={}))[ViewModelKind.customElement=0]="customElement",ViewModelKind[ViewModelKind.customAttribute=1]="customAttribute",ViewModelKind[ViewModelKind.Te=2]="synthetic";const IController=kernel.DI.yi("IController").Ie(),IViewFactory=kernel.DI.yi("IViewFactory").Ie();class ut{get Ve(){let t=this;for(;void 0!==t.Pe&&t.Pe.$e===this.$e;)t=t.Pe;return t}get At(){let t=this;for(;void 0!==t.next&&t.next.$e===this.$e;)t=t.next;return t}constructor(t,i,s=16384,e=0){this.Ee=t,this.context=i,this.$e=s,this.Le=e,this.next=void 0,this.Pe=void 0,this.Me=0}Fe(t,i){return this.Ee===t&&this.context===i}call(t){if(void 0!==this.Ee&&(void 0!==this.context?this.Ee.call(this.context,t):this.Ee(t)),this.Le)return this.De(1);if(this.Me){const t=this.next;return this.next=void 0,t}return this.next}rotate(){if(void 0===this.Pe||this.Pe.$e>this.$e)return;const{Ve:t,At:i}=this,s=t.Pe,e=i.next,n=this.Pe;this.Pe=s,void 0!==s&&(s.next=this),i.next=t,t.Pe=i,n.next=e,void 0!==e&&(e.Pe=n)}link(t){this.Pe=t,void 0!==t.next&&(t.next.Pe=this),this.next=t.next,t.next=this}De(t=0){if(this.Me=1,this.Ee=void 0,this.context=void 0,void 0!==this.Pe&&(this.Pe.next=this.next),void 0!==this.next&&(this.next.Pe=this.Pe),this.Pe=void 0,t){const{next:t}=this;return this.next=void 0,t}return this.next}}(Priority=t.Priority||(t.Priority={}))[Priority.xe=32768]="preempt",Priority[Priority.high=28672]="high",Priority[Priority.bind=24576]="bind",Priority[Priority.Ne=20480]="attach",Priority[Priority.Ue=16384]="normal",Priority[Priority.ze=12288]="propagate",Priority[Priority.connect=8192]="connect",Priority[Priority.low=4096]="low";const ILifecycle=kernel.DI.yi("ILifecycle").mi(t=>t.singleton(mt)),{min:lt,max:at}=Math;class dt{constructor(t){this.Zt=t,this.hi=0,this.head=void 0,this.Ke=void 0}Qe(){++this.hi}end(t){void 0===t&&(t=0),0==--this.hi&&this.process(t)}We(t,i){this.Qe(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.qe=this.Ke,this.Ke.He=t),this.Ke=t,t.state|=65536}remove(t){void 0!==t.qe&&(t.qe.He=t.He),void 0!==t.He&&(t.He.qe=t.qe),t.qe=void 0,t.He=void 0,this.Ke===t&&(this.Ke=t.qe),this.head===t&&(this.head=t.He),t.state=65536^(65536|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Ke=void 0;do{s.state=65536^(65536|s.state),s.bound(t),i=s.He,s.He=void 0,s.qe=void 0,s=i}while(void 0!==s)}}}class ft{constructor(t){this.Zt=t,this.hi=0,this.head=void 0,this.Ke=void 0}Qe(){++this.hi}end(t){void 0===t&&(t=0),0==--this.hi&&this.process(t)}We(t,i){this.Qe(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Ge=this.Ke,this.Ke._e=t),this.Ke=t,t.state|=131072}remove(t){void 0!==t.Ge&&(t.Ge._e=t._e),void 0!==t._e&&(t._e.Ge=t.Ge),t.Ge=void 0,t._e=void 0,this.Ke===t&&(this.Ke=t.Ge),this.head===t&&(this.head=t._e),t.state=131072^(131072|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Ke=void 0;do{s.state=131072^(131072|s.state),s.Je(t),i=s._e,s._e=void 0,s.Ge=void 0,s=i}while(void 0!==s)}}}class vt{constructor(t){this.Zt=t,this.hi=0,this.head=void 0,this.Ke=void 0}Qe(){++this.hi}end(t){void 0===t&&(t=0),0==--this.hi&&(this.Zt.mount.process(t),this.process(t))}We(t,i){this.Qe(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Xe=this.Ke,this.Ke.Ye=t),this.Ke=t,t.state|=262144}remove(t){void 0!==t.Xe&&(t.Xe.Ye=t.Ye),void 0!==t.Ye&&(t.Ye.Xe=t.Xe),t.Xe=void 0,t.Ye=void 0,this.Ke===t&&(this.Ke=t.Xe),this.head===t&&(this.head=t.Ye),t.state=262144^(262144|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Ke=void 0;do{s.state=262144^(262144|s.state),s.Ze(t),i=s.Ye,s.Ye=void 0,s.Xe=void 0,s=i}while(void 0!==s)}}}class bt{constructor(t){this.Zt=t,this.hi=0,this.head=void 0,this.Ke=void 0}Qe(){++this.hi}end(t){void 0===t&&(t=0),0==--this.hi&&(this.Zt.unmount.process(t),this.process(t))}We(t,i){this.Qe(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.th=this.Ke,this.Ke.ih=t),this.Ke=t,t.state|=524288}remove(t){void 0!==t.th&&(t.th.ih=t.ih),void 0!==t.ih&&(t.ih.th=t.th),t.th=void 0,t.ih=void 0,this.Ke===t&&(this.Ke=t.th),this.head===t&&(this.head=t.ih),t.state=524288^(524288|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Ke=void 0;do{s.state=524288^(524288|s.state),s.sh(t),i=s.ih,s.ih=void 0,s.th=void 0,s=i}while(void 0!==s)}}}class wt{constructor(t){this.Zt=t,this.head=void 0,this.Ke=void 0}add(t){(2097152&t.state)>0?this.Zt.unmount.remove(t):(void 0===this.head?this.head=t:(t.eh=this.Ke,this.Ke.hh=t),this.Ke=t,t.state|=1048576)}remove(t){void 0!==t.eh&&(t.eh.hh=t.hh),void 0!==t.hh&&(t.hh.eh=t.eh),t.eh=void 0,t.hh=void 0,this.Ke===t&&(this.Ke=t.eh),this.head===t&&(this.head=t.hh),t.state=1048576^(1048576|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Ke=void 0;do{s.state=1048576^(1048576|s.state),s.mount(t),i=s.hh,s.hh=void 0,s.eh=void 0,s=i}while(void 0!==s)}}}class gt{constructor(t){this.Zt=t,this.head=void 0,this.Ke=void 0}add(t){(1048576&t.state)>0?this.Zt.mount.remove(t):(void 0===this.head?this.head=t:(t.nh=this.Ke,this.Ke.rh=t),this.Ke=t,t.state|=2097152)}remove(t){void 0!==t.nh&&(t.nh.rh=t.rh),void 0!==t.rh&&(t.rh.nh=t.nh),t.nh=void 0,t.rh=void 0,this.Ke===t&&(this.Ke=t.nh),this.head===t&&(this.head=t.rh),t.state=2097152^(2097152|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Ke=void 0;do{s.state=2097152^(2097152|s.state),s.unmount(t),i=s.rh,s.rh=void 0,s.nh=void 0,s=i}while(void 0!==s)}}}class pt{constructor(t){this.Zt=t,this.oh=[],this.hi=0}Qe(){++this.hi}end(t){void 0===t&&(t=0),0==--this.hi&&this.process(t)}We(t,i){this.Qe(),t(),this.end(i)}add(t){this.oh.push(t)}remove(t){const i=this.oh.indexOf(t);i>-1&&this.oh.splice(i,1)}process(t){for(t|=512;this.oh.length>0;){const i=this.oh.slice();this.oh=[];const{length:s}=i;for(let e=0;s>e;++e)i[e].qt(t)}}}class mt{get uh(){return 1e3/this.lh}get ah(){return 1e3/this.dh}set ah(t){this.dh=1e3/lt(at(0,lt(this.fh,t)),60)}get fh(){return this.vh>0?1e3/this.vh:60}set fh(t){this.vh=60>t?1e3/lt(at(1,at(this.ah,t)),60):0}constructor(){this.bh=new ut(void 0,void 0,1/0),this.wh=void 0,this.gh=0,this.ph=0,this.mh=-1,this.yh=-1,this.Ch=0,this.ni=new pt(this),this.mount=new wt(this),this.unmount=new gt(this),this.bound=new dt(this),this.Je=new ft(this),this.Ze=new vt(this),this.sh=new bt(this),this.vh=0,this.dh=1e3/30,this.lh=0,this.Oh=new Promise(t=>{this.Ah=t}),this.jh=(t=>{this.mh=-1,this.Ch&&(this.Sh(960,t),this.Ch&&-1===this.mh&&void 0!==this.bh.next&&(this.mh=kernel.PLATFORM.requestAnimationFrame(this.jh)),++this.gh>1&&(this.Ah(t),this.Oh=new Promise(t=>{this.Ah=t})))}),this.kh=0,this.Rh=0,this.Bh=0,this.Th=1}static register(t){return kernel.Registration.singleton(ILifecycle,this).register(t)}Ih(){this.Ch?-1===this.mh&&void 0!==this.bh.next&&(this.yh=kernel.PLATFORM.now(),this.mh=kernel.PLATFORM.requestAnimationFrame(this.jh)):(this.Ch=1,-1===this.mh&&void 0!==this.bh.next&&(this.yh=kernel.PLATFORM.now(),this.mh=kernel.PLATFORM.requestAnimationFrame(this.jh)))}Vh(){this.Ch?(this.Ch=0,-1!==this.mh&&(kernel.PLATFORM.cancelAnimationFrame(this.mh),this.mh=-1)):-1!==this.mh&&(kernel.PLATFORM.cancelAnimationFrame(this.mh),this.mh=-1)}Ph(t,i,s=16384,e=0){const n=new ut(t,i,s,e);let r=this.bh,o=r.next;if(void 0===o)n.link(r);else{do{if(s>o.$e||s===o.$e&&e&&!o.Le){n.link(r);break}r=o,o=o.next}while(void 0!==o);void 0===n.Pe&&n.link(r)}void 0===n.next&&(this.wh=n),this.Ih()}$h(t,i){let s=this.bh.next;for(;void 0!==s;)s=s.Fe(t,i)?s.De():s.next}Sh(t,i=kernel.PLATFORM.now()){if(!this.ph){if(this.ph=1,i>this.yh){const s=this.lh=i-this.yh;if(this.vh>s+1)return;let e=0;this.Th=this.Bh&&this.dh>0?lt(at(this.Th*(this.dh/s),.1),10):1;const n=i+at(this.dh*this.Th,1),r=i+at(this.dh*this.Th*5,5),o=i+at(this.dh*this.Th*15,15);t|=256;do{this.kh=0;let i=this.bh.next;for(;void 0!==i;){if(10==++e&&(e=0,this.Rh)){const{$e:t}=i,s=kernel.PLATFORM.now();if(t>4096){if(28672>t){if(s>=r){if(i.rotate(),null==i.At||null==i.At.next)break;i=i.At.next}}else if(s>=o){if(i.rotate(),null==i.At||null==i.At.next)break;i=i.At.next}}else if(s>=n){if(i.rotate(),null==i.At||null==i.At.next)break;i=i.At.next}}i=i.call(t)}}while(this.kh>0);void 0===this.bh.next&&this.Vh()}this.yh=i,this.ph=0}}Eh(t=1){this.Rh=1,this.Bh=1==t}Lh(){this.Rh=0}}const yt=[].slice,Ct=[],Ot=[];let At=-1;j(-1);let value=0;connectable.Mh=(t=>{t.id=++value});const jt=[].slice,{oneTime,os:St,cs:kt}=t.BindingMode,Rt=St|oneTime;t.Binding=class{constructor(t,i,s,mode,e,n){connectable.Mh(this),this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$scope=void 0,this.Fh=n,this.mode=mode,this.nt=e,this.Dh=t,this.target=i,this.xh=s,this.Nh=void 0,this.ei=0}Uh(value,t){this.Nh.Qt(value,t|=this.ei)}zh(value,t){this.Dh.assign(t|=this.ei,this.$scope,this.Fh,value)}J(t,i,s){if(kernel.Tracer.enabled&&kernel.Tracer.et("Binding","handleChange",jt.call(arguments)),0!=(4&this.$state)){if((16&(s|=this.ei))>0){const i=this.Nh.Wt();return(10082!==this.Dh.tt||this.st>1)&&(t=this.Dh.evaluate(s,this.$scope,this.Fh)),t!==i&&this.Uh(t,s),0==(this.mode&oneTime)&&(this.version++,this.Dh.connect(s,this.$scope,this),this.unobserve(0)),void(kernel.Tracer.enabled&&kernel.Tracer.ot())}if((32&s)>0)return t!==this.Dh.evaluate(s,this.$scope,this.Fh)&&this.zh(t,s),void(kernel.Tracer.enabled&&kernel.Tracer.ot());throw kernel.Tracer.enabled&&kernel.Tracer.ot(),kernel.Reporter.error(15,s)}kernel.Tracer.enabled&&kernel.Tracer.ot()}Kh(i,s){if(kernel.Tracer.enabled&&kernel.Tracer.et("Binding","$bind",jt.call(arguments)),4&this.$state){if(this.$scope===s)return void(kernel.Tracer.enabled&&kernel.Tracer.ot());this.Qh(4096|i)}this.$state|=1,this.ei=536870927&i,this.$scope=s;let e=this.Dh;hasBind(e)&&e.bind(i,s,this);let n=this.Nh;n||(n=this.Nh=this.mode&kt?this.nt.ht(i,this.target,this.xh):this.nt.Wh(i,this.target,this.xh)),this.mode!==t.BindingMode.oneTime&&n.bind&&n.bind(i),e=this.Dh,this.mode&Rt&&this.Uh(e.evaluate(i,s,this.Fh),i),this.mode&St&&e.connect(i,s,this),this.mode&kt&&(n.subscribe(this),n[this.id]|=32),this.$state|=4,this.$state&=-2,kernel.Tracer.enabled&&kernel.Tracer.ot()}Qh(t){kernel.Tracer.enabled&&kernel.Tracer.et("Binding","$unbind",jt.call(arguments)),4&this.$state?(this.$state|=2,this.ei=0,hasUnbind(this.Dh)&&this.Dh.qh(t,this.$scope,this),this.$scope=void 0,this.Nh.qh&&this.Nh.qh(t),this.Nh.unsubscribe&&(this.Nh.unsubscribe(this),this.Nh[this.id]&=-33),this.unobserve(1),this.$state&=-7,kernel.Tracer.enabled&&kernel.Tracer.ot()):kernel.Tracer.enabled&&kernel.Tracer.ot()}},t.Binding=i([connectable()],t.Binding);const Bt=[].slice;class Call{constructor(t,i,s,e,n){this.$state=0,this.Fh=n,this.Dh=t,this.Nh=e.ht(0,i,s)}Hh(t){kernel.Tracer.enabled&&kernel.Tracer.et("Call","callSource",Bt.call(arguments));const i=this.$scope.ai;Object.assign(i,t);const s=this.Dh.evaluate(2097152,this.$scope,this.Fh);for(const s in t)Reflect.deleteProperty(i,s);return kernel.Tracer.enabled&&kernel.Tracer.ot(),s}Kh(t,i){if(kernel.Tracer.enabled&&kernel.Tracer.et("Call","$bind",Bt.call(arguments)),4&this.$state){if(this.$scope===i)return void(kernel.Tracer.enabled&&kernel.Tracer.ot());this.Qh(4096|t)}this.$state|=1,this.$scope=i,hasBind(this.Dh)&&this.Dh.bind(t,i,this),this.Nh.Qt(t=>this.Hh(t),t),this.$state|=4,this.$state&=-2,kernel.Tracer.enabled&&kernel.Tracer.ot()}Qh(t){kernel.Tracer.enabled&&kernel.Tracer.et("Call","$unbind",Bt.call(arguments)),4&this.$state?(this.$state|=2,hasUnbind(this.Dh)&&this.Dh.qh(t,this.$scope,this),this.$scope=void 0,this.Nh.Qt(null,t),this.$state&=-7,kernel.Tracer.enabled&&kernel.Tracer.ot()):kernel.Tracer.enabled&&kernel.Tracer.ot()}ct(t,i,s){}J(t,i,s){}}const IExpressionParser=kernel.DI.yi("IExpressionParser").mi(t=>t.singleton(Tt));class Tt{constructor(){this.Gh=Object.create(null),this._h=Object.create(null),this.Jh=Object.create(null)}parse(t,i){switch(i){case 2048:{let s=this.Jh[t];return void 0===s&&(s=this.Jh[t]=this.Xh(t,i)),s}case 539:{let s=this._h[t];return void 0===s&&(s=this._h[t]=this.Xh(t,i)),s}default:{if(0===t.length&&55&i)return PrimitiveLiteral._i;let s=this.Gh[t];return void 0===s&&(s=this.Gh[t]=this.Xh(t,i)),s}}}cache(t){const{_h:i,Gh:s,Jh:e}=this;for(const n in t){const r=t[n];switch(r.tt){case 24:e[n]=r;break;case 6199:i[n]=r;break;default:s[n]=r}}}Xh(t,i){try{const parts=t.split("."),i=parts[0];let s;s=i.endsWith("()")?new CallScope(i.replace("()",""),kernel.PLATFORM.Yt):new AccessScope(parts[0]);let e=1;for(;parts.length>e;){const t=parts[e];s=t.endsWith("()")?new CallMember(s,t.replace("()",""),kernel.PLATFORM.Yt):new AccessMember(s,parts[e]),e++}return s}catch(t){throw kernel.Reporter.error(3,t)}}}(BindingType=t.BindingType||(t.BindingType={}))[BindingType.Yh=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Zh=1280]="IsRef",BindingType[BindingType.tn=512]="IsIterator",BindingType[BindingType.in=256]="IsCustom",BindingType[BindingType.sn=128]="IsFunction",BindingType[BindingType.en=64]="IsEvent",BindingType[BindingType.hn=32]="IsProperty",BindingType[BindingType.nn=16]="IsCommand",BindingType[BindingType.rn=48]="IsPropertyCommand",BindingType[BindingType.on=80]="IsEventCommand",BindingType[BindingType.cn=6]="DelegationStrategyDelta",BindingType[BindingType.un=15]="Command",BindingType[BindingType.ln=49]="OneTimeCommand",BindingType[BindingType.an=50]="ToViewCommand",BindingType[BindingType.dn=51]="FromViewCommand",BindingType[BindingType.fn=52]="TwoWayCommand",BindingType[BindingType.vn=53]="BindCommand",BindingType[BindingType.bn=86]="TriggerCommand",BindingType[BindingType.wn=87]="CaptureCommand",BindingType[BindingType.gn=88]="DelegateCommand",BindingType[BindingType.pn=153]="CallCommand",BindingType[BindingType.mn=26]="OptionsCommand",BindingType[BindingType.yn=539]="ForCommand",BindingType[BindingType.Cn=284]="CustomCommand";const{os:It,oneTime:Vt}=t.BindingMode;class MultiInterpolationBinding{constructor(i,s,e,n,mode,r){this.$state=0,this.$scope=void 0,this.On=s,this.Fh=r,this.mode=mode,this.nt=i,this.target=e,this.xh=n;const o=s.it,parts=this.parts=Array(o.length);for(let c=0,u=o.length;u>c;++c)parts[c]=new t.InterpolationBinding(o[c],s,e,n,mode,i,r,0===c)}Kh(t,i){if(4&this.$state){if(this.$scope===i)return;this.Qh(t)}this.$state|=4,this.$scope=i;const parts=this.parts;for(let s=0,e=parts.length;e>s;++s)parts[s].Kh(t,i)}Qh(t){if(!(4&this.$state))return;this.$state&=-5,this.$scope=void 0;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].Qh(t)}}t.InterpolationBinding=class{constructor(t,i,s,e,mode,n,r,o){connectable.Mh(this),this.$state=0,this.On=i,this.An=o,this.mode=mode,this.Fh=r,this.nt=n,this.Dh=t,this.target=s,this.xh=e,this.Nh=n.Wh(0,s,e)}Uh(value,t){this.Nh.Qt(value,16|t)}J(t,i,s){if(!(4&this.$state))return;const e=this.Nh.Wt(),n=this.On.evaluate(s,this.$scope,this.Fh);n!==e&&this.Uh(n,s),0==(this.mode&Vt)&&(this.version++,this.Dh.connect(s,this.$scope,this),this.unobserve(0))}Kh(i,s){if(4&this.$state){if(this.$scope===s)return;this.Qh(i)}this.$state|=4,this.$scope=s;const e=this.Dh;e.bind&&e.bind(i,s,this),this.mode!==t.BindingMode.oneTime&&this.Nh.bind&&this.Nh.bind(i),this.An&&this.Uh(this.On.evaluate(i,s,this.Fh),i),this.mode&It&&e.connect(i,s,this)}Qh(t){if(!(4&this.$state))return;this.$state&=-5;const i=this.Dh;i.qh&&i.qh(t,this.$scope,this),this.Nh.qh&&this.Nh.qh(t),this.$scope=void 0,this.unobserve(1)}},t.InterpolationBinding=i([connectable()],t.InterpolationBinding);const Pt=[].slice;t.LetBinding=class{constructor(t,i,s,e,toViewModel=0){connectable.Mh(this),this.$state=0,this.$lifecycle=e.get(ILifecycle),this.$scope=void 0,this.Fh=e,this.nt=s,this.Dh=t,this.target=null,this.xh=i,this.toViewModel=toViewModel}J(t,i,s){if(kernel.Tracer.enabled&&kernel.Tracer.et("LetBinding","handleChange",Pt.call(arguments)),4&this.$state){if(16&s){const{target:t,xh:i}=this,e=t[i],n=this.Dh.evaluate(s,this.$scope,this.Fh);return n!==e&&(t[i]=n),void(kernel.Tracer.enabled&&kernel.Tracer.ot())}throw kernel.Reporter.error(15,s)}kernel.Tracer.enabled&&kernel.Tracer.ot()}Kh(t,i){if(kernel.Tracer.enabled&&kernel.Tracer.et("LetBinding","$bind",Pt.call(arguments)),4&this.$state){if(this.$scope===i)return void(kernel.Tracer.enabled&&kernel.Tracer.ot());this.Qh(4096|t)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.Nt:i.ai;const s=this.Dh;s.bind&&s.bind(t,i,this),this.target[this.xh]=this.Dh.evaluate(4096,i,this.Fh),this.Dh.connect(t,i,this),this.$state|=4,this.$state&=-2,kernel.Tracer.enabled&&kernel.Tracer.ot()}Qh(t){if(kernel.Tracer.enabled&&kernel.Tracer.et("LetBinding","$unbind",Pt.call(arguments)),!(4&this.$state))return void(kernel.Tracer.enabled&&kernel.Tracer.ot());this.$state|=2;const i=this.Dh;i.qh&&i.qh(t,this.$scope,this),this.$scope=void 0,this.unobserve(1),this.$state&=-7,kernel.Tracer.enabled&&kernel.Tracer.ot()}},t.LetBinding=i([connectable()],t.LetBinding);const $t=[].slice;class Ref{constructor(t,i,s){this.$state=0,this.$scope=void 0,this.Fh=s,this.Dh=t,this.target=i}Kh(t,i){if(kernel.Tracer.enabled&&kernel.Tracer.et("Ref","$bind",$t.call(arguments)),4&this.$state){if(this.$scope===i)return void(kernel.Tracer.enabled&&kernel.Tracer.ot());this.Qh(4096|t)}this.$state|=1,this.$scope=i,hasBind(this.Dh)&&this.Dh.bind(t,i,this),this.Dh.assign(t,this.$scope,this.Fh,this.target),this.$state|=4,this.$state&=-2,kernel.Tracer.enabled&&kernel.Tracer.ot()}Qh(t){if(kernel.Tracer.enabled&&kernel.Tracer.et("Ref","$unbind",$t.call(arguments)),!(4&this.$state))return void(kernel.Tracer.enabled&&kernel.Tracer.ot());this.$state|=2,this.Dh.evaluate(t,this.$scope,this.Fh)===this.target&&this.Dh.assign(t,this.$scope,this.Fh,null);const i=this.Dh;hasUnbind(i)&&i.qh(t,this.$scope,this),this.$scope=void 0,this.$state&=-7,kernel.Tracer.enabled&&kernel.Tracer.ot()}ct(t,i,s){}J(t,i,s){}}(function(t){t[t.Yh=0]="None",t[t.jn=1]="Subscriber0",t[t.Sn=2]="Subscriber1",t[t.kn=4]="Subscriber2",t[t.Rn=8]="SubscribersRest",t[t.Bn=15]="Any"})(Y||(Y={})),(DelegationStrategy=t.DelegationStrategy||(t.DelegationStrategy={}))[DelegationStrategy.ds=0]="none",DelegationStrategy[DelegationStrategy.Tn=1]="capturing",DelegationStrategy[DelegationStrategy.In=2]="bubbling",(CollectionKind=t.CollectionKind||(t.CollectionKind={}))[CollectionKind.Vn=8]="indexed",CollectionKind[CollectionKind.Pn=4]="keyed",CollectionKind[CollectionKind.$n=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set",t.CollectionLengthObserver=class{constructor(t){this.ti=t,this.si=t.length}Wt(){return this.ti.length}Qt(t,i){const{si:s}=this;t!==s&&(this.si=t,this.l(t,s,16|i))}},t.CollectionLengthObserver=i([subscriberCollection()],t.CollectionLengthObserver);const Et=Array.prototype,Lt=Et.push,Mt=Et.unshift,Ft=Et.pop,Dt=Et.shift,xt=Et.splice,Nt=Et.reverse,Ut=Et.sort,zt={push:Lt,unshift:Mt,pop:Ft,shift:Dt,splice:xt,reverse:Nt,sort:Ut},Kt=["push","unshift","pop","shift","splice","reverse","sort"],Qt={push(){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return Lt.apply(t,arguments);const s=t.length,e=arguments.length;if(0===e)return s;t.length=i.En.length=s+e;let n=s;for(;t.length>n;)t[n]=arguments[n-s],i.En[n]=-2,n++;return i.Ln(),t.length},unshift(){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return Mt.apply(t,arguments);const s=arguments.length,e=[];let n=0;for(;s>n;)e[n++]=-2;Mt.apply(i.En,e);const r=Mt.apply(t,arguments);return i.Ln(),r},pop(){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return Ft.call(t);const s=i.En,e=Ft.call(t),n=s.length-1;return s[n]>-1&&s.ut.push(s[n]),Ft.call(s),i.Ln(),e},shift(){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return Dt.call(t);const s=i.En,e=Dt.call(t);return s[0]>-1&&s.ut.push(s[0]),Dt.call(s),i.Ln(),e},splice(t,i){let s=this;void 0!==s._t&&(s=s._t);const e=s.at;if(void 0===e)return xt.apply(s,arguments);const n=e.En;if(i>0){let s=isNaN(t)?0:t;const to=s+i;for(;to>s;)n[s]>-1&&n.ut.push(n[s]),s++}const r=arguments.length;if(r>2){const s=r-2,e=[];let o=0;for(;s>o;)e[o++]=-2;xt.call(n,t,i,...e)}else 2===r&&xt.call(n,t,i);const o=xt.apply(s,arguments);return e.Ln(),o},reverse(){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return Nt.call(t),this;const s=t.length,e=s/2|0;let n=0;for(;n!==e;){const e=s-n-1,r=t[n],o=i.En[n],c=i.En[e];t[n]=t[e],i.En[n]=c,t[e]=r,i.En[e]=o,n++}return i.Ln(),this},sort(t){let i=this;void 0!==i._t&&(i=i._t);const s=i.at;if(void 0===s)return Ut.call(i,t),this;const e=i.length;if(2>e)return this;P(i,s.En,0,e,I);let n=0;for(;e>n&&void 0!==i[n];)n++;return void 0!==t&&"function"==typeof t||(t=T),P(i,s.En,0,n,t),s.Ln(),this}},Wt={Mn:1,ri:0,dt:1},def=Reflect.defineProperty;for(const t of Kt)def(Qt[t],"observing",{value:1,Mn:0,dt:0,ri:0});let qt=0;const Ht=[].slice;t.ArrayObserver=class{constructor(t,i,s){kernel.Tracer.enabled&&kernel.Tracer.et("ArrayObserver","constructor",Ht.call(arguments)),qt||(qt=1,enableArrayObservation()),this.Ut=0,this.Fn=s,this.ei=536870927&t,this.En=createIndexMap(s.length),this.Zt=i,this.Dn=void 0,Reflect.defineProperty(s,"$observer",{value:this,ri:0,Mn:1,dt:1}),kernel.Tracer.enabled&&kernel.Tracer.ot()}Ln(){this.Zt.ni.hi>0?this.Ut||(this.Ut=1,this.Zt.ni.add(this)):this.qt(0)}xn(){return void 0===this.Dn&&(this.Dn=new t.CollectionLengthObserver(this.Fn)),this.Dn}qt(t){this.Ut=0;const{En:i,Fn:s}=this,{length:e}=s;this.En=createIndexMap(e),this.I(i,16|this.ei),void 0!==this.Dn&&this.Dn.Qt(e,16)}},t.ArrayObserver=i([collectionSubscriberCollection()],t.ArrayObserver),t.CollectionSizeObserver=class{constructor(t){this.ti=t,this.si=t.size}Wt(){return this.ti.size}Qt(t,i){const{si:s}=this;t!==s&&(this.si=t,this.l(t,s,16|i))}},t.CollectionSizeObserver=i([subscriberCollection()],t.CollectionSizeObserver);const Gt=Map.prototype,_t=Gt.set,Jt=Gt.clear,Xt=Gt.delete,Yt={set:_t,clear:Jt,delete:Xt},Zt=["set","clear","delete"],ti={set(t,value){let i=this;void 0!==i._t&&(i=i._t);const s=i.at;if(void 0===s)return _t.call(i,t,value),this;const e=i.size;if(_t.call(i,t,value),i.size===e){let e=0;for(const n of i.entries()){if(n[0]===t)return n[1]!==value&&(s.En[e]=-2),this;e++}return this}return s.En[e]=-2,s.Ln(),this},clear(){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return Jt.call(t);if(t.size>0){const s=i.En;let e=0;for(const i of t.keys())s[e]>-1&&s.ut.push(s[e]),e++;Jt.call(t),s.length=0,i.Ln()}},delete(value){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return Xt.call(t,value);if(0===t.size)return 0;let s=0;const e=i.En;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.ut.push(e[s]),e.splice(s,1),Xt.call(t,value);s++}return i.Ln(),0}},ii={Mn:1,ri:0,dt:1},si=Reflect.defineProperty;for(const t of Zt)si(ti[t],"observing",{value:1,Mn:0,dt:0,ri:0});let ei=0;const hi=[].slice;t.MapObserver=class{constructor(t,i,s){kernel.Tracer.enabled&&kernel.Tracer.et("MapObserver","constructor",hi.call(arguments)),ei||(ei=1,enableMapObservation()),this.Ut=0,this.Fn=s,this.ei=536870927&t,this.En=createIndexMap(s.size),this.Zt=i,this.Dn=void 0,s.at=this,kernel.Tracer.enabled&&kernel.Tracer.ot()}Ln(){this.Zt.ni.hi>0?this.Ut||(this.Ut=1,this.Zt.ni.add(this)):this.qt(0)}xn(){return void 0===this.Dn&&(this.Dn=new t.CollectionSizeObserver(this.Fn)),this.Dn}qt(t){this.Ut=0;const{En:i,Fn:s}=this,{size:e}=s;this.En=createIndexMap(e),this.I(i,16|this.ei),void 0!==this.Dn&&this.Dn.Qt(e,16)}},t.MapObserver=i([collectionSubscriberCollection()],t.MapObserver);const ni=Set.prototype,ri=ni.add,oi=ni.clear,ci=ni.delete,ui={add:ri,clear:oi,delete:ci},li=["add","clear","delete"],ai={add(value){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return ri.call(t,value),this;const s=t.size;return ri.call(t,value),t.size===s?this:(i.En[s]=-2,i.Ln(),this)},clear(){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return oi.call(t);if(t.size>0){const s=i.En;let e=0;for(const i of t.keys())s[e]>-1&&s.ut.push(s[e]),e++;oi.call(t),s.length=0,i.Ln()}},delete(value){let t=this;void 0!==t._t&&(t=t._t);const i=t.at;if(void 0===i)return ci.call(t,value);if(0===t.size)return 0;let s=0;const e=i.En;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.ut.push(e[s]),e.splice(s,1),ci.call(t,value);s++}return i.Ln(),0}},di={Mn:1,ri:0,dt:1},fi=Reflect.defineProperty;for(const t of li)fi(ai[t],"observing",{value:1,Mn:0,dt:0,ri:0});let vi=0;const bi=[].slice;t.SetObserver=class{constructor(t,i,s){kernel.Tracer.enabled&&kernel.Tracer.et("SetObserver","constructor",bi.call(arguments)),vi||(vi=1,enableSetObservation()),this.Ut=0,this.Fn=s,this.ei=536870927&t,this.En=createIndexMap(s.size),this.Zt=i,this.Dn=void 0,s.at=this,kernel.Tracer.enabled&&kernel.Tracer.ot()}Ln(){this.Zt.ni.hi>0?this.Ut||(this.Ut=1,this.Zt.ni.add(this)):this.qt(0)}xn(){return void 0===this.Dn&&(this.Dn=new t.CollectionSizeObserver(this.Fn)),this.Dn}qt(t){this.Ut=0;const{En:i,Fn:s}=this,{size:e}=s;this.En=createIndexMap(e),this.I(i,16|this.ei),void 0!==this.Dn&&this.Dn.Qt(e,16)}},t.SetObserver=i([collectionSubscriberCollection()],t.SetObserver);const wi=[].slice,gi={Nn:0,vt:0};t.CustomSetterObserver=class{constructor(t,i,s){this.ti=t,this.ii=i,this.si=this.oldValue=void 0,this.Un=s,this.lt=0}Qt(t){kernel.Tracer.enabled&&kernel.Tracer.et("CustomSetterObserver","setValue",wi.call(arguments)),this.Un.set.call(this.ti,t),this.si!==t&&(this.oldValue=this.si,this.si=t,this.l(t,this.oldValue,16)),kernel.Tracer.enabled&&kernel.Tracer.ot()}subscribe(t){this.lt||this.zn(),this.i(t)}unsubscribe(t){this.s(t)}zn(){kernel.Tracer.enabled&&kernel.Tracer.et("CustomSetterObserver","convertProperty",wi.call(arguments)),this.lt=1,this.si=this.ti[this.ii],Reflect.defineProperty(this.ti,this.ii,{set:t=>{this.Qt(t)}}),kernel.Tracer.enabled&&kernel.Tracer.ot()}},t.CustomSetterObserver=i([subscriberCollection()],t.CustomSetterObserver),t.GetterObserver=class{constructor(t,i,s,e,n,r,o){this.ti=s,this.ii=e,this.Kn=0,this.si=this.oldValue=void 0,this.Qn=[],this.Wn=[],this.qn=i,this.Hn=0,this.Un=n,this.zt=new Proxy(s,(function t(i,s,e){kernel.Tracer.enabled&&kernel.Tracer.et("computed","createGetterTraps",wi.call(arguments));const n={get(n,r,o){if(kernel.Tracer.enabled&&kernel.Tracer.et("computed","get",wi.call(arguments)),e.Gn(r))return kernel.Tracer.enabled&&kernel.Tracer.ot(),Reflect.get(n,r,o);switch(pi.call(n)){case"[object Array]":if(e._n(s.Jn(i,n)),"length"===r)return kernel.Tracer.enabled&&kernel.Tracer.ot(),Reflect.get(n,r,n);case"[object Map]":if(e._n(s.Xn(i,n)),"size"===r)return kernel.Tracer.enabled&&kernel.Tracer.ot(),Reflect.get(n,r,n);case"[object Set]":if(e._n(s.Yn(i,n)),"size"===r)return kernel.Tracer.enabled&&kernel.Tracer.ot(),Reflect.get(n,r,n);default:e.Zn(s.ht(i,n,r))}return kernel.Tracer.enabled&&kernel.Tracer.ot(),(function(i,s,e,n,r){const value=Reflect.get(s,e,s);return"function"==typeof value?s[e].bind(s):"object"!=typeof value||null===value?value:new Proxy(value,t(i,n,r))})(i,n,r,s,e)}};return kernel.Tracer.enabled&&kernel.Tracer.ot(),n})(t,r,this)),Reflect.defineProperty(s,e,{get:()=>this.Wt()})}Zn(t){-1===this.Qn.indexOf(t)&&this.Qn.push(t)}_n(t){-1===this.Wn.indexOf(t)&&this.Wn.push(t)}Wt(){return kernel.Tracer.enabled&&kernel.Tracer.et("GetterObserver","getValue",wi.call(arguments)),this.si=0===this.Hn||this.Kn?Reflect.apply(this.Un.get,this.zt,kernel.PLATFORM.Yt):Reflect.apply(this.Un.get,this.ti,kernel.PLATFORM.Yt),kernel.Tracer.enabled&&kernel.Tracer.ot(),this.si}subscribe(t){this.i(t),1==++this.Hn&&this.tr(1)}unsubscribe(t){this.s(t),0==--this.Hn&&this.ir()}J(){const t=this.si,i=this.tr(0);t!==i&&this.l(i,t,16)}Y(){const t=this.si,i=this.tr(0);t!==i&&this.l(i,t,16)}tr(t){kernel.Tracer.enabled&&kernel.Tracer.et("GetterObserver","getValueAndCollectDependencies",wi.call(arguments));const i=!this.qn.Nn||t;return i&&(this.ir(),this.Kn=1),this.si=this.Wt(),i&&(this.Qn.forEach(t=>{t.subscribe(this)}),this.Wn.forEach(t=>{t.V(this)}),this.Kn=0),kernel.Tracer.enabled&&kernel.Tracer.ot(),this.si}Gn(t){return!this.Kn||"$observers"===t}ir(){this.Qn.forEach(t=>{t.unsubscribe(this)}),this.Qn.length=0,this.Wn.forEach(t=>{t.P(this)}),this.Wn.length=0}},t.GetterObserver=i([subscriberCollection()],t.GetterObserver);const pi={}.toString,IDirtyChecker=kernel.DI.yi("IDirtyChecker").mi(t=>t.singleton(mi)),DirtyCheckSettings={sr:6,disabled:0,warn:1,er:0,hr(){this.sr=6,this.disabled=0,this.warn=1,this.er=0}};class mi{constructor(t){this.nr=0,this.rr=[],this.Zt=t}ft(i,s){if(DirtyCheckSettings.er)throw kernel.Reporter.error(800,s);return DirtyCheckSettings.warn&&kernel.Reporter.write(801,s),new t.DirtyCheckProperty(this,i,s)}or(t){this.rr.push(t),1===this.rr.length&&this.Zt.Ph(this.cr,this,4096)}removeProperty(t){this.rr.splice(this.rr.indexOf(t),1),0===this.rr.length&&this.Zt.$h(this.cr,this)}cr(t){if(DirtyCheckSettings.disabled)return;if(++this.nr<DirtyCheckSettings.sr)return;this.nr=0;const i=this.rr,s=i.length;let e,n=0;for(;s>n;++n)(e=i[n]).ur()&&e.flush(256)}}mi.inject=[ILifecycle];const yi=[].slice;t.DirtyCheckProperty=class{constructor(t,i,s){kernel.Tracer.enabled&&kernel.Tracer.et("DirtyCheckProperty","constructor",yi.call(arguments)),this.ti=i,this.ii=s,this.lr=t,kernel.Tracer.enabled&&kernel.Tracer.ot()}ur(){return this.oldValue!==this.ti[this.ii]}flush(t){const i=this.ti[this.ii];this.l(i,this.oldValue,16|t),this.oldValue=i}subscribe(t){this.u()||(this.oldValue=this.ti[this.ii],this.lr.or(this)),this.i(t)}unsubscribe(t){this.s(t)&&!this.u()&&this.lr.removeProperty(this)}},t.DirtyCheckProperty=i([subscriberCollection()],t.DirtyCheckProperty);const Ci=[].slice,Oi=kernel.PLATFORM.Ei;class PrimitiveObserver{constructor(t,i){this.ar=1,kernel.Tracer.enabled&&kernel.Tracer.et("PrimitiveObserver","constructor",Ci.call(arguments)),"length"===i?(this.ti=t,this.Wt=this.dr):this.Wt=this.vr,kernel.Tracer.enabled&&kernel.Tracer.ot()}dr(){return this.ti.length}vr(){}}PrimitiveObserver.prototype.Qt=Oi,PrimitiveObserver.prototype.subscribe=Oi,PrimitiveObserver.prototype.unsubscribe=Oi,PrimitiveObserver.prototype.Mt=Oi;const Ai=[].slice;class PropertyAccessor{constructor(t,i){kernel.Tracer.enabled&&kernel.Tracer.et("PropertyAccessor","constructor",Ai.call(arguments)),this.ti=t,this.ii=i,kernel.Tracer.enabled&&kernel.Tracer.ot()}Wt(){return this.ti[this.ii]}Qt(value){this.ti[this.ii]=value}}const ji={}.toString,IObserverLocator=kernel.DI.yi("IObserverLocator").Ie(),ITargetObserverLocator=kernel.DI.yi("ITargetObserverLocator").Ie(),ITargetAccessorLocator=kernel.DI.yi("ITargetAccessorLocator").Ie();class ObserverLocator{constructor(t,i,s,e){this.br=[],this.lr=i,this.Zt=t,this.wr=s,this.gr=e}static register(t){return kernel.Registration.singleton(IObserverLocator,this).register(t)}ht(i,s,e){if(2&i&&"object"==typeof s)return t.ProxyObserver.Kt(s,e);if((function(t){return 1==t.li})(s))return s.bi(i).Kt(this.Zt,i,s,e);let n,r=s.wi;return r&&e in r?r[e]:((n=this.pr(i,s,e)).ar||(void 0===r&&(r=this.mr(s)),r[e]=n),n)}yr(t){this.br.push(t)}Wh(i,s,e){return this.gr.Cr(i,s)?this.wr.Or(i,s,e)?this.ht(i,s,e):this.gr.Wh(i,this.Zt,s,e):2&i?t.ProxyObserver.Kt(s,e):new PropertyAccessor(s,e)}Jn(t,i){return $(t,this.Zt,i)}Xn(t,i){return E(t,this.Zt,i)}Yn(t,i){return L(t,this.Zt,i)}mr(t){return t.wi||this.Ar(t)}Ar(t){const value={};return Reflect.defineProperty(t,"$observers",{ri:0,dt:0,Mn:0,value})||kernel.Reporter.write(0,t),value}jr(t,i,s,e){for(let n=0,r=this.br.length;r>n;n++){const r=this.br[n].ht(t,i,s,e);if(null!=r)return r}return null}pr(i,s,e){if(!(s instanceof Object))return new PrimitiveObserver(s,e);let n=0;if(this.wr.Cr(i,s)){const t=this.wr.ht(i,this.Zt,this,s,e);if(null!=t)return t;n=1}switch(ji.call(s)){case"[object Array]":return"length"===e?this.Jn(i,s).xn():this.lr.ft(s,e);case"[object Map]":return"size"===e?this.Xn(i,s).xn():this.lr.ft(s,e);case"[object Set]":return"size"===e?this.Yn(i,s).xn():this.lr.ft(s,e)}const r=(function(t,name){let i=Object.getOwnPropertyDescriptor(t,name),s=Object.getPrototypeOf(t);for(;null==i&&null!=s;)i=Object.getOwnPropertyDescriptor(s,name),s=Object.getPrototypeOf(s);return i})(s,e);if(r&&(r.get||r.set)){if(r.get&&r.get.ht)return r.get.ht(s);return this.jr(i,s,e,r)||(n?this.lr.ft(s,e):createComputedObserver(i,this,this.lr,this.Zt,s,e,r))}return new t.SetterObserver(this.Zt,i,s,e)}}ObserverLocator.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator],t.SelfObserver=class{constructor(i,s,e,n,r){this.Zt=i;let o=0;t.ProxyObserver.Jt(e)?(o=1,e.at.subscribe(this,n),this.ti=e._t):this.ti=e,this.ii=n,this.si=void 0,this.oldValue=void 0,this.Ut=0,this.Sr=this.ti[r],void 0===this.Sr?this.lt=0:(this.lt=1,this.si=this.ti[this.ii],o||this.kr()),this.ei=536870927&s}J(t,i,s){this.Qt(t,s)}Wt(){return this.si}Qt(t,i){if(this.lt){const s=this.si;this.si=t,0===this.Zt.ni.hi?0==(4096&i)&&(this.l(t,s,this.ei|i),void 0!==this.Sr&&this.Sr.call(this.ti,t,s,this.ei|i)):this.Ut||(this.Ut=1,this.oldValue=s,this.Zt.ni.add(this))}else this.ti[this.ii]=t}subscribe(t){0==this.lt&&(this.lt=1,this.si=this.ti[this.ii],this.kr()),this.i(t)}kr(){Reflect.defineProperty(this.ti,this.ii,{ri:1,dt:1,get:()=>this.si,set:value=>{this.Qt(value,0)}})||kernel.Reporter.write(1,this.ii,this.ti)}},t.SelfObserver=i([subscriberCollection()],t.SelfObserver);const{oneTime:Si,os:ki,cs:Ri,us:Bi}=t.BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,i,s){s.Rr=s.mode,s.mode=this.mode}qh(t,i,s){s.mode=s.Rr,s.Rr=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Si)}}BindingBehaviorResource.ki("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(ki)}}BindingBehaviorResource.ki("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Ri)}}BindingBehaviorResource.ki("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Bi)}}BindingBehaviorResource.ki("twoWay",TwoWayBindingBehavior);const Ti={},Ii=t.BindingMode.cs;class DebounceBindingBehavior{bind(i,s,e,n=200){let r,o,c;e instanceof t.Binding?(r="handleChange",c=F,o=e.mode&Ii?32:16):(r="callSource",c=M,o=16),e.pt=e[r],e.pt.Br=r,e[r]=c,e.wt={Ct:o,yt:n,gt:0,oldValue:Ti}}qh(t,i,s){s[s.pt.Br]=s.pt,s.pt=null,kernel.PLATFORM.global.clearTimeout(s.wt.gt),s.wt=null}}BindingBehaviorResource.ki("debounce",DebounceBindingBehavior);class PriorityBindingBehavior{static register(t){t.register(kernel.Registration.singleton("binding-behavior:priority",this)),t.register(kernel.Registration.singleton(this,this))}bind(t,i=4096){const{Nh:s}=t;if(null!=s)if(this[t.id]=s.$e,"number"==typeof i)s.$e=i;else switch(i){case"preempt":s.$e=32768;break;case"high":s.$e=28672;break;case"bind":s.$e=24576;break;case"attach":s.$e=20480;break;case"normal":s.$e=16384;break;case"propagate":s.$e=12288;break;case"connect":s.$e=8192;break;case"low":s.$e=4096}}qh(t){null!=t.Nh&&(t.Nh.$e=this[t.id])}}PriorityBindingBehavior.kind=BindingBehaviorResource,PriorityBindingBehavior.description=Object.freeze({name:"priority"});class SignalBindingBehavior{constructor(t){this.Tr=t}bind(t,i,s,...e){if(!s.Uh)throw kernel.Reporter.error(11);if(4===arguments.length){const name=e[0];this.Tr.Ai(name,s),s.Ir=name}else{if(4>=arguments.length)throw kernel.Reporter.error(12);{const t=[].slice.call(arguments,3);let i=t.length;for(;i--;)this.Tr.Ai(t[i],s);s.Ir=t}}}qh(t,i,s){const name=s.Ir;if(s.Ir=null,Array.isArray(name)){const t=name;let i=t.length;for(;i--;)this.Tr.ji(t[i],s)}else this.Tr.ji(name,s)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.ki("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(i,s,e,n=200){let r;e.jt=e[r=e instanceof t.Binding?e.mode===t.BindingMode.us?"updateSource":"updateTarget":"callSource"],e.jt.Br=r,e[r]=D,e.Ot={yt:n,At:0,gt:-1}}qh(t,i,s){s[s.jt.Br]=s.jt,s.jt=null,kernel.PLATFORM.global.clearTimeout(s.Ot.gt),s.Ot=null}}BindingBehaviorResource.ki("throttle",ThrottleBindingBehavior);const Bindable={for(i){const s={add(s){let e=void 0;s instanceof Object?e=s:"string"==typeof s&&(e={Vr:s});const n=e.Vr;if(!n)throw kernel.Reporter.error(0);return e.Pr||(e.Pr=kernel.kebabCase(n)),e.Sr||(e.Sr=`${n}Changed`),void 0===e.mode&&(e.mode=t.BindingMode.os),i.bindables[n]=e,this},get:()=>i.bindables};if(void 0===i.bindables)i.bindables={};else if(Array.isArray(i.bindables)){const t=i.bindables;i.bindables={},t.forEach(s.add)}return s}},Vi="custom-element",Pi="custom-attribute";(TargetedInstructionType=t.TargetedInstructionType||(t.TargetedInstructionType={})).$r="ra",TargetedInstructionType.Er="rb",TargetedInstructionType.Lr="rc",TargetedInstructionType.Mr="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.On="rf",TargetedInstructionType.Fr="rg",TargetedInstructionType.Dr="rh",TargetedInstructionType.xr="ri",TargetedInstructionType.Nr="rj",TargetedInstructionType.Ur="rk";const ITargetedInstruction=kernel.DI.yi("createInterface").Ie(),$i=Object.freeze({required:1,compiler:"default"}),Ei=Object.freeze({required:0,compiler:"default"});class HooksDefinition{constructor(t){this.Gs="render"in t,this.xs="created"in t,this.Ns="binding"in t,this.Us="bound"in t,this.qs="unbinding"in t,this.Hs="unbound"in t,this.zs="attaching"in t,this.Ks="attached"in t,this.Qs="detaching"in t,this.Ws="detached"in t,this._s="caching"in t}}HooksDefinition.ds=Object.freeze(new HooksDefinition({}));class Li{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=Ei,this.bindables=kernel.PLATFORM.Rt,this.instructions=kernel.PLATFORM.Yt,this.dependencies=kernel.PLATFORM.Yt,this.surrogates=kernel.PLATFORM.Yt,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.strategy=1,this.kt=HooksDefinition.ds}}const Mi=["name","template","cache","build","containerless","shadowOptions","hasSlots"],Fi=["instructions","dependencies","surrogates"],CustomAttributeResource={name:Pi,Z:U,Si(t){return t.kind===this},ki(i,s){const e=s,n=e,r=(function(def,i){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?kernel.PLATFORM.Yt:aliases,defaultBindingMode:null==defaultBindingMode?t.BindingMode.os:defaultBindingMode,Tt:void 0===def.Tt?0:def.Tt,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:{...Bindable.for(i).get(),...Bindable.for(def).get()},strategy:A(def.strategy),kt:new HooksDefinition(i.prototype)}})("string"==typeof i?{name:i}:i,e);return n.kind=CustomAttributeResource,n.description=r,e.register=z,e}},INode=kernel.DI.yi("INode").Ie(),IRenderLocation=kernel.DI.yi("IRenderLocation").Ie(),IDOM=kernel.DI.yi("IDOM").Ie(),Di=function(){throw kernel.Reporter.error(1e3)},xi={addEventListener:Di,appendChild:Di,cloneNode:Di,zr:Di,createDocumentFragment:Di,createElement:Di,Kr:Di,dispatchEvent:Di,Qr:Di,Wr:Di,createTextNode:Di,insertBefore:Di,qr:Di,Hr:Di,Gr:Di,_r:Di,Vt:Di,remove:Di,removeEventListener:Di,setAttribute:Di},DOM={...xi,get Jr(){return 1==Reflect.get(this,"$initialized")},initialize(dom){if(this.Jr)throw kernel.Reporter.error(1001);const t={},i=[dom];let s=Object.getPrototypeOf(dom);for(;s&&s!==Object.prototype;)i.unshift(s),s=Object.getPrototypeOf(s);for(s of i)Object.assign(t,Object.getOwnPropertyDescriptors(s));const e=[];let n,r;for(n in t)(r=t[n]).dt&&r.Mn&&(Reflect.defineProperty(this,n,r),e.push(n));Reflect.set(this,"$domKeys",e),Reflect.set(this,"$initialized",1)},Xr(){if(!this.Jr)throw kernel.Reporter.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,xi),Reflect.set(this,"$domKeys",kernel.PLATFORM.Yt),Reflect.set(this,"$initialized",0)}},NodeSequence={empty:{As:0,Yr:0,next:void 0,childNodes:kernel.PLATFORM.Yt,firstChild:null,lastChild:null,Zr:()=>kernel.PLATFORM.Yt,insertBefore(t){},io(t){},remove(){},so(){},De(){},link(t){}}},LifecycleTask={done:{done:1,eo:()=>0,cancel(){},ho:()=>Promise.resolve()}};class PromiseTask{constructor(t,i,s,...e){this.done=0,this.no=0,this.ro=0,this.oo=t.then(value=>{if(1!=this.no&&(this.ro=1,null!==i)){const t=i.call(s,value,...e);if(void 0!==t)return(t.then instanceof Function?t:t.ho()).then(()=>{this.done=1});this.done=1}})}eo(){return!this.ro}cancel(){this.eo()&&(this.no=1)}ho(){return this.oo}}class ContinuationTask{constructor(t,i,s,...e){this.done=0,this.ro=0,this.no=0;const n=t.then instanceof Function?t:t.ho();this.oo=n.then(()=>{if(1==this.no)return;this.ro=1;const t=i.call(s,...e);if(void 0!==t)return(t.then instanceof Function?t:t.ho()).then(()=>{this.done=1});this.done=1})}eo(){return!this.ro}cancel(){this.eo()&&(this.no=1)}ho(){return this.oo}}class AggregateContinuationTask{constructor(t,i,s,...e){this.done=0,this.ro=0,this.no=0,this.oo=Promise.all(t.map(t=>t.ho())).then(()=>{if(1==this.no)return;this.ro=1;const t=i.call(s,...e);if(void 0!==t)return t.ho().then(()=>{this.done=1});this.done=1})}eo(){return!this.ro}cancel(){this.eo()&&(this.no=1)}ho(){return this.oo}}class If{constructor(t,i){this.wi={value:this},this.id=kernel.nextId("au$component"),this.co=void 0,this.uo=void 0,this.lo=t,this.ao=void 0,this.location=i,this.do=1,this.fo=LifecycleTask.done,this.view=void 0,this.vo=0}get value(){return this.vo}set value(t){const i=this.vo;i!==t&&(this.vo=t,this.bo(t,i,this.St.flags))}static register(t){t.register(kernel.Registration.transient("custom-attribute:if",this)),t.register(kernel.Registration.transient(this,this))}Wt(){return this.vo}Qt(t,i){const s=this.vo;s!==t&&(this.vo=t,this.bo(t,s,i|this.St.flags))}wo(t){return this.fo=this.fo.done?this.po(this.value,t):new ContinuationTask(this.fo,this.po,this,this.value,t),this.fo}mo(t){this.fo.done?this.yo(t):this.fo=new ContinuationTask(this.fo,this.yo,this,t)}Co(t){return void 0!==this.view&&(this.fo.done?this.view.detach(t):this.fo=new ContinuationTask(this.fo,this.view.detach,this.view,t)),this.fo}Oo(t){return void 0!==this.view&&(this.fo=this.fo.done?this.view.qh(t):new ContinuationTask(this.fo,this.view.qh,this.view,t)),this.fo}Ao(t){void 0!==this.ao&&this.ao.release(t)&&(this.ao=void 0),void 0!==this.uo&&this.uo.release(t)&&(this.uo=void 0),this.view=void 0}bo(t,i,s){0!=(4&this.St.state)&&(this.fo=this.fo.done?this.po(this.value,s):new ContinuationTask(this.fo,this.po,this,this.value,s))}jo(value,t){return value?this.ao=this.So(this.ao,this.lo,t):null!=this.co?this.uo=this.So(this.uo,this.co,t):void 0}So(t,i,s){return void 0===t&&(t=i.create(s)),t.ko(this.location),t}po(value,t){let i=LifecycleTask.done;if((1==value&&void 0!==this.uo||1!=value&&void 0!==this.ao)&&(i=this.Ro(t)),i.done){const s=this.jo(value,t);i=this.Bo(s,t)}else i=new PromiseTask(i.ho().then(()=>this.jo(value,t)),this.Bo,this,t);return i}Ro(t){const i=this.view;return void 0===i?LifecycleTask.done:(i.detach(t),i.qh(t))}Bo(t,i){if(this.view=t,void 0===t)return LifecycleTask.done;let s=this.To(i);return 0==(32&this.St.state)?s:(s.done?this.yo(i):s=new ContinuationTask(s,this.yo,this,i),s)}To(t){return void 0!==this.view&&(5&this.St.state)>0?this.view.bind(t,this.St.scope):LifecycleTask.done}yo(t){void 0!==this.view&&(40&this.St.state)>0&&this.view.Ne(t)}}If.inject=[IViewFactory,IRenderLocation],If.kind=CustomAttributeResource,If.description=Object.freeze({name:"if",aliases:kernel.PLATFORM.Yt,defaultBindingMode:t.BindingMode.os,Tt:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,kt:Object.freeze(new HooksDefinition(If.prototype))});class Else{constructor(t){this.Io=t}static register(t){t.register(kernel.Registration.transient("custom-attribute:else",this))}link(t){if(t instanceof If)t.co=this.Io;else{if(!(t.Vo instanceof If))throw Error("Unsupported IfBehavior");t.Vo.co=this.Io}}}Else.inject=[IViewFactory],Else.kind=CustomAttributeResource,Else.description={name:"else",aliases:kernel.PLATFORM.Yt,defaultBindingMode:t.BindingMode.os,Tt:0,isTemplateController:1,bindables:kernel.PLATFORM.Rt,strategy:1,kt:HooksDefinition.ds};class Repeat{constructor(t,i,s){this.wi={Po:this},this.id=kernel.nextId("au$component"),this.Io=s,this.$o=0,this.location=t,this.Eo=void 0,this.Lo=i,this.Mo=[],this.key=void 0,this.do=1,this.fo=LifecycleTask.done}get Po(){return this.Fo}set Po(t){this.Fo!==t&&(this.Fo=t,this.Do(this.St.flags))}static register(t){t.register(kernel.Registration.transient("custom-attribute:repeat",this)),t.register(kernel.Registration.transient(this,this))}wo(t){this.xo(t);const i=this.Lo.Dt,{length:s}=i;let e;for(let t=0;s>t;++t)if((e=i[t]).target===this&&"items"===e.xh){this.No=e.Dh;break}return this.Uo=this.No.zo.evaluate(t,this.St.scope,null),this.Ko(void 0,t),this.fo}mo(t){this.fo.done?this.Qo(void 0,t):this.fo=new ContinuationTask(this.fo,this.Qo,this,void 0,t)}Co(t){this.fo.done?this.Wo(0,this.Mo.length,t):this.fo=new ContinuationTask(this.fo,this.Wo,this,0,this.Mo.length,t)}Oo(t){return this.xo(t),this.fo=this.fo.done?this.qo(0,this.Mo.length,t,0):new ContinuationTask(this.fo,this.qo,this,0,this.Mo.length,t,0),this.fo}Do(t){this.xo(t|=this.St.flags),this.Ko(void 0,t|=16)}Y(t,i){i|=this.St.flags,this.Ko(t,i|=976)}Ko(t,i){if(void 0===t){if((5&this.St.state)>0){const t=this.Mo.length;this.Wo(0,t,i),this.fo=this.fo.done?this.qo(0,t,i,0):new ContinuationTask(this.fo,this.qo,this,0,t,i,0),this.fo=this.fo.done?this.Ho(i):new ContinuationTask(this.fo,this.Ho,this,i)}(40&this.St.state)>0&&(this.fo.done?this.Go(i):this.fo=new ContinuationTask(this.fo,this.Go,this,i))}else(function(t){let i=0,s=0;const e=t.length;for(let n=0;e>n;++n){for(;n-i>=t.ut[s];)++s,--i;-2===t[n]?++i:t[n]+=i}})(t),(5&this.St.state)>0&&(t.ut.length>0&&(t.ut.sort(kernel.compareNumber),this.fo.done?this._o(t,i):this.fo=new ContinuationTask(this.fo,this._o,this,t,i),this.fo=this.fo.done?this.Jo(t,i):new ContinuationTask(this.fo,this.Jo,this,t,i)),this.fo=this.fo.done?this.Xo(t,i):new ContinuationTask(this.fo,this.Xo,this,t,i)),(40&this.St.state)>0&&(this.fo.done?this.Yo(t,i):this.fo=new ContinuationTask(this.fo,this.Yo,this,t,i))}xo(t){const i=this.Eo;if((5&this.St.state)>0){const s=this.Eo=getCollectionObserver(t,this.St.Zt,this.Po);i!==s&&i&&i.P(this),s&&s.V(this)}else i&&i.P(this)}Wo(t,i,s){const e=this.Mo;let n;this.St.Zt.sh.Qe();for(let r=t;i>r;++r)(n=e[r]).release(s),n.detach(s);this.St.Zt.sh.end(s)}qo(t,i,s,e){const n=this.Mo;let r,o,c=void 0;this.St.Zt.Je.Qe();for(let e=t;i>e;++e)(r=(o=n[e]).qh(s)).done||(void 0===c&&(c=[]),c.push(r));return e&&(this.Mo.length=t),void 0===c?(this.St.Zt.Je.end(s),LifecycleTask.done):new AggregateContinuationTask(c,this.St.Zt.Je.end,this.St.Zt.Je,s)}_o(t,i){const s=this.Mo;this.St.Zt.sh.Qe();const e=t.ut,n=e.length;let r;for(let t=0;n>t;++t)(r=s[e[t]]).release(i),r.detach(i);this.St.Zt.sh.end(i)}Jo(t,i){const s=this.Mo;let e,n=void 0;this.St.Zt.Je.Qe();const r=t.ut,o=r.length;let c,u=0;for(;o>u;++u)(e=(c=s[r[u]]).qh(i)).done||(void 0===n&&(n=[]),n.push(e));u=0;let l=0;for(;o>u;++u)this.Mo.splice(l=r[u]-u,1);return void 0===n?(this.St.Zt.Je.end(i),LifecycleTask.done):new AggregateContinuationTask(n,this.St.Zt.Je.end,this.St.Zt.Je,i)}Ho(t){let i,s,e=void 0;this.St.Zt.bound.Qe();const n=this.Io,r=this.Uo,o=this.Po,c=this.No.count(t,o),u=this.Mo=Array(c);return this.No.Zo(t,o,(o,c,l)=>{s=u[c]=n.create(t),(i=s.bind(t,this.tc(t,r,l,s))).done||(void 0===e&&(e=[]),e.push(i))}),void 0===e?(this.St.Zt.bound.end(t),LifecycleTask.done):new AggregateContinuationTask(e,this.St.Zt.bound.end,this.St.Zt.bound,t)}Xo(t,i){let s,e,n=void 0;const r=this.Io,o=this.Mo,c=this.Uo,u=this.Po;this.St.Zt.bound.Qe();const l=t.length;for(let a=0;l>a;++a)-2===t[a]&&(s=(e=r.create(i)).bind(i,this.tc(i,c,u[a],e)),o.splice(a,0,e),s.done||(void 0===n&&(n=[]),n.push(s)));if(o.length!==l)throw Error(`viewsLen=${o.length}, mapLen=${l}`);return void 0===n?(this.St.Zt.bound.end(i),LifecycleTask.done):new AggregateContinuationTask(n,this.St.Zt.bound.end,this.St.Zt.bound,i)}tc(t,i,s,e){const n=this.St,r=n.scope,o=BindingContext.create(t,i,s);o.ic=e;const c=Scope.pi(t,r,o);if(n.sc!==kernel.PLATFORM.Yt){c.fi=void 0!==r.fi&&r.fi!==kernel.PLATFORM.Rt?{...r.fi}:{};for(const t of n.sc)c.fi[t]=c}return c}Qo(t,i){let s;const{Mo:e,location:n}=this;if(this.St.Zt.Ze.Qe(),void 0===t)for(let t=0,r=e.length;r>t;++t)(s=e[t]).ko(n),s.ec.De(),s.Ne(i);else for(let r=0,o=e.length;o>r;++r)t[r]!==r&&((s=e[r]).ko(n),s.ec.De(),s.Ne(i));this.St.Zt.Ze.end(i)}Go(t){let i;const{Mo:s,location:e}=this;this.St.Zt.Ze.Qe();for(let n=0,r=s.length;r>n;++n)(i=s[n]).ko(e),i.ec.De(),i.Ne(t);this.St.Zt.Ze.end(t)}Yo(t,i){const s=this.location,e=this.Mo;(function(t,i){const s=t.slice(),e=i.length;let to=0,from=0;for(;e>to;)-2!==(from=i[to])&&(t[to]=s[from]),++to})(e,t);const n=(function(t){const i=t.length;i>zi&&(zi=i,Ni=new Int32Array(i),Ui=new Int32Array(i));let s=0,e=0,n=0,r=0,o=0,c=0,u=0,l=0;for(;i>r;r++)if(-2!==(e=t[r])){if(-2!==(n=t[o=Ni[s]])&&e>n){Ui[r]=o,Ni[++s]=r;continue}for(c=0,u=s;u>c;)-2!==(n=t[Ni[l=c+u>>1]])&&e>n?c=l+1:u=l;((n=t[Ni[c]])>e||-2===n)&&(c>0&&(Ui[r]=Ni[c-1]),Ni[c]=r)}r=++s;const a=new Int32Array(r);for(e=Ni[s-1];s-- >0;)a[s]=e,e=Ui[e];for(;r-- >0;)Ni[r]=0;return a})(t),r=n.length;let o;this.St.Zt.Ze.Qe(),i|=268435456;let c=r-1,u=t.length-1;for(;u>=0;--u)-2===t[u]?(e[u].ko(s),e[u].Ne(i)):0>c||1===r||u!==n[c]?e[u].Ne(i):--c,e[u].ec.link(void 0!==(o=e[u+1])?o.ec:s);this.St.Zt.Ze.end(i)}}let Ni,Ui;Repeat.inject=[IRenderLocation,IController,IViewFactory],Repeat.kind=CustomAttributeResource,Repeat.description=Object.freeze({name:"repeat",aliases:kernel.PLATFORM.Yt,defaultBindingMode:t.BindingMode.os,Tt:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["items"]}).get()),strategy:1,kt:Object.freeze(new HooksDefinition(Repeat.prototype))});let zi=0;class Replaceable{constructor(t,i){this.id=kernel.nextId("au$component"),this.Io=t,this.view=this.Io.create(),this.view.ko(i)}static register(t){t.register(kernel.Registration.transient("custom-attribute:replaceable",this)),t.register(kernel.Registration.transient(this,this))}wo(t){const i=BindingContext.vi;BindingContext.vi=this.Io.name;const s=this.view.bind(536870912|t,this.St.scope);return s.done?BindingContext.vi=i:s.ho().then(()=>{BindingContext.vi=i}),s}mo(t){this.view.Ne(t)}Co(t){this.view.detach(t)}Oo(t){return this.view.qh(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],Replaceable.kind=CustomAttributeResource,Replaceable.description=Object.freeze({name:"replaceable",aliases:kernel.PLATFORM.Yt,defaultBindingMode:t.BindingMode.os,Tt:0,isTemplateController:1,bindables:kernel.PLATFORM.Rt,strategy:1,kt:Object.freeze(new HooksDefinition(Replaceable.prototype))});class With{constructor(t,i){this.wi={value:this},this.id=kernel.nextId("au$component"),this.Io=t,this.view=this.Io.create(),this.view.ko(i),this.vo=void 0}get value(){return this.vo}set value(t){const i=this.vo;i!==t&&(this.vo=t,this.bo(t,i,0))}static register(t){t.register(kernel.Registration.transient("custom-attribute:with",this)),t.register(kernel.Registration.transient(this,this))}bo(t,i,s){(5&this.St.state)>0&&this.hc(4096)}wo(t){this.hc(t)}mo(t){this.view.Ne(t)}Co(t){this.view.detach(t)}Oo(t){this.view.qh(t)}hc(t){const i=Scope.pi(t,this.St.scope,void 0===this.value?{}:this.value);this.view.bind(t,i)}}With.inject=[IViewFactory,IRenderLocation],With.kind=CustomAttributeResource,With.description=Object.freeze({name:"with",aliases:kernel.PLATFORM.Yt,defaultBindingMode:t.BindingMode.os,Tt:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,kt:Object.freeze(new HooksDefinition(With.prototype))});const IProjectorLocator=kernel.DI.yi("IProjectorLocator").Ie(),CustomElementResource={name:Vi,Z:x,Si(t){return t.kind===this},nc:N,ki(t,i=null){if(!t)throw kernel.Reporter.error(70);const s=null==i?class{}:i,e=s,n=buildTemplateDefinition(s,t);return e.kind=CustomElementResource,s.description=n,s.register=W,s}},Ki={mode:"open"},ISanitizer=kernel.DI.yi("ISanitizer").mi(t=>t.singleton(class{rc(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.oc=t}os(t){return null==t?null:this.oc.rc(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.ki("sanitize",SanitizeValueConverter);class ViewFactory{constructor(name,template,t){this.cc=0,this.uc=-1,this.cache=null,this.Zt=t,this.name=name,this.template=template,this.parts=kernel.PLATFORM.Rt}lc(t,i){t&&("*"===t?t=ViewFactory.ac:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.uc&&i||(this.uc=t)),this.cache=this.uc>0?[]:null,this.cc=this.uc>0}dc(t){return null!=this.cache&&this.uc>this.cache.length}fc(t){return this.dc(t)?(t.cache(0),this.cache.push(t),1):0}create(t){const cache=this.cache;let i;if(null!=cache&&cache.length>0)return(i=cache.pop()).state=128^(128|i.state),i;if(i=Controller.vc(this,this.Zt,t),this.template.$t(i,null,this.parts,t),!i.ec)throw kernel.Reporter.error(90);return i}bc(parts){this.parts===kernel.PLATFORM.Rt?this.parts={...parts}:Object.assign(this.parts,parts)}}ViewFactory.ac=65535;const ITemplateCompiler=kernel.DI.yi("ITemplateCompiler").Ie();(ViewCompileFlags=t.ViewCompileFlags||(t.ViewCompileFlags={}))[ViewCompileFlags.ds=1]="none",ViewCompileFlags[ViewCompileFlags.wc=2]="surrogate",ViewCompileFlags[ViewCompileFlags.gc=4]="shadowDOM";const ITemplateFactory=kernel.DI.yi("ITemplateFactory").Ie(),Qi={pc:void 0,dom:void 0,mc:void 0,$t(t){const i=t instanceof Controller?t:t.St;i.ec=NodeSequence.empty,i.context=void 0}},Wi="default",IInstructionRenderer=kernel.DI.yi("IInstructionRenderer").Ie(),IRenderer=kernel.DI.yi("IRenderer").Ie(),IRenderingEngine=kernel.DI.yi("IRenderingEngine").mi(t=>t.singleton(qi));class qi{constructor(t,i,s,e){this.yc=t,this.Cc=i,this.Oc=new Map,this.Zt=s,this.Ac=new Map,this.jc=e.reduce((t,i)=>(t[i.name]=i,t),Object.create(null))}Sc(dom,t,i,s){if(null==t)return;let e=this.Ac.get(t);return e||(e=this.kc(dom,t,i,s),this.Ac.set(t,e)),e}Rc(dom,t,i){if(null==t)throw Error("No definition provided");let s=this.Oc.get(t);if(!s){const e=buildTemplateDefinition(null,t),template=this.kc(dom,e,i,void 0);(s=new ViewFactory(e.name,template,this.Zt)).lc(e.cache,1),this.Oc.set(t,s)}return s}kc(dom,i,s,e){if(null==s&&(s=this.yc),null!=i.template){const n=createRenderContext(dom,s,i.dependencies,e);if(i.build.required){const s=i.build.compiler||Wi,compiler=this.jc[s];if(void 0===compiler)throw kernel.Reporter.error(20,s);i=compiler.compile(dom,i,new kernel.RuntimeCompilationResources(n),t.ViewCompileFlags.wc)}return this.Cc.create(n,i)}return Qi}}qi.inject=[kernel.IContainer,ITemplateFactory,ILifecycle,kernel.all(ITemplateCompiler)];class Hi{Lt(t,parts){this.Io=t,t.bc(parts)}resolve(t,i){const s=this.Io;if(null==s)throw kernel.Reporter.error(50);if(!s.name||!s.name.length)throw kernel.Reporter.error(51);const e=s.parts[s.name];if(e){const s=t.get(IRenderingEngine),dom=t.get(IDOM);return s.Rc(dom,e,i)}return s}Mt(){this.Io=null}}let Gi=class{constructor(t,i){this.Bc=0,this.children=void 0,this.controller=i,this.Zt=t,this.controller=Controller.Tc(i,void 0,void 0),this.Ic=this.controller.Ic,this.lt=0,this.Vc=0}Wt(){return this.lt||(this.lt=1,this.Ic.Pc(()=>{this.$c()}),this.children=H(this.Ic.children)),this.children}Qt(t){}Ec(t){this.Bc&&(this.l(this.children,void 0,16|t),this.Bc=0)}subscribe(t){this.Vc||(this.Vc=1,this.Zt.Ph(this.Ec,this,24576)),this.i(t)}unsubscribe(t){this.s(t),this.Vc&&!this.u()&&(this.Vc=0,this.Zt.$h(this.Ec,this))}$c(){var t;this.children=H(this.Ic.children),null!=(t=this.controller.Vo)&&"$childrenChanged"in t&&this.controller.Vo.Lc(),this.Bc=1}};Gi=i([subscriberCollection()],Gi);class Controller{constructor(i,s,e,n,r,host,o,c){if(this.id=kernel.nextId("au$component"),this.He=void 0,this._e=void 0,this.qe=void 0,this.Ge=void 0,this.Ye=void 0,this.ih=void 0,this.Xe=void 0,this.th=void 0,this.hh=void 0,this.rh=void 0,this.eh=void 0,this.nh=void 0,this.flags=i,this.Mc=s,this.Dt=void 0,this.xt=void 0,this.state=0,this.sc=c,null==n){if(null==s)throw Error("No IViewCache was provided when rendering a synthetic view.");if(null==e)throw Error("No ILifecycle was provided when rendering a synthetic view.");this.Zt=e,this.kt=HooksDefinition.ds,this.Vo=void 0,this.Nt=void 0,this.host=void 0,this.Fc=2,this.scope=void 0,this.Ic=void 0,this.ec=void 0,this.context=void 0,this.location=void 0}else{if(null==r)throw Error("No parentContext was provided when rendering a custom element or attribute.");this.Zt=r.get(ILifecycle),n.St=this;const s=n.constructor;if(null==s.description)throw Error("The provided viewModel does not have a (valid) description.");const{description:e}=s;switch((function(i,s,e,n){const r=null!=n.wi?n.wi:{},bindables=s.bindables,o=Object.getOwnPropertyNames(bindables),c=(2&e)>0,{length:u}=o;let name;for(let s=0;u>s;++s)null==r[name=o[s]]&&(r[name]=new t.SelfObserver(i,e,c?t.ProxyObserver.Kt(n).zt:n,name,bindables[name].Sr));c||Reflect.defineProperty(n,"$observers",{ri:0,value:r})})(this.Zt,e,i|=e.strategy,n),this.kt=e.kt,this.Vo=n,this.Nt=(function(i){return 1==n.do||0==(2&i)?n:t.ProxyObserver.Kt(n).zt})(i),this.host=host,s.kind.name){case"custom-element":if(null==host)throw Error("No host element was provided when rendering a custom element.");this.Fc=0;const u=r.get(IRenderingEngine);let template=void 0;if(this.kt.Gs){const t=this.Nt.$t(i,host,null==o.parts?kernel.PLATFORM.Rt:o.parts,r);null!=t&&"getElementTemplate"in t&&(template=t.Sc(u,s,r))}else{const dom=r.get(IDOM);template=u.Sc(dom,e,r,s)}if(void 0!==template){let parts;if(null==template.mc||0===template.mc.instructions.length||0===template.mc.instructions[0].length||null==template.mc.instructions[0][0].parts)parts=null==o.parts?kernel.PLATFORM.Rt:o.parts;else{const t=template.mc.instructions[0][0];parts=null==o.parts?t.parts:{...o.parts,...t.parts},c===kernel.PLATFORM.Yt&&(this.sc=Object.keys(t.parts))}template.$t(this,host,parts)}this.scope=Scope.create(i,this.Nt,null),this.Ic=r.get(IProjectorLocator).Dc(r.get(IDOM),this,host,e),this.location=void 0;break;case"custom-attribute":this.Fc=1,this.scope=void 0,this.Ic=void 0,this.ec=void 0,this.context=void 0,this.location=void 0;break;default:throw Error(`Invalid resource kind: '${s.kind.name}'`)}this.kt.xs&&this.Nt.xc(i)}}static Tc(t,i,host,s=0,e=kernel.PLATFORM.Rt){let n=Controller.Nc.get(t);return void 0===n&&(n=new Controller(s,void 0,void 0,t,i,host,e,kernel.PLATFORM.Yt),this.Nc.set(t,n)),n}static Uc(t,i,s=0,e=kernel.PLATFORM.Yt){let n=Controller.Nc.get(t);return void 0===n&&(n=new Controller(s,void 0,void 0,t,i,void 0,kernel.PLATFORM.Rt,e),this.Nc.set(t,n)),n}static vc(t,i,s=0){return new Controller(s,t,i,void 0,void 0,void 0,kernel.PLATFORM.Rt,kernel.PLATFORM.Yt)}zc(t){this.scope=t,this.state|=16384}ko(t){this.state=32768^(32768|this.state),this.location=t}release(t){return this.state|=32768,(32&this.state)>0?this.Mc.dc(this):this.Kc(t)}bind(t,i){switch(t|=4096,this.Fc){case 0:return this.Qc(t,i);case 1:return this.Wc(t,i);case 2:return this.qc(t,i)}}qh(t){switch(t|=8192,this.Fc){case 0:return this.Hc(t);case 1:return this.Gc(t);case 2:return this._c(t)}}bound(t){this.Nt.bound(t)}Je(t){this.Nt.Je(t)}Ne(t){if(0>=(40&this.state)||0!=(268435456&t))switch(t|=16384,this.Fc){case 0:this.Jc(t);break;case 1:this.Xc(t);break;case 2:this.Yc(t)}}detach(t){if(0!=(40&this.state))switch(t|=32768,this.Fc){case 0:this.Zc(t);break;case 1:this.tu(t);break;case 2:this.iu(t)}}Ze(t){this.Nt.Ze(t)}sh(t){this.Nt.sh(t)}mount(t){switch(this.Fc){case 0:this.su(t);break;case 2:this.eu(t)}}unmount(t){switch(this.Fc){case 0:this.hu(t);break;case 2:this.Kc(t)}}cache(t){switch(this.Fc){case 0:this.nu(t);break;case 1:this.ru(t);break;case 2:this.ou(t)}}cu(t){const{Dt:i}=this;if(void 0!==i){const s=i.find(i=>i.xh===t);if(void 0!==s)return s.Nh}}Qc(t,i){const $scope=this.scope;if(null==$scope.fi)if(null!=i&&null!=i.fi&&i.fi!==kernel.PLATFORM.Rt?$scope.fi={...i.fi}:this.sc!==kernel.PLATFORM.Yt&&($scope.fi={}),null==$scope.fi)$scope.fi=kernel.PLATFORM.Rt;else for(const t of this.sc)$scope.fi[t]=$scope;if((134217728&t)>0)return this.uu(t,$scope),LifecycleTask.done;if((4&this.state)>0)return LifecycleTask.done;if(t|=4096,this.state|=1,this.Zt.bound.Qe(),this.uu(t,$scope),this.kt.Ns){const i=this.Nt.wo(t);if(Q(i))return new ContinuationTask(i,this.lu,this,t,$scope)}return this.lu(t,$scope)}Wc(t,i){if((4&this.state)>0){if(this.scope===i)return LifecycleTask.done;const s=this.qh(t|=4096);if(!s.done)return new ContinuationTask(s,this.bind,this,t,i)}else t|=4096;if(this.state|=1,this.scope=i,this.Zt.bound.Qe(),this.kt.Ns){const i=this.Nt.wo(t);if(Q(i))return new ContinuationTask(i,this.du,this,t)}return this.du(t),LifecycleTask.done}qc(t,i){if(null==i)throw Error("Scope is null or undefined");if((134217728&t)>0)return this.uu(t,i),LifecycleTask.done;if((4&this.state)>0){if(this.scope===i||(16384&this.state)>0)return LifecycleTask.done;const s=this.qh(t|=4096);if(!s.done)return new ContinuationTask(s,this.bind,this,t,i)}else t|=4096;return 0==(16384&this.state)&&(this.scope=i),this.state|=1,this.Zt.bound.Qe(),this.uu(t,i),this.lu(t,i)}uu(t,i){const{Dt:s}=this;if(void 0!==s){const{length:e}=s;for(let n=0;e>n;++n)s[n].Kh(t,i)}}lu(t,i){let s,e=void 0;const{xt:n}=this;if(void 0!==n){const{length:r}=n;for(let o=0;r>o;++o)(s=n[o].bind(t,i)).done||(void 0===e&&(e=[]),e.push(s))}return void 0===e?(this.du(t),LifecycleTask.done):new AggregateContinuationTask(e,this.du,this,t)}du(t){this.kt.Us&&this.Zt.bound.add(this),this.state=1^this.state|4,this.Zt.bound.end(t)}Hc(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.Zt.Je.Qe(),this.kt.qs){const i=this.Nt.Oo(t);if(Q(i))return new ContinuationTask(i,this.fu,this,t)}return this.fu(t)}Gc(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.Zt.Je.Qe(),this.kt.qs){const i=this.Nt.Oo(t);if(Q(i))return new ContinuationTask(i,this.vu,this,t)}return this.vu(t),LifecycleTask.done}_c(t){return 0==(4&this.state)?LifecycleTask.done:(this.state|=2,t|=8192,this.Zt.Je.Qe(),this.fu(t))}bu(t){const{Dt:i}=this;if(void 0!==i)for(let s=i.length-1;s>=0;--s)i[s].Qh(t);this.vu(t)}fu(t){let i,s=void 0;const{xt:e}=this;if(void 0!==e)for(let n=e.length-1;n>=0;--n)(i=e[n].qh(t)).done||(void 0===s&&(s=[]),s.push(i));return void 0===s?(this.bu(t),LifecycleTask.done):new AggregateContinuationTask(s,this.bu,this,t)}vu(t){switch(this.Fc){case 1:this.scope=void 0;break;case 2:0==(16384&this.state)&&(this.scope=void 0)}this.kt.Hs&&this.Zt.Je.add(this),this.state=6^(6|this.state),this.Zt.Je.end(t)}Jc(t){t|=16384,this.state|=8,this.Zt.mount.add(this),this.Zt.Ze.Qe(),this.kt.zs&&this.Nt.mo(t),this.wu(t),this.kt.Ks&&this.Zt.Ze.add(this),this.state=8^this.state|32,this.Zt.Ze.end(t)}Xc(t){t|=16384,this.state|=8,this.Zt.Ze.Qe(),this.kt.zs&&this.Nt.mo(t),this.kt.Ks&&this.Zt.Ze.add(this),this.state=8^this.state|32,this.Zt.Ze.end(t)}Yc(t){((32&this.state)>0&&268435456&t)>0?this.Zt.mount.add(this):(t|=16384,this.state|=8,this.Zt.mount.add(this),this.Zt.Ze.Qe(),this.wu(t),this.state=8^this.state|32,this.Zt.Ze.end(t))}Zc(t){t|=32768,this.state|=16,this.Zt.sh.Qe(),this.Zt.unmount.add(this),this.kt.Qs&&this.Nt.Co(t),this.gu(t),this.kt.Ws&&this.Zt.sh.add(this),this.state=48^(48|this.state),this.Zt.sh.end(t)}tu(t){t|=32768,this.state|=16,this.Zt.sh.Qe(),this.kt.Qs&&this.Nt.Co(t),this.kt.Ws&&this.Zt.sh.add(this),this.state=48^(48|this.state),this.Zt.sh.end(t)}iu(t){t|=32768,this.state|=16,this.Zt.sh.Qe(),this.Zt.unmount.add(this),this.gu(t),this.state=48^(48|this.state),this.Zt.sh.end(t)}wu(t){const{xt:i}=this;if(void 0!==i){const{length:s}=i;for(let e=0;s>e;++e)i[e].Ne(t)}}gu(t){const{xt:i}=this;if(void 0!==i)for(let s=i.length-1;s>=0;--s)i[s].detach(t)}su(t){(64&this.state)>0||(this.state|=64,this.Ic.pu(this.ec))}eu(t){this.state|=64,this.ec.insertBefore(this.location)}hu(t){0!=(64&this.state)&&(this.state=64^(64|this.state),this.Ic.mu(this.ec))}Kc(t){return 0==(64&this.state)?0:(this.state=64^(64|this.state),this.ec.remove(),this.ec.De(),(32768&this.state)>0&&(this.state=32768^(32768|this.state),this.Mc.fc(this))?(this.state|=128,1):0)}nu(t){this.kt._s&&this.Nt.Ao(t|=65536)}ru(t){t|=65536,this.kt._s&&this.Nt.Ao(t);const{xt:i}=this;if(void 0!==i){const{length:s}=i;for(let e=s-1;e>=0;--e)i[e].cache(t)}}ou(t){const{xt:i}=this;if(void 0!==i){const{length:s}=i;for(let e=s-1;e>=0;--e)i[e].cache(t)}}}Controller.Nc=new WeakMap;const _i=kernel.DI.yi("IActivator").mi(t=>t.singleton(Ji));class Ji{static register(t){return kernel.Registration.singleton(_i,this).register(t)}Bo(host,component,t,i=1024,s){const e=Controller.Tc(component,t,host,i=void 0===i?0:i);let n=e.bind(4096|i,s);return n.done?e.Ne(16384|i):n=new ContinuationTask(n,e.Ne,e,16384|i),n}Ro(component,t=2048){const i=Controller.Tc(component,void 0,void 0);return i.detach(32768|t),i.qh(8192|t)}}const{et:Xi,ot:Yi}=kernel.Profiler.yu("Aurelia.start"),{et:Zi,ot:ts}=kernel.Profiler.yu("Aurelia.stop");class CompositionRoot{constructor(t,i){if(this.Cu=t,null!=t.host)this.yc=i.has(INode,0)?i.It():i,kernel.Registration.Ou(INode,t.host).register(this.yc),this.host=t.host;else{if(!i.has(INode,1))throw Error("No host element found.");this.yc=i,this.host=i.get(INode)}this.strategy=null!=t.strategy?t.strategy:1;const s=this.yc.get(IDOMInitializer);this.dom=s.initialize(t),this.Vo=CustomElementResource.Si(t.component)?this.yc.get(t.component):t.component,this.controller=Controller.Tc(this.Vo,this.yc,this.host,this.strategy),this.Zt=this.yc.get(ILifecycle),this.Au=this.yc.get(_i),1==t.ju?this.Zt.Eh(t.Su):this.Zt.Lh(),this.fo=LifecycleTask.done,this.ku=1,this.Ru=1}Bo(t){const{fo:i,host,Vo:s,yc:e,Au:n,strategy}=this,r=1024|strategy;if(i.done)this.fo=null==t||t.done?n.Bo(host,s,e,r,void 0):new ContinuationTask(t,n.Bo,n,host,s,e,r,void 0);else if(null==t||t.done)this.fo=new ContinuationTask(i,n.Bo,n,host,s,e,r,void 0);else{const o=new ContinuationTask(i,t.ho,t);this.fo=new ContinuationTask(o,n.Bo,n,host,s,e,r,void 0)}return this.fo}Ro(t){const{fo:i,Vo:s,Au:e,strategy}=this,n=2048|strategy;if(i.done)this.fo=null==t||t.done?e.Ro(s,n):new ContinuationTask(t,e.Ro,e,s,n);else if(null==t||t.done)this.fo=new ContinuationTask(i,e.Ro,e,s,n);else{const r=new ContinuationTask(i,t.ho,t);this.fo=new ContinuationTask(r,e.Ro,e,s,n)}return this.fo}}class Aurelia{constructor(t=kernel.DI.Bu()){this.yc=t,this.fo=LifecycleTask.done,this.Tu=0,this.Iu=0,this.Vu=0,this.Pu=void 0,this.next=void 0,kernel.Registration.Ou(Aurelia,this).register(t)}get $u(){return this.Tu}get Eu(){return this.Iu}get Lu(){return this.Vu}get root(){if(null==this.Pu){if(null==this.next)throw Error("root is not defined");return this.next}return this.Pu}register(...t){return this.yc.register(...t),this}app(t){return this.next=new CompositionRoot(t,this.yc),this.$u&&this.start(),this}start(t=this.next){if(null==t)throw Error("There is no composition root");return this.stop(t),this.fo.done?this.Mu(t):this.fo=new ContinuationTask(this.fo,this.Mu,this,t),this.fo=this.root.Bo(this.fo),this.fo=this.fo.done?this.Fu(t):new ContinuationTask(this.fo,this.Fu,this,t),this.fo}stop(t=this.Pu){return this.Tu&&null!=t&&(this.fo.done?this.Du(t):this.fo=new ContinuationTask(this.fo,this.Du,this,t),this.fo=t.Ro(this.fo),this.fo=this.fo.done?this.xu(t):new ContinuationTask(this.fo,this.xu,this,t)),this.fo}ho(){return this.fo.ho()}Mu(t){Reflect.set(t.host,"$au",this),this.Pu=t,this.Iu=1,kernel.Profiler.enabled&&Xi()}Fu(t){return this.Tu=1,this.Iu=0,this.dispatchEvent(t,"aurelia-composed",t.dom),this.dispatchEvent(t,"au-started",t.host),kernel.Profiler.enabled&&Yi(),LifecycleTask.done}Du(t){this.Tu=0,this.Vu=1,kernel.Profiler.enabled&&Zi()}xu(t){return Reflect.deleteProperty(t.host,"$au"),this.Pu=void 0,this.Vu=0,this.dispatchEvent(t,"au-stopped",t.host),kernel.Profiler.enabled&&ts(),LifecycleTask.done}dispatchEvent(t,name,i){(i="dispatchEvent"in i?i:t.dom).dispatchEvent(t.dom.Kr(name,{detail:this,bubbles:1,cancelable:1}))}}kernel.PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=kernel.DI.yi("IDOMInitializer").Ie(),is=[].slice;class ss{constructor(t){const i=this.Nu={};t.forEach(t=>{i[t.Ft]=t})}static register(t){return kernel.Registration.singleton(IRenderer,this).register(t)}$t(t,dom,i,s,targets,e,host,parts){kernel.Tracer.enabled&&kernel.Tracer.et("Renderer","render",is.call(arguments));const n=e.instructions,r=this.Nu;if(targets.length!==n.length)throw kernel.Reporter.error(targets.length>n.length?30:31);let instructions,o,c;for(let e=0,u=targets.length;u>e;++e){o=targets[e];for(let u=0,l=(instructions=n[e]).length;l>u;++u)r[(c=instructions[u]).type].$t(t,dom,i,s,o,c,parts)}if(host){const n=e.surrogates;for(let e=0,o=n.length;o>e;++e)r[(c=n[e]).type].$t(t,dom,i,s,host,c,parts)}kernel.Tracer.enabled&&kernel.Tracer.ot()}}ss.inject=[kernel.all(IInstructionRenderer)];let es=class{$t(t,dom,i,s,e,n){kernel.Tracer.enabled&&kernel.Tracer.et("SetPropertyRenderer","render",is.call(arguments)),getTarget(e)[n.to]=n.value,kernel.Tracer.enabled&&kernel.Tracer.ot()}};es=i([instructionRenderer("re")],es);let hs=class{$t(t,dom,i,s,e,n){kernel.Tracer.enabled&&kernel.Tracer.et("CustomElementRenderer","render",is.call(arguments));const r=i.Et(s,e,n,null,null,e,1),component=i.get(x(n.res)),o=i.get(IRenderer).Nu,c=n.instructions,u=Controller.Tc(component,i,e,t,n);let l;for(let e=0,n=c.length;n>e;++e)o[(l=c[e]).type].$t(t,dom,i,s,u,l);addComponent(s,u),r.Mt(),kernel.Tracer.enabled&&kernel.Tracer.ot()}};hs=i([instructionRenderer("ra")],hs);let ns=class{$t(t,dom,i,s,e,n){kernel.Tracer.enabled&&kernel.Tracer.et("CustomAttributeRenderer","render",is.call(arguments));const r=i.Et(s,e,n),component=i.get(U(n.res)),o=i.get(IRenderer).Nu,c=n.instructions,u=Controller.Uc(component,i,t);let l;for(let e=0,n=c.length;n>e;++e)o[(l=c[e]).type].$t(t,dom,i,s,u,l);addComponent(s,u),r.Mt(),kernel.Tracer.enabled&&kernel.Tracer.ot()}};ns=i([instructionRenderer("rb")],ns);let rs=class{constructor(t){this.Uu=t}$t(t,dom,i,s,e,n,parts){kernel.Tracer.enabled&&kernel.Tracer.et("TemplateControllerRenderer","render",is.call(arguments));const r=this.Uu.Rc(dom,n.def,i),o=i.Et(s,e,n,r,parts,dom.zr(e),0),component=i.get(U(n.res)),c=i.get(IRenderer).Nu,u=n.instructions,l=Controller.Uc(component,i,t,null==n.parts?kernel.PLATFORM.Yt:Object.keys(n.parts));if(n.link){const t=s.xt;component.link(t[t.length-1])}let a;for(let e=0,n=u.length;n>e;++e)c[(a=u[e]).type].$t(t,dom,i,s,l,a);addComponent(s,l),o.Mt(),kernel.Tracer.enabled&&kernel.Tracer.ot()}};rs.inject=[IRenderingEngine],rs=i([instructionRenderer("rc")],rs);let os=class{constructor(t,i){this.zu=t,this.nt=i}$t(i,dom,s,e,n,r){kernel.Tracer.enabled&&kernel.Tracer.et("LetElementRenderer","render",is.call(arguments)),dom.remove(n);const o=r.instructions,toViewModel=r.toViewModel;let c,u,l;for(let i=0,n=o.length;n>i;++i)u=ensureExpression(this.zu,(c=o[i]).from,48),addBinding(e,l=new t.LetBinding(u,c.to,this.nt,s,toViewModel));kernel.Tracer.enabled&&kernel.Tracer.ot()}};os.inject=[IExpressionParser,IObserverLocator],os=i([instructionRenderer("rd")],os);let cs=class{constructor(t,i){this.zu=t,this.nt=i}$t(t,dom,i,s,e,n){kernel.Tracer.enabled&&kernel.Tracer.et("CallBindingRenderer","render",is.call(arguments));const r=ensureExpression(this.zu,n.from,153);addBinding(s,new Call(r,getTarget(e),n.to,this.nt,i)),kernel.Tracer.enabled&&kernel.Tracer.ot()}};cs.inject=[IExpressionParser,IObserverLocator],cs=i([instructionRenderer("rh")],cs);let us=class{constructor(t){this.zu=t}$t(t,dom,i,s,e,n){kernel.Tracer.enabled&&kernel.Tracer.et("RefBindingRenderer","render",is.call(arguments));const r=ensureExpression(this.zu,n.from,1280);addBinding(s,new Ref(r,getTarget(e),i)),kernel.Tracer.enabled&&kernel.Tracer.ot()}};us.inject=[IExpressionParser],us=i([instructionRenderer("rj")],us);let ls=class{constructor(t,i){this.zu=t,this.nt=i}$t(i,dom,s,e,n,r){let o;kernel.Tracer.enabled&&kernel.Tracer.et("InterpolationBindingRenderer","render",is.call(arguments));const c=ensureExpression(this.zu,r.from,2048);addBinding(e,o=c.Ku?new MultiInterpolationBinding(this.nt,c,getTarget(n),r.to,t.BindingMode.os,s):new t.InterpolationBinding(c.Qu,c,getTarget(n),r.to,t.BindingMode.os,this.nt,s,1)),kernel.Tracer.enabled&&kernel.Tracer.ot()}};ls.inject=[IExpressionParser,IObserverLocator],ls=i([instructionRenderer("rf")],ls);let as=class{constructor(t,i){this.zu=t,this.nt=i}$t(i,dom,s,e,n,r){kernel.Tracer.enabled&&kernel.Tracer.et("PropertyBindingRenderer","render",is.call(arguments));const o=ensureExpression(this.zu,r.from,48|r.mode);addBinding(e,new t.Binding(o,getTarget(n),r.to,r.mode,this.nt,s)),kernel.Tracer.enabled&&kernel.Tracer.ot()}};as.inject=[IExpressionParser,IObserverLocator],as=i([instructionRenderer("rg")],as);let ds=class{constructor(t,i){this.zu=t,this.nt=i}$t(i,dom,s,e,n,r){kernel.Tracer.enabled&&kernel.Tracer.et("IteratorBindingRenderer","render",is.call(arguments));const o=ensureExpression(this.zu,r.from,539);addBinding(e,new t.Binding(o,getTarget(n),r.to,t.BindingMode.os,this.nt,s)),kernel.Tracer.enabled&&kernel.Tracer.ot()}};ds.inject=[IExpressionParser,IObserverLocator],ds=i([instructionRenderer("rk")],ds);const IObserverLocatorRegistration=ObserverLocator,ILifecycleRegistration=mt,IRendererRegistration=ss,DefaultComponents=[IObserverLocatorRegistration,ILifecycleRegistration,IRendererRegistration],IfRegistration=If,ElseRegistration=Else,RepeatRegistration=Repeat,ReplaceableRegistration=Replaceable,WithRegistration=With,SanitizeValueConverterRegistration=SanitizeValueConverter,DebounceBindingBehaviorRegistration=DebounceBindingBehavior,OneTimeBindingBehaviorRegistration=OneTimeBindingBehavior,ToViewBindingBehaviorRegistration=ToViewBindingBehavior,FromViewBindingBehaviorRegistration=FromViewBindingBehavior,SignalBindingBehaviorRegistration=SignalBindingBehavior,ThrottleBindingBehaviorRegistration=ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration=TwoWayBindingBehavior,PriorityBindingBehaviorRegistration=PriorityBindingBehavior,DefaultResources=[IfRegistration,ElseRegistration,RepeatRegistration,ReplaceableRegistration,WithRegistration,SanitizeValueConverterRegistration,DebounceBindingBehaviorRegistration,OneTimeBindingBehaviorRegistration,ToViewBindingBehaviorRegistration,FromViewBindingBehaviorRegistration,SignalBindingBehaviorRegistration,PriorityBindingBehaviorRegistration,ThrottleBindingBehaviorRegistration,TwoWayBindingBehaviorRegistration],CallBindingRendererRegistration=cs,CustomAttributeRendererRegistration=ns,CustomElementRendererRegistration=hs,InterpolationBindingRendererRegistration=ls,IteratorBindingRendererRegistration=ds,LetElementRendererRegistration=os,PropertyBindingRendererRegistration=as,RefBindingRendererRegistration=us,SetPropertyRendererRegistration=es,TemplateControllerRendererRegistration=rs,DefaultRenderers=[PropertyBindingRendererRegistration,IteratorBindingRendererRegistration,CallBindingRendererRegistration,RefBindingRendererRegistration,InterpolationBindingRendererRegistration,SetPropertyRendererRegistration,CustomElementRendererRegistration,CustomAttributeRendererRegistration,TemplateControllerRendererRegistration,LetElementRendererRegistration],RuntimeBasicConfiguration={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Bu(){return this.register(kernel.DI.Bu())}};return t.AccessKeyed=class{constructor(t,i){this.tt=9324,this.object=t,this.key=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);if(e instanceof Object)return e[this.key.evaluate(t,i,s)]}assign(t,i,s,value){return this.object.evaluate(t,i,s)[this.key.evaluate(t,i,s)]=value}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),e instanceof Object){this.key.connect(t,i,s);const n=this.key.evaluate(t,i,null);Array.isArray(e)&&kernel.isNumeric(n)?2&t&&s.ct(t,e,n):s.ct(t,e,n)}}accept(t){return t.Wu(this)}},t.AccessMember=AccessMember,t.AccessScope=AccessScope,t.AccessThis=AccessThis,t.AggregateContinuationTask=AggregateContinuationTask,t.AggregateTerminalTask=class{constructor(t){this.done=0,this.oo=Promise.all(t.map(t=>t.ho())).then(()=>{this.done=1})}eo(){return 0}cancel(){}ho(){return this.oo}},t.ArrayBindingPattern=class{constructor(t){this.tt=65556,this.elements=t}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.qu(this)}},t.ArrayLiteral=ArrayLiteral,t.Assign=class{constructor(t,value){this.tt=8208,this.target=t,this.value=value}evaluate(t,i,s){return this.target.assign(t,i,s,this.value.evaluate(t,i,s))}connect(t,i,s){}assign(t,i,s,value){return this.value.assign(t,i,s,value),this.target.assign(t,i,s,value)}accept(t){return t.Hu(this)}},t.Aurelia=Aurelia,t.Binary=class{constructor(t,i,s){this.tt=46,this.assign=kernel.PLATFORM.Ei,this.Gu=t,this.left=i,this.right=s,this.evaluate=this[t]}evaluate(t,i,s){throw kernel.Reporter.error(208,this)}connect(t,i,s){const e=this.left.evaluate(t,i,null);this.left.connect(t,i,s),"&&"===this.Gu&&!e||"||"===this.Gu&&e||this.right.connect(t,i,s)}_u(t,i,s){return this.left.evaluate(t,i,s)&&this.right.evaluate(t,i,s)}Ju(t,i,s){return this.left.evaluate(t,i,s)||this.right.evaluate(t,i,s)}Xu(t,i,s){return this.left.evaluate(t,i,s)==this.right.evaluate(t,i,s)}Yu(t,i,s){return this.left.evaluate(t,i,s)===this.right.evaluate(t,i,s)}Zu(t,i,s){return this.left.evaluate(t,i,s)!=this.right.evaluate(t,i,s)}tl(t,i,s){return this.left.evaluate(t,i,s)!==this.right.evaluate(t,i,s)}il(t,i,s){const e=this.right.evaluate(t,i,s);return"function"==typeof e?this.left.evaluate(t,i,s)instanceof e:0}sl(t,i,s){const e=this.right.evaluate(t,i,s);return e instanceof Object?this.left.evaluate(t,i,s)in e:0}el(t,i,s){return this.left.evaluate(t,i,s)+this.right.evaluate(t,i,s)}hl(t,i,s){return this.left.evaluate(t,i,s)-this.right.evaluate(t,i,s)}nl(t,i,s){return this.left.evaluate(t,i,s)*this.right.evaluate(t,i,s)}rl(t,i,s){return this.left.evaluate(t,i,s)/this.right.evaluate(t,i,s)}ol(t,i,s){return this.left.evaluate(t,i,s)%this.right.evaluate(t,i,s)}cl(t,i,s){return this.left.evaluate(t,i,s)<this.right.evaluate(t,i,s)}ul(t,i,s){return this.left.evaluate(t,i,s)>this.right.evaluate(t,i,s)}ll(t,i,s){return this.left.evaluate(t,i,s)<=this.right.evaluate(t,i,s)}al(t,i,s){return this.left.evaluate(t,i,s)>=this.right.evaluate(t,i,s)}accept(t){return t.dl(this)}},t.Bindable=Bindable,t.BindingBehavior=class{constructor(t,name,i){this.tt=38962,this.fl=t,this.name=name,this.Ui=i,this.vl=BindingBehaviorResource.Z(this.name)}evaluate(t,i,s){return this.fl.evaluate(t,i,s)}assign(t,i,s,value){return this.fl.assign(t,i,s,value)}connect(t,i,s){this.fl.connect(t,i,s)}bind(t,i,s){if(null==i)throw kernel.Reporter.error(250,this);if(!s)throw kernel.Reporter.error(206,this);const e=s.Fh;if(!e)throw kernel.Reporter.error(202,this);hasBind(this.fl)&&this.fl.bind(t,i,s);const n=this.vl,r=e.get(n);if(!r)throw kernel.Reporter.error(203,this);void 0===s[n]?(s[n]=r,r.bind.call(r,t,i,s,...C(t,i,e,this.Ui))):kernel.Reporter.write(204,this)}qh(t,i,s){const e=this.vl;void 0!==s[e]?(s[e].qh(t,i,s),s[e]=void 0):kernel.Reporter.write(204,this),hasUnbind(this.fl)&&this.fl.qh(t,i,s)}accept(t){return t.bl(this)}},t.BindingBehaviorResource=BindingBehaviorResource,t.BindingContext=BindingContext,t.BindingIdentifier=class{constructor(name){this.tt=65558,this.name=name}evaluate(t,i,s){return this.name}connect(t,i,s){}accept(t){return t.wl(this)}},t.BindingModeBehavior=BindingModeBehavior,t.Call=Call,t.CallBindingInstruction=class{constructor(from,to){this.type="rh",this.from=from,this.to=to}},t.CallBindingRendererRegistration=CallBindingRendererRegistration,t.CallFunction=class{constructor(t,i){this.tt=1162,this.assign=kernel.PLATFORM.Ei,this.gl=t,this.Ui=i}evaluate(t,i,s){const e=this.gl.evaluate(t,i,s);if("function"==typeof e)return e.apply(null,C(t,i,s,this.Ui));if(2097152&t||null!=e)throw kernel.Reporter.error(207,this)}connect(t,i,s){const e=this.gl.evaluate(t,i,null);if(this.gl.connect(t,i,s),"function"==typeof e){const e=this.Ui;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.pl(this)}},t.CallMember=CallMember,t.CallScope=CallScope,t.CompiledTemplate=class{constructor(dom,t,i,s){this.dom=dom,this.mc=t,this.Io=i,this.pc=s}$t(t,host,parts,i=0){const s=t instanceof Controller?t:t.St;if(null==s)throw Error("Controller is missing from the view model");const e=s.ec=this.Io.ml();s.context=this.pc,this.pc.$t(i|=this.mc.strategy,s,e.Zr(),this.mc,host,parts)}},t.CompositionRoot=CompositionRoot,t.Conditional=class{constructor(t,i,s){this.tt=63,this.assign=kernel.PLATFORM.Ei,this.yl=t,this.Cl=i,this.Ol=s}evaluate(t,i,s){return this.yl.evaluate(t,i,s)?this.Cl.evaluate(t,i,s):this.Ol.evaluate(t,i,s)}connect(t,i,s){this.yl.evaluate(t,i,null)?(this.yl.connect(t,i,s),this.Cl.connect(t,i,s)):(this.yl.connect(t,i,s),this.Ol.connect(t,i,s))}accept(t){return t.Al(this)}},t.ContinuationTask=ContinuationTask,t.Controller=Controller,t.CustomAttributeRendererRegistration=CustomAttributeRendererRegistration,t.CustomAttributeResource=CustomAttributeResource,t.CustomElementRendererRegistration=CustomElementRendererRegistration,t.CustomElementResource=CustomElementResource,t.DOM=DOM,t.DebounceBindingBehavior=DebounceBindingBehavior,t.DebounceBindingBehaviorRegistration=DebounceBindingBehaviorRegistration,t.DefaultResources=DefaultResources,t.DirtyCheckSettings=DirtyCheckSettings,t.Else=Else,t.ElseRegistration=ElseRegistration,t.ForOfStatement=class{constructor(t,i){this.tt=6199,this.assign=kernel.PLATFORM.Ei,this.zo=t,this.jl=i}evaluate(t,i,s){return this.jl.evaluate(t,i,s)}count(t,i){return ot[nt.call(i)](i)}Zo(t,i,s){rt[nt.call(i)](33554432|t,i,s)}connect(t,i,s){this.zo.connect(t,i,s),this.jl.connect(t,i,s)}bind(t,i,s){hasBind(this.jl)&&this.jl.bind(t,i,s)}qh(t,i,s){hasUnbind(this.jl)&&this.jl.qh(t,i,s)}accept(t){return t.Sl(this)}},t.FromViewBindingBehavior=FromViewBindingBehavior,t.FromViewBindingBehaviorRegistration=FromViewBindingBehaviorRegistration,t.FromViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.cs,this.oneTime=0,this.to=to}},t.HooksDefinition=HooksDefinition,t.HtmlLiteral=class{constructor(parts){this.tt=51,this.assign=kernel.PLATFORM.Ei,this.parts=parts}evaluate(t,i,s){const e=this.parts;let value,n="";for(let r=0,o=e.length;o>r;++r)null!=(value=e[r].evaluate(t,i,s))&&(n+=value);return n}connect(t,i,s){for(let e=0,n=this.parts.length;n>e;++e)this.parts[e].connect(t,i,s)}accept(t){return t.kl(this)}},t.HydrateAttributeInstruction=class{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}},t.HydrateElementInstruction=class{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}},t.HydrateTemplateController=class{constructor(def,res,instructions,link,parts){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.parts=parts,this.res=res}},t.IController=IController,t.IDOM=IDOM,t.IDOMInitializer=IDOMInitializer,t.IDirtyChecker=IDirtyChecker,t.IExpressionParser=IExpressionParser,t.IInstructionRenderer=IInstructionRenderer,t.ILifecycle=ILifecycle,t.ILifecycleRegistration=ILifecycleRegistration,t.INode=INode,t.IObserverLocator=IObserverLocator,t.IObserverLocatorRegistration=IObserverLocatorRegistration,t.IProjectorLocator=IProjectorLocator,t.IRenderLocation=IRenderLocation,t.IRenderer=IRenderer,t.IRendererRegistration=IRendererRegistration,t.IRenderingEngine=IRenderingEngine,t.ISanitizer=ISanitizer,t.ISignaler=ISignaler,t.ITargetAccessorLocator=ITargetAccessorLocator,t.ITargetObserverLocator=ITargetObserverLocator,t.ITargetedInstruction=ITargetedInstruction,t.ITemplateCompiler=ITemplateCompiler,t.ITemplateFactory=ITemplateFactory,t.IViewFactory=IViewFactory,t.If=If,t.IfRegistration=IfRegistration,t.Interpolation=class{constructor(parts,t){this.tt=24,this.assign=kernel.PLATFORM.Ei,this.parts=parts,this.it=void 0===t?kernel.PLATFORM.Yt:t,this.Ku=this.it.length>1,this.Qu=this.it[0]}evaluate(t,i,s){if(this.Ku){const e=this.it,parts=this.parts;let n=parts[0];for(let r=0,o=e.length;o>r;++r)n+=e[r].evaluate(t,i,s),n+=parts[r+1];return n}{const parts=this.parts;return parts[0]+this.Qu.evaluate(t,i,s)+parts[1]}}connect(t,i,s){}accept(t){return t.Rl(this)}},t.InterpolationBindingRendererRegistration=InterpolationBindingRendererRegistration,t.InterpolationInstruction=class{constructor(from,to){this.type="rf",this.from=from,this.to=to}},t.IteratorBindingInstruction=class{constructor(from,to){this.type="rk",this.from=from,this.to=to}},t.IteratorBindingRendererRegistration=IteratorBindingRendererRegistration,t.LetBindingInstruction=class{constructor(from,to){this.type="ri",this.from=from,this.to=to}},t.LetElementInstruction=class{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}},t.LetElementRendererRegistration=LetElementRendererRegistration,t.LifecycleTask=LifecycleTask,t.MultiInterpolationBinding=MultiInterpolationBinding,t.NodeSequence=NodeSequence,t.ObjectBindingPattern=class{constructor(t,i){this.tt=65557,this.keys=t,this.values=i}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.Bl(this)}},t.ObjectLiteral=ObjectLiteral,t.ObserverLocator=ObserverLocator,t.OneTimeBindingBehavior=OneTimeBindingBehavior,t.OneTimeBindingBehaviorRegistration=OneTimeBindingBehaviorRegistration,t.OneTimeBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.oneTime,this.oneTime=1,this.to=to}},t.OverrideContext=OverrideContext,t.PrimitiveLiteral=PrimitiveLiteral,t.PrimitiveObserver=PrimitiveObserver,t.PriorityBindingBehavior=PriorityBindingBehavior,t.PriorityBindingBehaviorRegistration=PriorityBindingBehaviorRegistration,t.PromiseTask=PromiseTask,t.PropertyAccessor=PropertyAccessor,t.PropertyBindingRendererRegistration=PropertyBindingRendererRegistration,t.Ref=Ref,t.RefBindingInstruction=class{constructor(from){this.type="rj",this.from=from}},t.RefBindingRendererRegistration=RefBindingRendererRegistration,t.Repeat=Repeat,t.RepeatRegistration=RepeatRegistration,t.Replaceable=Replaceable,t.ReplaceableRegistration=ReplaceableRegistration,t.RuntimeBasicConfiguration=RuntimeBasicConfiguration,t.SanitizeValueConverter=SanitizeValueConverter,t.SanitizeValueConverterRegistration=SanitizeValueConverterRegistration,t.Scope=Scope,t.SetPropertyInstruction=class{constructor(value,to){this.type="re",this.to=to,this.value=value}},t.SetPropertyRendererRegistration=SetPropertyRendererRegistration,t.SignalBindingBehavior=SignalBindingBehavior,t.SignalBindingBehaviorRegistration=SignalBindingBehaviorRegistration,t.TaggedTemplate=class{constructor(t,i,s,e){this.tt=1197,this.assign=kernel.PLATFORM.Ei,this.Yi=t,this.Yi.raw=i,this.gl=s,this.it=void 0===e?kernel.PLATFORM.Yt:e}evaluate(t,i,s){const e=this.it,n=e.length,r=Array(n);for(let o=0,c=n;c>o;++o)r[o]=e[o].evaluate(t,i,s);const o=this.gl.evaluate(t,i,s);if("function"!=typeof o)throw kernel.Reporter.error(207,this);return o.apply(null,[this.Yi].concat(r))}connect(t,i,s){const e=this.it;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s);this.gl.connect(t,i,s)}accept(t){return t.Tl(this)}},t.Template=Template,t.TemplateControllerRendererRegistration=TemplateControllerRendererRegistration,t.TerminalTask=class{constructor(t){this.done=0,this.oo=t.then instanceof Function?t:t.ho(),this.oo.then(()=>{this.done=1}).catch(t=>{throw t})}eo(){return 0}cancel(){}ho(){return this.oo}},t.ThrottleBindingBehavior=ThrottleBindingBehavior,t.ThrottleBindingBehaviorRegistration=ThrottleBindingBehaviorRegistration,t.ToViewBindingBehavior=ToViewBindingBehavior,t.ToViewBindingBehaviorRegistration=ToViewBindingBehaviorRegistration,t.ToViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.os,this.oneTime=0,this.to=to}},t.TwoWayBindingBehavior=TwoWayBindingBehavior,t.TwoWayBindingBehaviorRegistration=TwoWayBindingBehaviorRegistration,t.TwoWayBindingInstruction=class{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=t.BindingMode.us,this.oneTime=0,this.to=to}},t.Unary=class{constructor(t,i){this.tt=39,this.assign=kernel.PLATFORM.Ei,this.Gu=t,this.fl=i,this.evaluate=this[t]}evaluate(t,i,s){throw kernel.Reporter.error(208,this)}connect(t,i,s){this.fl.connect(t,i,s)}Il(t,i,s){this.fl.evaluate(t,i,s)}Vl(t,i,s){return typeof this.fl.evaluate(t,i,s)}Pl(t,i,s){return!this.fl.evaluate(t,i,s)}hl(t,i,s){return-this.fl.evaluate(t,i,s)}el(t,i,s){return+this.fl.evaluate(t,i,s)}accept(t){return t.$l(this)}},t.ValueConverter=class{constructor(t,name,i){this.tt=36913,this.fl=t,this.name=name,this.Ui=i,this.El=ValueConverterResource.Z(this.name)}evaluate(t,i,s){if(!s)throw kernel.Reporter.error(202,this);const e=s.get(this.El);if(!e)throw kernel.Reporter.error(205,this);if("toView"in e){const n=this.Ui,r=n.length,o=Array(r+1);o[0]=this.fl.evaluate(t,i,s);for(let e=0;r>e;++e)o[e+1]=n[e].evaluate(t,i,s);return e.os.call(e,...o)}return this.fl.evaluate(t,i,s)}assign(t,i,s,value){if(!s)throw kernel.Reporter.error(202,this);const e=s.get(this.El);if(!e)throw kernel.Reporter.error(205,this);return"fromView"in e&&(value=e.cs.call(e,value,...C(t,i,s,this.Ui))),this.fl.assign(t,i,s,value)}connect(t,i,s){if(null==i)throw kernel.Reporter.error(250,this);if(!s)throw kernel.Reporter.error(206,this);const e=s.Fh;if(!e)throw kernel.Reporter.error(202,this);this.fl.connect(t,i,s);const n=this.Ui;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,i,s);const r=e.get(this.El);if(!r)throw kernel.Reporter.error(205,this);const o=r.Ci;if(void 0===o)return;const c=e.get(ISignaler);for(let t=0,i=o.length;i>t;++t)c.Ai(o[t],s)}qh(t,i,s){const e=s.Fh,n=e.get(this.El).Ci;if(void 0===n)return;const r=e.get(ISignaler);for(let t=0,i=n.length;i>t;++t)r.ji(n[t],s)}accept(t){return t.Ll(this)}},t.ValueConverterResource=ValueConverterResource,t.ViewFactory=ViewFactory,t.With=With,t.WithRegistration=WithRegistration,t.addBinding=addBinding,t.addComponent=addComponent,t.arePureLiterals=arePureLiterals,t.bindable=function(t,i){let s;const e=function(t,i){arguments.length>1&&(s.Vr=i),Bindable.for(t.constructor).add(s)};return arguments.length>1?(s={},void e(t,i)):"string"==typeof t?(s={},e):(s=t||{},e)},t.bindingBehavior=function(t){return i=>BindingBehaviorResource.ki(t,i)},t.buildTemplateDefinition=buildTemplateDefinition,t.callsFunction=function(t){return 128==(128&t.tt)},t.cloneIndexMap=function(t){const i=t.slice();return i.ut=t.ut.slice(),i.isIndexMap=1,i},t.collectionSubscriberCollection=collectionSubscriberCollection,t.computed=function(t){return function(i,s){(i.computed||(i.computed={}))[s]=t}},t.connectable=connectable,t.connects=function(t){return 32==(32&t.tt)},t.containerless=function(t){return void 0===t?q:q(t)},t.copyIndexMap=function(t,i){const{length:s}=t,e=Array(s);let n=0;for(;s>n;)e[n]=t[n],++n;return e.ut=void 0!==i?i.slice(0):void 0!==t.ut?t.ut.slice(0):[],e.isIndexMap=1,e},t.createComputedObserver=createComputedObserver,t.createIndexMap=createIndexMap,t.createRenderContext=createRenderContext,t.customAttribute=function(t){return i=>CustomAttributeResource.ki(t,i)},t.customElement=function(t){return i=>CustomElementResource.ki(t,i)},t.disableArrayObservation=function(){for(const t of Kt)1==Et[t].lt&&def(Et,t,{...Wt,value:zt[t]})},t.disableMapObservation=function(){for(const t of Zt)1==Gt[t].lt&&si(Gt,t,{...ii,value:Yt[t]})},t.disableSetObservation=function(){for(const t of li)1==ni[t].lt&&fi(ni,t,{...di,value:ui[t]})},t.dynamicOptions=function(t){return void 0===t?K:K(t)},t.enableArrayObservation=enableArrayObservation,t.enableMapObservation=enableMapObservation,t.enableSetObservation=enableSetObservation,t.ensureExpression=ensureExpression,t.getCollectionObserver=getCollectionObserver,t.hasAncestor=function(t){return 256==(256&t.tt)},t.hasBind=hasBind,t.hasUnbind=hasUnbind,t.instructionRenderer=instructionRenderer,t.isAssignable=function(t){return 8192==(8192&t.tt)},t.isIndexMap=function(value){return value instanceof Array&&1==value.isIndexMap},t.isLeftHandSide=function(t){return 1024==(1024&t.tt)},t.isLiteral=isLiteral,t.isPrimary=function(t){return 512==(512&t.tt)},t.isPureLiteral=isPureLiteral,t.isResource=function(t){return 32768==(32768&t.tt)},t.isTargetedInstruction=function(value){const type=value.type;return"string"==typeof type&&2===type.length},t.observes=function(t){return 64==(64&t.tt)},t.proxySubscriberCollection=proxySubscriberCollection,t.subscriberCollection=subscriberCollection,t.templateController=function(t){return i=>CustomAttributeResource.ki("string"==typeof t?{isTemplateController:1,name:t}:{isTemplateController:1,...t},i)},t.useShadowDOM=function(t){function i(t){return t.shadowOptions=s,t}const s="function"!=typeof t&&t?t:Ki;return"function"==typeof t?i(t):i},t.valueConverter=function(t){return i=>ValueConverterResource.ki(t,i)},t})({},kernel);
