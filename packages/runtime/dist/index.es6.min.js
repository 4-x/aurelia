function __decorate(t,e,i,s){var r,n,o=arguments.length,c=3>o?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,i,s);else for(n=t.length-1;n>=0;n--)(r=t[n])&&(c=(3>o?r(c):o>3?r(e,i,c):r(e,i))||c);return o>3&&c&&Object.defineProperty(e,i,c),c}function subscriberCollection(){return function(t){const e=t.prototype;e.t=0,e.i=addSubscriber,e.s=removeSubscriber,e.o=hasSubscriber,e.l=hasSubscribers,e.u=callSubscribers,void 0===e.subscribe&&(e.subscribe=addSubscriber),void 0===e.unsubscribe&&(e.unsubscribe=removeSubscriber)}}function proxySubscriberCollection(){return function(t){const e=t.prototype;e.v=0,e.g=addProxySubscriber,e.p=removeProxySubscriber,e.m=hasProxySubscriber,e.T=hasProxySubscribers,e.R=callProxySubscribers,void 0===e.C&&(e.C=addProxySubscriber),void 0===e.O&&(e.O=removeProxySubscriber)}}function collectionSubscriberCollection(){return function(t){const e=t.prototype;e.B=0,e.I=addCollectionSubscriber,e.S=removeCollectionSubscriber,e.P=hasCollectionSubscriber,e.A=hasCollectionSubscribers,e.L=callCollectionSubscribers,void 0===e.$&&(e.$=addCollectionSubscriber),void 0===e.k&&(e.k=removeCollectionSubscriber)}}function addSubscriber(t){if(this.o(t))return 0;const e=this.t;return 0==(1&e)?(this.M=t,this.t|=1):0==(2&e)?(this.F=t,this.t|=2):0==(4&e)?(this.D=t,this.t|=4):0==(8&e)?(this.V=[t],this.t|=8):this.V.push(t),1}function addProxySubscriber(t){if(this.m(t))return 0;const e=this.v;return 0==(1&e)?(this.j=t,this.v|=1):0==(2&e)?(this.N=t,this.v|=2):0==(4&e)?(this.H=t,this.v|=4):0==(8&e)?(this.U=[t],this.v|=8):this.U.push(t),1}function addCollectionSubscriber(t){if(this.P(t))return 0;const e=this.B;return 0==(1&e)?(this.W=t,this.B|=1):0==(2&e)?(this.K=t,this.B|=2):0==(4&e)?(this.q=t,this.B|=4):0==(8&e)?(this.G=[t],this.B|=8):this.G.push(t),1}function removeSubscriber(t){const e=this.t;if((1&e)>0&&this.M===t)return this.M=void 0,this.t=1^(1|this.t),1;if((2&e)>0&&this.F===t)return this.F=void 0,this.t=2^(2|this.t),1;if((4&e)>0&&this.D===t)return this.D=void 0,this.t=4^(4|this.t),1;if((8&e)>0){const e=this.V;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return e.splice(i,1),1===s&&(this.t=8^(8|this.t)),1}return 0}function removeProxySubscriber(t){const e=this.v;if((1&e)>0&&this.j===t)return this.j=void 0,this.v=1^(1|this.v),1;if((2&e)>0&&this.N===t)return this.N=void 0,this.v=2^(2|this.v),1;if((4&e)>0&&this.H===t)return this.H=void 0,this.v=4^(4|this.v),1;if((8&e)>0){const e=this.U;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return e.splice(i,1),1===s&&(this.v=8^(8|this.v)),1}return 0}function removeCollectionSubscriber(t){const e=this.B;if((1&e)>0&&this.W===t)return this.W=void 0,this.B=1^(1|this.B),1;if((2&e)>0&&this.K===t)return this.K=void 0,this.B=2^(2|this.B),1;if((4&e)>0&&this.q===t)return this.q=void 0,this.B=4^(4|this.B),1;if((8&e)>0){const e=this.G;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return e.splice(i,1),1===s&&(this.B=8^(8|this.B)),1}return 0}function hasSubscribers(){return 0!==this.t}function hasProxySubscribers(){return 0!==this.v}function hasCollectionSubscribers(){return 0!==this.B}function hasSubscriber(t){const e=this.t;if((1&e)>0&&this.M===t)return 1;if((2&e)>0&&this.F===t)return 1;if((4&e)>0&&this.D===t)return 1;if((8&e)>0){const e=this.V;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return 1}return 0}function hasProxySubscriber(t){const e=this.v;if((1&e)>0&&this.j===t)return 1;if((2&e)>0&&this.N===t)return 1;if((4&e)>0&&this.H===t)return 1;if((8&e)>0){const e=this.U;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return 1}return 0}function hasCollectionSubscriber(t){const e=this.B;if((1&e)>0&&this.W===t)return 1;if((2&e)>0&&this.K===t)return 1;if((4&e)>0&&this.q===t)return 1;if((8&e)>0){const e=this.G;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return 1}return 0}function callSubscribers(t,e,i){const s=this.M,r=this.F,n=this.D;let o=this.V;if(void 0!==o&&(o=o.slice()),void 0!==s&&callSubscriber(s,t,e,i,void 0===s.id?0:this[s.id]),void 0!==r&&callSubscriber(r,t,e,i,void 0===r.id?0:this[r.id]),void 0!==n&&callSubscriber(n,t,e,i,void 0===n.id?0:this[n.id]),void 0!==o){const{length:s}=o;let r;for(let n=0;s>n;++n)void 0!==(r=o[n])&&callSubscriber(r,t,e,i,void 0===r.id?0:this[r.id])}}function callSubscriber(t,e,i,s,r){t.X(e,i,48^(48|s)|r)}function callProxySubscribers(t,e,i,s){const r=this.j,n=this.N,o=this.H;let c=this.U;if(void 0!==c&&(c=c.slice()),void 0!==r&&r.J(t,e,i,s),void 0!==n&&n.J(t,e,i,s),void 0!==o&&o.J(t,e,i,s),void 0!==c){const{length:r}=c;let n;for(let o=0;r>o;++o)void 0!==(n=c[o])&&n.J(t,e,i,s)}}function callCollectionSubscribers(t,e){const i=this.W,s=this.K,r=this.q;let n=this.G;if(void 0!==n&&(n=n.slice()),void 0!==i&&i.Y(t,e),void 0!==s&&s.Y(t,e),void 0!==r&&r.Y(t,e),void 0!==n){const{length:i}=n;let s;for(let r=0;i>r;++r)void 0!==(s=n[r])&&s.Y(t,e)}}function register(t){const e=BindingBehaviorResource.Z(this.description.name);t.register(Registration.singleton(e,this)),t.register(Registration.singleton(this,this))}function bindingBehavior(t){return e=>BindingBehaviorResource.tt(t,e)}function keyFrom(name){return`${this.name}:${name}`}function isType(t){return t.kind===this}function define(t,e){const i=e,s=i,r="string"==typeof t?{name:t}:t;return s.kind=BindingBehaviorResource,s.description=r,i.register=register,i}function register$1(t){const e=this.kind.Z(this.description.name);t.register(Registration.singleton(e,this)),t.register(Registration.singleton(this,this))}function valueConverter(t){return e=>ValueConverterResource.tt(t,e)}function keyFrom$1(name){return`${this.name}:${name}`}function isType$1(t){return t.kind===this}function define$1(t,e){const i=e,s="string"==typeof t?{name:t}:t;return i.kind=ValueConverterResource,i.description=s,i.register=register$1,i}function connects(t){return 32==(32&t.et)}function observes(t){return 64==(64&t.et)}function callsFunction(t){return 128==(128&t.et)}function hasAncestor(t){return 256==(256&t.et)}function isAssignable(t){return 8192==(8192&t.et)}function isLeftHandSide(t){return 1024==(1024&t.et)}function isPrimary(t){return 512==(512&t.et)}function isResource(t){return 32768==(32768&t.et)}function hasBind(t){return 2048==(2048&t.et)}function hasUnbind(t){return 4096==(4096&t.et)}function isLiteral(t){return 16384==(16384&t.et)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let e=0;t.length>e;++e)if(!isPureLiteral(t[e]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.et){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.it);case 17925:return 1}return 0}function evalList(t,e,i,s){const r=s.length,n=Array(r);for(let o=0;r>o;++o)n[o]=s[o].evaluate(t,e,i);return n}function getFunction(t,e,name){const i=null==e?null:e[name];if("function"==typeof i)return i;if(!(2097152&t)&&null==i)return null;throw Reporter.error(207,e,name,i)}function ensureValidStrategy(strategy){return 0==(strategy&mandatoryStrategy)?1|strategy:strategy}function ensureEnoughSlotNames(t){if(t===lastSlot){const e=slotNames.length=versionSlotNames.length=(lastSlot+=5)+1;for(let i=t+1;e>i;++i)slotNames[i]=`_observer${i}`,versionSlotNames[i]=`_observerVersion${i}`}}function addObserver(t){const e=null==this.st?0:this.st;let i=e;for(;i--&&this[slotNames[i]]!==t;);if(-1===i){for(i=0;this[slotNames[i]];)i++;this[slotNames[i]]=t,t.subscribe(this),t[this.id]|=16,i===e&&(this.st=i+1)}null==this.version&&(this.version=0),this[versionSlotNames[i]]=this.version,ensureEnoughSlotNames(i)}function observeProperty(t,e,i){Tracer.enabled&&Tracer.rt(this.constructor.name,"observeProperty",slice$2.call(arguments));const s=this.ot.nt(t,e,i);this.ht(s),Tracer.enabled&&Tracer.ct()}function unobserve(all){const t=this.st;let e,i;if(1==all)for(let s=0;t>s;++s)null!=(i=this[e=slotNames[s]])&&(this[e]=void 0,i.unsubscribe(this),i[this.id]&=-17);else{const s=this.version;for(let r=0;t>r;++r)this[versionSlotNames[r]]!==s&&null!=(i=this[e=slotNames[r]])&&(this[e]=void 0,i.unsubscribe(this),i[this.id]&=-17)}}function connectableDecorator(t){const e=t.prototype;return e.hasOwnProperty("observeProperty")||(e.at=observeProperty),e.hasOwnProperty("unobserve")||(e.unobserve=unobserve),e.hasOwnProperty("addObserver")||(e.ht=addObserver),t}function connectable(t){return null==t?connectableDecorator:connectableDecorator(t)}function copyIndexMap(t,e){const{length:i}=t,s=Array(i);let r=0;for(;i>r;)s[r]=t[r],++r;return s.lt=void 0!==e?e.slice(0):void 0!==t.lt?t.lt.slice(0):[],s.isIndexMap=1,s}function createIndexMap(t=0){const e=Array(t);let i=0;for(;t>i;)e[i]=i++;return e.lt=[],e.isIndexMap=1,e}function cloneIndexMap(t){const e=t.slice();return e.lt=t.lt.slice(),e.isIndexMap=1,e}function isIndexMap(value){return value instanceof Array&&1==value.isIndexMap}function sortCompare(t,e){return t===e?0:(e=null===e?"null":""+e)>(t=null===t?"null":""+t)?-1:1}function preSortCompare(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function insertionSort(t,e,from,to,i){let s,r,n,o,c,a,l;for(a=from+1;to>a;a++){for(s=t[a],r=e[a],l=a-1;l>=from&&(o=e[l],(c=i(n=t[l],s))>0);l--)t[l+1]=n,e[l+1]=o;t[l+1]=s,e[l+1]=r}}function quickSort(t,e,from,to,i){let s,r,n,o,c,a,l,u,d,f,v,b,g,p,m,T,R,y,C,O=0,B=0;for(;;){if(10>=to-from)return void insertionSort(t,e,from,to,i);o=e[from],c=e[to-1],n=t[O=from+(to-from>>1)],a=e[O],(l=i(s=t[from],r=t[to-1]))>0&&(f=s,v=o,s=r,o=c,r=f,c=v),0>(u=i(s,n))?(d=i(r,n))>0&&(f=r,v=c,r=n,c=a,n=f,a=v):(f=s,v=o,s=n,o=a,n=r,a=c,r=f,c=v),t[from]=s,e[from]=o,t[to-1]=n,e[to-1]=a,b=r,g=c,m=to-1,t[O]=t[p=from+1],e[O]=e[p],t[p]=b,e[p]=g;t:for(B=p+1;m>B;B++)if(R=e[B],0>(y=i(T=t[B],b)))t[B]=t[p],e[B]=e[p],t[p]=T,e[p]=R,p++;else if(y>0){do{if(--m==B)break t;y=i(C=t[m],b)}while(y>0);t[B]=t[m],e[B]=e[m],t[m]=T,e[m]=R,0>y&&(T=t[B],R=e[B],t[B]=t[p],e[B]=e[p],t[p]=T,e[p]=R,p++)}p-from>to-m?(quickSort(t,e,m,to,i),to=p):(quickSort(t,e,from,p,i),from=m)}}function enableArrayObservation(){for(const t of methods)1!=proto[t].ut&&def(proto,t,{...descriptorProps,value:observe[t]})}function disableArrayObservation(){for(const t of methods)1==proto[t].ut&&def(proto,t,{...descriptorProps,value:native[t]})}function getArrayObserver(t,e,i){return void 0===i.dt&&(i.dt=new ArrayObserver(t,e,i)),i.dt}function enableMapObservation(){for(const t of methods$1)1!=proto$1[t].ut&&def$1(proto$1,t,{...descriptorProps$1,value:observe$1[t]})}function disableMapObservation(){for(const t of methods$1)1==proto$1[t].ut&&def$1(proto$1,t,{...descriptorProps$1,value:native$1[t]})}function getMapObserver(t,e,i){return void 0===i.dt&&(i.dt=new MapObserver(t,e,i)),i.dt}function enableSetObservation(){for(const t of methods$2)1!=proto$2[t].ut&&def$2(proto$2,t,{...descriptorProps$2,value:observe$2[t]})}function disableSetObservation(){for(const t of methods$2)1==proto$2[t].ut&&def$2(proto$2,t,{...descriptorProps$2,value:native$2[t]})}function getSetObserver(t,e,i){return void 0===i.dt&&(i.dt=new SetObserver(t,e,i)),i.dt}function computed(t){return function(e,i){(e.computed||(e.computed={}))[i]=t}}function createComputedObserver(t,e,i,s,r,n,o){if(0==o.ft)return i.vt(r,n);if(o.get){const i=r.constructor.computed&&r.constructor.computed[n]||computedOverrideDefaults;return o.set?i.bt?new GetterObserver(t,i,r,n,o,e,s):new CustomSetterObserver(r,n,o):new GetterObserver(t,i,r,n,o,e,s)}throw Reporter.error(18,n)}function createGetterTraps(t,e,i){Tracer.enabled&&Tracer.rt("computed","createGetterTraps",slice$a.call(arguments));const s={get(s,r,n){if(Tracer.enabled&&Tracer.rt("computed","get",slice$a.call(arguments)),i.gt(r))return Tracer.enabled&&Tracer.ct(),Reflect.get(s,r,n);switch(toStringTag$1.call(s)){case"[object Array]":if(i.pt(e.Tt(t,s)),"length"===r)return Tracer.enabled&&Tracer.ct(),Reflect.get(s,r,s);case"[object Map]":if(i.pt(e.Rt(t,s)),"size"===r)return Tracer.enabled&&Tracer.ct(),Reflect.get(s,r,s);case"[object Set]":if(i.pt(e.yt(t,s)),"size"===r)return Tracer.enabled&&Tracer.ct(),Reflect.get(s,r,s);default:i.Ct(e.nt(t,s,r))}return Tracer.enabled&&Tracer.ct(),proxyOrValue(t,s,r,e,i)}};return Tracer.enabled&&Tracer.ct(),s}function proxyOrValue(t,e,i,s,r){const value=Reflect.get(e,i,e);return"function"==typeof value?e[i].bind(e):"object"!=typeof value||null===value?value:new Proxy(value,createGetterTraps(t,s,r))}function getPropertyDescriptor(t,name){let e=Object.getOwnPropertyDescriptor(t,name),i=Object.getPrototypeOf(t);for(;null==e&&null!=i;)e=Object.getOwnPropertyDescriptor(i,name),i=Object.getPrototypeOf(i);return e}function getCollectionObserver(t,e,i){const s=i instanceof Object?ProxyObserver.Ot(i):i;switch(toStringTag$2.call(i)){case"[object Array]":return getArrayObserver(t,e,s);case"[object Map]":return getMapObserver(t,e,s);case"[object Set]":return getSetObserver(t,e,s)}}function isBindingContext(t){return 1==t.Bt}function debounceCallSource(t,e,i){const s=this.wt;PLATFORM.global.clearTimeout(s.It),s.It=PLATFORM.global.setTimeout(()=>{this.St(t,e,i)},s.Pt)}function debounceCall(t,e,i){const s=this.wt;if(PLATFORM.global.clearTimeout(s.It),!(i&s.At))return s.oldValue=unset,void this.St(t,e,i);s.oldValue===unset&&(s.oldValue=e);const r=PLATFORM.global.setTimeout(()=>{const e=s.oldValue;s.oldValue=unset,this.St(t,e,i)},s.Pt);s.It=r}function throttle(t){const e=this.Lt,i=+new Date-e.$t;if(i>=e.Pt)return PLATFORM.global.clearTimeout(e.It),e.It=-1,e.$t=+new Date,void this.kt(t);if(e.newValue=t,-1===e.It){const t=PLATFORM.global.setTimeout(()=>{e.It=-1,e.$t=+new Date,this.kt(e.newValue)},e.Pt-i);e.It=t}}function bindable(t,e){let i;const s=function(t,e){arguments.length>1&&(i.Mt=e),Bindable.for(t.constructor).add(i)};return arguments.length>1?(i={},void s(t,e)):"string"==typeof t?(i={},s):(i=t||{},s)}function customElementKey(name){return`${customElementName}:${name}`}function customElementBehavior(t){return t.Ft}function customAttributeKey(name){return`${customAttributeName}:${name}`}function isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function buildTemplateDefinition(t,e,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,strategy){const def=new DefaultTemplateDefinition,i=arguments.length;switch(i){case 13:null!=strategy&&(def.strategy=ensureValidStrategy(strategy));case 12:null!=hasSlots&&(def.hasSlots=hasSlots);case 11:null!=shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!=containerless&&(def.containerless=containerless);case 9:null!=surrogates&&(def.surrogates=toArray(surrogates));case 8:null!=dependencies&&(def.dependencies=toArray(dependencies));case 7:null!=instructions&&(def.instructions=toArray(instructions));case 6:null!=bindables&&(def.bindables={...bindables});case 5:null!=build&&(def.build=1==build?buildRequired:0==build?buildNotRequired:{...build});case 4:null!=cache&&(def.cache=cache);case 3:null!=template&&(def.template=template);case 2:null!=t&&(t.bindables&&(def.bindables=Bindable.for(t).get()),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions),t.prototype&&(def.xt=new HooksDefinition(t.prototype))),"string"==typeof e?e.length>0&&(def.name=e):null!=e&&(def.strategy=ensureValidStrategy(e.strategy),templateDefinitionAssignables.forEach(t=>{e[t]&&(def[t]=e[t])}),templateDefinitionArrays.forEach(t=>{e[t]&&(def[t]=toArray(e[t]))}),e.bindables&&(def.bindables===PLATFORM.Dt?def.bindables=Bindable.for(e).get():Object.assign(def.bindables,e.bindables)))}return 2!==i||null===t||"string"!=typeof e&&"build"in e||(def.build=buildRequired),def}function registerAttribute(t){const e=this.description,i=this.kind.Z(e.name),aliases=e.aliases;t.register(Registration.transient(i,this)),t.register(Registration.transient(this,this));for(let e=0,s=aliases.length;s>e;++e){const s=this.kind.Z(aliases[e]);t.register(Registration.Vt(i,s))}}function customAttribute(t){return e=>CustomAttributeResource.tt(t,e)}function templateController(t){return e=>CustomAttributeResource.tt("string"==typeof t?{isTemplateController:1,name:t}:{isTemplateController:1,...t},e)}function dynamicOptionsDecorator(t){return t.Et=1,t}function dynamicOptions(t){return void 0===t?dynamicOptionsDecorator:dynamicOptionsDecorator(t)}function isType$2(t){return t.kind===this}function define$2(t,e){const i=e,s=i,r=createCustomAttributeDescription("string"==typeof t?{name:t}:t,i);return s.kind=CustomAttributeResource,s.description=r,i.register=registerAttribute,i}function createCustomAttributeDescription(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.jt:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.Nt:defaultBindingMode,Et:void 0===def.Et?0:def.Et,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:{...Bindable.for(t).get(),...Bindable.for(def).get()},strategy:ensureValidStrategy(def.strategy),xt:new HooksDefinition(t.prototype)}}function hasAsyncWork(value){return!(void 0===value||1==value.done)}function longestIncreasingSubsequence(t){const e=t.length;e>maxLen&&(maxLen=e,prevIndices=new Int32Array(e),tailIndices=new Int32Array(e));let i=0,s=0,r=0,n=0,o=0,c=0,a=0,l=0;for(;e>n;n++)if(-2!==(s=t[n])){if(-2!==(r=t[o=prevIndices[i]])&&s>r){tailIndices[n]=o,prevIndices[++i]=n;continue}for(c=0,a=i;a>c;)-2!==(r=t[prevIndices[l=c+a>>1]])&&s>r?c=l+1:a=l;((r=t[prevIndices[c]])>s||-2===r)&&(c>0&&(tailIndices[n]=prevIndices[c-1]),prevIndices[c]=n)}n=++i;const u=new Int32Array(n);for(s=prevIndices[i-1];i-- >0;)u[i]=s,s=tailIndices[s];for(;n-- >0;)prevIndices[n]=0;return u}function applyMutationsToIndices(t){let e=0,i=0;const s=t.length;for(let r=0;s>r;++r){for(;r-e>=t.lt[i];)++i,--e;-2===t[r]?++e:t[r]+=e}}function synchronizeIndices(t,e){const i=t.slice(),s=e.length;let to=0,from=0;for(;s>to;)-2!==(from=e[to])&&(t[to]=i[from]),++to}function registerElement(t){const e=this.kind.Z(this.description.name);t.register(Registration.transient(e,this)),t.register(Registration.transient(this,this))}function customElement(t){return e=>CustomElementResource.tt(t,e)}function isType$3(t){return t.kind===this}function define$3(t,e=null){if(!t)throw Reporter.error(70);const i=null==e?class{}:e,s=i,r=buildTemplateDefinition(i,t);return s.kind=CustomElementResource,i.description=r,i.register=registerElement,i}function useShadowDOM(t){function e(t){return t.shadowOptions=i,t}const i="function"!=typeof t&&t?t:defaultShadowOptions;return"function"==typeof t?e(t):e}function containerlessDecorator(t){return t.containerless=1,t}function containerless(t){return void 0===t?containerlessDecorator:containerlessDecorator(t)}function createRenderContext(dom,t,dependencies,e){const i=t._t(),s=new InstanceProvider,r=new InstanceProvider,n=new InstanceProvider,o=new ViewFactoryProvider,c=new InstanceProvider,a=i.get(IRenderer);return dom.zt(i,r),i.Ht(IViewFactory,o),i.Ht(IController,s),i.Ht(ITargetedInstruction,n),i.Ht(IRenderLocation,c),null!=dependencies&&i.register(...dependencies),e&&e.register(i),i.Ut=function(t,e,targets,i,host,parts){a.Ut(t,dom,this,e,targets,i,host,parts)},i.Wt=function(t,e,a,l,parts,u){return s.Kt(t),r.Kt(e),n.Kt(a),l&&o.Kt(l,parts),u&&c.Kt(u),i},i.qt=function(){o.qt(),s.qt(),n.qt(),r.qt(),c.qt()},i}function hasChildrenChanged(t){return null!=t&&"$childrenChanged"in t}function findElements(t){const e=[];for(let i=0,s=t.length;s>i;++i){const component=customElementBehavior(t[i]);null!=component&&e.push(component)}return e}function hasDescription(type){return null!=type.description}function createObservers(t,e,i,s){const r=null!=s.Qt?s.Qt:{},bindables=e.bindables,n=Object.getOwnPropertyNames(bindables),o=(2&i)>0,{length:c}=n;let name;for(let e=0;c>e;++e)null==r[name=n[e]]&&(r[name]=new SelfObserver(t,i,o?ProxyObserver.Xt(s).Gt:s,name,bindables[name].Jt));o||Reflect.defineProperty(s,"$observers",{Yt:0,value:r})}function getBindingContext(t,e){return 1==e.Zt||0==(2&t)?e:ProxyObserver.Xt(e).Gt}function instructionRenderer(t){return function(e){const i=function(...i){const s=new e(...i);return s.te=t,s};i.register=function(t){return Registration.singleton(IInstructionRenderer,i).register(t,IInstructionRenderer)};const s=Object.getOwnPropertyDescriptors(e);return Object.keys(s).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(i,t,s[t])}),i}}function ensureExpression(t,e,i){return"string"==typeof e?t.parse(e,i):e}function addBinding(t,e){Tracer.enabled&&Tracer.rt("Renderer","addBinding",slice$e.call(arguments)),null==t.ee?t.ee=[e]:t.ee.push(e),Tracer.enabled&&Tracer.ct()}function addComponent(t,component){Tracer.enabled&&Tracer.rt("Renderer","addComponent",slice$e.call(arguments)),null==t.ie?t.ie=[component]:t.ie.push(component),Tracer.enabled&&Tracer.ct()}function getTarget(t){return void 0!==t.se?t.se:t}var ProxyObserver_1,RuntimeError,RuntimeError$1,BindingMode,BindingStrategy,State,Hooks,LifecycleFlags,ExpressionKind,ViewModelKind,Priority,BindingType,SubscriberFlags,DelegationStrategy,CollectionKind,SelfObserver_1,TargetedInstructionType,ViewCompileFlags;import{Tracer,PLATFORM,Reporter,DI,Registration,isNumeric,kebabCase,toArray,nextId,compareNumber,RuntimeCompilationResources,IContainer,all,InstanceProvider,Profiler}from"@aurelia/kernel";const slice=[].slice,lookup=new WeakMap;let ProxySubscriberCollection=class{constructor(t,e,i){Tracer.enabled&&Tracer.rt("ProxySubscriberCollection","constructor",slice.call(arguments)),this.re=0,this.raw=e,this.key=i,this.Gt=t,this.subscribe=this.i,this.unsubscribe=this.s,e[i]instanceof Object&&(e[i]=ProxyObserver.Xt(e[i]).Gt),Tracer.enabled&&Tracer.ct()}ne(value,t){const e=this.raw[this.key];e!==value&&(this.raw[this.key]=value,this.u(value,e,18|t))}oe(){return this.raw[this.key]}he(t){}};ProxySubscriberCollection=__decorate([subscriberCollection()],ProxySubscriberCollection);let ProxyObserver=ProxyObserver_1=class{constructor(t){Tracer.enabled&&Tracer.rt("ProxyObserver","constructor",slice.call(arguments)),this.raw=t,this.Gt=new Proxy(t,this),lookup.set(t,this.Gt),this.ce={},Tracer.enabled&&Tracer.ct()}static ae(t){if(void 0===t.le){const e=lookup.get(t);return void 0===e?t:e}return t}static Ot(t){const e=t.le;return void 0===e?t:e}static Xt(t,e){let i;if(void 0===t.le){const e=lookup.get(t);i=void 0===e?new ProxyObserver_1(t):e.dt}else i=t.dt;if(void 0===e)return i;let s=i.ce[e];if(void 0===s){const r=this.Ot(t);s=i.ce[e]=new ProxySubscriberCollection(i.Gt,r,e)}return s}static ue(t){return void 0!==t.le}get(t,e,i){return"$observer"===e?this:"$raw"===e?t:t[e]}set(t,e,value,i){const s=t[e];return s!==value&&(t[e]=value,this.de(value,s,e),this.R(e,value,s,18)),1}deleteProperty(t,e){const i=t[e];return Reflect.deleteProperty(t,e)?(void 0!==i&&(this.de(void 0,i,e),this.R(e,void 0,i,18)),1):0}defineProperty(t,e,i){const s=t[e];return Reflect.defineProperty(t,e,i)?(i.value!==s&&(this.de(i.value,s,e),this.R(e,i.value,s,18)),1):0}apply(t,e,i=PLATFORM.jt){return Reflect.apply(t,t,i)}subscribe(t,e){if(void 0===e)this.g(t);else{let i=this.ce[e];void 0===i&&(i=this.ce[e]=new ProxySubscriberCollection(this.Gt,this.raw,e)),i.i(t)}}unsubscribe(t,e){if(void 0===e)this.p(t);else{const i=this.ce[e];void 0!==i&&i.s(t)}}de(t,e,i){const s=this.ce[i];void 0!==s&&s.u(t,e,18)}};ProxyObserver=ProxyObserver_1=__decorate([proxySubscriberCollection()],ProxyObserver);let SetterObserver=class{constructor(t,e,i,s){this.fe=t,this.ve=i,this.be=s,this.ge=void 0,this.oldValue=void 0,this.re=0,this.ut=0,this.pe=536870927&e,Tracer.enabled&&Tracer.ct()}oe(){return this.ge}ne(t,e){if(this.ut){const i=this.ge;this.ge=t,0===this.fe.Te.me?0==(4096&e)&&this.u(t,i,this.pe|e):this.re||(this.re=1,this.oldValue=i,this.fe.Te.add(this))}else this.ve[this.be]=t}he(t){this.re=0;const e=this.ge,i=this.oldValue;this.oldValue=e,this.u(e,i,this.pe|t)}subscribe(t){0==this.ut&&(this.ut=1,this.ge=this.ve[this.be],Reflect.defineProperty(this.ve,this.be,{Yt:1,ft:1,get:()=>this.oe(),set:value=>{this.ne(value,0)}})||Reporter.write(1,this.be,this.ve)),this.i(t)}};SetterObserver=__decorate([subscriberCollection()],SetterObserver);const slice$1=[].slice;(function(t){t[t.Re=250]="NilScope",t[t.ye=252]="NilOverrideContext",t[t.Ce=253]="NilParentScope"})(RuntimeError||(RuntimeError={}));class InternalObserversLookup{Xt(t,e,i,s){return Tracer.enabled&&Tracer.rt("InternalObserversLookup","getOrCreate",slice$1.call(arguments)),void 0===this[s]&&(this[s]=new SetterObserver(t,e,i,s)),Tracer.enabled&&Tracer.ct(),this[s]}}class BindingContext{constructor(t,value){if(this.Bt=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}static create(t,e,value){const i=new BindingContext(e,value);return 2&t?ProxyObserver.Xt(i).Gt:i}static get(t,name,e,i){if(Tracer.enabled&&Tracer.rt("BindingContext","get",slice$1.call(arguments)),null==t)throw Reporter.error(250);let s=t.Oe;if(e>0){for(;e>0;){if(null==s.Be)return void(Tracer.enabled&&Tracer.ct());e--,s=s.Be}return Tracer.enabled&&Tracer.ct(),name in s?s:s.se}for(;s&&!(name in s)&&!(s.se&&name in s.se);)s=s.Be;if(s)return Tracer.enabled&&Tracer.ct(),name in s?s:s.se;if((536870912&i)>0){const s=this.get(t.we[BindingContext.Ie],name,e,-536870913&i|16777216);if(null!==s)return Tracer.enabled&&Tracer.ct(),s}return 16777216&i?(Tracer.enabled&&Tracer.ct(),null):(Tracer.enabled&&Tracer.ct(),t.se||t.Oe)}Se(t){return Tracer.enabled&&Tracer.rt("BindingContext","getObservers",slice$1.call(arguments)),null==this.Qt&&(this.Qt=new InternalObserversLookup),Tracer.enabled&&Tracer.ct(),this.Qt}}BindingContext.Ie=null;class Scope{constructor(t,e){this.se=t,this.Oe=e,this.we=void 0}static create(t,e,i){return Tracer.enabled&&Tracer.rt("Scope","create",slice$1.call(arguments)),Tracer.enabled&&Tracer.ct(),new Scope(e,null==i?OverrideContext.create(t,e,i):i)}static Pe(t,e){if(Tracer.enabled&&Tracer.rt("Scope","fromOverride",slice$1.call(arguments)),null==e)throw Reporter.error(252);return Tracer.enabled&&Tracer.ct(),new Scope(e.se,e)}static Ae(t,e,i){if(Tracer.enabled&&Tracer.rt("Scope","fromParent",slice$1.call(arguments)),null==e)throw Reporter.error(253);return Tracer.enabled&&Tracer.ct(),new Scope(i,OverrideContext.create(t,i,e.Oe))}}class OverrideContext{constructor(t,e){this.Bt=1,this.se=t,this.Be=e}static create(t,e,i){return Tracer.enabled&&Tracer.rt("OverrideContext","create",slice$1.call(arguments)),Tracer.enabled&&Tracer.ct(),new OverrideContext(e,void 0===i?null:i)}Se(){return Tracer.enabled&&Tracer.rt("OverrideContext","getObservers",slice$1.call(arguments)),void 0===this.Qt&&(this.Qt=new InternalObserversLookup),Tracer.enabled&&Tracer.ct(),this.Qt}}const ISignaler=DI.$e("ISignaler").Le(t=>t.singleton(Signaler));class Signaler{constructor(){this.ke=Object.create(null)}Me(name,t){const e=this.ke[name];if(void 0!==e)for(const i of e.keys())i.X(void 0,void 0,16|t)}Fe(name,t){const e=this.ke,i=e[name];void 0===i?e[name]=new Set([t]):i.add(t)}xe(name,t){const e=this.ke[name];e&&e.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",Z:keyFrom,De:isType,tt:define},ValueConverterResource={name:"value-converter",Z:keyFrom$1,De:isType$1,tt:define$1};(function(t){t[t.Ve=202]="NoLocator",t[t.Ee=203]="NoBehaviorFound",t[t.je=204]="BehaviorAlreadyApplied",t[t.Ne=205]="NoConverterFound",t[t._e=206]="NoBinding",t[t.ze=207]="NotAFunction",t[t.He=208]="UnknownOperator",t[t.Re=250]="NilScope"})(RuntimeError$1||(RuntimeError$1={}));class BindingBehavior{constructor(t,name,e){this.et=38962,this.Ue=t,this.name=name,this.We=e,this.Ke=BindingBehaviorResource.Z(this.name)}evaluate(t,e,i){return this.Ue.evaluate(t,e,i)}assign(t,e,i,value){return this.Ue.assign(t,e,i,value)}connect(t,e,i){this.Ue.connect(t,e,i)}bind(t,e,i){if(null==e)throw Reporter.error(250,this);if(!i)throw Reporter.error(206,this);const s=i.qe;if(!s)throw Reporter.error(202,this);hasBind(this.Ue)&&this.Ue.bind(t,e,i);const r=this.Ke,n=s.get(r);if(!n)throw Reporter.error(203,this);void 0===i[r]?(i[r]=n,n.bind.call(n,t,e,i,...evalList(t,e,s,this.We))):Reporter.write(204,this)}Qe(t,e,i){const s=this.Ke;void 0!==i[s]?(i[s].Qe(t,e,i),i[s]=void 0):Reporter.write(204,this),hasUnbind(this.Ue)&&this.Ue.Qe(t,e,i)}accept(t){return t.Ge(this)}}class ValueConverter{constructor(t,name,e){this.et=36913,this.Ue=t,this.name=name,this.We=e,this.Xe=ValueConverterResource.Z(this.name)}evaluate(t,e,i){if(!i)throw Reporter.error(202,this);const s=i.get(this.Xe);if(!s)throw Reporter.error(205,this);if("toView"in s){const r=this.We,n=r.length,o=Array(n+1);o[0]=this.Ue.evaluate(t,e,i);for(let s=0;n>s;++s)o[s+1]=r[s].evaluate(t,e,i);return s.Nt.call(s,...o)}return this.Ue.evaluate(t,e,i)}assign(t,e,i,value){if(!i)throw Reporter.error(202,this);const s=i.get(this.Xe);if(!s)throw Reporter.error(205,this);return"fromView"in s&&(value=s.Je.call(s,value,...evalList(t,e,i,this.We))),this.Ue.assign(t,e,i,value)}connect(t,e,i){if(null==e)throw Reporter.error(250,this);if(!i)throw Reporter.error(206,this);const s=i.qe;if(!s)throw Reporter.error(202,this);this.Ue.connect(t,e,i);const r=this.We;for(let s=0,n=r.length;n>s;++s)r[s].connect(t,e,i);const n=s.get(this.Xe);if(!n)throw Reporter.error(205,this);const o=n.ke;if(void 0===o)return;const c=s.get(ISignaler);for(let t=0,e=o.length;e>t;++t)c.Fe(o[t],i)}Qe(t,e,i){const s=i.qe,r=s.get(this.Xe).ke;if(void 0===r)return;const n=s.get(ISignaler);for(let t=0,e=r.length;e>t;++t)n.xe(r[t],i)}accept(t){return t.Ye(this)}}class Assign{constructor(t,value){this.et=8208,this.target=t,this.value=value}evaluate(t,e,i){return this.target.assign(t,e,i,this.value.evaluate(t,e,i))}connect(t,e,i){}assign(t,e,i,value){return this.value.assign(t,e,i,value),this.target.assign(t,e,i,value)}accept(t){return t.Ze(this)}}class Conditional{constructor(t,e,i){this.et=63,this.assign=PLATFORM.ti,this.ei=t,this.ii=e,this.si=i}evaluate(t,e,i){return this.ei.evaluate(t,e,i)?this.ii.evaluate(t,e,i):this.si.evaluate(t,e,i)}connect(t,e,i){this.ei.evaluate(t,e,null)?(this.ei.connect(t,e,i),this.ii.connect(t,e,i)):(this.ei.connect(t,e,i),this.si.connect(t,e,i))}accept(t){return t.ri(this)}}class AccessThis{constructor(t=0){this.et=1793,this.assign=PLATFORM.ti,this.connect=PLATFORM.ti,this.ni=t}evaluate(t,e,i){if(null==e)throw Reporter.error(250,this);let s=e.Oe,r=this.ni;for(;r--&&s;)s=s.Be;return 1>r&&s?s.se:void 0}accept(t){return t.oi(this)}}AccessThis.hi=new AccessThis(0),AccessThis.ci=new AccessThis(1);class AccessScope{constructor(name,t=0){this.et=10082,this.name=name,this.ni=t}evaluate(t,e,i){return BindingContext.get(e,this.name,this.ni,t)[this.name]}assign(t,e,i,value){const s=BindingContext.get(e,this.name,this.ni,t);if(s instanceof Object)return void 0!==s.Qt&&void 0!==s.Qt[this.name]?(s.Qt[this.name].ne(value,t),value):s[this.name]=value}connect(t,e,i){const s=BindingContext.get(e,this.name,this.ni,t);i.at(t,s,this.name)}accept(t){return t.ai(this)}}class AccessMember{constructor(t,name){this.et=9323,this.object=t,this.name=name}evaluate(t,e,i){const s=this.object.evaluate(t,e,i);return null==s?s:s[this.name]}assign(t,e,i,value){const s=this.object.evaluate(t,e,i);return s instanceof Object?void 0!==s.Qt&&void 0!==s.Qt[this.name]?s.Qt[this.name].ne(value,t):s[this.name]=value:this.object.assign(t,e,i,{[this.name]:value}),value}connect(t,e,i){const s=this.object.evaluate(t,e,null);this.object.connect(t,e,i),s instanceof Object&&i.at(t,s,this.name)}accept(t){return t.li(this)}}class AccessKeyed{constructor(t,e){this.et=9324,this.object=t,this.key=e}evaluate(t,e,i){const s=this.object.evaluate(t,e,i);if(s instanceof Object)return s[this.key.evaluate(t,e,i)]}assign(t,e,i,value){return this.object.evaluate(t,e,i)[this.key.evaluate(t,e,i)]=value}connect(t,e,i){const s=this.object.evaluate(t,e,null);if(this.object.connect(t,e,i),s instanceof Object){this.key.connect(t,e,i);const r=this.key.evaluate(t,e,null);Array.isArray(s)&&isNumeric(r)?2&t&&i.at(t,s,r):i.at(t,s,r)}}accept(t){return t.ui(this)}}class CallScope{constructor(name,t,e=0){this.et=1448,this.assign=PLATFORM.ti,this.name=name,this.We=t,this.ni=e}evaluate(t,e,i){const s=evalList(t,e,i,this.We),r=BindingContext.get(e,this.name,this.ni,t),n=getFunction(t,r,this.name);if(n)return n.apply(r,s)}connect(t,e,i){const s=this.We;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i)}accept(t){return t.di(this)}}class CallMember{constructor(t,name,e){this.et=1161,this.assign=PLATFORM.ti,this.object=t,this.name=name,this.We=e}evaluate(t,e,i){const s=this.object.evaluate(t,e,i),r=evalList(t,e,i,this.We),n=getFunction(t,s,this.name);if(n)return n.apply(s,r)}connect(t,e,i){const s=this.object.evaluate(t,e,null);if(this.object.connect(t,e,i),getFunction(-2097153&t,s,this.name)){const s=this.We;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i)}}accept(t){return t.fi(this)}}class CallFunction{constructor(t,e){this.et=1162,this.assign=PLATFORM.ti,this.vi=t,this.We=e}evaluate(t,e,i){const s=this.vi.evaluate(t,e,i);if("function"==typeof s)return s.apply(null,evalList(t,e,i,this.We));if(2097152&t||null!=s)throw Reporter.error(207,this)}connect(t,e,i){const s=this.vi.evaluate(t,e,null);if(this.vi.connect(t,e,i),"function"==typeof s){const s=this.We;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i)}}accept(t){return t.bi(this)}}class Binary{constructor(t,e,i){this.et=46,this.assign=PLATFORM.ti,this.gi=t,this.left=e,this.right=i,this.evaluate=this[t]}evaluate(t,e,i){throw Reporter.error(208,this)}connect(t,e,i){const s=this.left.evaluate(t,e,null);this.left.connect(t,e,i),"&&"===this.gi&&!s||"||"===this.gi&&s||this.right.connect(t,e,i)}pi(t,e,i){return this.left.evaluate(t,e,i)&&this.right.evaluate(t,e,i)}mi(t,e,i){return this.left.evaluate(t,e,i)||this.right.evaluate(t,e,i)}Ti(t,e,i){return this.left.evaluate(t,e,i)==this.right.evaluate(t,e,i)}Ri(t,e,i){return this.left.evaluate(t,e,i)===this.right.evaluate(t,e,i)}yi(t,e,i){return this.left.evaluate(t,e,i)!=this.right.evaluate(t,e,i)}Ci(t,e,i){return this.left.evaluate(t,e,i)!==this.right.evaluate(t,e,i)}Oi(t,e,i){const s=this.right.evaluate(t,e,i);return"function"==typeof s?this.left.evaluate(t,e,i)instanceof s:0}Bi(t,e,i){const s=this.right.evaluate(t,e,i);return s instanceof Object?this.left.evaluate(t,e,i)in s:0}wi(t,e,i){return this.left.evaluate(t,e,i)+this.right.evaluate(t,e,i)}Ii(t,e,i){return this.left.evaluate(t,e,i)-this.right.evaluate(t,e,i)}Si(t,e,i){return this.left.evaluate(t,e,i)*this.right.evaluate(t,e,i)}Pi(t,e,i){return this.left.evaluate(t,e,i)/this.right.evaluate(t,e,i)}Ai(t,e,i){return this.left.evaluate(t,e,i)%this.right.evaluate(t,e,i)}Li(t,e,i){return this.left.evaluate(t,e,i)<this.right.evaluate(t,e,i)}$i(t,e,i){return this.left.evaluate(t,e,i)>this.right.evaluate(t,e,i)}ki(t,e,i){return this.left.evaluate(t,e,i)<=this.right.evaluate(t,e,i)}Mi(t,e,i){return this.left.evaluate(t,e,i)>=this.right.evaluate(t,e,i)}accept(t){return t.Fi(this)}}class Unary{constructor(t,e){this.et=39,this.assign=PLATFORM.ti,this.gi=t,this.Ue=e,this.evaluate=this[t]}evaluate(t,e,i){throw Reporter.error(208,this)}connect(t,e,i){this.Ue.connect(t,e,i)}xi(t,e,i){this.Ue.evaluate(t,e,i)}Di(t,e,i){return typeof this.Ue.evaluate(t,e,i)}Vi(t,e,i){return!this.Ue.evaluate(t,e,i)}Ii(t,e,i){return-this.Ue.evaluate(t,e,i)}wi(t,e,i){return+this.Ue.evaluate(t,e,i)}accept(t){return t.Ei(this)}}class PrimitiveLiteral{constructor(value){this.et=17925,this.assign=PLATFORM.ti,this.connect=PLATFORM.ti,this.value=value}evaluate(t,e,i){return this.value}accept(t){return t.ji(this)}}PrimitiveLiteral.Ni=new PrimitiveLiteral(void 0),PrimitiveLiteral._i=new PrimitiveLiteral(null),PrimitiveLiteral.zi=new PrimitiveLiteral(1),PrimitiveLiteral.Hi=new PrimitiveLiteral(0),PrimitiveLiteral.Ui=new PrimitiveLiteral("");class HtmlLiteral{constructor(parts){this.et=51,this.assign=PLATFORM.ti,this.parts=parts}evaluate(t,e,i){const s=this.parts;let value,r="";for(let n=0,o=s.length;o>n;++n)null!=(value=s[n].evaluate(t,e,i))&&(r+=value);return r}connect(t,e,i){for(let s=0,r=this.parts.length;r>s;++s)this.parts[s].connect(t,e,i)}accept(t){return t.Wi(this)}}class ArrayLiteral{constructor(t){this.et=17955,this.assign=PLATFORM.ti,this.elements=t}evaluate(t,e,i){const s=this.elements,r=s.length,n=Array(r);for(let o=0;r>o;++o)n[o]=s[o].evaluate(t,e,i);return n}connect(t,e,i){const s=this.elements;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i)}accept(t){return t.Ki(this)}}ArrayLiteral.Ui=new ArrayLiteral(PLATFORM.jt);class ObjectLiteral{constructor(t,e){this.et=17956,this.assign=PLATFORM.ti,this.keys=t,this.values=e}evaluate(t,e,i){const s={},r=this.keys,n=this.values;for(let o=0,c=r.length;c>o;++o)s[r[o]]=n[o].evaluate(t,e,i);return s}connect(t,e,i){const s=this.values;for(let r=0,n=this.keys.length;n>r;++r)s[r].connect(t,e,i)}accept(t){return t.qi(this)}}ObjectLiteral.Ui=new ObjectLiteral(PLATFORM.jt,PLATFORM.jt);class Template{constructor(t,e){this.et=17958,this.assign=PLATFORM.ti,this.Qi=t,this.it=void 0===e?PLATFORM.jt:e}evaluate(t,e,i){const s=this.it,r=this.Qi;let n=r[0];for(let o=0,c=s.length;c>o;++o)n+=s[o].evaluate(t,e,i),n+=r[o+1];return n}connect(t,e,i){const s=this.it;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i),r++}accept(t){return t.Gi(this)}}Template.Ui=new Template([""]);class TaggedTemplate{constructor(t,e,i,s){this.et=1197,this.assign=PLATFORM.ti,this.Qi=t,this.Qi.raw=e,this.vi=i,this.it=void 0===s?PLATFORM.jt:s}evaluate(t,e,i){const s=this.it,r=s.length,n=Array(r);for(let o=0,c=r;c>o;++o)n[o]=s[o].evaluate(t,e,i);const o=this.vi.evaluate(t,e,i);if("function"!=typeof o)throw Reporter.error(207,this);return o.apply(null,[this.Qi].concat(n))}connect(t,e,i){const s=this.it;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i);this.vi.connect(t,e,i)}accept(t){return t.Xi(this)}}class ArrayBindingPattern{constructor(t){this.et=65556,this.elements=t}evaluate(t,e,i){}assign(t,e,i,s){}connect(t,e,i){}accept(t){return t.Ji(this)}}class ObjectBindingPattern{constructor(t,e){this.et=65557,this.keys=t,this.values=e}evaluate(t,e,i){}assign(t,e,i,s){}connect(t,e,i){}accept(t){return t.Yi(this)}}class BindingIdentifier{constructor(name){this.et=65558,this.name=name}evaluate(t,e,i){return this.name}connect(t,e,i){}accept(t){return t.Zi(this)}}const toStringTag={}.toString;class ForOfStatement{constructor(t,e){this.et=6199,this.assign=PLATFORM.ti,this.ts=t,this.es=e}evaluate(t,e,i){return this.es.evaluate(t,e,i)}count(t,e){return CountForOfStatement[toStringTag.call(e)](e)}ss(t,e,i){IterateForOfStatement[toStringTag.call(e)](33554432|t,e,i)}connect(t,e,i){this.ts.connect(t,e,i),this.es.connect(t,e,i)}bind(t,e,i){hasBind(this.es)&&this.es.bind(t,e,i)}Qe(t,e,i){hasUnbind(this.es)&&this.es.Qe(t,e,i)}accept(t){return t.rs(this)}}class Interpolation{constructor(parts,t){this.et=24,this.assign=PLATFORM.ti,this.parts=parts,this.it=void 0===t?PLATFORM.jt:t,this.ns=this.it.length>1,this.os=this.it[0]}evaluate(t,e,i){if(this.ns){const s=this.it,parts=this.parts;let r=parts[0];for(let n=0,o=s.length;o>n;++n)r+=s[n].evaluate(t,e,i),r+=parts[n+1];return r}{const parts=this.parts;return parts[0]+this.os.evaluate(t,e,i)+parts[1]}}connect(t,e,i){}accept(t){return t.hs(this)}}const proxyAndOriginalArray=33554434,IterateForOfStatement={cs(t,e,i){if(33554434==(33554434&t)){const t=ProxyObserver.Ot(e),s=t.length;let r,n=0;for(;s>n;++n)(r=t[n])instanceof Object&&(r=t[n]=ProxyObserver.Xt(r).Gt),i(t,n,r)}else for(let t=0,s=e.length;s>t;++t)i(e,t,e[t])},as(t,e,i){const s=Array(e.size);let r=-1;for(const t of e.entries())s[++r]=t;IterateForOfStatement["cs"](-33554433&t,s,i)},ls(t,e,i){const s=Array(e.size);let r=-1;for(const t of e.keys())s[++r]=t;IterateForOfStatement["cs"](-33554433&t,s,i)},us(t,e,i){const s=Array(e);for(let t=0;e>t;++t)s[t]=t;IterateForOfStatement["cs"](-33554433&t,s,i)},ds(t,e,i){},fs(t,e,i){}},CountForOfStatement={cs:t=>t.length,as:t=>t.size,ls:t=>t.size,us:t=>t,ds:()=>0,fs:()=>0};(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Nt=2]="toView",BindingMode[BindingMode.Je=4]="fromView",BindingMode[BindingMode.vs=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode={})),(function(BindingStrategy){BindingStrategy[BindingStrategy.bs=1]="getterSetter",BindingStrategy[BindingStrategy.gs=2]="proxies"})(BindingStrategy||(BindingStrategy={}));const mandatoryStrategy=3;(function(State){State[State.ps=0]="none",State[State.ms=1]="isBinding",State[State.Ts=2]="isUnbinding",State[State.Rs=4]="isBound",State[State.ys=5]="isBoundOrBinding",State[State.Cs=6]="isBoundOrUnbinding",State[State.Os=8]="isAttaching",State[State.Bs=16]="isDetaching",State[State.ws=32]="isAttached",State[State.Is=40]="isAttachedOrAttaching",State[State.Ss=48]="isAttachedOrDetaching",State[State.Ps=64]="isMounted",State[State.As=128]="isCached",State[State.Ls=256]="needsBind",State[State.$s=512]="needsUnbind",State[State.ks=1024]="needsAttach",State[State.Ms=2048]="needsDetach",State[State.Fs=4096]="needsMount",State[State.xs=8192]="needsUnmount",State[State.Ds=16384]="hasLockedScope",State[State.Vs=32768]="canBeCached",State[State.Es=65536]="inBoundQueue",State[State.js=131072]="inUnboundQueue",State[State.Ns=262144]="inAttachedQueue",State[State._s=524288]="inDetachedQueue",State[State.zs=1048576]="inMountQueue",State[State.Hs=2097152]="inUnmountQueue"})(State||(State={})),(function(Hooks){Hooks[Hooks.ps=1]="none",Hooks[Hooks.Us=2]="hasCreated",Hooks[Hooks.Ws=4]="hasBinding",Hooks[Hooks.Ks=8]="hasBound",Hooks[Hooks.qs=16]="hasAttaching",Hooks[Hooks.Qs=32]="hasAttached",Hooks[Hooks.Gs=64]="hasDetaching",Hooks[Hooks.Xs=128]="hasDetached",Hooks[Hooks.Js=256]="hasUnbinding",Hooks[Hooks.Ys=512]="hasUnbound",Hooks[Hooks.Zs=1024]="hasRender",Hooks[Hooks.tr=2048]="hasCaching"})(Hooks||(Hooks={})),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.ps=0]="none",LifecycleFlags[LifecycleFlags.er=536870927]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.ir=536870912]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.sr=15]="bindingStrategy",LifecycleFlags[LifecycleFlags.rr=1]="getterSetterStrategy",LifecycleFlags[LifecycleFlags.nr=2]="proxyStrategy",LifecycleFlags[LifecycleFlags.update=48]="update",LifecycleFlags[LifecycleFlags.or=16]="updateTargetInstance",LifecycleFlags[LifecycleFlags.hr=32]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524224]="from",LifecycleFlags[LifecycleFlags.cr=960]="fromFlush",LifecycleFlags[LifecycleFlags.ar=64]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.lr=128]="fromSyncFlush",LifecycleFlags[LifecycleFlags.ur=256]="fromTick",LifecycleFlags[LifecycleFlags.dr=512]="fromBatch",LifecycleFlags[LifecycleFlags.vr=1024]="fromStartTask",LifecycleFlags[LifecycleFlags.br=2048]="fromStopTask",LifecycleFlags[LifecycleFlags.gr=4096]="fromBind",LifecycleFlags[LifecycleFlags.pr=8192]="fromUnbind",LifecycleFlags[LifecycleFlags.mr=16384]="fromAttach",LifecycleFlags[LifecycleFlags.Tr=32768]="fromDetach",LifecycleFlags[LifecycleFlags.Rr=65536]="fromCache",LifecycleFlags[LifecycleFlags.yr=131072]="fromDOMEvent",LifecycleFlags[LifecycleFlags.Cr=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.Or=524288]="allowPublishRoundtrip",LifecycleFlags[LifecycleFlags.Br=1048576]="isPublishing",LifecycleFlags[LifecycleFlags.wr=2097152]="mustEvaluate",LifecycleFlags[LifecycleFlags.Ir=4194304]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.Sr=8388608]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Pr=16777216]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Ar=33554432]="isOriginalArray",LifecycleFlags[LifecycleFlags.Lr=67108864]="isCollectionMutation",LifecycleFlags[LifecycleFlags.$r=134217728]="updateOneTimeBindings",LifecycleFlags[LifecycleFlags.kr=268435456]="reorderNodes"})(LifecycleFlags||(LifecycleFlags={})),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Mr=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Fr=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind={})),(function(ViewModelKind){ViewModelKind[ViewModelKind.customElement=0]="customElement",ViewModelKind[ViewModelKind.customAttribute=1]="customAttribute",ViewModelKind[ViewModelKind.xr=2]="synthetic"})(ViewModelKind||(ViewModelKind={}));const IController=DI.$e("IController").Dr(),IViewFactory=DI.$e("IViewFactory").Dr();class LinkedCallback{get Vr(){let t=this;for(;void 0!==t.Er&&t.Er.jr===this.jr;)t=t.Er;return t}get $t(){let t=this;for(;void 0!==t.next&&t.next.jr===this.jr;)t=t.next;return t}constructor(t,e,i=16384,s=0){this.Nr=t,this.context=e,this.jr=i,this._r=s,this.next=void 0,this.Er=void 0,this.zr=0}Hr(t,e){return this.Nr===t&&this.context===e}call(t){if(void 0!==this.Nr&&(void 0!==this.context?this.Nr.call(this.context,t):this.Nr(t)),this._r)return this.Ur(1);if(this.zr){const t=this.next;return this.next=void 0,t}return this.next}rotate(){if(void 0===this.Er||this.Er.jr>this.jr)return;const{Vr:t,$t:e}=this,i=t.Er,s=e.next,r=this.Er;this.Er=i,void 0!==i&&(i.next=this),e.next=t,t.Er=e,r.next=s,void 0!==s&&(s.Er=r)}link(t){this.Er=t,void 0!==t.next&&(t.next.Er=this),this.next=t.next,t.next=this}Ur(t=0){if(this.zr=1,this.Nr=void 0,this.context=void 0,void 0!==this.Er&&(this.Er.next=this.next),void 0!==this.next&&(this.next.Er=this.Er),this.Er=void 0,t){const{next:t}=this;return this.next=void 0,t}return this.next}}(function(Priority){Priority[Priority.Wr=32768]="preempt",Priority[Priority.high=28672]="high",Priority[Priority.bind=24576]="bind",Priority[Priority.Kr=20480]="attach",Priority[Priority.qr=16384]="normal",Priority[Priority.Qr=12288]="propagate",Priority[Priority.connect=8192]="connect",Priority[Priority.low=4096]="low"})(Priority||(Priority={}));const ILifecycle=DI.$e("ILifecycle").Le(t=>t.singleton(Lifecycle)),{min,max}=Math;class BoundQueue{constructor(t){this.fe=t,this.me=0,this.head=void 0,this.Gr=void 0}Xr(){++this.me}end(t){void 0===t&&(t=0),0==--this.me&&this.process(t)}Jr(t,e){this.Xr(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.Yr=this.Gr,this.Gr.Zr=t),this.Gr=t,t.state|=65536}remove(t){void 0!==t.Yr&&(t.Yr.Zr=t.Zr),void 0!==t.Zr&&(t.Zr.Yr=t.Yr),t.Yr=void 0,t.Zr=void 0,this.Gr===t&&(this.Gr=t.Yr),this.head===t&&(this.head=t.Zr),t.state=65536^(65536|t.state)}process(t){for(;void 0!==this.head;){let e,i=this.head;this.head=this.Gr=void 0;do{i.state=65536^(65536|i.state),i.bound(t),e=i.Zr,i.Zr=void 0,i.Yr=void 0,i=e}while(void 0!==i)}}}class UnboundQueue{constructor(t){this.fe=t,this.me=0,this.head=void 0,this.Gr=void 0}Xr(){++this.me}end(t){void 0===t&&(t=0),0==--this.me&&this.process(t)}Jr(t,e){this.Xr(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.tn=this.Gr,this.Gr.en=t),this.Gr=t,t.state|=131072}remove(t){void 0!==t.tn&&(t.tn.en=t.en),void 0!==t.en&&(t.en.tn=t.tn),t.tn=void 0,t.en=void 0,this.Gr===t&&(this.Gr=t.tn),this.head===t&&(this.head=t.en),t.state=131072^(131072|t.state)}process(t){for(;void 0!==this.head;){let e,i=this.head;this.head=this.Gr=void 0;do{i.state=131072^(131072|i.state),i.in(t),e=i.en,i.en=void 0,i.tn=void 0,i=e}while(void 0!==i)}}}class AttachedQueue{constructor(t){this.fe=t,this.me=0,this.head=void 0,this.Gr=void 0}Xr(){++this.me}end(t){void 0===t&&(t=0),0==--this.me&&(this.fe.mount.process(t),this.process(t))}Jr(t,e){this.Xr(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.sn=this.Gr,this.Gr.rn=t),this.Gr=t,t.state|=262144}remove(t){void 0!==t.sn&&(t.sn.rn=t.rn),void 0!==t.rn&&(t.rn.sn=t.sn),t.sn=void 0,t.rn=void 0,this.Gr===t&&(this.Gr=t.sn),this.head===t&&(this.head=t.rn),t.state=262144^(262144|t.state)}process(t){for(;void 0!==this.head;){let e,i=this.head;this.head=this.Gr=void 0;do{i.state=262144^(262144|i.state),i.nn(t),e=i.rn,i.rn=void 0,i.sn=void 0,i=e}while(void 0!==i)}}}class DetachedQueue{constructor(t){this.fe=t,this.me=0,this.head=void 0,this.Gr=void 0}Xr(){++this.me}end(t){void 0===t&&(t=0),0==--this.me&&(this.fe.unmount.process(t),this.process(t))}Jr(t,e){this.Xr(),t(),this.end(e)}add(t){void 0===this.head?this.head=t:(t.on=this.Gr,this.Gr.hn=t),this.Gr=t,t.state|=524288}remove(t){void 0!==t.on&&(t.on.hn=t.hn),void 0!==t.hn&&(t.hn.on=t.on),t.on=void 0,t.hn=void 0,this.Gr===t&&(this.Gr=t.on),this.head===t&&(this.head=t.hn),t.state=524288^(524288|t.state)}process(t){for(;void 0!==this.head;){let e,i=this.head;this.head=this.Gr=void 0;do{i.state=524288^(524288|i.state),i.cn(t),e=i.hn,i.hn=void 0,i.on=void 0,i=e}while(void 0!==i)}}}class MountQueue{constructor(t){this.fe=t,this.head=void 0,this.Gr=void 0}add(t){(2097152&t.state)>0?this.fe.unmount.remove(t):(void 0===this.head?this.head=t:(t.an=this.Gr,this.Gr.ln=t),this.Gr=t,t.state|=1048576)}remove(t){void 0!==t.an&&(t.an.ln=t.ln),void 0!==t.ln&&(t.ln.an=t.an),t.an=void 0,t.ln=void 0,this.Gr===t&&(this.Gr=t.an),this.head===t&&(this.head=t.ln),t.state=1048576^(1048576|t.state)}process(t){for(;void 0!==this.head;){let e,i=this.head;this.head=this.Gr=void 0;do{i.state=1048576^(1048576|i.state),i.mount(t),e=i.ln,i.ln=void 0,i.an=void 0,i=e}while(void 0!==i)}}}class UnmountQueue{constructor(t){this.fe=t,this.head=void 0,this.Gr=void 0}add(t){(1048576&t.state)>0?this.fe.mount.remove(t):(void 0===this.head?this.head=t:(t.un=this.Gr,this.Gr.dn=t),this.Gr=t,t.state|=2097152)}remove(t){void 0!==t.un&&(t.un.dn=t.dn),void 0!==t.dn&&(t.dn.un=t.un),t.un=void 0,t.dn=void 0,this.Gr===t&&(this.Gr=t.un),this.head===t&&(this.head=t.dn),t.state=2097152^(2097152|t.state)}process(t){for(;void 0!==this.head;){let e,i=this.head;this.head=this.Gr=void 0;do{i.state=2097152^(2097152|i.state),i.unmount(t),e=i.dn,i.dn=void 0,i.un=void 0,i=e}while(void 0!==i)}}}class BatchQueue{constructor(t){this.fe=t,this.fn=[],this.me=0}Xr(){++this.me}end(t){void 0===t&&(t=0),0==--this.me&&this.process(t)}Jr(t,e){this.Xr(),t(),this.end(e)}add(t){this.fn.push(t)}remove(t){const e=this.fn.indexOf(t);e>-1&&this.fn.splice(e,1)}process(t){for(t|=512;this.fn.length>0;){const e=this.fn.slice();this.fn=[];const{length:i}=e;for(let s=0;i>s;++s)e[s].he(t)}}}class Lifecycle{get vn(){return 1e3/this.bn}get gn(){return 1e3/this.pn}set gn(t){this.pn=1e3/min(max(0,min(this.mn,t)),60)}get mn(){return this.Tn>0?1e3/this.Tn:60}set mn(t){this.Tn=60>t?1e3/min(max(1,max(this.gn,t)),60):0}constructor(){this.Rn=new LinkedCallback(void 0,void 0,1/0),this.yn=void 0,this.Cn=0,this.On=0,this.Bn=-1,this.wn=-1,this.In=0,this.Te=new BatchQueue(this),this.mount=new MountQueue(this),this.unmount=new UnmountQueue(this),this.bound=new BoundQueue(this),this.in=new UnboundQueue(this),this.nn=new AttachedQueue(this),this.cn=new DetachedQueue(this),this.Tn=0,this.pn=1e3/30,this.bn=0,this.Sn=new Promise(t=>{this.Pn=t}),this.An=(t=>{this.Bn=-1,this.In&&(this.Ln(960,t),this.In&&-1===this.Bn&&void 0!==this.Rn.next&&(this.Bn=PLATFORM.requestAnimationFrame(this.An)),++this.Cn>1&&(this.Pn(t),this.Sn=new Promise(t=>{this.Pn=t})))}),this.$n=0,this.kn=0,this.Mn=0,this.Fn=1}static register(t){return Registration.singleton(ILifecycle,this).register(t)}xn(){this.In?-1===this.Bn&&void 0!==this.Rn.next&&(this.wn=PLATFORM.now(),this.Bn=PLATFORM.requestAnimationFrame(this.An)):(this.In=1,-1===this.Bn&&void 0!==this.Rn.next&&(this.wn=PLATFORM.now(),this.Bn=PLATFORM.requestAnimationFrame(this.An)))}Dn(){this.In?(this.In=0,-1!==this.Bn&&(PLATFORM.cancelAnimationFrame(this.Bn),this.Bn=-1)):-1!==this.Bn&&(PLATFORM.cancelAnimationFrame(this.Bn),this.Bn=-1)}Vn(t,e,i=16384,s=0){const r=new LinkedCallback(t,e,i,s);let n=this.Rn,o=n.next;if(void 0===o)r.link(n);else{do{if(i>o.jr||i===o.jr&&s&&!o._r){r.link(n);break}n=o,o=o.next}while(void 0!==o);void 0===r.Er&&r.link(n)}void 0===r.next&&(this.yn=r),this.xn()}En(t,e){let i=this.Rn.next;for(;void 0!==i;)i=i.Hr(t,e)?i.Ur():i.next}Ln(t,e=PLATFORM.now()){if(!this.On){if(this.On=1,e>this.wn){const i=this.bn=e-this.wn;if(this.Tn>i+1)return;let s=0;this.Fn=this.Mn&&this.pn>0?min(max(this.Fn*(this.pn/i),.1),10):1;const r=e+max(this.pn*this.Fn,1),n=e+max(this.pn*this.Fn*5,5),o=e+max(this.pn*this.Fn*15,15);t|=256;do{this.$n=0;let e=this.Rn.next;for(;void 0!==e;){if(10==++s&&(s=0,this.kn)){const{jr:t}=e,i=PLATFORM.now();if(t>4096){if(28672>t){if(i>=n){if(e.rotate(),null==e.$t||null==e.$t.next)break;e=e.$t.next}}else if(i>=o){if(e.rotate(),null==e.$t||null==e.$t.next)break;e=e.$t.next}}else if(i>=r){if(e.rotate(),null==e.$t||null==e.$t.next)break;e=e.$t.next}}e=e.call(t)}}while(this.$n>0);void 0===this.Rn.next&&this.Dn()}this.wn=e,this.On=0}}jn(t=1){this.kn=1,this.Mn=1==t}Nn(){this.kn=0}}const slice$2=[].slice,slotNames=[],versionSlotNames=[];let lastSlot=-1;ensureEnoughSlotNames(-1);let value=0;connectable._n=(t=>{t.id=++value});const slice$3=[].slice,{oneTime,Nt:toView,Je:fromView}=BindingMode,toViewOrOneTime=toView|oneTime;let Binding=class{constructor(t,e,i,mode,s,r){connectable._n(this),this.$state=0,this.$lifecycle=r.get(ILifecycle),this.$scope=void 0,this.qe=r,this.mode=mode,this.ot=s,this.zn=t,this.target=e,this.Hn=i,this.Un=void 0,this.pe=0}Wn(value,t){this.Un.ne(value,t|=this.pe)}Kn(value,t){this.zn.assign(t|=this.pe,this.$scope,this.qe,value)}X(t,e,i){if(Tracer.enabled&&Tracer.rt("Binding","handleChange",slice$3.call(arguments)),0!=(4&this.$state)){if((16&(i|=this.pe))>0){const e=this.Un.oe();return(10082!==this.zn.et||this.st>1)&&(t=this.zn.evaluate(i,this.$scope,this.qe)),t!==e&&this.Wn(t,i),0==(this.mode&oneTime)&&(this.version++,this.zn.connect(i,this.$scope,this),this.unobserve(0)),void(Tracer.enabled&&Tracer.ct())}if((32&i)>0)return t!==this.zn.evaluate(i,this.$scope,this.qe)&&this.Kn(t,i),void(Tracer.enabled&&Tracer.ct());throw Tracer.enabled&&Tracer.ct(),Reporter.error(15,i)}Tracer.enabled&&Tracer.ct()}qn(t,e){if(Tracer.enabled&&Tracer.rt("Binding","$bind",slice$3.call(arguments)),4&this.$state){if(this.$scope===e)return void(Tracer.enabled&&Tracer.ct());this.Qn(4096|t)}this.$state|=1,this.pe=536870927&t,this.$scope=e;let i=this.zn;hasBind(i)&&i.bind(t,e,this);let s=this.Un;s||(s=this.Un=this.mode&fromView?this.ot.nt(t,this.target,this.Hn):this.ot.Gn(t,this.target,this.Hn)),this.mode!==BindingMode.oneTime&&s.bind&&s.bind(t),i=this.zn,this.mode&toViewOrOneTime&&this.Wn(i.evaluate(t,e,this.qe),t),this.mode&toView&&i.connect(t,e,this),this.mode&fromView&&(s.subscribe(this),s[this.id]|=32),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.ct()}Qn(t){Tracer.enabled&&Tracer.rt("Binding","$unbind",slice$3.call(arguments)),4&this.$state?(this.$state|=2,this.pe=0,hasUnbind(this.zn)&&this.zn.Qe(t,this.$scope,this),this.$scope=void 0,this.Un.Qe&&this.Un.Qe(t),this.Un.unsubscribe&&(this.Un.unsubscribe(this),this.Un[this.id]&=-33),this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.ct()):Tracer.enabled&&Tracer.ct()}};Binding=__decorate([connectable()],Binding);const slice$4=[].slice;class Call{constructor(t,e,i,s,r){this.$state=0,this.qe=r,this.zn=t,this.Un=s.nt(0,e,i)}Xn(t){Tracer.enabled&&Tracer.rt("Call","callSource",slice$4.call(arguments));const e=this.$scope.Oe;Object.assign(e,t);const i=this.zn.evaluate(2097152,this.$scope,this.qe);for(const i in t)Reflect.deleteProperty(e,i);return Tracer.enabled&&Tracer.ct(),i}qn(t,e){if(Tracer.enabled&&Tracer.rt("Call","$bind",slice$4.call(arguments)),4&this.$state){if(this.$scope===e)return void(Tracer.enabled&&Tracer.ct());this.Qn(4096|t)}this.$state|=1,this.$scope=e,hasBind(this.zn)&&this.zn.bind(t,e,this),this.Un.ne(t=>this.Xn(t),t),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.ct()}Qn(t){Tracer.enabled&&Tracer.rt("Call","$unbind",slice$4.call(arguments)),4&this.$state?(this.$state|=2,hasUnbind(this.zn)&&this.zn.Qe(t,this.$scope,this),this.$scope=void 0,this.Un.ne(null,t),this.$state&=-7,Tracer.enabled&&Tracer.ct()):Tracer.enabled&&Tracer.ct()}at(t,e,i){}X(t,e,i){}}const IExpressionParser=DI.$e("IExpressionParser").Le(t=>t.singleton(ExpressionParser));class ExpressionParser{constructor(){this.Jn=Object.create(null),this.Yn=Object.create(null),this.Zn=Object.create(null)}parse(t,e){switch(e){case 2048:{let i=this.Zn[t];return void 0===i&&(i=this.Zn[t]=this.eo(t,e)),i}case 539:{let i=this.Yn[t];return void 0===i&&(i=this.Yn[t]=this.eo(t,e)),i}default:{if(0===t.length&&55&e)return PrimitiveLiteral.Ui;let i=this.Jn[t];return void 0===i&&(i=this.Jn[t]=this.eo(t,e)),i}}}cache(t){const{Yn:e,Jn:i,Zn:s}=this;for(const r in t){const n=t[r];switch(n.et){case 24:s[r]=n;break;case 6199:e[r]=n;break;default:i[r]=n}}}eo(t,e){try{const parts=t.split("."),e=parts[0];let i;i=e.endsWith("()")?new CallScope(e.replace("()",""),PLATFORM.jt):new AccessScope(parts[0]);let s=1;for(;parts.length>s;){const t=parts[s];i=t.endsWith("()")?new CallMember(i,t.replace("()",""),PLATFORM.jt):new AccessMember(i,parts[s]),s++}return i}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.io=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.so=1280]="IsRef",BindingType[BindingType.ro=512]="IsIterator",BindingType[BindingType.no=256]="IsCustom",BindingType[BindingType.oo=128]="IsFunction",BindingType[BindingType.ho=64]="IsEvent",BindingType[BindingType.co=32]="IsProperty",BindingType[BindingType.ao=16]="IsCommand",BindingType[BindingType.lo=48]="IsPropertyCommand",BindingType[BindingType.uo=80]="IsEventCommand",BindingType[BindingType.do=6]="DelegationStrategyDelta",BindingType[BindingType.fo=15]="Command",BindingType[BindingType.vo=49]="OneTimeCommand",BindingType[BindingType.bo=50]="ToViewCommand",BindingType[BindingType.po=51]="FromViewCommand",BindingType[BindingType.mo=52]="TwoWayCommand",BindingType[BindingType.To=53]="BindCommand",BindingType[BindingType.Ro=86]="TriggerCommand",BindingType[BindingType.yo=87]="CaptureCommand",BindingType[BindingType.Co=88]="DelegateCommand",BindingType[BindingType.Oo=153]="CallCommand",BindingType[BindingType.Bo=26]="OptionsCommand",BindingType[BindingType.wo=539]="ForCommand",BindingType[BindingType.Io=284]="CustomCommand"})(BindingType||(BindingType={}));const{Nt:toView$1,oneTime:oneTime$1}=BindingMode;class MultiInterpolationBinding{constructor(t,e,i,s,mode,r){this.$state=0,this.$scope=void 0,this.So=e,this.qe=r,this.mode=mode,this.ot=t,this.target=i,this.Hn=s;const n=e.it,parts=this.parts=Array(n.length);for(let o=0,c=n.length;c>o;++o)parts[o]=new InterpolationBinding(n[o],e,i,s,mode,t,r,0===o)}qn(t,e){if(4&this.$state){if(this.$scope===e)return;this.Qn(t)}this.$state|=4,this.$scope=e;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].qn(t,e)}Qn(t){if(!(4&this.$state))return;this.$state&=-5,this.$scope=void 0;const parts=this.parts;for(let e=0,i=parts.length;i>e;++e)parts[e].Qn(t)}}let InterpolationBinding=class{constructor(t,e,i,s,mode,r,n,o){connectable._n(this),this.$state=0,this.So=e,this.Po=o,this.mode=mode,this.qe=n,this.ot=r,this.zn=t,this.target=i,this.Hn=s,this.Un=r.Gn(0,i,s)}Wn(value,t){this.Un.ne(value,16|t)}X(t,e,i){if(!(4&this.$state))return;const s=this.Un.oe(),r=this.So.evaluate(i,this.$scope,this.qe);r!==s&&this.Wn(r,i),0==(this.mode&oneTime$1)&&(this.version++,this.zn.connect(i,this.$scope,this),this.unobserve(0))}qn(t,e){if(4&this.$state){if(this.$scope===e)return;this.Qn(t)}this.$state|=4,this.$scope=e;const i=this.zn;i.bind&&i.bind(t,e,this),this.mode!==BindingMode.oneTime&&this.Un.bind&&this.Un.bind(t),this.Po&&this.Wn(this.So.evaluate(t,e,this.qe),t),this.mode&toView$1&&i.connect(t,e,this)}Qn(t){if(!(4&this.$state))return;this.$state&=-5;const e=this.zn;e.Qe&&e.Qe(t,this.$scope,this),this.Un.Qe&&this.Un.Qe(t),this.$scope=void 0,this.unobserve(1)}};InterpolationBinding=__decorate([connectable()],InterpolationBinding);const slice$5=[].slice;let LetBinding=class{constructor(t,e,i,s,toViewModel=0){connectable._n(this),this.$state=0,this.$lifecycle=s.get(ILifecycle),this.$scope=void 0,this.qe=s,this.ot=i,this.zn=t,this.target=null,this.Hn=e,this.toViewModel=toViewModel}X(t,e,i){if(Tracer.enabled&&Tracer.rt("LetBinding","handleChange",slice$5.call(arguments)),4&this.$state){if(16&i){const{target:t,Hn:e}=this,s=t[e],r=this.zn.evaluate(i,this.$scope,this.qe);return r!==s&&(t[e]=r),void(Tracer.enabled&&Tracer.ct())}throw Reporter.error(15,i)}Tracer.enabled&&Tracer.ct()}qn(t,e){if(Tracer.enabled&&Tracer.rt("LetBinding","$bind",slice$5.call(arguments)),4&this.$state){if(this.$scope===e)return void(Tracer.enabled&&Tracer.ct());this.Qn(4096|t)}this.$state|=1,this.$scope=e,this.target=this.toViewModel?e.se:e.Oe;const i=this.zn;i.bind&&i.bind(t,e,this),this.target[this.Hn]=this.zn.evaluate(4096,e,this.qe),this.zn.connect(t,e,this),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.ct()}Qn(t){if(Tracer.enabled&&Tracer.rt("LetBinding","$unbind",slice$5.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.ct());this.$state|=2;const e=this.zn;e.Qe&&e.Qe(t,this.$scope,this),this.$scope=void 0,this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.ct()}};LetBinding=__decorate([connectable()],LetBinding);const slice$6=[].slice;class Ref{constructor(t,e,i){this.$state=0,this.$scope=void 0,this.qe=i,this.zn=t,this.target=e}qn(t,e){if(Tracer.enabled&&Tracer.rt("Ref","$bind",slice$6.call(arguments)),4&this.$state){if(this.$scope===e)return void(Tracer.enabled&&Tracer.ct());this.Qn(4096|t)}this.$state|=1,this.$scope=e,hasBind(this.zn)&&this.zn.bind(t,e,this),this.zn.assign(t,this.$scope,this.qe,this.target),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.ct()}Qn(t){if(Tracer.enabled&&Tracer.rt("Ref","$unbind",slice$6.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.ct());this.$state|=2,this.zn.evaluate(t,this.$scope,this.qe)===this.target&&this.zn.assign(t,this.$scope,this.qe,null);const e=this.zn;hasUnbind(e)&&e.Qe(t,this.$scope,this),this.$scope=void 0,this.$state&=-7,Tracer.enabled&&Tracer.ct()}at(t,e,i){}X(t,e,i){}}(function(t){t[t.io=0]="None",t[t.Ao=1]="Subscriber0",t[t.Lo=2]="Subscriber1",t[t.$o=4]="Subscriber2",t[t.ko=8]="SubscribersRest",t[t.Mo=15]="Any"})(SubscriberFlags||(SubscriberFlags={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.ps=0]="none",DelegationStrategy[DelegationStrategy.Fo=1]="capturing",DelegationStrategy[DelegationStrategy.xo=2]="bubbling"})(DelegationStrategy||(DelegationStrategy={})),(function(CollectionKind){CollectionKind[CollectionKind.Do=8]="indexed",CollectionKind[CollectionKind.Vo=4]="keyed",CollectionKind[CollectionKind.Eo=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind={}));let CollectionLengthObserver=class{constructor(t){this.ve=t,this.ge=t.length}oe(){return this.ve.length}ne(t,e){const{ge:i}=this;t!==i&&(this.ge=t,this.u(t,i,16|e))}};CollectionLengthObserver=__decorate([subscriberCollection()],CollectionLengthObserver);const proto=Array.prototype,$push=proto.push,$unshift=proto.unshift,$pop=proto.pop,$shift=proto.shift,$splice=proto.splice,$reverse=proto.reverse,$sort=proto.sort,native={push:$push,unshift:$unshift,pop:$pop,shift:$shift,splice:$splice,reverse:$reverse,sort:$sort},methods=["push","unshift","pop","shift","splice","reverse","sort"],observe={push(){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $push.apply(t,arguments);const i=t.length,s=arguments.length;if(0===s)return i;t.length=e.jo.length=i+s;let r=i;for(;t.length>r;)t[r]=arguments[r-i],e.jo[r]=-2,r++;return e.No(),t.length},unshift(){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $unshift.apply(t,arguments);const i=arguments.length,s=[];let r=0;for(;i>r;)s[r++]=-2;$unshift.apply(e.jo,s);const n=$unshift.apply(t,arguments);return e.No(),n},pop(){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $pop.call(t);const i=e.jo,s=$pop.call(t),r=i.length-1;return i[r]>-1&&i.lt.push(i[r]),$pop.call(i),e.No(),s},shift(){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $shift.call(t);const i=e.jo,s=$shift.call(t);return i[0]>-1&&i.lt.push(i[0]),$shift.call(i),e.No(),s},splice(t,e){let i=this;void 0!==i.le&&(i=i.le);const s=i.dt;if(void 0===s)return $splice.apply(i,arguments);const r=s.jo;if(e>0){let i=isNaN(t)?0:t;const to=i+e;for(;to>i;)r[i]>-1&&r.lt.push(r[i]),i++}const n=arguments.length;if(n>2){const i=n-2,s=[];let o=0;for(;i>o;)s[o++]=-2;$splice.call(r,t,e,...s)}else 2===n&&$splice.call(r,t,e);const o=$splice.apply(i,arguments);return s.No(),o},reverse(){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $reverse.call(t),this;const i=t.length,s=i/2|0;let r=0;for(;r!==s;){const s=i-r-1,n=t[r],o=e.jo[r],c=e.jo[s];t[r]=t[s],e.jo[r]=c,t[s]=n,e.jo[s]=o,r++}return e.No(),this},sort(t){let e=this;void 0!==e.le&&(e=e.le);const i=e.dt;if(void 0===i)return $sort.call(e,t),this;const s=e.length;if(2>s)return this;quickSort(e,i.jo,0,s,preSortCompare);let r=0;for(;s>r&&void 0!==e[r];)r++;return void 0!==t&&"function"==typeof t||(t=sortCompare),quickSort(e,i.jo,0,r,t),i.No(),this}},descriptorProps={_o:1,Yt:0,ft:1},def=Reflect.defineProperty;for(const t of methods)def(observe[t],"observing",{value:1,_o:0,ft:0,Yt:0});let enableArrayObservationCalled=0;const slice$7=[].slice;let ArrayObserver=class{constructor(t,e,i){Tracer.enabled&&Tracer.rt("ArrayObserver","constructor",slice$7.call(arguments)),enableArrayObservationCalled||(enableArrayObservationCalled=1,enableArrayObservation()),this.re=0,this.zo=i,this.pe=536870927&t,this.jo=createIndexMap(i.length),this.fe=e,this.Ho=void 0,Reflect.defineProperty(i,"$observer",{value:this,Yt:0,_o:1,ft:1}),Tracer.enabled&&Tracer.ct()}No(){this.fe.Te.me>0?this.re||(this.re=1,this.fe.Te.add(this)):this.he(0)}Uo(){return void 0===this.Ho&&(this.Ho=new CollectionLengthObserver(this.zo)),this.Ho}he(t){this.re=0;const{jo:e,zo:i}=this,{length:s}=i;this.jo=createIndexMap(s),this.L(e,16|this.pe),void 0!==this.Ho&&this.Ho.ne(s,16)}};ArrayObserver=__decorate([collectionSubscriberCollection()],ArrayObserver);let CollectionSizeObserver=class{constructor(t){this.ve=t,this.ge=t.size}oe(){return this.ve.size}ne(t,e){const{ge:i}=this;t!==i&&(this.ge=t,this.u(t,i,16|e))}};CollectionSizeObserver=__decorate([subscriberCollection()],CollectionSizeObserver);const proto$1=Map.prototype,$set=proto$1.set,$clear=proto$1.clear,$delete=proto$1.delete,native$1={set:$set,clear:$clear,delete:$delete},methods$1=["set","clear","delete"],observe$1={set(t,value){let e=this;void 0!==e.le&&(e=e.le);const i=e.dt;if(void 0===i)return $set.call(e,t,value),this;const s=e.size;if($set.call(e,t,value),e.size===s){let s=0;for(const r of e.entries()){if(r[0]===t)return r[1]!==value&&(i.jo[s]=-2),this;s++}return this}return i.jo[s]=-2,i.No(),this},clear(){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $clear.call(t);if(t.size>0){const i=e.jo;let s=0;for(const e of t.keys())i[s]>-1&&i.lt.push(i[s]),s++;$clear.call(t),i.length=0,e.No()}},delete(value){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $delete.call(t,value);if(0===t.size)return 0;let i=0;const s=e.jo;for(const e of t.keys()){if(e===value)return s[i]>-1&&s.lt.push(s[i]),s.splice(i,1),$delete.call(t,value);i++}return e.No(),0}},descriptorProps$1={_o:1,Yt:0,ft:1},def$1=Reflect.defineProperty;for(const t of methods$1)def$1(observe$1[t],"observing",{value:1,_o:0,ft:0,Yt:0});let enableMapObservationCalled=0;const slice$8=[].slice;let MapObserver=class{constructor(t,e,i){Tracer.enabled&&Tracer.rt("MapObserver","constructor",slice$8.call(arguments)),enableMapObservationCalled||(enableMapObservationCalled=1,enableMapObservation()),this.re=0,this.zo=i,this.pe=536870927&t,this.jo=createIndexMap(i.size),this.fe=e,this.Ho=void 0,i.dt=this,Tracer.enabled&&Tracer.ct()}No(){this.fe.Te.me>0?this.re||(this.re=1,this.fe.Te.add(this)):this.he(0)}Uo(){return void 0===this.Ho&&(this.Ho=new CollectionSizeObserver(this.zo)),this.Ho}he(t){this.re=0;const{jo:e,zo:i}=this,{size:s}=i;this.jo=createIndexMap(s),this.L(e,16|this.pe),void 0!==this.Ho&&this.Ho.ne(s,16)}};MapObserver=__decorate([collectionSubscriberCollection()],MapObserver);const proto$2=Set.prototype,$add=proto$2.add,$clear$1=proto$2.clear,$delete$1=proto$2.delete,native$2={add:$add,clear:$clear$1,delete:$delete$1},methods$2=["add","clear","delete"],observe$2={add(value){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $add.call(t,value),this;const i=t.size;return $add.call(t,value),t.size===i?this:(e.jo[i]=-2,e.No(),this)},clear(){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $clear$1.call(t);if(t.size>0){const i=e.jo;let s=0;for(const e of t.keys())i[s]>-1&&i.lt.push(i[s]),s++;$clear$1.call(t),i.length=0,e.No()}},delete(value){let t=this;void 0!==t.le&&(t=t.le);const e=t.dt;if(void 0===e)return $delete$1.call(t,value);if(0===t.size)return 0;let i=0;const s=e.jo;for(const e of t.keys()){if(e===value)return s[i]>-1&&s.lt.push(s[i]),s.splice(i,1),$delete$1.call(t,value);i++}return e.No(),0}},descriptorProps$2={_o:1,Yt:0,ft:1},def$2=Reflect.defineProperty;for(const t of methods$2)def$2(observe$2[t],"observing",{value:1,_o:0,ft:0,Yt:0});let enableSetObservationCalled=0;const slice$9=[].slice;let SetObserver=class{constructor(t,e,i){Tracer.enabled&&Tracer.rt("SetObserver","constructor",slice$9.call(arguments)),enableSetObservationCalled||(enableSetObservationCalled=1,enableSetObservation()),this.re=0,this.zo=i,this.pe=536870927&t,this.jo=createIndexMap(i.size),this.fe=e,this.Ho=void 0,i.dt=this,Tracer.enabled&&Tracer.ct()}No(){this.fe.Te.me>0?this.re||(this.re=1,this.fe.Te.add(this)):this.he(0)}Uo(){return void 0===this.Ho&&(this.Ho=new CollectionSizeObserver(this.zo)),this.Ho}he(t){this.re=0;const{jo:e,zo:i}=this,{size:s}=i;this.jo=createIndexMap(s),this.L(e,16|this.pe),void 0!==this.Ho&&this.Ho.ne(s,16)}};SetObserver=__decorate([collectionSubscriberCollection()],SetObserver);const slice$a=[].slice,computedOverrideDefaults={Wo:0,bt:0};let CustomSetterObserver=class{constructor(t,e,i){this.ve=t,this.be=e,this.ge=this.oldValue=void 0,this.Ko=i,this.ut=0}ne(t){Tracer.enabled&&Tracer.rt("CustomSetterObserver","setValue",slice$a.call(arguments)),this.Ko.set.call(this.ve,t),this.ge!==t&&(this.oldValue=this.ge,this.ge=t,this.u(t,this.oldValue,16)),Tracer.enabled&&Tracer.ct()}subscribe(t){this.ut||this.qo(),this.i(t)}unsubscribe(t){this.s(t)}qo(){Tracer.enabled&&Tracer.rt("CustomSetterObserver","convertProperty",slice$a.call(arguments)),this.ut=1,this.ge=this.ve[this.be],Reflect.defineProperty(this.ve,this.be,{set:t=>{this.ne(t)}}),Tracer.enabled&&Tracer.ct()}};CustomSetterObserver=__decorate([subscriberCollection()],CustomSetterObserver);let GetterObserver=class{constructor(t,e,i,s,r,n,o){this.ve=i,this.be=s,this.Qo=0,this.ge=this.oldValue=void 0,this.Go=[],this.Xo=[],this.Jo=e,this.Yo=0,this.Ko=r,this.Gt=new Proxy(i,createGetterTraps(t,n,this)),Reflect.defineProperty(i,s,{get:()=>this.oe()})}Ct(t){-1===this.Go.indexOf(t)&&this.Go.push(t)}pt(t){-1===this.Xo.indexOf(t)&&this.Xo.push(t)}oe(){return Tracer.enabled&&Tracer.rt("GetterObserver","getValue",slice$a.call(arguments)),this.ge=0===this.Yo||this.Qo?Reflect.apply(this.Ko.get,this.Gt,PLATFORM.jt):Reflect.apply(this.Ko.get,this.ve,PLATFORM.jt),Tracer.enabled&&Tracer.ct(),this.ge}subscribe(t){this.i(t),1==++this.Yo&&this.Zo(1)}unsubscribe(t){this.s(t),0==--this.Yo&&this.th()}X(){const t=this.ge,e=this.Zo(0);t!==e&&this.u(e,t,16)}Y(){const t=this.ge,e=this.Zo(0);t!==e&&this.u(e,t,16)}Zo(t){Tracer.enabled&&Tracer.rt("GetterObserver","getValueAndCollectDependencies",slice$a.call(arguments));const e=!this.Jo.Wo||t;return e&&(this.th(),this.Qo=1),this.ge=this.oe(),e&&(this.Go.forEach(t=>{t.subscribe(this)}),this.Xo.forEach(t=>{t.$(this)}),this.Qo=0),Tracer.enabled&&Tracer.ct(),this.ge}gt(t){return!this.Qo||"$observers"===t}th(){this.Go.forEach(t=>{t.unsubscribe(this)}),this.Go.length=0,this.Xo.forEach(t=>{t.k(this)}),this.Xo.length=0}};GetterObserver=__decorate([subscriberCollection()],GetterObserver);const toStringTag$1={}.toString,IDirtyChecker=DI.$e("IDirtyChecker").Le(t=>t.singleton(DirtyChecker)),DirtyCheckSettings={eh:6,disabled:0,warn:1,ih:0,sh(){this.eh=6,this.disabled=0,this.warn=1,this.ih=0}};class DirtyChecker{constructor(t){this.rh=0,this.nh=[],this.fe=t}vt(t,e){if(DirtyCheckSettings.ih)throw Reporter.error(800,e);return DirtyCheckSettings.warn&&Reporter.write(801,e),new DirtyCheckProperty(this,t,e)}oh(t){this.nh.push(t),1===this.nh.length&&this.fe.Vn(this.hh,this,4096)}removeProperty(t){this.nh.splice(this.nh.indexOf(t),1),0===this.nh.length&&this.fe.En(this.hh,this)}hh(t){if(DirtyCheckSettings.disabled)return;if(++this.rh<DirtyCheckSettings.eh)return;this.rh=0;const e=this.nh,i=e.length;let s,r=0;for(;i>r;++r)(s=e[r]).ah()&&s.flush(256)}}DirtyChecker.inject=[ILifecycle];const slice$b=[].slice;let DirtyCheckProperty=class{constructor(t,e,i){Tracer.enabled&&Tracer.rt("DirtyCheckProperty","constructor",slice$b.call(arguments)),this.ve=e,this.be=i,this.lh=t,Tracer.enabled&&Tracer.ct()}ah(){return this.oldValue!==this.ve[this.be]}flush(t){const e=this.ve[this.be];this.u(e,this.oldValue,16|t),this.oldValue=e}subscribe(t){this.l()||(this.oldValue=this.ve[this.be],this.lh.oh(this)),this.i(t)}unsubscribe(t){this.s(t)&&!this.l()&&this.lh.removeProperty(this)}};DirtyCheckProperty=__decorate([subscriberCollection()],DirtyCheckProperty);const slice$c=[].slice,noop=PLATFORM.ti;class PrimitiveObserver{constructor(t,e){this.uh=1,Tracer.enabled&&Tracer.rt("PrimitiveObserver","constructor",slice$c.call(arguments)),"length"===e?(this.ve=t,this.oe=this.dh):this.oe=this.fh,Tracer.enabled&&Tracer.ct()}dh(){return this.ve.length}fh(){}}PrimitiveObserver.prototype.ne=noop,PrimitiveObserver.prototype.subscribe=noop,PrimitiveObserver.prototype.unsubscribe=noop,PrimitiveObserver.prototype.qt=noop;const slice$d=[].slice;class PropertyAccessor{constructor(t,e){Tracer.enabled&&Tracer.rt("PropertyAccessor","constructor",slice$d.call(arguments)),this.ve=t,this.be=e,Tracer.enabled&&Tracer.ct()}oe(){return this.ve[this.be]}ne(value){this.ve[this.be]=value}}const toStringTag$2={}.toString,IObserverLocator=DI.$e("IObserverLocator").Dr(),ITargetObserverLocator=DI.$e("ITargetObserverLocator").Dr(),ITargetAccessorLocator=DI.$e("ITargetAccessorLocator").Dr();class ObserverLocator{constructor(t,e,i,s){this.vh=[],this.lh=e,this.fe=t,this.bh=i,this.gh=s}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}nt(t,e,i){if(2&t&&"object"==typeof e)return ProxyObserver.Xt(e,i);if(isBindingContext(e))return e.Se(t).Xt(this.fe,t,e,i);let s,r=e.Qt;return r&&i in r?r[i]:((s=this.ph(t,e,i)).uh||(void 0===r&&(r=this.mh(e)),r[i]=s),s)}Th(t){this.vh.push(t)}Gn(t,e,i){return this.gh.Rh(t,e)?this.bh.yh(t,e,i)?this.nt(t,e,i):this.gh.Gn(t,this.fe,e,i):2&t?ProxyObserver.Xt(e,i):new PropertyAccessor(e,i)}Tt(t,e){return getArrayObserver(t,this.fe,e)}Rt(t,e){return getMapObserver(t,this.fe,e)}yt(t,e){return getSetObserver(t,this.fe,e)}mh(t){return t.Qt||this.Ch(t)}Ch(t){const value={};return Reflect.defineProperty(t,"$observers",{Yt:0,ft:0,_o:0,value})||Reporter.write(0,t),value}Oh(t,e,i,s){for(let r=0,n=this.vh.length;n>r;r++){const n=this.vh[r].nt(t,e,i,s);if(null!=n)return n}return null}ph(t,e,i){if(!(e instanceof Object))return new PrimitiveObserver(e,i);let s=0;if(this.bh.Rh(t,e)){const r=this.bh.nt(t,this.fe,this,e,i);if(null!=r)return r;s=1}switch(toStringTag$2.call(e)){case"[object Array]":return"length"===i?this.Tt(t,e).Uo():this.lh.vt(e,i);case"[object Map]":return"size"===i?this.Rt(t,e).Uo():this.lh.vt(e,i);case"[object Set]":return"size"===i?this.yt(t,e).Uo():this.lh.vt(e,i)}const r=getPropertyDescriptor(e,i);if(r&&(r.get||r.set)){if(r.get&&r.get.nt)return r.get.nt(e);return this.Oh(t,e,i,r)||(s?this.lh.vt(e,i):createComputedObserver(t,this,this.lh,this.fe,e,i,r))}return new SetterObserver(this.fe,t,e,i)}}ObserverLocator.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];let SelfObserver=SelfObserver_1=class{constructor(t,e,i,s,r){this.fe=t;let n=0;ProxyObserver.ue(i)?(n=1,i.dt.subscribe(this,s),this.ve=i.le):this.ve=i,this.be=s,this.ge=void 0,this.oldValue=void 0,this.re=0,this.Jt=this.ve[r],void 0===this.Jt?this.ut=0:(this.ut=1,this.ge=this.ve[this.be],n||this.Bh()),this.pe=536870927&e}X(t,e,i){this.ne(t,i)}oe(){return this.ge}ne(t,e){if(this.ut){const i=this.ge;this.ge=t,0===this.fe.Te.me?0==(4096&e)&&(this.u(t,i,this.pe|e),void 0!==this.Jt&&this.Jt.call(this.ve,t,i,this.pe|e)):this.re||(this.re=1,this.oldValue=i,this.fe.Te.add(this))}else this.ve[this.be]=t}subscribe(t){0==this.ut&&(this.ut=1,this.ge=this.ve[this.be],this.Bh()),this.i(t)}Bh(){Reflect.defineProperty(this.ve,this.be,{Yt:1,ft:1,get:()=>this.ge,set:value=>{this.ne(value,0)}})||Reporter.write(1,this.be,this.ve)}};SelfObserver=SelfObserver_1=__decorate([subscriberCollection()],SelfObserver);const{oneTime:oneTime$2,Nt:toView$2,Je:fromView$1,vs:twoWay}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,e,i){i.wh=i.mode,i.mode=this.mode}Qe(t,e,i){i.mode=i.wh,i.wh=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(oneTime$2)}}BindingBehaviorResource.tt("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(toView$2)}}BindingBehaviorResource.tt("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(fromView$1)}}BindingBehaviorResource.tt("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(twoWay)}}BindingBehaviorResource.tt("twoWay",TwoWayBindingBehavior);const unset={},fromView$2=BindingMode.Je;class DebounceBindingBehavior{bind(t,e,i,s=200){let r,n,o;i instanceof Binding?(r="handleChange",o=debounceCall,n=i.mode&fromView$2?32:16):(r="callSource",o=debounceCallSource,n=16),i.St=i[r],i.St.Ih=r,i[r]=o,i.wt={At:n,Pt:s,It:0,oldValue:unset}}Qe(t,e,i){i[i.St.Ih]=i.St,i.St=null,PLATFORM.global.clearTimeout(i.wt.It),i.wt=null}}BindingBehaviorResource.tt("debounce",DebounceBindingBehavior);class PriorityBindingBehavior{static register(t){t.register(Registration.singleton("binding-behavior:priority",this)),t.register(Registration.singleton(this,this))}bind(t,e=4096){const{Un:i}=t;if(null!=i)if(this[t.id]=i.jr,"number"==typeof e)i.jr=e;else switch(e){case"preempt":i.jr=32768;break;case"high":i.jr=28672;break;case"bind":i.jr=24576;break;case"attach":i.jr=20480;break;case"normal":i.jr=16384;break;case"propagate":i.jr=12288;break;case"connect":i.jr=8192;break;case"low":i.jr=4096}}Qe(t){null!=t.Un&&(t.Un.jr=this[t.id])}}PriorityBindingBehavior.kind=BindingBehaviorResource,PriorityBindingBehavior.description=Object.freeze({name:"priority"});class SignalBindingBehavior{constructor(t){this.Sh=t}bind(t,e,i,...s){if(!i.Wn)throw Reporter.error(11);if(4===arguments.length){const name=s[0];this.Sh.Fe(name,i),i.Ph=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let e=t.length;for(;e--;)this.Sh.Fe(t[e],i);i.Ph=t}}}Qe(t,e,i){const name=i.Ph;if(i.Ph=null,Array.isArray(name)){const t=name;let e=t.length;for(;e--;)this.Sh.xe(t[e],i)}else this.Sh.xe(name,i)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.tt("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,e,i,s=200){let r;i.kt=i[r=i instanceof Binding?i.mode===BindingMode.vs?"updateSource":"updateTarget":"callSource"],i.kt.Ih=r,i[r]=throttle,i.Lt={Pt:s,$t:0,It:-1}}Qe(t,e,i){i[i.kt.Ih]=i.kt,i.kt=null,PLATFORM.global.clearTimeout(i.Lt.It),i.Lt=null}}BindingBehaviorResource.tt("throttle",ThrottleBindingBehavior);const Bindable={for(t){const e={add(e){let i=void 0;e instanceof Object?i=e:"string"==typeof e&&(i={Mt:e});const s=i.Mt;if(!s)throw Reporter.error(0);return i.Ah||(i.Ah=kebabCase(s)),i.Jt||(i.Jt=`${s}Changed`),void 0===i.mode&&(i.mode=BindingMode.Nt),t.bindables[s]=i,this},get:()=>t.bindables};if(void 0===t.bindables)t.bindables={};else if(Array.isArray(t.bindables)){const i=t.bindables;t.bindables={},i.forEach(e.add)}return e}},customElementName="custom-element",customAttributeName="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.Lh="ra",TargetedInstructionType.$h="rb",TargetedInstructionType.kh="rc",TargetedInstructionType.Mh="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.So="rf",TargetedInstructionType.Fh="rg",TargetedInstructionType.xh="rh",TargetedInstructionType.Dh="ri",TargetedInstructionType.Vh="rj",TargetedInstructionType.Eh="rk"})(TargetedInstructionType||(TargetedInstructionType={}));const ITargetedInstruction=DI.$e("createInterface").Dr(),buildRequired=Object.freeze({required:1,compiler:"default"}),buildNotRequired=Object.freeze({required:0,compiler:"default"});class HooksDefinition{constructor(t){this.Zs="render"in t,this.Us="created"in t,this.Ws="binding"in t,this.Ks="bound"in t,this.Js="unbinding"in t,this.Ys="unbound"in t,this.qs="attaching"in t,this.Qs="attached"in t,this.Gs="detaching"in t,this.Xs="detached"in t,this.tr="caching"in t}}HooksDefinition.ps=Object.freeze(new HooksDefinition({}));class DefaultTemplateDefinition{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=buildNotRequired,this.bindables=PLATFORM.Dt,this.instructions=PLATFORM.jt,this.dependencies=PLATFORM.jt,this.surrogates=PLATFORM.jt,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.strategy=1,this.xt=HooksDefinition.ps}}const templateDefinitionAssignables=["name","template","cache","build","containerless","shadowOptions","hasSlots"],templateDefinitionArrays=["instructions","dependencies","surrogates"],CustomAttributeResource={name:customAttributeName,Z:customAttributeKey,De:isType$2,tt:define$2},INode=DI.$e("INode").Dr(),IRenderLocation=DI.$e("IRenderLocation").Dr(),IDOM=DI.$e("IDOM").Dr(),ni=function(){throw Reporter.error(1e3)},niDOM={addEventListener:ni,appendChild:ni,cloneNode:ni,jh:ni,createDocumentFragment:ni,createElement:ni,Nh:ni,dispatchEvent:ni,_h:ni,zh:ni,createTextNode:ni,insertBefore:ni,Hh:ni,Uh:ni,Wh:ni,Kh:ni,zt:ni,remove:ni,removeEventListener:ni,setAttribute:ni},DOM={...niDOM,get qh(){return 1==Reflect.get(this,"$initialized")},initialize(dom){if(this.qh)throw Reporter.error(1001);const t={},e=[dom];let i=Object.getPrototypeOf(dom);for(;i&&i!==Object.prototype;)e.unshift(i),i=Object.getPrototypeOf(i);for(i of e)Object.assign(t,Object.getOwnPropertyDescriptors(i));const s=[];let r,n;for(r in t)(n=t[r]).ft&&n._o&&(Reflect.defineProperty(this,r,n),s.push(r));Reflect.set(this,"$domKeys",s),Reflect.set(this,"$initialized",1)},Qh(){if(!this.qh)throw Reporter.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,niDOM),Reflect.set(this,"$domKeys",PLATFORM.jt),Reflect.set(this,"$initialized",0)}},emptySequence={Ps:0,Gh:0,next:void 0,childNodes:PLATFORM.jt,firstChild:null,lastChild:null,Xh:()=>PLATFORM.jt,insertBefore(t){},Jh(t){},remove(){},Yh(){},Ur(){},link(t){}},NodeSequence={empty:emptySequence},LifecycleTask={done:{done:1,Zh:()=>0,cancel(){},tc:()=>Promise.resolve()}};class PromiseTask{constructor(t,e,i,...s){this.done=0,this.ec=0,this.ic=0,this.sc=t.then(value=>{if(1!=this.ec&&(this.ic=1,null!==e)){const t=e.call(i,value,...s);if(void 0!==t)return(t.then instanceof Function?t:t.tc()).then(()=>{this.done=1});this.done=1}})}Zh(){return!this.ic}cancel(){this.Zh()&&(this.ec=1)}tc(){return this.sc}}class ContinuationTask{constructor(t,e,i,...s){this.done=0,this.ic=0,this.ec=0;const r=t.then instanceof Function?t:t.tc();this.sc=r.then(()=>{if(1==this.ec)return;this.ic=1;const t=e.call(i,...s);if(void 0!==t)return(t.then instanceof Function?t:t.tc()).then(()=>{this.done=1});this.done=1})}Zh(){return!this.ic}cancel(){this.Zh()&&(this.ec=1)}tc(){return this.sc}}class TerminalTask{constructor(t){this.done=0,this.sc=t.then instanceof Function?t:t.tc(),this.sc.then(()=>{this.done=1}).catch(t=>{throw t})}Zh(){return 0}cancel(){}tc(){return this.sc}}class AggregateContinuationTask{constructor(t,e,i,...s){this.done=0,this.ic=0,this.ec=0,this.sc=Promise.all(t.map(t=>t.tc())).then(()=>{if(1==this.ec)return;this.ic=1;const t=e.call(i,...s);if(void 0!==t)return t.tc().then(()=>{this.done=1});this.done=1})}Zh(){return!this.ic}cancel(){this.Zh()&&(this.ec=1)}tc(){return this.sc}}class AggregateTerminalTask{constructor(t){this.done=0,this.sc=Promise.all(t.map(t=>t.tc())).then(()=>{this.done=1})}Zh(){return 0}cancel(){}tc(){return this.sc}}class If{constructor(t,e){this.Qt={value:this},this.id=nextId("au$component"),this.rc=void 0,this.nc=void 0,this.oc=t,this.hc=void 0,this.location=e,this.Zt=1,this.cc=LifecycleTask.done,this.view=void 0,this.ac=0}get value(){return this.ac}set value(t){const e=this.ac;e!==t&&(this.ac=t,this.lc(t,e,this.Ft.flags))}static register(t){t.register(Registration.transient("custom-attribute:if",this)),t.register(Registration.transient(this,this))}oe(){return this.ac}ne(t,e){const i=this.ac;i!==t&&(this.ac=t,this.lc(t,i,e|this.Ft.flags))}uc(t){return this.cc=this.cc.done?this.dc(this.value,t):new ContinuationTask(this.cc,this.dc,this,this.value,t),this.cc}fc(t){this.cc.done?this.vc(t):this.cc=new ContinuationTask(this.cc,this.vc,this,t)}bc(t){return void 0!==this.view&&(this.cc.done?this.view.detach(t):this.cc=new ContinuationTask(this.cc,this.view.detach,this.view,t)),this.cc}gc(t){return void 0!==this.view&&(this.cc=this.cc.done?this.view.Qe(t):new ContinuationTask(this.cc,this.view.Qe,this.view,t)),this.cc}pc(t){void 0!==this.hc&&this.hc.release(t)&&(this.hc=void 0),void 0!==this.nc&&this.nc.release(t)&&(this.nc=void 0),this.view=void 0}lc(t,e,i){0!=(4&this.Ft.state)&&(this.cc=this.cc.done?this.dc(this.value,i):new ContinuationTask(this.cc,this.dc,this,this.value,i))}mc(value,t){return value?this.hc=this.Tc(this.hc,this.oc,t):null!=this.rc?this.nc=this.Tc(this.nc,this.rc,t):void 0}Tc(t,e,i){return void 0===t&&(t=e.create(i)),t.Rc(this.location),t}dc(value,t){let e=LifecycleTask.done;if((1==value&&void 0!==this.nc||1!=value&&void 0!==this.hc)&&(e=this.yc(t)),e.done){const i=this.mc(value,t);e=this.Cc(i,t)}else e=new PromiseTask(e.tc().then(()=>this.mc(value,t)),this.Cc,this,t);return e}yc(t){const e=this.view;return void 0===e?LifecycleTask.done:(e.detach(t),e.Qe(t))}Cc(t,e){if(this.view=t,void 0===t)return LifecycleTask.done;let i=this.Oc(e);return 0==(32&this.Ft.state)?i:(i.done?this.vc(e):i=new ContinuationTask(i,this.vc,this,e),i)}Oc(t){return void 0!==this.view&&(5&this.Ft.state)>0?this.view.bind(t,this.Ft.scope):LifecycleTask.done}vc(t){void 0!==this.view&&(40&this.Ft.state)>0&&this.view.Kr(t)}}If.inject=[IViewFactory,IRenderLocation],If.kind=CustomAttributeResource,If.description=Object.freeze({name:"if",aliases:PLATFORM.jt,defaultBindingMode:BindingMode.Nt,Et:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,xt:Object.freeze(new HooksDefinition(If.prototype))});class Else{constructor(t){this.Bc=t}static register(t){t.register(Registration.transient("custom-attribute:else",this))}link(t){if(t instanceof If)t.rc=this.Bc;else{if(!(t.wc instanceof If))throw Error("Unsupported IfBehavior");t.wc.rc=this.Bc}}}Else.inject=[IViewFactory],Else.kind=CustomAttributeResource,Else.description={name:"else",aliases:PLATFORM.jt,defaultBindingMode:BindingMode.Nt,Et:0,isTemplateController:1,bindables:PLATFORM.Dt,strategy:1,xt:HooksDefinition.ps};class Repeat{constructor(t,e,i){this.Qt={Ic:this},this.id=nextId("au$component"),this.Bc=i,this.Sc=0,this.location=t,this.Pc=void 0,this.Ac=e,this.Lc=[],this.key=void 0,this.Zt=1,this.cc=LifecycleTask.done}get Ic(){return this.$c}set Ic(t){this.$c!==t&&(this.$c=t,this.kc(this.Ft.flags))}static register(t){t.register(Registration.transient("custom-attribute:repeat",this)),t.register(Registration.transient(this,this))}uc(t){this.Mc(t);const e=this.Ac.ee,{length:i}=e;let s;for(let t=0;i>t;++t)if((s=e[t]).target===this&&"items"===s.Hn){this.Fc=s.zn;break}return this.xc=this.Fc.ts.evaluate(t,this.Ft.scope,null),this.Dc(void 0,t),this.cc}fc(t){this.cc.done?this.Vc(void 0,t):this.cc=new ContinuationTask(this.cc,this.Vc,this,void 0,t)}bc(t){this.cc.done?this.Ec(0,this.Lc.length,t):this.cc=new ContinuationTask(this.cc,this.Ec,this,0,this.Lc.length,t)}gc(t){return this.Mc(t),this.cc=this.cc.done?this.jc(0,this.Lc.length,t,0):new ContinuationTask(this.cc,this.jc,this,0,this.Lc.length,t,0),this.cc}kc(t){this.Mc(t|=this.Ft.flags),this.Dc(void 0,t|=16)}Y(t,e){e|=this.Ft.flags,this.Dc(t,e|=976)}Dc(t,e){if(void 0===t){if((5&this.Ft.state)>0){const t=this.Lc.length;this.Ec(0,t,e),this.cc=this.cc.done?this.jc(0,t,e,0):new ContinuationTask(this.cc,this.jc,this,0,t,e,0),this.cc=this.cc.done?this.Nc(e):new ContinuationTask(this.cc,this.Nc,this,e)}(40&this.Ft.state)>0&&(this.cc.done?this._c(e):this.cc=new ContinuationTask(this.cc,this._c,this,e))}else applyMutationsToIndices(t),(5&this.Ft.state)>0&&(t.lt.length>0&&(t.lt.sort(compareNumber),this.cc.done?this.zc(t,e):this.cc=new ContinuationTask(this.cc,this.zc,this,t,e),this.cc=this.cc.done?this.Hc(t,e):new ContinuationTask(this.cc,this.Hc,this,t,e)),this.cc=this.cc.done?this.Uc(t,e):new ContinuationTask(this.cc,this.Uc,this,t,e)),(40&this.Ft.state)>0&&(this.cc.done?this.Wc(t,e):this.cc=new ContinuationTask(this.cc,this.Wc,this,t,e))}Mc(t){const e=this.Pc;if((5&this.Ft.state)>0){const i=this.Pc=getCollectionObserver(t,this.Ft.fe,this.Ic);e!==i&&e&&e.k(this),i&&i.$(this)}else e&&e.k(this)}Ec(t,e,i){const s=this.Lc;let r;this.Ft.fe.cn.Xr();for(let n=t;e>n;++n)(r=s[n]).release(i),r.detach(i);this.Ft.fe.cn.end(i)}jc(t,e,i,s){const r=this.Lc;let n,o,c=void 0;this.Ft.fe.in.Xr();for(let s=t;e>s;++s)(n=(o=r[s]).Qe(i)).done||(void 0===c&&(c=[]),c.push(n));return s&&(this.Lc.length=t),void 0===c?(this.Ft.fe.in.end(i),LifecycleTask.done):new AggregateContinuationTask(c,this.Ft.fe.in.end,this.Ft.fe.in,i)}zc(t,e){const i=this.Lc;this.Ft.fe.cn.Xr();const s=t.lt,r=s.length;let n;for(let t=0;r>t;++t)(n=i[s[t]]).release(e),n.detach(e);this.Ft.fe.cn.end(e)}Hc(t,e){const i=this.Lc;let s,r=void 0;this.Ft.fe.in.Xr();const n=t.lt,o=n.length;let c,a=0;for(;o>a;++a)(s=(c=i[n[a]]).Qe(e)).done||(void 0===r&&(r=[]),r.push(s));a=0;let l=0;for(;o>a;++a)this.Lc.splice(l=n[a]-a,1);return void 0===r?(this.Ft.fe.in.end(e),LifecycleTask.done):new AggregateContinuationTask(r,this.Ft.fe.in.end,this.Ft.fe.in,e)}Nc(t){let e,i,s=void 0;this.Ft.fe.bound.Xr();const r=this.Bc,n=this.xc,o=this.Ic,c=this.Fc.count(t,o),a=this.Lc=Array(c);return this.Fc.ss(t,o,(o,c,l)=>{i=a[c]=r.create(t),(e=i.bind(t,this.Kc(t,n,l,i))).done||(void 0===s&&(s=[]),s.push(e))}),void 0===s?(this.Ft.fe.bound.end(t),LifecycleTask.done):new AggregateContinuationTask(s,this.Ft.fe.bound.end,this.Ft.fe.bound,t)}Uc(t,e){let i,s,r=void 0;const n=this.Bc,o=this.Lc,c=this.xc,a=this.Ic;this.Ft.fe.bound.Xr();const l=t.length;for(let u=0;l>u;++u)-2===t[u]&&(i=(s=n.create(e)).bind(e,this.Kc(e,c,a[u],s)),o.splice(u,0,s),i.done||(void 0===r&&(r=[]),r.push(i)));if(o.length!==l)throw Error(`viewsLen=${o.length}, mapLen=${l}`);return void 0===r?(this.Ft.fe.bound.end(e),LifecycleTask.done):new AggregateContinuationTask(r,this.Ft.fe.bound.end,this.Ft.fe.bound,e)}Kc(t,e,i,s){const r=this.Ft,n=r.scope,o=BindingContext.create(t,e,i);o.qc=s;const c=Scope.Ae(t,n,o);if(r.Qc!==PLATFORM.jt){c.we=void 0!==n.we&&n.we!==PLATFORM.Dt?{...n.we}:{};for(const t of r.Qc)c.we[t]=c}return c}Vc(t,e){let i;const{Lc:s,location:r}=this;if(this.Ft.fe.nn.Xr(),void 0===t)for(let t=0,n=s.length;n>t;++t)(i=s[t]).Rc(r),i.Gc.Ur(),i.Kr(e);else for(let n=0,o=s.length;o>n;++n)t[n]!==n&&((i=s[n]).Rc(r),i.Gc.Ur(),i.Kr(e));this.Ft.fe.nn.end(e)}_c(t){let e;const{Lc:i,location:s}=this;this.Ft.fe.nn.Xr();for(let r=0,n=i.length;n>r;++r)(e=i[r]).Rc(s),e.Gc.Ur(),e.Kr(t);this.Ft.fe.nn.end(t)}Wc(t,e){const i=this.location,s=this.Lc;synchronizeIndices(s,t);const r=longestIncreasingSubsequence(t),n=r.length;let o;this.Ft.fe.nn.Xr(),e|=268435456;let c=n-1,a=t.length-1;for(;a>=0;--a)-2===t[a]?(s[a].Rc(i),s[a].Kr(e)):0>c||1===n||a!==r[c]?s[a].Kr(e):--c,s[a].Gc.link(void 0!==(o=s[a+1])?o.Gc:i);this.Ft.fe.nn.end(e)}}let prevIndices,tailIndices;Repeat.inject=[IRenderLocation,IController,IViewFactory],Repeat.kind=CustomAttributeResource,Repeat.description=Object.freeze({name:"repeat",aliases:PLATFORM.jt,defaultBindingMode:BindingMode.Nt,Et:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["items"]}).get()),strategy:1,xt:Object.freeze(new HooksDefinition(Repeat.prototype))});let maxLen=0;class Replaceable{constructor(t,e){this.id=nextId("au$component"),this.Bc=t,this.view=this.Bc.create(),this.view.Rc(e)}static register(t){t.register(Registration.transient("custom-attribute:replaceable",this)),t.register(Registration.transient(this,this))}uc(t){const e=BindingContext.Ie;BindingContext.Ie=this.Bc.name;const i=this.view.bind(536870912|t,this.Ft.scope);return i.done?BindingContext.Ie=e:i.tc().then(()=>{BindingContext.Ie=e}),i}fc(t){this.view.Kr(t)}bc(t){this.view.detach(t)}gc(t){return this.view.Qe(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],Replaceable.kind=CustomAttributeResource,Replaceable.description=Object.freeze({name:"replaceable",aliases:PLATFORM.jt,defaultBindingMode:BindingMode.Nt,Et:0,isTemplateController:1,bindables:PLATFORM.Dt,strategy:1,xt:Object.freeze(new HooksDefinition(Replaceable.prototype))});class With{constructor(t,e){this.Qt={value:this},this.id=nextId("au$component"),this.Bc=t,this.view=this.Bc.create(),this.view.Rc(e),this.ac=void 0}get value(){return this.ac}set value(t){const e=this.ac;e!==t&&(this.ac=t,this.lc(t,e,0))}static register(t){t.register(Registration.transient("custom-attribute:with",this)),t.register(Registration.transient(this,this))}lc(t,e,i){(5&this.Ft.state)>0&&this.Xc(4096)}uc(t){this.Xc(t)}fc(t){this.view.Kr(t)}bc(t){this.view.detach(t)}gc(t){this.view.Qe(t)}Xc(t){const e=Scope.Ae(t,this.Ft.scope,void 0===this.value?{}:this.value);this.view.bind(t,e)}}With.inject=[IViewFactory,IRenderLocation],With.kind=CustomAttributeResource,With.description=Object.freeze({name:"with",aliases:PLATFORM.jt,defaultBindingMode:BindingMode.Nt,Et:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,xt:Object.freeze(new HooksDefinition(With.prototype))});const IProjectorLocator=DI.$e("IProjectorLocator").Dr(),CustomElementResource={name:customElementName,Z:customElementKey,De:isType$3,Jc:customElementBehavior,tt:define$3},defaultShadowOptions={mode:"open"},SCRIPT_REGEX=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ISanitizer=DI.$e("ISanitizer").Le(t=>t.singleton(class{Yc(t){return t.replace(SCRIPT_REGEX,"")}}));class SanitizeValueConverter{constructor(t){this.Zc=t}Nt(t){return null==t?null:this.Zc.Yc(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.tt("sanitize",SanitizeValueConverter);class ViewFactory{constructor(name,template,t){this.ta=0,this.ea=-1,this.cache=null,this.fe=t,this.name=name,this.template=template,this.parts=PLATFORM.Dt}ia(t,e){t&&("*"===t?t=ViewFactory.sa:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.ea&&e||(this.ea=t)),this.cache=this.ea>0?[]:null,this.ta=this.ea>0}ra(t){return null!=this.cache&&this.ea>this.cache.length}na(t){return this.ra(t)?(t.cache(0),this.cache.push(t),1):0}create(t){const cache=this.cache;let e;if(null!=cache&&cache.length>0)return(e=cache.pop()).state=128^(128|e.state),e;if(e=Controller.oa(this,this.fe,t),this.template.Ut(e,null,this.parts,t),!e.Gc)throw Reporter.error(90);return e}ha(parts){this.parts===PLATFORM.Dt?this.parts={...parts}:Object.assign(this.parts,parts)}}ViewFactory.sa=65535;const ITemplateCompiler=DI.$e("ITemplateCompiler").Dr();(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.ps=1]="none",ViewCompileFlags[ViewCompileFlags.ca=2]="surrogate",ViewCompileFlags[ViewCompileFlags.aa=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags={}));const ITemplateFactory=DI.$e("ITemplateFactory").Dr();class CompiledTemplate{constructor(dom,t,e,i){this.dom=dom,this.la=t,this.Bc=e,this.ua=i}Ut(t,host,parts,e=0){const i=t instanceof Controller?t:t.Ft;if(null==i)throw Error("Controller is missing from the view model");const s=i.Gc=this.Bc.da();i.context=this.ua,this.ua.Ut(e|=this.la.strategy,i,s.Xh(),this.la,host,parts)}}const noViewTemplate={ua:void 0,dom:void 0,la:void 0,Ut(t){const e=t instanceof Controller?t:t.Ft;e.Gc=NodeSequence.empty,e.context=void 0}},defaultCompilerName="default",IInstructionRenderer=DI.$e("IInstructionRenderer").Dr(),IRenderer=DI.$e("IRenderer").Dr(),IRenderingEngine=DI.$e("IRenderingEngine").Le(t=>t.singleton(RenderingEngine));class RenderingEngine{constructor(t,e,i,s){this.fa=t,this.va=e,this.ba=new Map,this.fe=i,this.ga=new Map,this.pa=s.reduce((t,e)=>(t[e.name]=e,t),Object.create(null))}ma(dom,t,e,i){if(null==t)return;let s=this.ga.get(t);return s||(s=this.Ta(dom,t,e,i),this.ga.set(t,s)),s}Ra(dom,t,e){if(null==t)throw Error("No definition provided");let i=this.ba.get(t);if(!i){const s=buildTemplateDefinition(null,t),template=this.Ta(dom,s,e,void 0);(i=new ViewFactory(s.name,template,this.fe)).ia(s.cache,1),this.ba.set(t,i)}return i}Ta(dom,t,e,i){if(null==e&&(e=this.fa),null!=t.template){const s=createRenderContext(dom,e,t.dependencies,i);if(t.build.required){const e=t.build.compiler||defaultCompilerName,compiler=this.pa[e];if(void 0===compiler)throw Reporter.error(20,e);t=compiler.compile(dom,t,new RuntimeCompilationResources(s),ViewCompileFlags.ca)}return this.va.create(s,t)}return noViewTemplate}}RenderingEngine.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class ViewFactoryProvider{Kt(t,parts){this.Bc=t,t.ha(parts)}resolve(t,e){const i=this.Bc;if(null==i)throw Reporter.error(50);if(!i.name||!i.name.length)throw Reporter.error(51);const s=i.parts[i.name];if(s){const i=t.get(IRenderingEngine),dom=t.get(IDOM);return i.Ra(dom,s,e)}return i}qt(){this.Bc=null}}let ChildrenObserver=class{constructor(t,e){this.ya=0,this.children=void 0,this.controller=e,this.fe=t,this.controller=Controller.Ca(e,void 0,void 0),this.Oa=this.controller.Oa,this.ut=0,this.Ba=0}oe(){return this.ut||(this.ut=1,this.Oa.wa(()=>{this.Ia()}),this.children=findElements(this.Oa.children)),this.children}ne(t){}Sa(t){this.ya&&(this.u(this.children,void 0,16|t),this.ya=0)}subscribe(t){this.Ba||(this.Ba=1,this.fe.Vn(this.Sa,this,24576)),this.i(t)}unsubscribe(t){this.s(t),this.Ba&&!this.l()&&(this.Ba=0,this.fe.En(this.Sa,this))}Ia(){this.children=findElements(this.Oa.children),hasChildrenChanged(this.controller.wc)&&this.controller.wc.Pa(),this.ya=1}};ChildrenObserver=__decorate([subscriberCollection()],ChildrenObserver);class Controller{constructor(t,e,i,s,r,host,n,o){if(this.id=nextId("au$component"),this.Zr=void 0,this.en=void 0,this.Yr=void 0,this.tn=void 0,this.rn=void 0,this.hn=void 0,this.sn=void 0,this.on=void 0,this.ln=void 0,this.dn=void 0,this.an=void 0,this.un=void 0,this.flags=t,this.Aa=e,this.ee=void 0,this.ie=void 0,this.state=0,this.Qc=o,null==s){if(null==e)throw Error("No IViewCache was provided when rendering a synthetic view.");if(null==i)throw Error("No ILifecycle was provided when rendering a synthetic view.");this.fe=i,this.xt=HooksDefinition.ps,this.wc=void 0,this.se=void 0,this.host=void 0,this.La=2,this.scope=void 0,this.Oa=void 0,this.Gc=void 0,this.context=void 0,this.location=void 0}else{if(null==r)throw Error("No parentContext was provided when rendering a custom element or attribute.");this.fe=r.get(ILifecycle),s.Ft=this;const e=s.constructor;if(!hasDescription(e))throw Error("The provided viewModel does not have a (valid) description.");const{description:i}=e;switch(createObservers(this.fe,i,t|=i.strategy,s),this.xt=i.xt,this.wc=s,this.se=getBindingContext(t,s),this.host=host,e.kind.name){case"custom-element":if(null==host)throw Error("No host element was provided when rendering a custom element.");this.La=0;const c=r.get(IRenderingEngine);let template=void 0;if(this.xt.Zs){const i=this.se.Ut(t,host,null==n.parts?PLATFORM.Dt:n.parts,r);null!=i&&"getElementTemplate"in i&&(template=i.ma(c,e,r))}else{const dom=r.get(IDOM);template=c.ma(dom,i,r,e)}if(void 0!==template){let parts;if(null==template.la||0===template.la.instructions.length||0===template.la.instructions[0].length||null==template.la.instructions[0][0].parts)parts=null==n.parts?PLATFORM.Dt:n.parts;else{const t=template.la.instructions[0][0];parts=null==n.parts?t.parts:{...n.parts,...t.parts},o===PLATFORM.jt&&(this.Qc=Object.keys(t.parts))}template.Ut(this,host,parts)}this.scope=Scope.create(t,this.se,null),this.Oa=r.get(IProjectorLocator).$a(r.get(IDOM),this,host,i),this.location=void 0;break;case"custom-attribute":this.La=1,this.scope=void 0,this.Oa=void 0,this.Gc=void 0,this.context=void 0,this.location=void 0;break;default:throw Error(`Invalid resource kind: '${e.kind.name}'`)}this.xt.Us&&this.se.ka(t)}}static Ca(t,e,host,i=0,s=PLATFORM.Dt){let r=Controller.Ma.get(t);return void 0===r&&(r=new Controller(i,void 0,void 0,t,e,host,s,PLATFORM.jt),this.Ma.set(t,r)),r}static Fa(t,e,i=0,s=PLATFORM.jt){let r=Controller.Ma.get(t);return void 0===r&&(r=new Controller(i,void 0,void 0,t,e,void 0,PLATFORM.Dt,s),this.Ma.set(t,r)),r}static oa(t,e,i=0){return new Controller(i,t,e,void 0,void 0,void 0,PLATFORM.Dt,PLATFORM.jt)}xa(t){this.scope=t,this.state|=16384}Rc(t){this.state=32768^(32768|this.state),this.location=t}release(t){return this.state|=32768,(32&this.state)>0?this.Aa.ra(this):this.Da(t)}bind(t,e){switch(t|=4096,this.La){case 0:return this.Va(t,e);case 1:return this.Ea(t,e);case 2:return this.ja(t,e)}}Qe(t){switch(t|=8192,this.La){case 0:return this.Na(t);case 1:return this._a(t);case 2:return this.za(t)}}bound(t){this.se.bound(t)}in(t){this.se.in(t)}Kr(t){if(0>=(40&this.state)||0!=(268435456&t))switch(t|=16384,this.La){case 0:this.Ha(t);break;case 1:this.Ua(t);break;case 2:this.Wa(t)}}detach(t){if(0!=(40&this.state))switch(t|=32768,this.La){case 0:this.Ka(t);break;case 1:this.qa(t);break;case 2:this.Qa(t)}}nn(t){this.se.nn(t)}cn(t){this.se.cn(t)}mount(t){switch(this.La){case 0:this.Ga(t);break;case 2:this.Xa(t)}}unmount(t){switch(this.La){case 0:this.Ja(t);break;case 2:this.Da(t)}}cache(t){switch(this.La){case 0:this.Ya(t);break;case 1:this.Za(t);break;case 2:this.tl(t)}}el(t){const{ee:e}=this;if(void 0!==e){const i=e.find(e=>e.Hn===t);if(void 0!==i)return i.Un}}Va(t,e){const $scope=this.scope;if(null==$scope.we)if(null!=e&&null!=e.we&&e.we!==PLATFORM.Dt?$scope.we={...e.we}:this.Qc!==PLATFORM.jt&&($scope.we={}),null==$scope.we)$scope.we=PLATFORM.Dt;else for(const t of this.Qc)$scope.we[t]=$scope;if((134217728&t)>0)return this.il(t,$scope),LifecycleTask.done;if((4&this.state)>0)return LifecycleTask.done;if(t|=4096,this.state|=1,this.fe.bound.Xr(),this.il(t,$scope),this.xt.Ws){const e=this.se.uc(t);if(hasAsyncWork(e))return new ContinuationTask(e,this.sl,this,t,$scope)}return this.sl(t,$scope)}Ea(t,e){if((4&this.state)>0){if(this.scope===e)return LifecycleTask.done;const i=this.Qe(t|=4096);if(!i.done)return new ContinuationTask(i,this.bind,this,t,e)}else t|=4096;if(this.state|=1,this.scope=e,this.fe.bound.Xr(),this.xt.Ws){const e=this.se.uc(t);if(hasAsyncWork(e))return new ContinuationTask(e,this.rl,this,t)}return this.rl(t),LifecycleTask.done}ja(t,e){if(null==e)throw Error("Scope is null or undefined");if((134217728&t)>0)return this.il(t,e),LifecycleTask.done;if((4&this.state)>0){if(this.scope===e||(16384&this.state)>0)return LifecycleTask.done;const i=this.Qe(t|=4096);if(!i.done)return new ContinuationTask(i,this.bind,this,t,e)}else t|=4096;return 0==(16384&this.state)&&(this.scope=e),this.state|=1,this.fe.bound.Xr(),this.il(t,e),this.sl(t,e)}il(t,e){const{ee:i}=this;if(void 0!==i){const{length:s}=i;for(let r=0;s>r;++r)i[r].qn(t,e)}}sl(t,e){let i,s=void 0;const{ie:r}=this;if(void 0!==r){const{length:n}=r;for(let o=0;n>o;++o)(i=r[o].bind(t,e)).done||(void 0===s&&(s=[]),s.push(i))}return void 0===s?(this.rl(t),LifecycleTask.done):new AggregateContinuationTask(s,this.rl,this,t)}rl(t){this.xt.Ks&&this.fe.bound.add(this),this.state=1^this.state|4,this.fe.bound.end(t)}Na(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.fe.in.Xr(),this.xt.Js){const e=this.se.gc(t);if(hasAsyncWork(e))return new ContinuationTask(e,this.nl,this,t)}return this.nl(t)}_a(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.fe.in.Xr(),this.xt.Js){const e=this.se.gc(t);if(hasAsyncWork(e))return new ContinuationTask(e,this.ol,this,t)}return this.ol(t),LifecycleTask.done}za(t){return 0==(4&this.state)?LifecycleTask.done:(this.state|=2,t|=8192,this.fe.in.Xr(),this.nl(t))}hl(t){const{ee:e}=this;if(void 0!==e)for(let i=e.length-1;i>=0;--i)e[i].Qn(t);this.ol(t)}nl(t){let e,i=void 0;const{ie:s}=this;if(void 0!==s)for(let r=s.length-1;r>=0;--r)(e=s[r].Qe(t)).done||(void 0===i&&(i=[]),i.push(e));return void 0===i?(this.hl(t),LifecycleTask.done):new AggregateContinuationTask(i,this.hl,this,t)}ol(t){switch(this.La){case 1:this.scope=void 0;break;case 2:0==(16384&this.state)&&(this.scope=void 0)}this.xt.Ys&&this.fe.in.add(this),this.state=6^(6|this.state),this.fe.in.end(t)}Ha(t){t|=16384,this.state|=8,this.fe.mount.add(this),this.fe.nn.Xr(),this.xt.qs&&this.se.fc(t),this.cl(t),this.xt.Qs&&this.fe.nn.add(this),this.state=8^this.state|32,this.fe.nn.end(t)}Ua(t){t|=16384,this.state|=8,this.fe.nn.Xr(),this.xt.qs&&this.se.fc(t),this.xt.Qs&&this.fe.nn.add(this),this.state=8^this.state|32,this.fe.nn.end(t)}Wa(t){((32&this.state)>0&&268435456&t)>0?this.fe.mount.add(this):(t|=16384,this.state|=8,this.fe.mount.add(this),this.fe.nn.Xr(),this.cl(t),this.state=8^this.state|32,this.fe.nn.end(t))}Ka(t){t|=32768,this.state|=16,this.fe.cn.Xr(),this.fe.unmount.add(this),this.xt.Gs&&this.se.bc(t),this.al(t),this.xt.Xs&&this.fe.cn.add(this),this.state=48^(48|this.state),this.fe.cn.end(t)}qa(t){t|=32768,this.state|=16,this.fe.cn.Xr(),this.xt.Gs&&this.se.bc(t),this.xt.Xs&&this.fe.cn.add(this),this.state=48^(48|this.state),this.fe.cn.end(t)}Qa(t){t|=32768,this.state|=16,this.fe.cn.Xr(),this.fe.unmount.add(this),this.al(t),this.state=48^(48|this.state),this.fe.cn.end(t)}cl(t){const{ie:e}=this;if(void 0!==e){const{length:i}=e;for(let s=0;i>s;++s)e[s].Kr(t)}}al(t){const{ie:e}=this;if(void 0!==e)for(let i=e.length-1;i>=0;--i)e[i].detach(t)}Ga(t){(64&this.state)>0||(this.state|=64,this.Oa.ll(this.Gc))}Xa(t){this.state|=64,this.Gc.insertBefore(this.location)}Ja(t){0!=(64&this.state)&&(this.state=64^(64|this.state),this.Oa.ul(this.Gc))}Da(t){return 0==(64&this.state)?0:(this.state=64^(64|this.state),this.Gc.remove(),this.Gc.Ur(),(32768&this.state)>0&&(this.state=32768^(32768|this.state),this.Aa.na(this))?(this.state|=128,1):0)}Ya(t){this.xt.tr&&this.se.pc(t|=65536)}Za(t){t|=65536,this.xt.tr&&this.se.pc(t);const{ie:e}=this;if(void 0!==e){const{length:i}=e;for(let s=i-1;s>=0;--s)e[s].cache(t)}}tl(t){const{ie:e}=this;if(void 0!==e){const{length:i}=e;for(let s=i-1;s>=0;--s)e[s].cache(t)}}}Controller.Ma=new WeakMap;const IActivator=DI.$e("IActivator").Le(t=>t.singleton(Activator));class Activator{static register(t){return Registration.singleton(IActivator,this).register(t)}Cc(host,component,t,e=1024,i){const s=Controller.Ca(component,t,host,e=void 0===e?0:e);let r=s.bind(4096|e,i);return r.done?s.Kr(16384|e):r=new ContinuationTask(r,s.Kr,s,16384|e),r}yc(component,t=2048){const e=Controller.Ca(component,void 0,void 0);return e.detach(32768|t),e.Qe(8192|t)}}const{rt:enterStart,ct:leaveStart}=Profiler.dl("Aurelia.start"),{rt:enterStop,ct:leaveStop}=Profiler.dl("Aurelia.stop");class CompositionRoot{constructor(t,e){if(this.fl=t,null!=t.host)this.fa=e.has(INode,0)?e._t():e,Registration.vl(INode,t.host).register(this.fa),this.host=t.host;else{if(!e.has(INode,1))throw Error("No host element found.");this.fa=e,this.host=e.get(INode)}this.strategy=null!=t.strategy?t.strategy:1;const i=this.fa.get(IDOMInitializer);this.dom=i.initialize(t),this.wc=CustomElementResource.De(t.component)?this.fa.get(t.component):t.component,this.controller=Controller.Ca(this.wc,this.fa,this.host,this.strategy),this.fe=this.fa.get(ILifecycle),this.bl=this.fa.get(IActivator),1==t.gl?this.fe.jn(t.pl):this.fe.Nn(),this.cc=LifecycleTask.done,this.ml=1,this.Tl=1}Cc(t){const{cc:e,host,wc:i,fa:s,bl:r,strategy}=this,n=1024|strategy;if(e.done)this.cc=null==t||t.done?r.Cc(host,i,s,n,void 0):new ContinuationTask(t,r.Cc,r,host,i,s,n,void 0);else if(null==t||t.done)this.cc=new ContinuationTask(e,r.Cc,r,host,i,s,n,void 0);else{const o=new ContinuationTask(e,t.tc,t);this.cc=new ContinuationTask(o,r.Cc,r,host,i,s,n,void 0)}return this.cc}yc(t){const{cc:e,wc:i,bl:s,strategy}=this,r=2048|strategy;if(e.done)this.cc=null==t||t.done?s.yc(i,r):new ContinuationTask(t,s.yc,s,i,r);else if(null==t||t.done)this.cc=new ContinuationTask(e,s.yc,s,i,r);else{const n=new ContinuationTask(e,t.tc,t);this.cc=new ContinuationTask(n,s.yc,s,i,r)}return this.cc}}class Aurelia{constructor(t=DI.Rl()){this.fa=t,this.cc=LifecycleTask.done,this.yl=0,this.Cl=0,this.Ol=0,this.Bl=void 0,this.next=void 0,Registration.vl(Aurelia,this).register(t)}get wl(){return this.yl}get Il(){return this.Cl}get Sl(){return this.Ol}get root(){if(null==this.Bl){if(null==this.next)throw Error("root is not defined");return this.next}return this.Bl}register(...t){return this.fa.register(...t),this}app(t){return this.next=new CompositionRoot(t,this.fa),this.wl&&this.start(),this}start(t=this.next){if(null==t)throw Error("There is no composition root");return this.stop(t),this.cc.done?this.Pl(t):this.cc=new ContinuationTask(this.cc,this.Pl,this,t),this.cc=this.root.Cc(this.cc),this.cc=this.cc.done?this.Al(t):new ContinuationTask(this.cc,this.Al,this,t),this.cc}stop(t=this.Bl){return this.yl&&null!=t&&(this.cc.done?this.Ll(t):this.cc=new ContinuationTask(this.cc,this.Ll,this,t),this.cc=t.yc(this.cc),this.cc=this.cc.done?this.$l(t):new ContinuationTask(this.cc,this.$l,this,t)),this.cc}tc(){return this.cc.tc()}Pl(t){Reflect.set(t.host,"$au",this),this.Bl=t,this.Cl=1,Profiler.enabled&&enterStart()}Al(t){return this.yl=1,this.Cl=0,this.dispatchEvent(t,"aurelia-composed",t.dom),this.dispatchEvent(t,"au-started",t.host),Profiler.enabled&&leaveStart(),LifecycleTask.done}Ll(t){this.yl=0,this.Ol=1,Profiler.enabled&&enterStop()}$l(t){return Reflect.deleteProperty(t.host,"$au"),this.Bl=void 0,this.Ol=0,this.dispatchEvent(t,"au-stopped",t.host),Profiler.enabled&&leaveStop(),LifecycleTask.done}dispatchEvent(t,name,e){(e="dispatchEvent"in e?e:t.dom).dispatchEvent(t.dom.Nh(name,{detail:this,bubbles:1,cancelable:1}))}}PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=DI.$e("IDOMInitializer").Dr(),slice$e=[].slice;class Renderer{constructor(t){const e=this.kl={};t.forEach(t=>{e[t.te]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Ut(t,dom,e,i,targets,s,host,parts){Tracer.enabled&&Tracer.rt("Renderer","render",slice$e.call(arguments));const r=s.instructions,n=this.kl;if(targets.length!==r.length)throw Reporter.error(targets.length>r.length?30:31);let instructions,o,c;for(let s=0,a=targets.length;a>s;++s){o=targets[s];for(let a=0,l=(instructions=r[s]).length;l>a;++a)n[(c=instructions[a]).type].Ut(t,dom,e,i,o,c,parts)}if(host){const r=s.surrogates;for(let s=0,o=r.length;o>s;++s)n[(c=r[s]).type].Ut(t,dom,e,i,host,c,parts)}Tracer.enabled&&Tracer.ct()}}Renderer.inject=[all(IInstructionRenderer)];let SetPropertyRenderer=class{Ut(t,dom,e,i,s,r){Tracer.enabled&&Tracer.rt("SetPropertyRenderer","render",slice$e.call(arguments)),getTarget(s)[r.to]=r.value,Tracer.enabled&&Tracer.ct()}};SetPropertyRenderer=__decorate([instructionRenderer("re")],SetPropertyRenderer);let CustomElementRenderer=class{Ut(t,dom,e,i,s,r){Tracer.enabled&&Tracer.rt("CustomElementRenderer","render",slice$e.call(arguments));const n=e.Wt(i,s,r,null,null,s,1),component=e.get(customElementKey(r.res)),o=e.get(IRenderer).kl,c=r.instructions,a=Controller.Ca(component,e,s,t,r);let l;for(let s=0,r=c.length;r>s;++s)o[(l=c[s]).type].Ut(t,dom,e,i,a,l);addComponent(i,a),n.qt(),Tracer.enabled&&Tracer.ct()}};CustomElementRenderer=__decorate([instructionRenderer("ra")],CustomElementRenderer);let CustomAttributeRenderer=class{Ut(t,dom,e,i,s,r){Tracer.enabled&&Tracer.rt("CustomAttributeRenderer","render",slice$e.call(arguments));const n=e.Wt(i,s,r),component=e.get(customAttributeKey(r.res)),o=e.get(IRenderer).kl,c=r.instructions,a=Controller.Fa(component,e,t);let l;for(let s=0,r=c.length;r>s;++s)o[(l=c[s]).type].Ut(t,dom,e,i,a,l);addComponent(i,a),n.qt(),Tracer.enabled&&Tracer.ct()}};CustomAttributeRenderer=__decorate([instructionRenderer("rb")],CustomAttributeRenderer);let TemplateControllerRenderer=class{constructor(t){this.Ml=t}Ut(t,dom,e,i,s,r,parts){Tracer.enabled&&Tracer.rt("TemplateControllerRenderer","render",slice$e.call(arguments));const n=this.Ml.Ra(dom,r.def,e),o=e.Wt(i,s,r,n,parts,dom.jh(s),0),component=e.get(customAttributeKey(r.res)),c=e.get(IRenderer).kl,a=r.instructions,l=Controller.Fa(component,e,t,null==r.parts?PLATFORM.jt:Object.keys(r.parts));if(r.link){const t=i.ie;component.link(t[t.length-1])}let u;for(let s=0,r=a.length;r>s;++s)c[(u=a[s]).type].Ut(t,dom,e,i,l,u);addComponent(i,l),o.qt(),Tracer.enabled&&Tracer.ct()}};TemplateControllerRenderer.inject=[IRenderingEngine],TemplateControllerRenderer=__decorate([instructionRenderer("rc")],TemplateControllerRenderer);let LetElementRenderer=class{constructor(t,e){this.Fl=t,this.ot=e}Ut(t,dom,e,i,s,r){Tracer.enabled&&Tracer.rt("LetElementRenderer","render",slice$e.call(arguments)),dom.remove(s);const n=r.instructions,toViewModel=r.toViewModel;let o,c,a;for(let t=0,s=n.length;s>t;++t)c=ensureExpression(this.Fl,(o=n[t]).from,48),addBinding(i,a=new LetBinding(c,o.to,this.ot,e,toViewModel));Tracer.enabled&&Tracer.ct()}};LetElementRenderer.inject=[IExpressionParser,IObserverLocator],LetElementRenderer=__decorate([instructionRenderer("rd")],LetElementRenderer);let CallBindingRenderer=class{constructor(t,e){this.Fl=t,this.ot=e}Ut(t,dom,e,i,s,r){Tracer.enabled&&Tracer.rt("CallBindingRenderer","render",slice$e.call(arguments));const n=ensureExpression(this.Fl,r.from,153);addBinding(i,new Call(n,getTarget(s),r.to,this.ot,e)),Tracer.enabled&&Tracer.ct()}};CallBindingRenderer.inject=[IExpressionParser,IObserverLocator],CallBindingRenderer=__decorate([instructionRenderer("rh")],CallBindingRenderer);let RefBindingRenderer=class{constructor(t){this.Fl=t}Ut(t,dom,e,i,s,r){Tracer.enabled&&Tracer.rt("RefBindingRenderer","render",slice$e.call(arguments));const n=ensureExpression(this.Fl,r.from,1280);addBinding(i,new Ref(n,getTarget(s),e)),Tracer.enabled&&Tracer.ct()}};RefBindingRenderer.inject=[IExpressionParser],RefBindingRenderer=__decorate([instructionRenderer("rj")],RefBindingRenderer);let InterpolationBindingRenderer=class{constructor(t,e){this.Fl=t,this.ot=e}Ut(t,dom,e,i,s,r){let n;Tracer.enabled&&Tracer.rt("InterpolationBindingRenderer","render",slice$e.call(arguments));const o=ensureExpression(this.Fl,r.from,2048);addBinding(i,n=o.ns?new MultiInterpolationBinding(this.ot,o,getTarget(s),r.to,BindingMode.Nt,e):new InterpolationBinding(o.os,o,getTarget(s),r.to,BindingMode.Nt,this.ot,e,1)),Tracer.enabled&&Tracer.ct()}};InterpolationBindingRenderer.inject=[IExpressionParser,IObserverLocator],InterpolationBindingRenderer=__decorate([instructionRenderer("rf")],InterpolationBindingRenderer);let PropertyBindingRenderer=class{constructor(t,e){this.Fl=t,this.ot=e}Ut(t,dom,e,i,s,r){Tracer.enabled&&Tracer.rt("PropertyBindingRenderer","render",slice$e.call(arguments));const n=ensureExpression(this.Fl,r.from,48|r.mode);addBinding(i,new Binding(n,getTarget(s),r.to,r.mode,this.ot,e)),Tracer.enabled&&Tracer.ct()}};PropertyBindingRenderer.inject=[IExpressionParser,IObserverLocator],PropertyBindingRenderer=__decorate([instructionRenderer("rg")],PropertyBindingRenderer);let IteratorBindingRenderer=class{constructor(t,e){this.Fl=t,this.ot=e}Ut(t,dom,e,i,s,r){Tracer.enabled&&Tracer.rt("IteratorBindingRenderer","render",slice$e.call(arguments));const n=ensureExpression(this.Fl,r.from,539);addBinding(i,new Binding(n,getTarget(s),r.to,BindingMode.Nt,this.ot,e)),Tracer.enabled&&Tracer.ct()}};IteratorBindingRenderer.inject=[IExpressionParser,IObserverLocator],IteratorBindingRenderer=__decorate([instructionRenderer("rk")],IteratorBindingRenderer);const IObserverLocatorRegistration=ObserverLocator,ILifecycleRegistration=Lifecycle,IRendererRegistration=Renderer,DefaultComponents=[ObserverLocator,Lifecycle,Renderer],IfRegistration=If,ElseRegistration=Else,RepeatRegistration=Repeat,ReplaceableRegistration=Replaceable,WithRegistration=With,SanitizeValueConverterRegistration=SanitizeValueConverter,DebounceBindingBehaviorRegistration=DebounceBindingBehavior,OneTimeBindingBehaviorRegistration=OneTimeBindingBehavior,ToViewBindingBehaviorRegistration=ToViewBindingBehavior,FromViewBindingBehaviorRegistration=FromViewBindingBehavior,SignalBindingBehaviorRegistration=SignalBindingBehavior,ThrottleBindingBehaviorRegistration=ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration=TwoWayBindingBehavior,PriorityBindingBehaviorRegistration=PriorityBindingBehavior,DefaultResources=[If,Else,Repeat,Replaceable,With,SanitizeValueConverter,DebounceBindingBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,SignalBindingBehavior,PriorityBindingBehavior,ThrottleBindingBehavior,TwoWayBindingBehavior],CallBindingRendererRegistration=CallBindingRenderer,CustomAttributeRendererRegistration=CustomAttributeRenderer,CustomElementRendererRegistration=CustomElementRenderer,InterpolationBindingRendererRegistration=InterpolationBindingRenderer,IteratorBindingRendererRegistration=IteratorBindingRenderer,LetElementRendererRegistration=LetElementRenderer,PropertyBindingRendererRegistration=PropertyBindingRenderer,RefBindingRendererRegistration=RefBindingRenderer,SetPropertyRendererRegistration=SetPropertyRenderer,TemplateControllerRendererRegistration=TemplateControllerRenderer,DefaultRenderers=[PropertyBindingRenderer,IteratorBindingRenderer,CallBindingRenderer,RefBindingRenderer,InterpolationBindingRenderer,SetPropertyRenderer,CustomElementRenderer,CustomAttributeRenderer,TemplateControllerRenderer,LetElementRenderer],RuntimeBasicConfiguration={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Rl(){return this.register(DI.Rl())}};class InterpolationInstruction{constructor(from,to){this.type="rf",this.from=from,this.to=to}}class OneTimeBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}class ToViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Nt,this.oneTime=0,this.to=to}}class FromViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Je,this.oneTime=0,this.to=to}}class TwoWayBindingInstruction{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.vs,this.oneTime=0,this.to=to}}class IteratorBindingInstruction{constructor(from,to){this.type="rk",this.from=from,this.to=to}}class CallBindingInstruction{constructor(from,to){this.type="rh",this.from=from,this.to=to}}class RefBindingInstruction{constructor(from){this.type="rj",this.from=from}}class SetPropertyInstruction{constructor(value,to){this.type="re",this.to=to,this.value=value}}class HydrateElementInstruction{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}class HydrateAttributeInstruction{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}class HydrateTemplateController{constructor(def,res,instructions,link,parts){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.parts=parts,this.res=res}}class LetElementInstruction{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}class LetBindingInstruction{constructor(from,to){this.type="ri",this.from=from,this.to=to}}export{AccessKeyed,AccessMember,AccessScope,AccessThis,AggregateContinuationTask,AggregateTerminalTask,ArrayBindingPattern,ArrayLiteral,ArrayObserver,Assign,Aurelia,Binary,Bindable,Binding,BindingBehavior,BindingBehaviorResource,BindingContext,BindingIdentifier,BindingMode,BindingModeBehavior,BindingStrategy,BindingType,Call,CallBindingInstruction,CallBindingRendererRegistration,CallFunction,CallMember,CallScope,CollectionKind,CollectionLengthObserver,CollectionSizeObserver,CompiledTemplate,CompositionRoot,Conditional,ContinuationTask,Controller,CustomAttributeRendererRegistration,CustomAttributeResource,CustomElementRendererRegistration,CustomElementResource,CustomSetterObserver,DOM,DebounceBindingBehavior,DebounceBindingBehaviorRegistration,DefaultResources,DelegationStrategy,DirtyCheckProperty,DirtyCheckSettings,Else,ElseRegistration,ExpressionKind,ForOfStatement,FromViewBindingBehavior,FromViewBindingBehaviorRegistration,FromViewBindingInstruction,GetterObserver,Hooks,HooksDefinition,HtmlLiteral,HydrateAttributeInstruction,HydrateElementInstruction,HydrateTemplateController,IController,IDOM,IDOMInitializer,IDirtyChecker,IExpressionParser,IInstructionRenderer,ILifecycle,ILifecycleRegistration,INode,IObserverLocator,IObserverLocatorRegistration,IProjectorLocator,IRenderLocation,IRenderer,IRendererRegistration,IRenderingEngine,ISanitizer,ISignaler,ITargetAccessorLocator,ITargetObserverLocator,ITargetedInstruction,ITemplateCompiler,ITemplateFactory,IViewFactory,If,IfRegistration,Interpolation,InterpolationBinding,InterpolationBindingRendererRegistration,InterpolationInstruction,IteratorBindingInstruction,IteratorBindingRendererRegistration,LetBinding,LetBindingInstruction,LetElementInstruction,LetElementRendererRegistration,LifecycleFlags,LifecycleTask,MapObserver,MultiInterpolationBinding,NodeSequence,ObjectBindingPattern,ObjectLiteral,ObserverLocator,OneTimeBindingBehavior,OneTimeBindingBehaviorRegistration,OneTimeBindingInstruction,OverrideContext,PrimitiveLiteral,PrimitiveObserver,Priority,PriorityBindingBehavior,PriorityBindingBehaviorRegistration,PromiseTask,PropertyAccessor,PropertyBindingRendererRegistration,ProxyObserver,Ref,RefBindingInstruction,RefBindingRendererRegistration,Repeat,RepeatRegistration,Replaceable,ReplaceableRegistration,RuntimeBasicConfiguration,SanitizeValueConverter,SanitizeValueConverterRegistration,Scope,SelfObserver,SetObserver,SetPropertyInstruction,SetPropertyRendererRegistration,SetterObserver,SignalBindingBehavior,SignalBindingBehaviorRegistration,State,TaggedTemplate,TargetedInstructionType,Template,TemplateControllerRendererRegistration,TerminalTask,ThrottleBindingBehavior,ThrottleBindingBehaviorRegistration,ToViewBindingBehavior,ToViewBindingBehaviorRegistration,ToViewBindingInstruction,TwoWayBindingBehavior,TwoWayBindingBehaviorRegistration,TwoWayBindingInstruction,Unary,ValueConverter,ValueConverterResource,ViewCompileFlags,ViewFactory,ViewModelKind,With,WithRegistration,addBinding,addComponent,arePureLiterals,bindable,bindingBehavior,buildTemplateDefinition,callsFunction,cloneIndexMap,collectionSubscriberCollection,computed,connectable,connects,containerless,copyIndexMap,createComputedObserver,createIndexMap,createRenderContext,customAttribute,customElement,disableArrayObservation,disableMapObservation,disableSetObservation,dynamicOptions,enableArrayObservation,enableMapObservation,enableSetObservation,ensureExpression,getCollectionObserver,hasAncestor,hasBind,hasUnbind,instructionRenderer,isAssignable,isIndexMap,isLeftHandSide,isLiteral,isPrimary,isPureLiteral,isResource,isTargetedInstruction,observes,proxySubscriberCollection,subscriberCollection,templateController,useShadowDOM,valueConverter};
