(function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("@aurelia/kernel")):"function"==typeof define&&define.amd?define(["exports","@aurelia/kernel"],s):s((t=t||self).runtime={},t.kernel)})(this,function(t,kernel){"use strict";function s(t,s,i,n){var h,e,r=arguments.length,o=3>r?s:null===n?n=Object.getOwnPropertyDescriptor(s,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,s,i,n);else for(e=t.length-1;e>=0;e--)(h=t[e])&&(o=(3>r?h(o):r>3?h(s,i,o):h(s,i))||o);return r>3&&o&&Object.defineProperty(s,i,o),o}function subscriberCollection(s){return function(e){const u=e.prototype;switch(u.t=0,u.s=null,u.i=null,u.h=null,u.o=null,u.l=i,u.u=n,u.p=c,u.v=l,s){case t.MutationKind.g:u.m=h;break;case t.MutationKind.C:u.m=r;break;case t.MutationKind.O:u.m=o}}}function i(t){if(this.p(t))return 0;const s=this.t;return 1&s?2&s?4&s?8&s?(this.o.push(t),1):(this.o=[t],this.t|=8,1):(this.h=t,this.t|=4,1):(this.i=t,this.t|=2,1):(this.s=t,this.t|=1,1)}function n(t){const s=this.t;if(1&s&&this.s===t)return this.s=null,this.t&=-2,1;if(2&s&&this.i===t)return this.i=null,this.t&=-3,1;if(4&s&&this.h===t)return this.h=null,this.t&=-5,1;if(8&s){const s=this.o;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.t&=-9),1}return 0}function h(t,s,i){const n=this.s,h=this.i,r=this.h;let o=this.o;null!==o&&(o=o.slice()),null!==n&&e(n,t,s,i,this[n.id]),null!==h&&e(h,t,s,i,this[h.id]),null!==r&&e(r,t,s,i,this[r.id]);const l=o&&o.length;if(void 0!==l&&l>0){let n=null;for(let h=0;l>h;++h)null!==(n=o[h])&&e(n,t,s,i,this[n.id])}}function e(t,s,i,n,h){void 0===h?t.j(s,i,n):48==(48&(n|h))?(262144&n)>0&&t.j(s,i,-262193&n|h):t.j(s,i,n|h)}function r(t,s,i){const n=this.s,h=this.i,e=this.h;let r=this.o;null!==r&&(r=r.slice()),null!==n&&n.j(t,s,i),null!==h&&h.j(t,s,i),null!==e&&e.j(t,s,i);const o=r&&r.length;if(void 0!==o&&o>0)for(let n=0;o>n;++n){const h=r[n];null!==h&&h.j(t,s,i)}this.T.A(this).catch(t=>{throw t})}function o(t,s,i,n){const h=this.s,e=this.i,r=this.h;let o=this.o;null!==o&&(o=o.slice()),null!==h&&h.j(t,s,i,n),null!==e&&e.j(t,s,i,n),null!==r&&r.j(t,s,i,n);const l=o&&o.length;if(void 0!==l&&l>0)for(let h=0;l>h;++h){const e=o[h];null!==e&&e.j(t,s,i,n)}}function l(){return 0!==this.t}function c(t){const s=this.t;if(1&s&&this.s===t)return 1;if(2&s&&this.i===t)return 1;if(4&s&&this.h===t)return 1;if(8&s){const s=this.o;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const s=t.prototype;s.R=0,s.S=null,s.$=null,s.I=null,s.k=null,s.P=u,s.V=a,s.D=b,s.L=d,s.B=f}}function u(t){if(this.D(t))return 0;const s=this.R;return 1&s?2&s?4&s?8&s?(this.k.push(t),1):(this.k=[t],this.R|=8,1):(this.I=t,this.R|=4,1):(this.$=t,this.R|=2,1):(this.S=t,this.R|=1,1)}function a(t){const s=this.R;if(1&s&&this.S===t)return this.S=null,this.R&=-2,1;if(2&s&&this.$===t)return this.$=null,this.R&=-3,1;if(4&s&&this.I===t)return this.I=null,this.R&=-5,1;if(8&s){const s=this.k;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.R&=-9),1}return 0}function f(t,s){const i=this.S,n=this.$,h=this.I;let e=this.k;null!==e&&(e=e.slice()),null!==i&&i.N(t,s),null!==n&&n.N(t,s),null!==h&&h.N(t,s);const r=e&&e.length;if(void 0!==r&&r>0)for(let i=0;r>i;++i){const n=e[i];null!==n&&n.N(t,s)}}function d(){return 0!==this.R}function b(t){const s=this.R;if(1&s&&this.S===t)return 1;if(2&s&&this.$===t)return 1;if(4&s&&this.I===t)return 1;if(8&s){const s=this.k;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function p(value){return null!==value&&"object"==typeof value}function v(value,t){if(p(value))if(void 0!==value.F){const s=value.F;let i,n;for(i in s)void 0!==(n=s[i]).M&&n.M(468|t)}else void 0!==value.U&&void 0!==value.U.M&&value.U.M(468|t)}function g(t){0==this.q&&(this.q=1,this.K=this.H[this.W],0==(4&this._)&&(Lt.get=(()=>this.G()),Lt.set=(value=>{this.J(value,0)}),Dt(this.H,this.W,Lt)||kernel.Reporter.write(1,this.W,this.H))),this.l(t)}function w(){Reflect.deleteProperty(this.H,this.W),this.H=null,this.W=null,this.K=null}function propertyObserver(){return function(s){subscriberCollection(t.MutationKind.g)(s);const i=s.prototype;i.q=0,i.H=null,i.W=null,i.K=Symbol(),i.subscribe=i.subscribe||g,i.unsubscribe=i.unsubscribe||i.u,i.X=i.X||w}}function m(t){const s=BindingBehaviorResource.Y(this.description.name);t.register(kernel.Registration.singleton(s,this))}function y(t){const s=this.kind.Y(this.description.name);t.register(kernel.Registration.singleton(s,this))}function hasBind(t){return 2048==(2048&t.Z)}function hasUnbind(t){return 4096==(4096&t.Z)}function isLiteral(t){return 16384==(16384&t.Z)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let s=0;t.length>s;++s)if(!isPureLiteral(t[s]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.Z){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.tt);case 17925:return 1}return 0}function C(t,s,i,n){const h=n.length,e=Array(h);for(let r=0;h>r;++r)e[r]=n[r].evaluate(t,s,i);return e}function O(t,s,name){const i=null==s?null:s[name];if("function"==typeof i)return i;if(!(1048576&t)&&null==i)return null;throw kernel.Reporter.error(207,s,name,i)}function j(strategy){return 0==(strategy&Ut)||8===strategy?1|strategy:strategy}function A(t){if(t===Ht){const s=Kt.length=Qt.length=(Ht+=5)+1;for(let i=t+1;s>i;++i)Kt[i]=`_observer${i}`,Qt[i]=`_observerVersion${i}`}}function T(t){const s=void 0===this.st?0:this.st;let i=s;for(;i--&&this[Kt[i]]!==t;);if(-1===i){for(i=0;this[Kt[i]];)i++;this[Kt[i]]=t,t.subscribe(this),t[this.id]|=16,i===s&&(this.st=i+1)}void 0===this.version&&(this.version=0),this[Qt[i]]=this.version,A(i)}function R(t,s,i){const n=this.nt.it(t,s,i);this.ht(n)}function S(all){const t=this.st;let s,i;if(1==all)for(let n=0;t>n;++n)null!=(i=this[s=Kt[n]])&&(this[s]=null,i.unsubscribe(this),i[this.id]&=-17);else{const n=this.version;for(let h=0;t>h;++h)this[Qt[h]]!==n&&null!=(i=this[s=Kt[h]])&&(this[s]=null,i.unsubscribe(this),i[this.id]&=-17)}}function $(t){const s=t.prototype;return s.hasOwnProperty("observeProperty")||(s.et=R),s.hasOwnProperty("unobserve")||(s.unobserve=S),s.hasOwnProperty("addObserver")||(s.ht=T),t}function connectable(t){return void 0===t?$:$(t)}function I(t,s){if(this.K!==(t=null==t?this.defaultValue:t)){if(this.oldValue=this.K,this.K=t,!(2496&s)||this.rt&&4194304&s)return this.ot=s,this.T.A(this);this.lt(t,s)}return Promise.resolve()}function k(t){if(this.rt&&4194304&t)return void this.T.A(this).catch(t=>{throw t});const s=this.K;this.oldValue!==s&&(this.lt(s,this.ot|t|16),this.oldValue=this.K)}function P(t){const s=this.G();this.K!==s&&(this.lt(s,this.ot|t|16),this.K=s),v(s,t)}function V(){this.K=null,this.oldValue=null,this.defaultValue=null,this.H=null,this.W=""}function targetObserver(s=null){return function(i){subscriberCollection(t.MutationKind.g)(i);const n=i.prototype;n.ct=null,n.K=s,n.oldValue=s,n.defaultValue=s,n.H=null,n.W="",n.M=n.M||P,n.J=n.J||I,n.flush=n.flush||k,n.X=n.X||V}}function D(t){this.B(this.ut,t|this._),this.at&&this.at.M(464|this._),this.ft()}function L(){this.C.U=void 0,this.C=null,this.ut=null}function B(){const t=this.C.length,s=this.ut=Array(t);let i=0;for(;t>i;)s[i]=i++;s.dt=[]}function N(){const t=this.C.size,s=this.ut=Array(t);let i=0;for(;t>i;)s[i]=i++;s.dt=[]}function x(){return void 0===this.at?this.at=new t.CollectionLengthObserver(this,this.bt):this.at}function collectionObserver(s){return function(i){subscriberCollection(t.MutationKind.C)(i),batchedSubscriberCollection()(i);const n=i.prototype;n.ct=null,n.C=null,n.ut=null,n.pt=0,n.bt=8&s?"length":"size",n.vt=s,n.ft=8&s?B:N,n.flush=D,n.X=L,n.gt=x,n.subscribe=n.subscribe||n.l,n.unsubscribe=n.unsubscribe||n.u,n.wt=n.wt||n.P,n.yt=n.yt||n.V}}function F(t,s){return t===s?0:(s=null===s?"null":""+s)>(t=null===t?"null":""+t)?-1:1}function M(t,s){return void 0===t?void 0===s?0:1:void 0===s?-1:0}function U(t,s,from,to,i){let n,h,e,r,o,l,c;for(l=from+1;to>l;l++){for(n=t[l],h=s[l],c=l-1;c>=from&&(r=s[c],(o=i(e=t[c],n))>0);c--)t[c+1]=e,s[c+1]=r;t[c+1]=n,s[c+1]=h}}function E(t,s,from,to,i){let n,h,e,r,o,l,c,u,a,f,d,b,p,v,g,w,m,y,C,O=0,j=0;for(;;){if(10>=to-from)return void U(t,s,from,to,i);r=s[from],o=s[to-1],e=t[O=from+(to-from>>1)],l=s[O],(c=i(n=t[from],h=t[to-1]))>0&&(f=n,d=r,n=h,r=o,h=f,o=d),0>(u=i(n,e))?(a=i(h,e))>0&&(f=h,d=o,h=e,o=l,e=f,l=d):(f=n,d=r,n=e,r=l,e=h,l=o,h=f,o=d),t[from]=n,s[from]=r,t[to-1]=e,s[to-1]=l,b=h,p=o,g=to-1,t[O]=t[v=from+1],s[O]=s[v],t[v]=b,s[v]=p;t:for(j=v+1;g>j;j++)if(m=s[j],0>(y=i(w=t[j],b)))t[j]=t[v],s[j]=s[v],t[v]=w,s[v]=m,v++;else if(y>0){do{if(--g==j)break t;y=i(C=t[g],b)}while(y>0);t[j]=t[g],s[j]=s[g],t[g]=w,s[g]=m,0>y&&(w=t[j],m=s[j],t[j]=t[v],s[j]=s[v],t[v]=w,s[v]=m,v++)}v-from>to-g?(E(t,s,g,to,i),to=v):(E(t,s,from,v,i),from=g)}}function enableArrayObservation(){for(const t of cs)1!=ts[t].q&&def(ts,t,Object.assign({},as,{value:us[t]}))}function z(s,i,n){return n.U||new t.ArrayObserver(s,i,n)}function enableMapObservation(){for(const t of gs)1!=fs[t].q&&ys(fs,t,Object.assign({},ms,{value:ws[t]}))}function q(s,i,n){return n.U||new t.MapObserver(s,i,n)}function enableSetObservation(){for(const t of Rs)1!=Cs[t].q&&Is(Cs,t,Object.assign({},$s,{value:Ss[t]}))}function K(s,i,n){return n.U||new t.SetObserver(s,i,n)}function getCollectionObserver(s,i,n){const h=n instanceof Object?t.ProxyObserver.Ct(n):n;switch(Ls.call(n)){case"[object Array]":return z(s,i,h);case"[object Map]":return q(s,i,h);case"[object Set]":return K(s,i,h)}return null}function Q(t,s,i){const n=this.Ot;kernel.PLATFORM.global.clearTimeout(n.jt),n.jt=kernel.PLATFORM.global.setTimeout(()=>{this.At(t,s,i)},n.Tt)}function H(t,s,i){const n=this.Ot;if(kernel.PLATFORM.global.clearTimeout(n.jt),!(i&n.Rt))return n.oldValue=Us,void this.At(t,s,i);n.oldValue===Us&&(n.oldValue=s);const h=kernel.PLATFORM.global.setTimeout(()=>{const s=n.oldValue;n.oldValue=Us,this.At(t,s,i)},n.Tt);n.jt=h}function W(t){const s=this.St,i=+new Date-s.$t;if(i>=s.Tt)return kernel.PLATFORM.global.clearTimeout(s.jt),s.jt=-1,s.$t=+new Date,void this.It(t);if(s.newValue=t,-1===s.jt){const t=kernel.PLATFORM.global.setTimeout(()=>{s.jt=-1,s.$t=+new Date,this.It(s.newValue)},s.Tt-i);s.jt=t}}function bindable(t,s){let i;const n=function(t,s){arguments.length>1&&(i.kt=s),zs.for(t.constructor).add(i)};return arguments.length>1?(i={},void n(t,s)):"string"==typeof t?(i={},n):(i=t||{},n)}function _(name){return`${qs}:${name}`}function G(t){return void 0===t.$customElement?null:t.$customElement}function J(name){return`${Ks}:${name}`}function buildTemplateDefinition(t,s,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,strategy){const def=new Ws,i=arguments.length;switch(i){case 13:null!==strategy&&(def.strategy=j(strategy));case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=kernel.PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=kernel.PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=kernel.PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?Qs:0==build?Hs:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=zs.for(t).get()),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof s?s.length>0&&(def.name=s):null!==s&&(def.strategy=j(s.strategy),_s.forEach(t=>{s[t]&&(def[t]=s[t])}),Gs.forEach(t=>{s[t]&&(def[t]=kernel.PLATFORM.toArray(s[t]))}),s.bindables&&(def.bindables===kernel.PLATFORM.Pt?def.bindables=zs.for(s).get():Object.assign(def.bindables,s.bindables)))}return 2!==i||null===t||"string"!=typeof s&&"build"in s||(def.build=Qs),def}function X(t){if(8&this.$state)return;const s=this.$lifecycle;s.Vt(),this.$state|=4,t|=8192;const i=this.$hooks;16&i&&this.Dt(t),this.$state|=8,this.$state&=-5,32&i&&s.Lt(this),s.Bt(t)}function Y(t){if(8&this.$state)return;const s=this.$lifecycle;s.Vt(),this.$state|=4,t|=8192;const i=this.$hooks;16&i&&this.Dt(t);let n=this.Nt;for(;null!==n;)n.xt(t),n=n.Ft;s.Mt(this),this.$state|=8,this.$state&=-5,32&i&&s.Lt(this),s.Bt(t)}function Z(t){if(8&this.$state)return;this.$state|=4,t|=8192;let s=this.Nt;for(;null!==s;)s.xt(t),s=s.Ft;this.$lifecycle.Mt(this),this.$state|=8,this.$state&=-5}function tt(t){if(8&this.$state){const s=this.$lifecycle;s.Ut(),this.$state|=32,t|=16384;const i=this.$hooks;64&i&&this.Et(t),this.$state&=-41,128&i&&s.zt(this),s.qt(t)}}function st(t){if(8&this.$state){const s=this.$lifecycle;s.Ut(),this.$state|=32,2097152&(t|=16384)^2097152|1024&t&&(s.Kt(this),t|=2097152);const i=this.$hooks;64&i&&this.Et(t);let n=this.Qt;for(;null!==n;)n.Ht(t),n=n.Wt;this.$state&=-41,128&i&&s.zt(this),s.qt(t)}}function it(t){if(8&this.$state){this.$state|=32,2097152&(t|=16384)^2097152|1024&t&&(this.$lifecycle.Kt(this),t|=2097152);let s=this.Qt;for(;null!==s;)s.Ht(t),s=s.Wt;this.$state&=-41}}function nt(t){2048&this.$hooks&&this._t(t|=32768)}function ht(t){t|=32768,2048&this.$hooks&&this._t(t);let s=this.Qt;for(;null!==s;)s.Gt(t),s=s.Wt}function et(t){t|=32768;let s=this.Qt;for(;null!==s;)s.Gt(t),s=s.Wt}function rt(){16&this.$state||(this.$state|=16,this.Xt.Jt(this.$nodes))}function ot(){16&this.$state&&(this.$state&=-17,this.Xt.Yt(this.$nodes))}function lt(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function ct(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.Zt&&(this.Zt=0,this.cache.ts(this))?(this.$state|=128,1):0):0}function ut(t,s){if(t|=2048,2&this.$state){if(this.$scope===s)return;this.ss(t)}const i=this.$lifecycle;i.ns(),this.$state|=1;const n=this.$hooks;8&n&&i.hs(this),this.$scope=s,4&n&&this.es(t),this.$state|=2,this.$state&=-2,i.rs(t)}function at(t,s){if(2&this.$state)return;const i=this.$scope;i.os=s;const n=this.$lifecycle;n.ns(),this.$state|=1;const h=this.$hooks;t|=2048,8&h&&n.hs(this);let e=this.ls;for(;null!==e;)e.cs(t,i),e=e.us;4&h&&this.es(t);let component=this.Nt;for(;null!==component;)component.cs(t,i),component=component.Ft;this.$state|=2,this.$state&=-2,n.rs(t)}function ft(t,s){if(t|=2048,2&this.$state){if(this.$scope===s)return;this.ss(t)}this.$state|=1,this.$scope=s;let i=this.ls;for(;null!==i;)i.cs(t,s),i=i.us;let component=this.Nt;for(;null!==component;)component.cs(t,s),component=component.Ft;this.$state|=2,this.$state&=-2}function dt(t){if(t|=2048,2&this.$state)return;this.$state|=1;const s=this.$scope;let i=this.ls;for(;null!==i;)i.cs(t,s),i=i.us;let component=this.Nt;for(;null!==component;)component.cs(t,s),component=component.Ft;this.$state|=2,this.$state&=-2}function bt(t){if(2&this.$state){const s=this.$lifecycle;s.as(),this.$state|=64;const i=this.$hooks;t|=4096,512&i&&s.fs(this),256&i&&this.ds(t),this.$state&=-67,s.bs(t)}}function pt(t){if(2&this.$state){const s=this.$lifecycle;s.as(),this.$state|=64;const i=this.$hooks;t|=4096,512&i&&s.fs(this),256&i&&this.ds(t);let component=this.Qt;for(;null!==component;)component.ss(t),component=component.Wt;let n=this.ps;for(;null!==n;)n.ss(t),n=n.vs;this.$scope.os=null,this.$state&=-67,s.bs(t)}}function vt(t){if(2&this.$state){this.$state|=64,t|=4096;let component=this.Qt;for(;null!==component;)component.ss(t),component=component.Wt;let s=this.ps;for(;null!==s;)s.ss(t),s=s.vs;this.$state&=-67,this.$scope=null}}function gt(t){if(2&this.$state){this.$state|=64,t|=4096;let component=this.Qt;for(;null!==component;)component.ss(t),component=component.Wt;let s=this.ps;for(;null!==s;)s.ss(t),s=s.vs;this.$state&=-67}}function wt(t){v(this,t);let component=this.Nt;for(;component;)component.M(t),component=component.Ft;let s=this.ls;for(;s;)void 0!==s.M&&s.M(t),s=s.us}function createRenderContext(dom,t,dependencies,s){const i=t.gs(),n=new ni,h=new ni,e=new ni,r=new hi,o=new ni,l=i.get(IRenderer);return dom.ws(i,h),i.ms(IViewFactory,r),i.ms(IRenderable,n),i.ms(ITargetedInstruction,e),i.ms(IRenderLocation,o),dependencies&&i.register(...dependencies),s&&s.register(i),i.ys=function(t,s,targets,i,host,parts){l.ys(t,dom,this,s,targets,i,host,parts)},i.Cs=function(t,s,l,c,parts,u){return n.Os(t),h.Os(s),e.Os(l),c&&r.Os(c,parts),u&&o.Os(u),i},i.X=function(){r.X(),n.X(),e.X(),h.X(),o.X()},i}function mt(t){const s=[];for(let i=0,n=t.length;n>i;++i){const component=G(t[i]);null!==component&&s.push(component)}return s}function yt(t,s,name){Reflect.defineProperty(s,name,{js:1,get(){return this.F[name].G()},set(value){this.F[name].J(value,67108879&t)}})}function Ct(t){const s=this.kind.Y(this.description.name);t.register(kernel.Registration.transient(s,this))}function Ot(t){return t.containerless=1,t}function jt(s,i){const n=this.constructor;s|=n.description.strategy;const h=i.get(IRenderingEngine);let e;e=2&s?t.ProxyObserver.As(this).O:this,h.Ts(s,n,this),2&this.$hooks&&e.Rs(s)}function At(s,i,host,n=kernel.PLATFORM.Pt){const h=this.constructor,e=h.description;s|=e.strategy;const r=i.get(IProjectorLocator),o=i.get(IRenderingEngine),dom=i.get(IDOM);let l;if(l=2&s?t.ProxyObserver.As(this).O:this,this.$scope=Scope.create(s,l,null),this.Ss=host,this.Xt=r.$s(dom,this,host,e),o.Ts(s,h,this),1024&this.$hooks){const t=this.ys(s,host,n.parts,i);t&&"getElementTemplate"in t&&t.Is(o,h,i).ys(this,host,n.parts)}else o.Is(dom,e,i,h).ys(this,host,n.parts);2&this.$hooks&&l.Rs(s)}function Tt(t){const s=this.description,i=this.kind.Y(s.name),aliases=s.aliases;t.register(kernel.Registration.transient(i,this));for(let s=0,n=aliases.length;n>s;++s){const n=this.kind.Y(aliases[s]);t.register(kernel.Registration.ks(i,n))}}function Rt(t){return t.Ps=1,t}function instructionRenderer(t){return function(s){const i=function(...i){const n=new s(...i);return n.Vs=t,n};i.register=function(t){return kernel.Registration.singleton(IInstructionRenderer,i).register(t,IInstructionRenderer)};const n=Object.getOwnPropertyDescriptors(s);return Object.keys(n).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(i,t,n[t])}),i}}function ensureExpression(t,s,i){return"string"==typeof s?t.parse(s,i):s}function addBinding(t,s){s.vs=t.ps,s.us=null,null===t.ps?t.ls=s:t.ps.us=s,t.ps=s}function addComponent(t,component){component.Wt=t.Qt,component.Ft=null,null===t.Qt?t.Nt=component:t.Qt.Ft=component,t.Qt=component}var St,$t,It,kt,DelegationStrategy,MutationKind,CollectionKind,BindingMode,BindingStrategy,State,Hooks,LifecycleFlags,ExpressionKind,BindingType,TargetedInstructionType,ViewCompileFlags;(function(t){t[t.Ds=0]="None",t[t.Ls=1]="Subscriber0",t[t.Bs=2]="Subscriber1",t[t.Ns=4]="Subscriber2",t[t.xs=8]="SubscribersRest",t[t.Fs=15]="Any"})(St||(St={})),(DelegationStrategy=t.DelegationStrategy||(t.DelegationStrategy={}))[DelegationStrategy.Ms=0]="none",DelegationStrategy[DelegationStrategy.Us=1]="capturing",DelegationStrategy[DelegationStrategy.Es=2]="bubbling",(MutationKind=t.MutationKind||(t.MutationKind={}))[MutationKind.g=1]="instance",MutationKind[MutationKind.C=2]="collection",MutationKind[MutationKind.O=4]="proxy",(CollectionKind=t.CollectionKind||(t.CollectionKind={}))[CollectionKind.zs=8]="indexed",CollectionKind[CollectionKind.qs=4]="keyed",CollectionKind[CollectionKind.Ks=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set";const Pt=new WeakMap;let Vt=class{constructor(s,i,n){this.raw=i,this.key=n,this.O=s,this.subscribe=this.l,this.unsubscribe=this.u,i[n]instanceof Object&&(i[n]=t.ProxyObserver.As(i[n]).O)}J(value,t){const s=this.raw[this.key];s!==value&&(this.raw[this.key]=value,this.m(value,s,18|t))}G(){return this.raw[this.key]}};Vt=s([subscriberCollection(t.MutationKind.g)],Vt),t.ProxyObserver=$t=class{constructor(t){this.raw=t,this.O=new Proxy(t,this),Pt.set(t,this.O),this.Qs={}}static Hs(t){if(void 0===t.Ws){const s=Pt.get(t);return void 0===s?t:s}return t}static Ct(t){const s=t.Ws;return void 0===s?t:s}static As(t,s){let i;if(void 0===t.Ws){const s=Pt.get(t);i=void 0===s?new $t(t):s.U}else i=t.U;if(1===arguments.length)return i;let n=i.Qs[s];if(void 0===n){const h=this.Ct(t);n=i.Qs[s]=new Vt(i.O,h,s)}return n}static _s(t){return void 0!==t.Ws}get(t,s,i){return"$observer"===s?this:"$raw"===s?t:t[s]}set(t,s,value,i){const n=t[s];return n!==value&&(Reflect.set(t,s,value,t),this.Gs(value,n,s),this.m(s,value,n,18)),1}deleteProperty(t,s){const i=t[s];return Reflect.deleteProperty(t,s)?(void 0!==i&&(this.Gs(void 0,i,s),this.m(s,void 0,i,18)),1):0}defineProperty(t,s,i){const n=t[s];return Reflect.defineProperty(t,s,i)?(i.value!==n&&(this.Gs(i.value,n,s),this.m(s,i.value,n,18)),1):0}apply(t,s,i){return Reflect.apply(t,t,i)}subscribe(t,s){if(1===arguments.length)this.l(t);else{let i=this.Qs[s];void 0===i&&(i=this.Qs[s]=new Vt(this.O,this.raw,s)),i.l(t)}}unsubscribe(t,s){if(1===arguments.length)this.u(t);else{const i=this.Qs[s];void 0!==i&&i.u(t)}}Gs(t,s,i){const n=this.Qs[i];void 0!==n&&n.m(t,s,18)}},t.ProxyObserver=$t=s([subscriberCollection(t.MutationKind.O)],t.ProxyObserver);const Dt=Reflect.defineProperty,Lt={get:void 0,set:void 0,js:1,Js:1};t.SetterObserver=class{constructor(t,s,i){this._=67108879&t,this.H=s,this.W=i,4&t&&(this.G=this.Xs)}G(){return this.K}Xs(){return this.H[this.W]}J(t,s){const i=this.K;(i!==t||4&s)&&(this.K=t,2048&s||this.m(t,i,this._|s),this.q||(this.H[this.W]=t))}M(t){this.m(this.H[this.W],this.K,this._|t),v(this.H[this.W],t)}},t.SetterObserver=s([propertyObserver()],t.SetterObserver),(function(t){t[t.Ys=250]="UndefinedScope",t[t.Zs=251]="NullScope",t[t.ti=252]="NilOverrideContext",t[t.si=253]="NilParentScope"})(It||(It={}));class Bt{As(s,i,n){return void 0===this[n]&&(this[n]=new t.SetterObserver(s,i,n)),this[n]}}class BindingContext{constructor(t,value){if(this.ii=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const s in t)t.hasOwnProperty(s)&&(this[s]=t[s])}static create(s,i,value){const n=new BindingContext(i,value);return 2&s?t.ProxyObserver.As(n).O:n}static get(t,name,s,i){if(void 0===t)throw kernel.Reporter.error(250);if(null===t)throw kernel.Reporter.error(251);let n=t.ni;if(s>0){for(;s>0;){if(null===n.hi)return;s--,n=n.hi}return name in n?n:n.ei}for(;n&&!(name in n)&&!(n.ei&&name in n.ei);)n=n.hi;if(n)return name in n?n:n.ei;if(67108864&i&&null!==t.os){const n=this.get(t.os,name,s,-67108865&i|8388608);if(null!==n)return n}return 8388608&i?null:t.ei||t.ni}ri(t){return void 0===this.F&&(this.F=new Bt),this.F}}class Scope{constructor(t,s){this.ei=t,this.ni=s,this.os=null}static create(t,s,i){return new Scope(s,null==i?OverrideContext.create(t,s,i):i)}static oi(t,s){if(null==s)throw kernel.Reporter.error(252);return new Scope(s.ei,s)}static li(t,s,i){if(null==s)throw kernel.Reporter.error(253);return new Scope(i,OverrideContext.create(t,i,s.ni))}}class OverrideContext{constructor(t,s){this.ii=1,this.ei=t,this.hi=s}static create(t,s,i){return new OverrideContext(s,void 0===i?null:i)}ri(){return void 0===this.F&&(this.F=new Bt),this.F}}const ISignaler=kernel.DI.ui("ISignaler").ci(t=>t.singleton(Nt));class Nt{constructor(){this.ai=Object.create(null)}fi(name,t){const s=this.ai[name];if(void 0!==s)for(const i of s.keys())i.j(void 0,void 0,16|t)}di(name,t){const s=this.ai,i=s[name];void 0===i?s[name]=new Set([t]):i.add(t)}bi(name,t){const s=this.ai[name];s&&s.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",Y(name){return`${this.name}:${name}`},pi(t){return t.kind===this},vi(t,s){const i=s,n=i,h="string"==typeof t?{name:t}:t;return n.kind=BindingBehaviorResource,n.description=h,i.register=m,i}},ValueConverterResource={name:"value-converter",Y(name){return`${this.name}:${name}`},pi(t){return t.kind===this},vi(t,s){const i=s,n="string"==typeof t?{name:t}:t;return i.kind=ValueConverterResource,i.description=n,i.register=y,i}};(function(t){t[t.gi=202]="NoLocator",t[t.wi=203]="NoBehaviorFound",t[t.mi=204]="BehaviorAlreadyApplied",t[t.yi=205]="NoConverterFound",t[t.Ci=206]="NoBinding",t[t.Oi=207]="NotAFunction",t[t.ji=208]="UnknownOperator",t[t.Ys=250]="UndefinedScope",t[t.Zs=251]="NullScope"})(kt||(kt={}));class AccessThis{constructor(t=0){this.Z=1793,this.assign=kernel.PLATFORM.Ai,this.connect=kernel.PLATFORM.Ai,this.Ti=t}evaluate(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);let n=s.ni,h=this.Ti;for(;h--&&n;)n=n.hi;return 1>h&&n?n.ei:void 0}accept(t){return t.Ri(this)}}AccessThis.Si=new AccessThis(0),AccessThis.$i=new AccessThis(1);class AccessScope{constructor(name,t=0){this.Z=10082,this.name=name,this.Ti=t}evaluate(t,s,i){return BindingContext.get(s,this.name,this.Ti,t)[this.name]}assign(t,s,i,value){const n=BindingContext.get(s,this.name,this.Ti,t);if(n instanceof Object)return void 0!==n.F&&void 0!==n.F[this.name]?(n.F[this.name].J(value,t),value):n[this.name]=value}connect(t,s,i){const n=BindingContext.get(s,this.name,this.Ti,t);i.et(t,n,this.name)}accept(t){return t.Ii(this)}}class AccessMember{constructor(t,name){this.Z=9323,this.object=t,this.name=name}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);return null==n?n:n[this.name]}assign(t,s,i,value){const n=this.object.evaluate(t,s,i);return n instanceof Object?void 0!==n.F&&void 0!==n.F[this.name]?n.F[this.name].J(value,t):n[this.name]=value:this.object.assign(t,s,i,{[this.name]:value}),value}connect(t,s,i){const n=this.object.evaluate(t,s,null);this.object.connect(t,s,i),n instanceof Object&&i.et(t,n,this.name)}accept(t){return t.ki(this)}}class CallScope{constructor(name,t,s=0){this.Z=1448,this.assign=kernel.PLATFORM.Ai,this.name=name,this.Pi=t,this.Ti=s}evaluate(t,s,i){const n=C(t,s,i,this.Pi),h=BindingContext.get(s,this.name,this.Ti,t),e=O(t,h,this.name);if(e)return e.apply(h,n)}connect(t,s,i){const n=this.Pi;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.Vi(this)}}class CallMember{constructor(t,name,s){this.Z=1161,this.assign=kernel.PLATFORM.Ai,this.object=t,this.name=name,this.Pi=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i),h=C(t,s,i,this.Pi),e=O(t,n,this.name);if(e)return e.apply(n,h)}connect(t,s,i){const n=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),O(-1048577&t,n,this.name)){const n=this.Pi;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}}accept(t){return t.Di(this)}}class PrimitiveLiteral{constructor(value){this.Z=17925,this.assign=kernel.PLATFORM.Ai,this.connect=kernel.PLATFORM.Ai,this.value=value}evaluate(t,s,i){return this.value}accept(t){return t.Li(this)}}PrimitiveLiteral.Bi=new PrimitiveLiteral(void 0),PrimitiveLiteral.Ni=new PrimitiveLiteral(null),PrimitiveLiteral.xi=new PrimitiveLiteral(1),PrimitiveLiteral.Fi=new PrimitiveLiteral(0),PrimitiveLiteral.Mi=new PrimitiveLiteral("");class ArrayLiteral{constructor(t){this.Z=17955,this.assign=kernel.PLATFORM.Ai,this.elements=t}evaluate(t,s,i){const n=this.elements,h=n.length,e=Array(h);for(let r=0;h>r;++r)e[r]=n[r].evaluate(t,s,i);return e}connect(t,s,i){const n=this.elements;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.Ui(this)}}ArrayLiteral.Mi=new ArrayLiteral(kernel.PLATFORM.Ei);class ObjectLiteral{constructor(t,s){this.Z=17956,this.assign=kernel.PLATFORM.Ai,this.keys=t,this.values=s}evaluate(t,s,i){const n={},h=this.keys,e=this.values;for(let r=0,o=h.length;o>r;++r)n[h[r]]=e[r].evaluate(t,s,i);return n}connect(t,s,i){const n=this.values;for(let h=0,e=this.keys.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.zi(this)}}ObjectLiteral.Mi=new ObjectLiteral(kernel.PLATFORM.Ei,kernel.PLATFORM.Ei);class Template{constructor(t,s){this.Z=17958,this.assign=kernel.PLATFORM.Ai,this.qi=t,this.tt=void 0===s?kernel.PLATFORM.Ei:s}evaluate(t,s,i){const n=this.tt,h=this.qi;let e=h[0];for(let r=0,o=n.length;o>r;++r)e+=n[r].evaluate(t,s,i),e+=h[r+1];return e}connect(t,s,i){const n=this.tt;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i),h++}accept(t){return t.Ki(this)}}Template.Mi=new Template([""]);const xt={}.toString,Ft={Qi(s,i,n){if(16777218==(16777218&s)){const s=t.ProxyObserver.Ct(i),h=s.length;let e,r=0;for(;h>r;++r)(e=s[r])instanceof Object&&(e=s[r]=t.ProxyObserver.As(e).O),n(s,r,e)}else for(let t=0,s=i.length;s>t;++t)n(i,t,i[t])},Hi(t,s,i){const n=Array(s.size);let h=-1;for(const t of s.entries())n[++h]=t;Ft["Qi"](-16777217&t,n,i)},Wi(t,s,i){const n=Array(s.size);let h=-1;for(const t of s.keys())n[++h]=t;Ft["Qi"](-16777217&t,n,i)},_i(t,s,i){const n=Array(s);for(let t=0;s>t;++t)n[t]=t;Ft["Qi"](-16777217&t,n,i)},Gi(t,s,i){},Ji(t,s,i){}},Mt={Qi:t=>t.length,Hi:t=>t.size,Wi:t=>t.size,_i:t=>t,Gi:()=>0,Ji:()=>0};(BindingMode=t.BindingMode||(t.BindingMode={}))[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Xi=2]="toView",BindingMode[BindingMode.Yi=4]="fromView",BindingMode[BindingMode.Zi=6]="twoWay",BindingMode[BindingMode.default=8]="default",(BindingStrategy=t.BindingStrategy||(t.BindingStrategy={}))[BindingStrategy.tn=1]="getterSetter",BindingStrategy[BindingStrategy.sn=2]="proxies",BindingStrategy[BindingStrategy.in=4]="patch",BindingStrategy[BindingStrategy.qs=8]="keyed";const Ut=7;(State=t.State||(t.State={}))[State.Ms=0]="none",State[State.nn=1]="isBinding",State[State.hn=2]="isBound",State[State.en=4]="isAttaching",State[State.rn=8]="isAttached",State[State.on=16]="isMounted",State[State.ln=32]="isDetaching",State[State.cn=64]="isUnbinding",State[State.un=128]="isCached",State[State.an=256]="isContainerless",State[State.fn=512]="isPatching",(Hooks=t.Hooks||(t.Hooks={}))[Hooks.Ms=1]="none",Hooks[Hooks.dn=2]="hasCreated",Hooks[Hooks.bn=4]="hasBinding",Hooks[Hooks.pn=8]="hasBound",Hooks[Hooks.vn=16]="hasAttaching",Hooks[Hooks.gn=32]="hasAttached",Hooks[Hooks.wn=64]="hasDetaching",Hooks[Hooks.mn=128]="hasDetached",Hooks[Hooks.yn=256]="hasUnbinding",Hooks[Hooks.Cn=512]="hasUnbound",Hooks[Hooks.On=1024]="hasRender",Hooks[Hooks.jn=2048]="hasCaching",(LifecycleFlags=t.LifecycleFlags||(t.LifecycleFlags={}))[LifecycleFlags.Ms=0]="none",LifecycleFlags[LifecycleFlags.An=67108879]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Tn=67108864]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.Rn=15]="bindingStrategy",LifecycleFlags[LifecycleFlags.Sn=1]="getterSetterStrategy",LifecycleFlags[LifecycleFlags.$n=2]="proxyStrategy",LifecycleFlags[LifecycleFlags.In=4]="patchStrategy",LifecycleFlags[LifecycleFlags.kn=8]="keyedStrategy",LifecycleFlags[LifecycleFlags.update=48]="update",LifecycleFlags[LifecycleFlags.Pn=16]="updateTargetInstance",LifecycleFlags[LifecycleFlags.Vn=32]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=262080]="from",LifecycleFlags[LifecycleFlags.Dn=448]="fromFlush",LifecycleFlags[LifecycleFlags.Ln=64]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.Bn=128]="fromSyncFlush",LifecycleFlags[LifecycleFlags.Nn=256]="fromTick",LifecycleFlags[LifecycleFlags.xn=512]="fromStartTask",LifecycleFlags[LifecycleFlags.Fn=1024]="fromStopTask",LifecycleFlags[LifecycleFlags.Mn=2048]="fromBind",LifecycleFlags[LifecycleFlags.Un=4096]="fromUnbind",LifecycleFlags[LifecycleFlags.En=8192]="fromAttach",LifecycleFlags[LifecycleFlags.zn=16384]="fromDetach",LifecycleFlags[LifecycleFlags.qn=32768]="fromCache",LifecycleFlags[LifecycleFlags.Kn=65536]="fromDOMEvent",LifecycleFlags[LifecycleFlags.Qn=131072]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.Hn=262144]="allowPublishRoundtrip",LifecycleFlags[LifecycleFlags.Wn=524288]="isPublishing",LifecycleFlags[LifecycleFlags._n=1048576]="mustEvaluate",LifecycleFlags[LifecycleFlags.Gn=2097152]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.Jn=4194304]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Xn=8388608]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Yn=16777216]="isOriginalArray",LifecycleFlags[LifecycleFlags.Zn=33554432]="isCollectionMutation",(ExpressionKind=t.ExpressionKind||(t.ExpressionKind={}))[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.th=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.sh=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation";const IRenderable=kernel.DI.ui("IRenderable").ih(),IViewFactory=kernel.DI.ui("IViewFactory").ih(),Et=Object.freeze(Object.create(null)),ILifecycle=kernel.DI.ui("ILifecycle").ci(t=>t.singleton(zt));class zt{constructor(){this.nh=0,this.hh=0,this.eh=0,this.rh=0,this.oh=0,this.lh=this,this.uh=this,this.ah=this,this.fh=this,this.dh=this,this.bh=this,this.ph=this,this.vh=this,this.gh=this,this.wh=this,this.mh=this,this.yh=this,this.Ch=this,this.Oh=this,this.jh=this,this.Ah=this,this.Th=null,this.Rh=Promise.resolve(),this.Sh=0,this.$h=0,this.Ih=0,this.kh=0,this.Ph=0,this.Vh=0,this.Dh=0,this.Lh=0,this.Bh=0,this.ct=Et,this.flush=kernel.PLATFORM.Ai,this.Nh=Et,this.bound=kernel.PLATFORM.Ai,this.xh=Et,this.Fh=kernel.PLATFORM.Ai,this.Mh=Et,this.Uh=kernel.PLATFORM.Ai,this.Eh=Et,this.zh=kernel.PLATFORM.Ai,this.qh=Et,this.Kh=kernel.PLATFORM.Ai,this.Qh=Et,this.ss=kernel.PLATFORM.Ai,this.Hh=Et,this.Wh=kernel.PLATFORM.Ai,this._h=null}static register(t){return kernel.Registration.singleton(ILifecycle,this).register(t)}Gh(t){null===this._h&&(this._h=new AggregateLifecycleTask),this._h.Jh(t)}Xh(t){null!==this._h&&(this._h===t?this._h=null:this._h.Yh(t))}A(t){return this.lh===this&&(this.Th=this.Rh.then(()=>{this.Zh(64)})),null===t.ct&&(t.ct=Et,this.uh.ct=t,this.uh=t,++this.Sh),this.Th}Zh(t){for(t|=128;this.Sh>0;){let s,i=this.lh.ct;this.lh=this.uh=this,this.Sh=0;do{s=i.ct,i.ct=null,i.flush(t),i=s}while(i!==Et);if(4194304&t)break}}ns(){++this.nh}hs(t){null===t.Nh&&(t.Nh=Et,this.fh.Nh=t,this.fh=t,++this.Ih)}rs(t){if(0==--this.nh)return null===this._h||this._h.done?(this.te(t),LifecycleTask.done):(this._h.se=this,this._h)}te(t){for(512&t&&this.Zh(128|t);this.Ih>0;){this.Ih=0;let s,i=this.ah.Nh;this.ah=this.fh=this;do{i.bound(t),s=i.Nh,i.Nh=null,i=s}while(i!==Et)}}as(){++this.oh}fs(t){null===t.Hh&&(t.Hh=Et,this.Ah.Hh=t,this.Ah=t,++this.Bh)}bs(t){if(0==--this.oh)return null===this._h||this._h.done?(this.ie(t),LifecycleTask.done):(this._h.se=this,this._h)}ie(t){for(;this.Bh>0;){this.Bh=0;let s,i=this.jh.Hh;this.jh=this.Ah=this;do{i.Wh(t),s=i.Hh,i.Hh=null,i=s}while(i!==Et)}}Vt(){++this.eh}Mt(t){null===t.xh&&(t.xh=Et,this.bh.xh=t,this.bh=t,++this.kh)}Lt(t){null===t.Mh&&(t.Mh=Et,this.vh.Mh=t,this.vh=t,++this.Ph)}Bt(t){if(0==--this.eh)return null===this._h||this._h.done?(this.ne(t),LifecycleTask.done):(this._h.se=this,this._h)}ne(t){if(this.Zh(128|t),this.kh>0){this.kh=0;let s,i=this.dh.xh;this.dh=this.bh=this;do{i.Fh(t),s=i.xh,i.xh=null,i=s}while(i!==Et)}if(this.Ph>0){this.Ph=0;let s,i=this.ph.Mh;this.ph=this.vh=this;do{i.Uh(t),s=i.Mh,i.Mh=null,i=s}while(i!==Et)}}Ut(){++this.rh}Kt(t){if(null===t.Eh&&(t.Eh=Et,this.wh.Eh=t,this.wh=t,++this.Vh),null!==t.xh){let s=this.dh,i=s.xh;for(;i!==t;)i=(s=i).xh;s.xh=i.xh,i.xh=null,this.bh===i&&(this.bh=this),--this.kh}}zt(t){null===t.qh&&(t.qh=Et,this.yh.qh=t,this.yh=t,++this.Dh)}he(t){null===t.Qh&&(t.Qh=Et,this.Oh.Qh=t,this.Oh=t,++this.Lh)}qt(t){if(0==--this.rh)return null===this._h||this._h.done?(this.ee(t),LifecycleTask.done):(this._h.se=this,this._h)}ee(t){if(this.Zh(4194752|t),this.Vh>0){this.Vh=0;let s,i=this.gh.Eh;this.gh=this.wh=this;do{i.zh(t),s=i.Eh,i.Eh=null,i=s}while(i!==Et)}if(this.Dh>0){this.Dh=0;let s,i=this.mh.qh;this.mh=this.yh=this;do{i.Kh(t),s=i.qh,i.qh=null,i=s}while(i!==Et)}if(this.Lh>0){this.as(),this.Lh=0;let s,i=this.Ch.Qh;this.Ch=this.Oh=this;do{i.ss(t),s=i.Qh,i.Qh=null,i=s}while(i!==Et);this.bs(t)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.re=kernel.PLATFORM.Ai,this.currentView=null,this.rn=0,this.hn=0,this.oe=null,this.le=LifecycleTask.done}static register(t){return kernel.Registration.transient(this,this).register(t,this)}ce(value,t){this.le.done?value instanceof Promise?(this.ue(new qt(this,value)),this.ae()):this.fe(value,t):(value instanceof Promise?this.ue(new qt(this,value)):this.ue(value),this.le.de()&&this.le.cancel())}es(t,s){this.scope=s,this.hn=1,null!==this.currentView&&this.currentView.cs(t,s)}Dt(t){this.rn=1,null!==this.currentView&&this.currentView.xt(t)}Et(t){this.rn=0,null!==this.currentView&&this.currentView.Ht(t)}ds(t){this.hn=0,null!==this.currentView&&this.currentView.ss(t)}_t(t){this.currentView=null}ue(t){null===this.oe&&(this.oe=[]),this.oe.push(t)}fe(t,s){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,i=new AggregateLifecycleTask;let n,h=this.currentView;null===h?n=LifecycleTask.done:($lifecycle.he(h),$lifecycle.Ut(),h.Ht(s),n=$lifecycle.qt(s)),i.Jh(n),null===(h=this.currentView=t)?n=LifecycleTask.done:(this.hn&&($lifecycle.ns(),h.cs(s,this.scope),$lifecycle.rs(s)),this.rn?($lifecycle.Vt(),h.xt(s),n=$lifecycle.Bt(s)):n=LifecycleTask.done),i.Jh(n),i.done?(this.le=LifecycleTask.done,this.re()):(this.le=i,this.le.be().then(()=>{this.re(),this.ae()}).catch(t=>{throw t}))}ae(){if(null!==this.oe&&this.oe.length>0){const t=this.oe.pop();this.oe.length=0,qt.is(t)?this.le=t.start():this.fe(t,131072)}else this.le=LifecycleTask.done}}CompositionCoordinator.inject=[ILifecycle];const LifecycleTask={done:{done:1,de:()=>0,cancel(){},be:()=>Promise.resolve()}};class AggregateLifecycleTask{constructor(){this.done=1,this.se=null,this.resolve=null,this.pe=[],this.ve=null}Jh(t){t.done||(this.done=0,this.pe.push(t),t.be().then(()=>{this.ge()}).catch(t=>{throw t}))}Yh(t){if(t.done){const s=this.pe.indexOf(t);-1!==s&&this.pe.splice(s,1)}0===this.pe.length&&null!==this.se&&(this.se.Xh(this),this.se=null)}de(){return this.done?0:this.pe.every(t=>t.de())}cancel(){this.de()&&(this.pe.forEach(t=>{t.cancel()}),this.done=0)}be(){return null===this.ve&&(this.ve=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.ve}ge(){this.done||this.pe.every(t=>t.done)&&this.complete(1)}complete(t){this.done=1,t&&null!==this.se&&(this.se.ee(131072),this.se.ie(131072),this.se.te(131072),this.se.ne(131072)),this.se.Xh(this),null!==this.resolve&&this.resolve()}}class qt{constructor(t,s){this.we=t,this.done=0,this.me=0,this.Rh=s}static is(t){return"start"in t}start(){return this.me?LifecycleTask.done:(this.Rh=this.Rh.then(t=>(this.ye(t),t)),this)}de(){return!this.done}cancel(){this.de()&&(this.me=1)}be(){return this.Rh}ye(value){this.me||(this.done=1,this.we.ce(value,131072))}}const Kt=[],Qt=[];let Ht=-1;A(-1);const Wt={Js:0,js:0,Ce:0,value:0};connectable.Oe=(t=>{++Wt.value,Reflect.defineProperty(t,"id",Wt)});const{oneTime,Xi:_t,Yi:Gt}=t.BindingMode,Jt=_t|oneTime;t.Binding=class{constructor(t,s,i,mode,n,h){connectable.Oe(this),this.us=null,this.vs=null,this.$state=0,this.$lifecycle=h.get(ILifecycle),this.je=null,this.$scope=null,this.Ae=h,this.mode=mode,this.nt=n,this.Te=t,this.target=s,this.Re=i,this._=0}Se(value,t){this.targetObserver.J(value,t|=this._),4&t&&this.targetObserver.M(t)}$e(value,t){this.Te.assign(t|=this._,this.$scope,this.Ae,value)}j(t,s,i){if(0!=(2&this.$state)){if((16&(i|=this._))>0){const s=this.targetObserver.G();return(10082!==this.Te.Z||this.st>1)&&(t=this.Te.evaluate(i,this.$scope,this.Ae)),t!==s&&this.Se(t,i),void(0==(this.mode&oneTime)&&(this.version++,this.Te.connect(i,this.$scope,this),this.unobserve(0)))}if(0>=(32&i))throw kernel.Reporter.error(15,i);t!==this.Te.evaluate(i,this.$scope,this.Ae)&&this.$e(t,i)}}cs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ss(2048|t)}this.$state|=1,this._=67108879&t,this.$scope=s;let i=this.Te;hasBind(i)&&i.bind(t,s,this);let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=this.mode&Gt?this.nt.it(t,this.target,this.Re):this.nt.Ie(t,this.target,this.Re)),targetObserver.bind&&targetObserver.bind(t),i=this.Te,this.mode&Jt&&this.Se(i.evaluate(t,s,this.Ae),t),this.mode&_t&&i.connect(t,s,this),this.mode&Gt&&(targetObserver.subscribe(this),targetObserver[this.id]|=32),this.$state|=2,this.$state&=-2}ss(t){2&this.$state&&(this.$state|=64,this._=0,hasUnbind(this.Te)&&this.Te.ke(t,this.$scope,this),this.$scope=null,this.targetObserver.ke&&this.targetObserver.ke(t),this.targetObserver.unsubscribe&&(this.targetObserver.unsubscribe(this),this.targetObserver[this.id]&=-33),this.unobserve(1),this.$state&=-67)}M(t){2&this.$state&&this.targetObserver.M(t|this._)}},t.Binding=s([connectable()],t.Binding);class Call{constructor(t,s,i,n,h){this.us=null,this.vs=null,this.$state=0,this.Ae=h,this.Te=t,this.targetObserver=n.it(0,s,i)}Pe(t){const s=this.$scope.ni;Object.assign(s,t);const i=this.Te.evaluate(1048576,this.$scope,this.Ae);for(const i in t)Reflect.deleteProperty(s,i);return i}cs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ss(2048|t)}this.$state|=1,this.$scope=s,hasBind(this.Te)&&this.Te.bind(t,s,this),this.targetObserver.J(t=>this.Pe(t),t),this.$state|=2,this.$state&=-2}ss(t){2&this.$state&&(this.$state|=64,hasUnbind(this.Te)&&this.Te.ke(t,this.$scope,this),this.$scope=null,this.targetObserver.J(null,t),this.$state&=-67)}et(t,s,i){}j(t,s,i){}}const IExpressionParser=kernel.DI.ui("IExpressionParser").ci(t=>t.singleton(Xt));class Xt{constructor(){this.Ve=Object.create(null),this.De=Object.create(null),this.Le=Object.create(null)}parse(t,s){switch(s){case 2048:{let i=this.Le[t];return void 0===i&&(i=this.Le[t]=this.Be(t,s)),i}case 539:{let i=this.De[t];return void 0===i&&(i=this.De[t]=this.Be(t,s)),i}default:{if(0===t.length&&55&s)return PrimitiveLiteral.Mi;let i=this.Ve[t];return void 0===i&&(i=this.Ve[t]=this.Be(t,s)),i}}}cache(t){const{De:s,Ve:i,Le:n}=this;for(const h in t){const e=t[h];switch(e.Z){case 24:n[h]=e;break;case 6199:s[h]=e;break;default:i[h]=e}}}Be(t,s){try{const parts=t.split("."),s=parts[0];let i;i=s.endsWith("()")?new CallScope(s.replace("()",""),kernel.PLATFORM.Ei):new AccessScope(parts[0]);let n=1;for(;parts.length>n;){const t=parts[n];i=t.endsWith("()")?new CallMember(i,t.replace("()",""),kernel.PLATFORM.Ei):new AccessMember(i,parts[n]),n++}return i}catch(t){throw kernel.Reporter.error(3,t)}}}(BindingType=t.BindingType||(t.BindingType={}))[BindingType.Ds=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Ne=1280]="IsRef",BindingType[BindingType.xe=512]="IsIterator",BindingType[BindingType.Fe=256]="IsCustom",BindingType[BindingType.Me=128]="IsFunction",BindingType[BindingType.Ue=64]="IsEvent",BindingType[BindingType.Ee=32]="IsProperty",BindingType[BindingType.ze=16]="IsCommand",BindingType[BindingType.qe=48]="IsPropertyCommand",BindingType[BindingType.Ke=80]="IsEventCommand",BindingType[BindingType.Qe=6]="DelegationStrategyDelta",BindingType[BindingType.He=15]="Command",BindingType[BindingType.We=49]="OneTimeCommand",BindingType[BindingType._e=50]="ToViewCommand",BindingType[BindingType.Ge=51]="FromViewCommand",BindingType[BindingType.Je=52]="TwoWayCommand",BindingType[BindingType.Xe=53]="BindCommand",BindingType[BindingType.Ye=86]="TriggerCommand",BindingType[BindingType.Ze=87]="CaptureCommand",BindingType[BindingType.tr=88]="DelegateCommand",BindingType[BindingType.sr=153]="CallCommand",BindingType[BindingType.ir=26]="OptionsCommand",BindingType[BindingType.nr=539]="ForCommand",BindingType[BindingType.hr=284]="CustomCommand";const{Xi:Yt,oneTime:Zt}=t.BindingMode;class MultiInterpolationBinding{constructor(s,i,n,h,mode,e){this.us=null,this.vs=null,this.$state=0,this.$scope=null,this.er=i,this.Ae=e,this.mode=mode,this.nt=s,this.target=n,this.Re=h;const r=i.tt,parts=this.parts=Array(r.length);for(let o=0,l=r.length;l>o;++o)parts[o]=new t.InterpolationBinding(r[o],i,n,h,mode,s,e,0===o)}cs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ss(t)}this.$state|=2,this.$scope=s;const parts=this.parts;for(let i=0,n=parts.length;n>i;++i)parts[i].cs(t,s)}ss(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let s=0,i=parts.length;i>s;++s)parts[s].ss(t)}}t.InterpolationBinding=class{constructor(t,s,i,n,mode,h,e,r){connectable.Oe(this),this.$state=0,this.er=s,this.rr=r,this.mode=mode,this.Ae=e,this.nt=h,this.Te=t,this.target=i,this.Re=n,this.targetObserver=h.Ie(0,i,n)}Se(value,t){this.targetObserver.J(value,16|t)}j(t,s,i){if(!(2&this.$state))return;const n=this.targetObserver.G(),h=this.er.evaluate(i,this.$scope,this.Ae);h!==n&&this.Se(h,i),0==(this.mode&Zt)&&(this.version++,this.Te.connect(i,this.$scope,this),this.unobserve(0))}cs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ss(t)}this.$state|=2,this.$scope=s;const i=this.Te;i.bind&&i.bind(t,s,this),this.rr&&this.Se(this.er.evaluate(t,s,this.Ae),t),this.mode&Yt&&i.connect(t,s,this)}ss(t){if(!(2&this.$state))return;this.$state&=-3;const s=this.Te;s.ke&&s.ke(t,this.$scope,this),this.$scope=null,this.unobserve(1)}},t.InterpolationBinding=s([connectable()],t.InterpolationBinding),t.LetBinding=class{constructor(t,s,i,n,toViewModel=0){connectable.Oe(this),this.us=null,this.vs=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$scope=null,this.Ae=n,this.nt=i,this.Te=t,this.target=null,this.Re=s,this.toViewModel=toViewModel}j(t,s,i){if(2&this.$state){if(!(16&i))throw kernel.Reporter.error(15,i);{const{target:t,Re:s}=this,n=t[s],h=this.Te.evaluate(i,this.$scope,this.Ae);h!==n&&(t[s]=h)}}}cs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ss(2048|t)}this.$state|=1,this.$scope=s,this.target=this.toViewModel?s.ei:s.ni;const i=this.Te;i.bind&&i.bind(t,s,this),this.target[this.Re]=this.Te.evaluate(2048,s,this.Ae),this.Te.connect(t,s,this),this.$state|=2,this.$state&=-2}ss(t){if(!(2&this.$state))return;this.$state|=64;const s=this.Te;s.ke&&s.ke(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}},t.LetBinding=s([connectable()],t.LetBinding);class Ref{constructor(t,s,i){this.us=null,this.vs=null,this.$state=0,this.Ae=i,this.Te=t,this.target=s}cs(t,s){if(2&this.$state){if(this.$scope===s)return;this.ss(2048|t)}this.$state|=1,this.$scope=s,hasBind(this.Te)&&this.Te.bind(t,s,this),this.Te.assign(t,this.$scope,this.Ae,this.target),this.$state|=2,this.$state&=-2}ss(t){if(!(2&this.$state))return;this.$state|=64,this.Te.evaluate(t,this.$scope,this.Ae)===this.target&&this.Te.assign(t,this.$scope,this.Ae,null);const s=this.Te;hasUnbind(s)&&s.ke(t,this.$scope,this),this.$scope=null,this.$state&=-67}et(t,s,i){}j(t,s,i){}}t.CollectionLengthObserver=class{constructor(t,s){this.H=t,this.W=s,this.K=t[s]}G(){return this.H[this.W]}lt(t){this.H[this.W]=t}M(t){const s=this.H[this.W],i=this.K;i!==s&&(this.H[this.W]=s,this.K=s,this.m(s,i,16|t))}subscribe(t){this.l(t)}unsubscribe(t){this.u(t)}},t.CollectionLengthObserver=s([targetObserver()],t.CollectionLengthObserver);const ts=Array.prototype,ss=ts.push,is=ts.unshift,ns=ts.pop,hs=ts.shift,es=ts.splice,rs=ts.reverse,os=ts.sort,ls={push:ss,unshift:is,pop:ns,shift:hs,splice:es,reverse:rs,sort:os},cs=["push","unshift","pop","shift","splice","reverse","sort"],us={push(){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return ss.apply(t,arguments);const i=t.length,n=arguments.length;if(0===n)return i;t.length=s.ut.length=i+n;let h=i;for(;t.length>h;)t[h]=arguments[h-i],s.ut[h]=-2,h++;return s.m("push",arguments,33554432|s._),t.length},unshift(){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return is.apply(t,arguments);const i=arguments.length,n=Array(i);let h=0;for(;i>h;)n[h++]=-2;is.apply(s.ut,n);const e=is.apply(t,arguments);return s.m("unshift",arguments,33554432|s._),e},pop(){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return ns.call(t);const i=s.ut,n=ns.call(t),h=i.length-1;return i[h]>-1&&i.dt.push(i[h]),ns.call(i),s.m("pop",arguments,33554432|s._),n},shift(){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return hs.call(t);const i=s.ut,n=hs.call(t);return i[0]>-1&&i.dt.push(i[0]),hs.call(i),s.m("shift",arguments,33554432|s._),n},splice(t,s){let i=this;void 0!==i.Ws&&(i=i.Ws);const n=i.U;if(void 0===n)return es.apply(i,arguments);const h=n.ut;if(s>0){let i=isNaN(t)?0:t;const to=i+s;for(;to>i;)h[i]>-1&&h.dt.push(h[i]),i++}const e=arguments.length;if(e>2){const i=e-2,n=Array(i);let r=0;for(;i>r;)n[r++]=-2;es.call(h,t,s,...n)}else 2===e&&es.call(h,t,s);const r=es.apply(i,arguments);return n.m("splice",arguments,33554432|n._),r},reverse(){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return rs.call(t),this;const i=t.length,n=i/2|0;let h=0;for(;h!==n;){const n=i-h-1,e=t[h],r=s.ut[h],o=s.ut[n];t[h]=t[n],s.ut[h]=o,t[n]=e,s.ut[n]=r,h++}return s.m("reverse",arguments,33554432|s._),this},sort(t){let s=this;void 0!==s.Ws&&(s=s.Ws);const i=s.U;if(void 0===i)return os.call(s,t),this;const n=s.length;if(2>n)return this;E(s,i.ut,0,n,M);let h=0;for(;n>h&&void 0!==s[h];)h++;return void 0!==t&&"function"==typeof t||(t=F),E(s,i.ut,0,h,t),i.m("sort",arguments,33554432|i._),this}},as={Ce:1,js:0,Js:1},def=Reflect.defineProperty;for(const t of cs)def(us[t],"observing",{value:1,Ce:0,Js:0,js:0});enableArrayObservation(),t.ArrayObserver=class{constructor(t,s,i){this.T=s,i.U=this,this.C=i,this.flags=67108879&t,this.ft()}M(t){const s=this.C,i=s.length;let n=0;for(;i>n;++n)v(s[n],t)}},t.ArrayObserver=s([collectionObserver(9)],t.ArrayObserver);const fs=Map.prototype,ds=fs.set,bs=fs.clear,ps=fs.delete,vs={set:ds,clear:bs,delete:ps},gs=["set","clear","delete"],ws={set(t,value){let s=this;void 0!==s.Ws&&(s=s.Ws);const i=s.U;if(void 0===i)return ds.call(s,t,value),this;const n=s.size;if(ds.call(s,t,value),s.size===n){let n=0;for(const h of s.entries()){if(h[0]===t)return h[1]!==value&&(i.ut[n]=-2),this;n++}return this}return i.ut[n]=-2,i.m("set",arguments,33554432|i._),this},clear(){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return bs.call(t);if(t.size>0){const i=s.ut;let n=0;for(const s of t.keys())i[n]>-1&&i.dt.push(i[n]),n++;bs.call(t),i.length=0,s.m("clear",arguments,33554432|s._)}},delete(value){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return ps.call(t,value);if(0===t.size)return 0;let i=0;const n=s.ut;for(const s of t.keys()){if(s===value)return n[i]>-1&&n.dt.push(n[i]),n.splice(i,1),ps.call(t,value);i++}return s.m("delete",arguments,33554432|s._),0}},ms={Ce:1,js:0,Js:1},ys=Reflect.defineProperty;for(const t of gs)ys(ws[t],"observing",{value:1,Ce:0,Js:0,js:0});enableMapObservation(),t.MapObserver=class{constructor(t,s,i){this.T=s,i.U=this,this.C=i,this.flags=67108879&t,this.ft()}M(t){this.C.forEach((value,s)=>{v(value,t),v(s,t)})}},t.MapObserver=s([collectionObserver(6)],t.MapObserver);const Cs=Set.prototype,Os=Cs.add,js=Cs.clear,As=Cs.delete,Ts={add:Os,clear:js,delete:As},Rs=["add","clear","delete"],Ss={add(value){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return Os.call(t,value),this;const i=t.size;return Os.call(t,value),t.size===i?this:(s.ut[i]=-2,s.m("add",arguments,33554432|s._),this)},clear(){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return js.call(t);if(t.size>0){const i=s.ut;let n=0;for(const s of t.keys())i[n]>-1&&i.dt.push(i[n]),n++;js.call(t),i.length=0,s.m("clear",arguments,33554432|s._)}},delete(value){let t=this;void 0!==t.Ws&&(t=t.Ws);const s=t.U;if(void 0===s)return As.call(t,value);if(0===t.size)return 0;let i=0;const n=s.ut;for(const s of t.keys()){if(s===value)return n[i]>-1&&n.dt.push(n[i]),n.splice(i,1),As.call(t,value);i++}return s.m("delete",arguments,33554432|s._),0}},$s={Ce:1,js:0,Js:1},Is=Reflect.defineProperty;for(const t of Rs)Is(Ss[t],"observing",{value:1,Ce:0,Js:0,js:0});enableSetObservation(),t.SetObserver=class{constructor(t,s,i){this.T=s,i.U=this,this.C=i,this.flags=67108879&t,this.ft()}M(t){this.C.forEach((value,s)=>{v(s,t)})}},t.SetObserver=s([collectionObserver(7)],t.SetObserver);const ks={or:0,lr:0};t.CustomSetterObserver=class{constructor(t,s,i){this.H=t,this.W=s,this.K=this.oldValue=void 0,this.cr=i,this.q=0}J(t){this.cr.set.call(this.H,t),this.K!==t&&(this.oldValue=this.K,this.K=t,this.m(t,this.oldValue,16))}subscribe(t){this.q||this.ur(),this.l(t)}unsubscribe(t){this.u(t)}ur(){this.q=1,this.K=this.H[this.W],Reflect.defineProperty(this.H,this.W,{set:t=>{this.J(t)}})}},t.CustomSetterObserver=s([subscriberCollection(t.MutationKind.g)],t.CustomSetterObserver),t.GetterObserver=class{constructor(t,s,i,n,h,e,r){this.H=i,this.W=n,this.ar=0,this.K=this.oldValue=void 0,this.dr=[],this.br=[],this.pr=s,this.vr=0,this.cr=h,this.O=new Proxy(i,(function t(s,i,n){return{get(h,e,r){if(n.gr(e))return Reflect.get(h,e,r);switch(Ps.call(h)){case"[object Array]":if(n.wr(i.mr(s,h)),"length"===e)return Reflect.get(h,e,h);case"[object Map]":if(n.wr(i.yr(s,h)),"size"===e)return Reflect.get(h,e,h);case"[object Set]":if(n.wr(i.Cr(s,h)),"size"===e)return Reflect.get(h,e,h);default:n.Or(i.it(s,h,e))}return(function(s,i,n,h,e){const value=Reflect.get(i,n,i);return"function"==typeof value?i[n].bind(i):"object"!=typeof value||null===value?value:new Proxy(value,t(s,h,e))})(s,h,e,i,n)}}})(t,e,this)),Reflect.defineProperty(i,n,{get:()=>this.G()})}Or(t){-1===this.dr.indexOf(t)&&this.dr.push(t)}wr(t){-1===this.br.indexOf(t)&&this.br.push(t)}G(){return this.K=0===this.vr||this.ar?Reflect.apply(this.cr.get,this.O,kernel.PLATFORM.Ei):Reflect.apply(this.cr.get,this.H,kernel.PLATFORM.Ei),this.K}subscribe(t){this.l(t),1==++this.vr&&this.jr(1)}unsubscribe(t){this.u(t),0==--this.vr&&this.Ar()}j(){const t=this.K,s=this.jr(0);t!==s&&this.m(s,t,16)}N(){const t=this.K,s=this.jr(0);t!==s&&this.m(s,t,464)}jr(t){const s=!this.pr.or||t;return s&&(this.Ar(),this.ar=1),this.K=this.G(),s&&(this.dr.forEach(t=>{t.subscribe(this)}),this.br.forEach(t=>{t.wt(this)}),this.ar=0),this.K}gr(t){return!this.ar||"$observers"===t}Ar(){this.dr.forEach(t=>{t.unsubscribe(this)}),this.dr.length=0,this.br.forEach(t=>{t.yt(this)}),this.br.length=0}},t.GetterObserver=s([subscriberCollection(t.MutationKind.g)],t.GetterObserver);const Ps={}.toString,IDirtyChecker=kernel.DI.ui("IDirtyChecker").ci(t=>t.singleton(Vs)),DirtyCheckSettings={Tr:6,disabled:0,warn:1,Rr:0,Sr(){this.Tr=6,this.disabled=0,this.warn=1,this.Rr=0}};class Vs{constructor(){this.$r=0,this.Ir=[]}kr(s,i){if(DirtyCheckSettings.Rr)throw kernel.Reporter.error(800);return DirtyCheckSettings.warn&&kernel.Reporter.write(801),new t.DirtyCheckProperty(this,s,i)}Pr(t){this.Ir.push(t),1===this.Ir.length&&kernel.PLATFORM.Vr.add(this.Dr,this)}removeProperty(t){this.Ir.splice(this.Ir.indexOf(t),1),0===this.Ir.length&&kernel.PLATFORM.Vr.remove(this.Dr,this)}Dr(t){if(DirtyCheckSettings.disabled)return;if(++this.$r<DirtyCheckSettings.Tr)return;this.$r=0;const s=this.Ir,i=s.length;let n,h=0;for(;i>h;++h)(n=s[h]).Lr()&&n.flush(256)}}t.DirtyCheckProperty=class{constructor(t,s,i){this.H=s,this.W=i,this.Br=t}Lr(){return this.oldValue!==this.H[this.W]}flush(t){const s=this.H[this.W];this.m(s,this.oldValue,16|t),this.oldValue=s}subscribe(t){this.v()||(this.oldValue=this.H[this.W],this.Br.Pr(this)),this.l(t)}unsubscribe(t){this.u(t)&&!this.v()&&this.Br.removeProperty(this)}},t.DirtyCheckProperty=s([propertyObserver()],t.DirtyCheckProperty);const Ds=kernel.PLATFORM.Ai;class PrimitiveObserver{constructor(t,s){this.Nr=1,"length"===s?(this.H=t,this.G=this.xr):this.G=this.Fr}xr(){return this.H.length}Fr(){}}PrimitiveObserver.prototype.J=Ds,PrimitiveObserver.prototype.subscribe=Ds,PrimitiveObserver.prototype.unsubscribe=Ds,PrimitiveObserver.prototype.X=Ds,PrimitiveObserver.prototype.M=Ds;class PropertyAccessor{constructor(t,s){this.H=t,this.W=s}G(){return this.H[this.W]}J(value){this.H[this.W]=value}M(t){(function(value,t,s){if(p(value)&&void 0!==value.F){const i=value.F[t];i&&void 0!==i.M&&i.M(468|s)}})(this.H,this.W,t)}}const Ls={}.toString,IObserverLocator=kernel.DI.ui("IObserverLocator").ih(),ITargetObserverLocator=kernel.DI.ui("ITargetObserverLocator").ih(),ITargetAccessorLocator=kernel.DI.ui("ITargetAccessorLocator").ih();class Bs{constructor(t,s,i,n){this.Mr=[],this.Br=s,this.T=t,this.Ur=i,this.Er=n}static register(t){return kernel.Registration.singleton(IObserverLocator,this).register(t)}it(s,i,n){if(2&s&&"object"==typeof i)return t.ProxyObserver.As(i,n);if((function(t){return 1==t.ii})(i))return i.ri(s).As(s,i,n);let h,e=i.F;return e&&n in e?e[n]:((h=this.zr(s,i,n)).Nr||(void 0===e&&(e=this.qr(i)),e[n]=h),h)}Kr(t){this.Mr.push(t)}Ie(s,i,n){return this.Er.Qr(s,i)?this.Ur.Hr(s,i,n)?this.it(s,i,n):this.Er.Ie(s,this.T,i,n):2&s?t.ProxyObserver.As(i,n):new PropertyAccessor(i,n)}mr(t,s){return z(t,this.T,s)}yr(t,s){return q(t,this.T,s)}Cr(t,s){return K(t,this.T,s)}qr(t){return t.F||this.Wr(t)}Wr(t){const value={};return Reflect.defineProperty(t,"$observers",{js:0,Js:0,Ce:0,value})||kernel.Reporter.write(0,t),value}_r(t,s,i,n){for(let h=0,e=this.Mr.length;e>h;h++){const e=this.Mr[h].it(t,s,i,n);if(e)return e}return null}zr(s,i,n){if(!(i instanceof Object))return new PrimitiveObserver(i,n);let h=0;if(this.Ur.Qr(s,i)){const t=this.Ur.it(s,this.T,this,i,n);if(null!==t)return t;if(null!==t)return t;h=1}switch(Ls.call(i)){case"[object Array]":return"length"===n?this.mr(s,i).gt(s):this.Br.kr(i,n);case"[object Map]":return"size"===n?this.yr(s,i).gt(s):this.Br.kr(i,n);case"[object Set]":return"size"===n?this.Cr(s,i).gt(s):this.Br.kr(i,n)}const e=(function(t,name){let s=Object.getOwnPropertyDescriptor(t,name),i=Object.getPrototypeOf(t);for(;void 0===s&&null!==i;)s=Object.getOwnPropertyDescriptor(i,name),i=Object.getPrototypeOf(i);return s})(i,n);if(e&&(e.get||e.set)){if(e.get&&e.get.it)return e.get.it(i);return this._r(s,i,n,e)||(h?this.Br.kr(i,n):(function(s,i,n,h,e,r,o){if(0==o.Js)return n.kr(e,r);if(o.get){const n=e.constructor.computed&&e.constructor.computed[r]||ks;return o.set?n.lr?new t.GetterObserver(s,n,e,r,o,i,h):new t.CustomSetterObserver(e,r,o):new t.GetterObserver(s,n,e,r,o,i,h)}throw kernel.Reporter.error(18,r)})(s,this,this.Br,this.T,i,n,e))}return new t.SetterObserver(s,i,n)}}Bs.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator],t.SelfObserver=class{constructor(s,i,n,h){this._=67108879&s,t.ProxyObserver._s(i)?(i.U.subscribe(this,n),this.H=i.Ws):this.H=i,this.W=n,this.K=this.H[n],this.Gr=void 0===this.H[h]?null:this.H[h],4&s&&(this.G=this.Xs)}j(t,s,i){this.J(t,i)}G(){return this.K}Xs(){return this.H[this.W]}J(t,s){if(t!==this.K||(4&s)>0)if(0==(2048&s)){const i=this.K;s|=this._,this.K=t,this.m(t,i,262144|s),null!==this.Gr&&this.Gr.call(this.H,t,i,s)}else this.K=t}M(t){const s=this.K,i=this.H[this.W];t|=this._,this.K=i,this.m(i,s,t),null!==this.Gr&&this.Gr.call(this.H,i,s,t)}},t.SelfObserver=s([propertyObserver()],t.SelfObserver);const{oneTime:Ns,Xi:xs,Yi:Fs,Zi:Ms}=t.BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,s,i){i.Jr=i.mode,i.mode=this.mode}ke(t,s,i){i.mode=i.Jr,i.Jr=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Ns)}}BindingBehaviorResource.vi("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(xs)}}BindingBehaviorResource.vi("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Fs)}}BindingBehaviorResource.vi("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Ms)}}BindingBehaviorResource.vi("twoWay",TwoWayBindingBehavior);const Us={},Es=t.BindingMode.Yi;class DebounceBindingBehavior{bind(s,i,n,h=200){let e,r,o;n instanceof t.Binding?(e="handleChange",o=H,r=n.mode&Es?32:16):(e="callSource",o=Q,r=16),n.At=n[e],n.At.Xr=e,n[e]=o,n.Ot={Rt:r,Tt:h,jt:0,oldValue:Us}}ke(t,s,i){i[i.At.Xr]=i.At,i.At=null,kernel.PLATFORM.global.clearTimeout(i.Ot.jt),i.Ot=null}}BindingBehaviorResource.vi("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.Yr=t}bind(t,s,i,...n){if(!i.Se)throw kernel.Reporter.error(11);if(4===arguments.length){const name=n[0];this.Yr.di(name,i),i.Zr=name}else{if(4>=arguments.length)throw kernel.Reporter.error(12);{const t=[].slice.call(arguments,3);let s=t.length;for(;s--;)this.Yr.di(t[s],i);i.Zr=t}}}ke(t,s,i){const name=i.Zr;if(i.Zr=null,Array.isArray(name)){const t=name;let s=t.length;for(;s--;)this.Yr.bi(t[s],i)}else this.Yr.bi(name,i)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.vi("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(s,i,n,h=200){let e;n.It=n[e=n instanceof t.Binding?n.mode===t.BindingMode.Zi?"updateSource":"updateTarget":"callSource"],n.It.Xr=e,n[e]=W,n.St={Tt:h,$t:0,jt:-1}}ke(t,s,i){i[i.It.Xr]=i.It,i.It=null,kernel.PLATFORM.global.clearTimeout(i.St.jt),i.St=null}}BindingBehaviorResource.vi("throttle",ThrottleBindingBehavior);const zs={for(s){const i={add(i){let n;null!==i&&"object"==typeof i?n=i:"string"==typeof i&&(n={kt:i});const h=n.kt;if(!h)throw kernel.Reporter.error(0);return n.so||(n.so=kernel.PLATFORM.io(h)),n.Gr||(n.Gr=`${h}Changed`),void 0===n.mode&&(n.mode=t.BindingMode.Xi),s.bindables[h]=n,this},get:()=>s.bindables};if(void 0===s.bindables)s.bindables={};else if(Array.isArray(s.bindables)){const t=s.bindables;s.bindables={},t.forEach(i.add)}return i}},qs="custom-element",Ks="custom-attribute";(TargetedInstructionType=t.TargetedInstructionType||(t.TargetedInstructionType={})).no="ra",TargetedInstructionType.ho="rb",TargetedInstructionType.eo="rc",TargetedInstructionType.ro="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.er="rf",TargetedInstructionType.oo="rg",TargetedInstructionType.lo="rh",TargetedInstructionType.co="ri",TargetedInstructionType.uo="rj",TargetedInstructionType.ao="rk";const ITargetedInstruction=kernel.DI.ui("createInterface").ih(),Qs=Object.freeze({required:1,compiler:"default"}),Hs=Object.freeze({required:0,compiler:"default"});class Ws{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=Hs,this.bindables=kernel.PLATFORM.Pt,this.instructions=kernel.PLATFORM.Ei,this.dependencies=kernel.PLATFORM.Ei,this.surrogates=kernel.PLATFORM.Ei,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.strategy=1}}const _s=["name","template","cache","build","containerless","shadowOptions","hasSlots"],Gs=["instructions","dependencies","surrogates"],INode=(kernel.Profiler.fo("AttachLifecycle"),kernel.Profiler.fo("BindLifecycle"),kernel.DI.ui("INode").ih()),IRenderLocation=kernel.DI.ui("IRenderLocation").ih(),IDOM=kernel.DI.ui("IDOM").ih(),Js=function(){throw kernel.Reporter.error(1e3)},Xs={addEventListener:Js,appendChild:Js,cloneNode:Js,do:Js,createDocumentFragment:Js,createElement:Js,bo:Js,dispatchEvent:Js,po:Js,vo:Js,createTextNode:Js,insertBefore:Js,wo:Js,mo:Js,yo:Js,Co:Js,ws:Js,remove:Js,removeEventListener:Js,setAttribute:Js},DOM=Object.assign({},Xs,{get Oo(){return 1==Reflect.get(this,"$initialized")},initialize(dom){if(this.Oo)throw kernel.Reporter.error(1001);const t={},s=[dom];let i=Object.getPrototypeOf(dom);for(;i&&i!==Object.prototype;)s.unshift(i),i=Object.getPrototypeOf(i);for(i of s)Object.assign(t,Object.getOwnPropertyDescriptors(i));const n=[];let h,e;for(h in t)(e=t[h]).Js&&e.Ce&&(Reflect.defineProperty(this,h,e),n.push(h));Reflect.set(this,"$domKeys",n),Reflect.set(this,"$initialized",1)},jo(){if(!this.Oo)throw kernel.Reporter.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,Xs),Reflect.set(this,"$domKeys",kernel.PLATFORM.Ei),Reflect.set(this,"$initialized",0)}}),NodeSequence={empty:{childNodes:kernel.PLATFORM.Ei,firstChild:null,lastChild:null,Ao:()=>kernel.PLATFORM.Ei,insertBefore(t){},To(t){},remove(){}}};class Ys{constructor($lifecycle,cache){this.ls=null,this.ps=null,this.Nt=null,this.Qt=null,this.Nt=null,this.Qt=null,this.Ft=null,this.Wt=null,this.Ro=null,this.xh=null,this.Eh=null,this.Qh=null,this.$state=0,this.$scope=null,this.Zt=0,this.$lifecycle=$lifecycle,this.cache=cache}So(t){this.Zt=0,this.location=t}release(t){return this.Zt=1,8&this.$state?this.cache.$o(this):!!this.zh(t)}Io(t){this.$scope=t,this.cs=dt,this.ss=gt}}class Zs{constructor(name,template,t){this.ko=0,this.Po=-1,this.cache=null,this.T=t,this.name=name,this.template=template}Vo(t,s){t&&("*"===t?t=Zs.Do:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.Po&&s||(this.Po=t)),this.cache=this.Po>0?[]:null,this.ko=this.Po>0}$o(t){return null!==this.cache&&this.Po>this.cache.length}ts(t){return this.$o(t)?(t.Gt(0),this.cache.push(t),1):0}create(t){const cache=this.cache;let s;if(null!==cache&&cache.length>0)return(s=cache.pop()).$state&=-129,s;if(s=new Ys(this.T,this),this.template.ys(s,null,null,t),!s.$nodes)throw kernel.Reporter.error(90);return s}}Zs.Do=65535,(t=>{t.cs=ft,t.M=wt,t.ss=vt,t.xt=Z,t.Ht=it,t.Gt=et,t.Fh=lt,t.zh=ct})(Ys.prototype);const ITemplateCompiler=kernel.DI.ui("ITemplateCompiler").ih();(ViewCompileFlags=t.ViewCompileFlags||(t.ViewCompileFlags={}))[ViewCompileFlags.Ms=1]="none",ViewCompileFlags[ViewCompileFlags.Lo=2]="surrogate",ViewCompileFlags[ViewCompileFlags.Bo=4]="shadowDOM";const ITemplateFactory=kernel.DI.ui("ITemplateFactory").ih(),ti={No:null,dom:null,ys(t){t.$nodes=NodeSequence.empty,t.$context=null}},si="default",IInstructionRenderer=kernel.DI.ui("IInstructionRenderer").ih(),IRenderer=kernel.DI.ui("IRenderer").ih(),IRenderingEngine=kernel.DI.ui("IRenderingEngine").ci(t=>t.singleton(ii));class ii{constructor(t,s,i,n){this.xo=new Map,this.Fo=t,this.Mo=s,this.Uo=new Map,this.T=i,this.Eo=new Map,this.zo=n.reduce((t,s)=>(t[s.name]=s,t),Object.create(null))}Is(dom,t,s,i){if(!t)return null;let n=this.Eo.get(t);return n||(n=this.qo(dom,t,s,i),this.Eo.set(t,n)),n}Ko(dom,t,s){if(!t)return null;let i=this.Uo.get(t);if(!i){const n=buildTemplateDefinition(null,t),template=this.qo(dom,n,s,null);(i=new Zs(n.name,template,this.T)).Vo(n.cache,1),this.Uo.set(t,i)}return i}Ts(t,s,i){let n=this.xo.get(s);n||(n=ri.create(s),this.xo.set(s,n)),n.Qo(t,i,this.T)}qo(dom,s,i,n){if(null===i&&(i=this.Fo),null!==s.template){const h=createRenderContext(dom,i,s.dependencies,n);if(s.build.required){const i=s.build.compiler||si,compiler=this.zo[i];if(void 0===compiler)throw kernel.Reporter.error(20,i);s=compiler.compile(dom,s,new kernel.RuntimeCompilationResources(h),t.ViewCompileFlags.Lo)}return this.Mo.create(h,s)}return ti}}ii.inject=[kernel.IContainer,ITemplateFactory,ILifecycle,kernel.all(ITemplateCompiler)];class ni{constructor(){this.g=null}Os(t){this.g=t}resolve(t,s){if(void 0===this.g)throw kernel.Reporter.error(50);return this.g}X(){this.g=null}}class hi{Os(t,parts){this.Ho=t,this.Wo=parts||kernel.PLATFORM.Pt}resolve(t,s){const i=this.Ho;if(null==i)throw kernel.Reporter.error(50);if(!i.name||!i.name.length)throw kernel.Reporter.error(51);const n=this.Wo[i.name];if(n){const i=t.get(IRenderingEngine),dom=t.get(IDOM);return i.Ko(dom,n,s)}return i}X(){this.Ho=null,this.Wo=kernel.PLATFORM.Pt}}let ei=class{constructor(t,customElement){this.pt=0,this.children=null,this.customElement=customElement,this.T=t,this.q=0}G(){return this.q||(this.q=1,this.customElement.Xt._o(()=>{this.Go()}),this.children=mt(this.customElement.Xt.children)),this.children}J(t){}flush(t){this.m(this.children,void 0,16|t),this.pt=0}subscribe(t){this.l(t)}unsubscribe(t){this.u(t)}Go(){this.children=mt(this.customElement.Xt.children),"$childrenChanged"in this.customElement&&this.customElement.Jo(),this.T.A(this).catch(t=>{throw t}),this.pt=1}};ei=s([subscriberCollection(t.MutationKind.g)],ei);class ri{constructor(){}static create(t){const s=new ri;return s.bindables=t.description.bindables,s}Qo(t,s,i){s.$lifecycle=i,"$projector"in s?this.Xo(t,i,s):this.Yo(t,s)}Xo(t,s,i){this.Yo(t,i).Zo=new ei(s,i),Reflect.defineProperty(i,"$children",{js:0,get(){return this.F.Zo.G()}})}Yo(s,i){const n={},bindables=this.bindables,h=Object.getOwnPropertyNames(bindables);if(2&s)for(let e=0,r=h.length;r>e;++e){const name=h[e];n[name]=new t.SelfObserver(s,t.ProxyObserver.As(i).O,name,bindables[name].Gr)}else{for(let e=0,r=h.length;r>e;++e){const name=h[e];n[name]=new t.SelfObserver(s,i,name,bindables[name].Gr),4&s||yt(s,i,name)}Reflect.defineProperty(i,"$observers",{js:0,value:n})}return n}}const IProjectorLocator=kernel.DI.ui("IProjectorLocator").ih(),CustomElementResource={name:qs,Y:_,pi(t){return t.kind===this},tl:G,vi(t,s=null){if(!t)throw kernel.Reporter.error(70);const i=null===s?class{}:s,n=i,h=buildTemplateDefinition(i,t),e=i.prototype;return n.kind=CustomElementResource,i.description=h,i.register=Ct,e.sl=At,e.cs=at,e.M=wt,e.xt=Y,e.Ht=st,e.ss=pt,e.Gt=ht,e.Wt=null,e.Ft=null,e.Ro=null,e.Qh=null,e.$scope=null,e.$hooks=0,e.ls=null,e.ps=null,e.Nt=null,e.Qt=null,e.Fh=rt,e.zh=ot,e.xh=null,e.Eh=null,e.Xt=null,"flush"in e&&(e.ct=null),"binding"in e&&(e.$hooks|=4),"bound"in e&&(e.$hooks|=8,e.Nh=null),"unbinding"in e&&(e.$hooks|=256),"unbound"in e&&(e.$hooks|=512,e.Hh=null),"render"in e&&(e.$hooks|=1024),"created"in e&&(e.$hooks|=2),"attaching"in e&&(e.$hooks|=16),"attached"in e&&(e.$hooks|=32,e.Mh=null),"detaching"in e&&(e.$hooks|=64),"caching"in e&&(e.$hooks|=2048),"detached"in e&&(e.$hooks|=128,e.qh=null),i}},oi={mode:"open"},CustomAttributeResource=(kernel.Profiler.fo("RenderLifecycle"),{name:Ks,Y:J,pi(t){return t.kind===this},vi(s,i){const n=i,h=n,e=(function(def,s){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?kernel.PLATFORM.Ei:aliases,defaultBindingMode:null==defaultBindingMode?t.BindingMode.Xi:defaultBindingMode,Ps:void 0===def.Ps?0:def.Ps,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},zs.for(s).get(),zs.for(def).get()),strategy:j(def.strategy)}})("string"==typeof s?{name:s}:s,n),r=n.prototype;return h.kind=CustomAttributeResource,h.description=e,n.register=Tt,r.sl=jt,r.cs=ut,r.M=wt,r.xt=X,r.Ht=tt,r.ss=bt,r.Gt=nt,r.Wt=null,r.Ft=null,r.Ro=null,r.Qh=null,r.$scope=null,r.$hooks=0,r.$state=0,"flush"in r&&(r.ct=null),"binding"in r&&(r.$hooks|=4),"bound"in r&&(r.$hooks|=8,r.Nh=null),"unbinding"in r&&(r.$hooks|=256),"unbound"in r&&(r.$hooks|=512,r.Hh=null),"created"in r&&(r.$hooks|=2),"attaching"in r&&(r.$hooks|=16),"attached"in r&&(r.$hooks|=32,r.Mh=null),"detaching"in r&&(r.$hooks|=64),"caching"in r&&(r.$hooks|=2048),"detached"in r&&(r.$hooks|=128,r.qh=null),n}});class If{constructor(t,s,i){this.value=0,this.we=i,this.il=null,this.nl=null,this.hl=t,this.el=null,this.location=s,this._=0}es(t){this._=67108879&t;const s=this.rl(t);this.we.ce(s,t),this.we.es(t,this.$scope)}Dt(t){this.we.Dt(t)}Et(t){this.we.Et(t)}ds(t){this.we.ds(t)}_t(t){null!==this.el&&this.el.release(t)&&(this.el=null),null!==this.nl&&this.nl.release(t)&&(this.nl=null),this.we._t(t)}ol(s,i,n){if(3&this.$state){n|=this._;const s=t.ProxyObserver.Ct(this);if(448&n){const t=s.rl(n);s.we.ce(t,n)}else s.$lifecycle.A(s).catch(t=>{throw t})}}flush(s){s|=this._;const i=t.ProxyObserver.Ct(this),n=i.rl(s);i.we.ce(n,s)}rl(t){return this.value?this.el=this.ll(this.el,this.hl,t):null!==this.il?this.nl=this.ll(this.nl,this.il,t):null}ll(t,s,i){return null===t&&(t=s.create(i)),t.So(this.location),t}}If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],s([bindable],If.prototype,"value",void 0),CustomAttributeResource.vi({name:"if",isTemplateController:1},If);class Else{constructor(t){this.Ho=t}link(t){t.il=this.Ho}}Else.inject=[IViewFactory],CustomAttributeResource.vi({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,s,i){this.Ho=i,this.cl=0,this.location=t,this.ul=null,this.al=s,this.fl=[],this.key=null,this.qs=0}es(s){this._=67108879&s,this.dl(s);let i=this.al.ls;for(;null!==i;){if(t.ProxyObserver.Ct(i.target)===t.ProxyObserver.Ct(this)&&"items"===i.Re){this.bl=i.Te;break}i=i.us}this.pl=this.bl.vl.evaluate(s,this.$scope,null),this.qs||(8&s)>0?this.gl(null,s):this.wl(null,s)}Dt(t){const{fl:s,location:i}=this;let n;for(let h=0,e=s.length;e>h;++h)(n=s[h]).So(i),n.xt(t)}Et(t){const{fl:s}=this;let i;for(let n=0,h=s.length;h>n;++n)(i=s[n]).Ht(t),i.release(t)}ds(t){this.dl(t);const{fl:s}=this;let i;for(let n=0,h=s.length;h>n;++n)(i=s[n]).ss(t)}ml(s,i,n){n|=this._;const h=t.ProxyObserver.Ct(this);h.dl(n),n|=16,h.qs||(8&n)>0?h.gl(null,n):h.wl(null,n)}N(s,i){i|=this._;const n=t.ProxyObserver.Ct(this);i|=464,n.qs||(8&i)>0?n.gl(s,i):n.wl(s,i)}wl(t,s){const{fl:i,$lifecycle}=this;let n;if(3&this.$state){const{pl:h,$scope,Ho:e,bl:r,yl:o}=this,l=i.length,c=r.count(s,o);if(c>l){i.length=c;for(let t=l;c>t;++t)i[t]=e.create(s)}else if(l>c){$lifecycle.Ut();for(let t=c;l>t;++t)(n=i[t]).release(s),n.Ht(s);$lifecycle.qt(s),$lifecycle.as();for(let t=c;l>t;++t)(n=i[t]).ss(s);if($lifecycle.bs(s),i.length=c,0===c)return}else if(0===c)return;$lifecycle.ns(),r.Cl(s,o,null===t?(t,e,r)=>{(n=i[e]).cs(s,Scope.li(s,$scope,n.$scope&&n.$scope.ei[h]===r?n.$scope.ei:BindingContext.create(s,h,r)))}:(e,r,o)=>{(n=i[r]).cs(s,Scope.li(s,$scope,!n.$scope||t[r]!==r&&n.$scope.ei[h]!==o?BindingContext.create(s,h,o):n.$scope.ei))}),$lifecycle.rs(s)}if(12&this.$state){const{location:h}=this;if($lifecycle.Vt(),null===t)for(let t=0,e=i.length;e>t;++t)(n=i[t]).So(h),n.xt(s);else for(let e=0,r=i.length;r>e;++e)t[e]!==e&&((n=i[e]).So(h),n.xt(s));$lifecycle.Bt(s)}}gl(t,s){const{$lifecycle,pl:i,$scope,Ho:n,bl:h,yl:e}=this;let r=this.fl;if(null===t){if(3&this.$state){$lifecycle.Ut();const t=r.length;let o;for(let i=0;t>i;++i)(o=r[i]).release(s),o.Ht(s);$lifecycle.qt(s),$lifecycle.as();for(let i=0;t>i;++i)(o=r[i]).ss(s);$lifecycle.bs(s);const l=h.count(s,e);r=this.fl=Array(l),$lifecycle.ns(),h.Cl(s,e,(t,h,e)=>{(o=r[h]=n.create(s)).cs(s,Scope.li(s,$scope,BindingContext.create(s,i,e)))}),$lifecycle.rs(s)}if(12&this.$state){const{location:t}=this;let i;$lifecycle.Vt();const n=r.length;for(let h=0;n>h;++h)(i=r[h]).So(t),i.xt(s);$lifecycle.Bt(s)}}else{const h=t.length;let o;const l=t.dt,c=l.length;let u=0;if(3&this.$state){if(c>0){for($lifecycle.Ut(),u=0;c>u;++u)(o=r[l[u]]).release(s),o.Ht(s);for($lifecycle.qt(s),$lifecycle.as(),u=0;c>u;++u)(o=r[l[u]]).ss(s);$lifecycle.bs(s),u=0;let i=0,n=0;for(l.sort();c>u;++u)for(r.splice(i=l[u]-u,1),n=0;h>n;++n)i>t[n]||--t[n]}for($lifecycle.ns(),u=0;h>u;++u)-2===t[u]&&((o=n.create(s)).cs(s,Scope.li(s,$scope,BindingContext.create(s,i,e[u]))),r.splice(u,0,o));if($lifecycle.rs(s),r.length!==h)throw Error(`viewsLen=${r.length}, mapLen=${h}`)}if(12&this.$state){const{location:i}=this,n=(function(t){const s=t.length,i=s+t.dt.length,n=255>i?Uint8Array:65535>i?Uint16Array:Uint32Array;s>ui&&(ui=s,li=new n(s),ci=new n(s));let h=0,e=0,r=0,o=0,l=0,c=0,u=0,a=0;for(;s>o;o++)if(-2!==(e=t[o])){if(-2!==(r=t[l=li[h]])&&e>r){ci[o]=l,li[++h]=o;continue}for(c=0,u=h;u>c;)-2!==(r=t[li[a=c+u>>1]])&&e>r?c=a+1:u=a;((r=t[li[c]])>e||-2===r)&&(c>0&&(li[o]=li[c-1]),li[c]=o)}const f=new n(o=++h);for(e=li[h-1];h-- >0;)f[h]=e,e=ci[e];for(;o-- >0;)li[o]=0;return f})(t),h=n.length;$lifecycle.Ut(),$lifecycle.Vt(),$lifecycle.Mt({Fh(){let e=i,l=h-1;for(u=t.length-1;u>=0;--u)if(-2===t[u]){(o=r[u]).$state|=4;let t=o.Nt;for(;null!==t;)t.xt(8192|s),t=t.Ft;o.$nodes.insertBefore(e),o.$state|=24,o.$state&=-5,e=o.$nodes.firstChild}else if(0>l||1===h||u!==n[l]){(o=r[t[u]]).$state|=32;let i=o.Qt;for(;null!==i;)i.Ht(16384|s),i=i.Wt;for(o.$nodes.remove(),o.$state&=-57,o.$state|=4,i=o.Nt;null!==i;)i.xt(8192|s),i=i.Ft;o.$nodes.insertBefore(e),o.$state|=24,o.$state&=-5,e=o.$nodes.firstChild}else e=(o=r[u]).$nodes.firstChild,--l},xh:null}),$lifecycle.qt(s),$lifecycle.Bt(s)}}}dl(s){const i=t.ProxyObserver.Ct(this),n=i.ul;if(3&i.$state){const t=i.ul=getCollectionObserver(s,i.$lifecycle,i.yl);n!==t&&n&&n.yt(i),t&&t.wt(i)}else n&&n.yt(i)}}let li,ci;Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],s([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.vi({name:"repeat",isTemplateController:1},Repeat);let ui=0;class Replaceable{constructor(t,s){this.Ho=t,this.currentView=this.Ho.create(),this.currentView.So(s)}es(t){this.currentView.cs(67108864|t,this.$scope)}Dt(t){this.currentView.xt(t)}Et(t){this.currentView.Ht(t)}ds(t){this.currentView.ss(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.vi({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,s){this.value=null,this.Ho=t,this.currentView=this.Ho.create(),this.currentView.So(s)}ol(){3&this.$state&&this.Ol(2048)}es(t){this.Ol(t)}Dt(t){this.currentView.xt(t)}Et(t){this.currentView.Ht(t)}ds(t){this.currentView.ss(t)}Ol(t){const s=Scope.li(t,this.$scope,this.value);this.currentView.cs(t,s)}}With.inject=[IViewFactory,IRenderLocation],s([bindable],With.prototype,"value",void 0),CustomAttributeResource.vi({name:"with",isTemplateController:1},With);const ISanitizer=kernel.DI.ui("ISanitizer").ci(t=>t.singleton(class{jl(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.Al=t}Xi(t){return null==t?null:this.Al.jl(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.vi("sanitize",SanitizeValueConverter),kernel.Profiler.fo("Aurelia.start"),kernel.Profiler.fo("Aurelia.stop");class Aurelia{constructor(t=kernel.DI.Tl()){this.Fo=t,this.Rl=[],this.Sl=[],this.$l=[],this.Il=0,this.kl=null,kernel.Registration.g(Aurelia,this).register(t,Aurelia)}register(...t){return this.Fo.register(...t),this}app(s){const host=s.host;this.Fo.get(IDOMInitializer).initialize(s),kernel.Registration.g(INode,host).register(this.Fo);const i=512|s.strategy,n=1024|s.strategy;let component;const h=s.component;CustomElementResource.pi(h)?(this.Fo.register(h),component=this.Fo.get(CustomElementResource.Y(h.description.name))):component=h,component=t.ProxyObserver.Ct(component);const e=()=>{host.$au=this,this.Rl.includes(component)||(this.kl=component,this.Rl.push(component),component.sl(i,this.Fo,host)),component.cs(2048|i,null),component.xt(8192|i)};return this.Sl.push(e),this.$l.push(()=>{component.Ht(16384|n),component.ss(4096|n),host.$au=null}),this.Il&&e(),this}root(){return t.ProxyObserver.Hs(this.kl)}start(){for(const t of this.Sl)t();return this.Il=1,this}stop(){this.Il=0;for(const t of this.$l)t();return this}}kernel.PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=kernel.DI.ui("IDOMInitializer").ih();class ai{constructor(t){const s=this.Pl={};t.forEach(t=>{s[t.Vs]=t})}static register(t){return kernel.Registration.singleton(IRenderer,this).register(t)}ys(t,dom,s,i,targets,n,host,parts){const h=n.instructions,e=this.Pl;if(targets.length!==h.length)throw kernel.Reporter.error(targets.length>h.length?30:31);let instructions,r,o;for(let n=0,l=targets.length;l>n;++n){r=targets[n];for(let l=0,c=(instructions=h[n]).length;c>l;++l)e[(o=instructions[l]).type].ys(t,dom,s,i,r,o,parts)}if(host){const h=n.surrogates;for(let n=0,r=h.length;r>n;++n)e[(o=h[n]).type].ys(t,dom,s,i,host,o,parts)}}}ai.inject=[kernel.all(IInstructionRenderer)];let fi=class{ys(t,dom,s,i,n,h){n[h.to]=h.value}};fi=s([instructionRenderer("re")],fi);let di=class{ys(t,dom,s,i,n,h){const e=s.Cs(i,n,h,null,null,n,1),component=s.get(_(h.res)),r=s.get(IRenderer).Pl,o=h.instructions;let l;component.sl(t,s,n,h);for(let n=0,h=o.length;h>n;++n)r[(l=o[n]).type].ys(t,dom,s,i,component,l);addComponent(i,component),e.X()}};di=s([instructionRenderer("ra")],di);let bi=class{ys(t,dom,s,i,n,h){const e=s.Cs(i,n,h),component=s.get(J(h.res)),r=s.get(IRenderer).Pl,o=h.instructions;let l;component.sl(t,s);for(let n=0,h=o.length;h>n;++n)r[(l=o[n]).type].ys(t,dom,s,i,component,l);addComponent(i,component),e.X()}};bi=s([instructionRenderer("rb")],bi);let pi=class{constructor(t){this.Vl=t}ys(t,dom,s,i,n,h,parts){const e=this.Vl.Ko(dom,h.def,s),r=s.Cs(i,n,h,e,parts,dom.do(n),0),component=s.get(J(h.res)),o=s.get(IRenderer).Pl,l=h.instructions;let c;component.sl(t,s),h.link&&component.link(i.Qt);for(let n=0,h=l.length;h>n;++n)o[(c=l[n]).type].ys(t,dom,s,i,component,c);addComponent(i,component),r.X()}};pi.inject=[IRenderingEngine],pi=s([instructionRenderer("rc")],pi);let vi=class{constructor(t,s){this.Dl=t,this.nt=s}ys(s,dom,i,n,h,e){dom.remove(h);const r=e.instructions,toViewModel=e.toViewModel;let o,l,c;for(let s=0,h=r.length;h>s;++s)l=ensureExpression(this.Dl,(o=r[s]).from,48),addBinding(n,c=new t.LetBinding(l,o.to,this.nt,i,toViewModel))}};vi.inject=[IExpressionParser,IObserverLocator],vi=s([instructionRenderer("rd")],vi);let gi=class{constructor(t,s){this.Dl=t,this.nt=s}ys(t,dom,s,i,n,h){const e=ensureExpression(this.Dl,h.from,153);addBinding(i,new Call(e,n,h.to,this.nt,s))}};gi.inject=[IExpressionParser,IObserverLocator],gi=s([instructionRenderer("rh")],gi);let wi=class{constructor(t){this.Dl=t}ys(t,dom,s,i,n,h){const e=ensureExpression(this.Dl,h.from,1280);addBinding(i,new Ref(e,n,s))}};wi.inject=[IExpressionParser],wi=s([instructionRenderer("rj")],wi);let mi=class{constructor(t,s){this.Dl=t,this.nt=s}ys(s,dom,i,n,h,e){let r;const o=ensureExpression(this.Dl,e.from,2048);addBinding(n,r=o.Ll?new MultiInterpolationBinding(this.nt,o,h,e.to,t.BindingMode.Xi,i):new t.InterpolationBinding(o.Bl,o,h,e.to,t.BindingMode.Xi,this.nt,i,1))}};mi.inject=[IExpressionParser,IObserverLocator],mi=s([instructionRenderer("rf")],mi);let yi=class{constructor(t,s){this.Dl=t,this.nt=s}ys(s,dom,i,n,h,e){const r=ensureExpression(this.Dl,e.from,48|e.mode);addBinding(n,new t.Binding(r,h,e.to,e.mode,this.nt,i))}};yi.inject=[IExpressionParser,IObserverLocator],yi=s([instructionRenderer("rg")],yi);let Ci=class{constructor(t,s){this.Dl=t,this.nt=s}ys(s,dom,i,n,h,e){const r=ensureExpression(this.Dl,e.from,539);addBinding(n,new t.Binding(r,h,e.to,t.BindingMode.Xi,this.nt,i))}};Ci.inject=[IExpressionParser,IObserverLocator],Ci=s([instructionRenderer("rk")],Ci);class Oi{bind(t,s,i,n){i.target.key=n,i.target.qs=1}ke(t,s,i){i.target.key=null,i.target.qs=0}}BindingBehaviorResource.vi("keyed",Oi);const IObserverLocatorRegistration=Bs,ILifecycleRegistration=zt,IRendererRegistration=ai,DefaultComponents=[IObserverLocatorRegistration,ILifecycleRegistration,IRendererRegistration],IfRegistration=If,ElseRegistration=Else,RepeatRegistration=Repeat,ReplaceableRegistration=Replaceable,WithRegistration=With,SanitizeValueConverterRegistration=SanitizeValueConverter,DebounceBindingBehaviorRegistration=DebounceBindingBehavior,KeyedBindingBehaviorRegistration=Oi,OneTimeBindingBehaviorRegistration=OneTimeBindingBehavior,ToViewBindingBehaviorRegistration=ToViewBindingBehavior,FromViewBindingBehaviorRegistration=FromViewBindingBehavior,SignalBindingBehaviorRegistration=SignalBindingBehavior,ThrottleBindingBehaviorRegistration=ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration=TwoWayBindingBehavior,DefaultResources=[IfRegistration,ElseRegistration,RepeatRegistration,ReplaceableRegistration,WithRegistration,SanitizeValueConverterRegistration,DebounceBindingBehaviorRegistration,KeyedBindingBehaviorRegistration,OneTimeBindingBehaviorRegistration,ToViewBindingBehaviorRegistration,FromViewBindingBehaviorRegistration,SignalBindingBehaviorRegistration,ThrottleBindingBehaviorRegistration,TwoWayBindingBehaviorRegistration],CallBindingRendererRegistration=gi,CustomAttributeRendererRegistration=bi,CustomElementRendererRegistration=di,InterpolationBindingRendererRegistration=mi,IteratorBindingRendererRegistration=Ci,LetElementRendererRegistration=vi,PropertyBindingRendererRegistration=yi,RefBindingRendererRegistration=wi,SetPropertyRendererRegistration=fi,TemplateControllerRendererRegistration=pi,DefaultRenderers=[PropertyBindingRendererRegistration,IteratorBindingRendererRegistration,CallBindingRendererRegistration,RefBindingRendererRegistration,InterpolationBindingRendererRegistration,SetPropertyRendererRegistration,CustomElementRendererRegistration,CustomAttributeRendererRegistration,TemplateControllerRendererRegistration,LetElementRendererRegistration],RuntimeBasicConfiguration={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Tl(){return this.register(kernel.DI.Tl())}};t.AccessKeyed=class{constructor(t,s){this.Z=9324,this.object=t,this.key=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);if(n instanceof Object)return n[this.key.evaluate(t,s,i)]}assign(t,s,i,value){return this.object.evaluate(t,s,i)[this.key.evaluate(t,s,i)]=value}connect(t,s,i){const n=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),"object"==typeof n&&null!==n){this.key.connect(t,s,i);const h=this.key.evaluate(t,s,null);Array.isArray(n)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const s=value.length;if(0===s)return 0;let i;for(let t=0;s>t;++t)if(48>(i=value.charCodeAt(t))||i>57)return 0;return 1})(h)?2&t&&i.et(t,n,h):i.et(t,n,h)}}accept(t){return t.Nl(this)}},t.AccessMember=AccessMember,t.AccessScope=AccessScope,t.AccessThis=AccessThis,t.AggregateLifecycleTask=AggregateLifecycleTask,t.ArrayBindingPattern=class{constructor(t){this.Z=65556,this.elements=t}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.xl(this)}},t.ArrayLiteral=ArrayLiteral,t.Assign=class{constructor(t,value){this.Z=8208,this.target=t,this.value=value}evaluate(t,s,i){return this.target.assign(t,s,i,this.value.evaluate(t,s,i))}connect(t,s,i){}assign(t,s,i,value){return this.value.assign(t,s,i,value),this.target.assign(t,s,i,value)}accept(t){return t.Fl(this)}},t.Aurelia=Aurelia,t.Binary=class{constructor(t,s,i){this.Z=46,this.assign=kernel.PLATFORM.Ai,this.Ml=t,this.left=s,this.right=i,this.evaluate=this[t]}evaluate(t,s,i){throw kernel.Reporter.error(208,this)}connect(t,s,i){const n=this.left.evaluate(t,s,null);this.left.connect(t,s,i),"&&"===this.Ml&&!n||"||"===this.Ml&&n||this.right.connect(t,s,i)}Ul(t,s,i){return this.left.evaluate(t,s,i)&&this.right.evaluate(t,s,i)}El(t,s,i){return this.left.evaluate(t,s,i)||this.right.evaluate(t,s,i)}zl(t,s,i){return this.left.evaluate(t,s,i)==this.right.evaluate(t,s,i)}ql(t,s,i){return this.left.evaluate(t,s,i)===this.right.evaluate(t,s,i)}Kl(t,s,i){return this.left.evaluate(t,s,i)!=this.right.evaluate(t,s,i)}Ql(t,s,i){return this.left.evaluate(t,s,i)!==this.right.evaluate(t,s,i)}Hl(t,s,i){const n=this.right.evaluate(t,s,i);return"function"==typeof n?this.left.evaluate(t,s,i)instanceof n:0}Wl(t,s,i){const n=this.right.evaluate(t,s,i);return null!==n&&"object"==typeof n?this.left.evaluate(t,s,i)in n:0}_l(t,s,i){return this.left.evaluate(t,s,i)+this.right.evaluate(t,s,i)}Gl(t,s,i){return this.left.evaluate(t,s,i)-this.right.evaluate(t,s,i)}Jl(t,s,i){return this.left.evaluate(t,s,i)*this.right.evaluate(t,s,i)}Xl(t,s,i){return this.left.evaluate(t,s,i)/this.right.evaluate(t,s,i)}Yl(t,s,i){return this.left.evaluate(t,s,i)%this.right.evaluate(t,s,i)}Zl(t,s,i){return this.left.evaluate(t,s,i)<this.right.evaluate(t,s,i)}tc(t,s,i){return this.left.evaluate(t,s,i)>this.right.evaluate(t,s,i)}sc(t,s,i){return this.left.evaluate(t,s,i)<=this.right.evaluate(t,s,i)}ic(t,s,i){return this.left.evaluate(t,s,i)>=this.right.evaluate(t,s,i)}accept(t){return t.nc(this)}},t.BindingBehavior=class{constructor(t,name,s){this.Z=38962,this.hc=t,this.name=name,this.Pi=s,this.ec=BindingBehaviorResource.Y(this.name)}evaluate(t,s,i){return this.hc.evaluate(t,s,i)}assign(t,s,i,value){return this.hc.assign(t,s,i,value)}connect(t,s,i){this.hc.connect(t,s,i)}bind(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);if(!i)throw kernel.Reporter.error(206,this);const n=i.Ae;if(!n)throw kernel.Reporter.error(202,this);hasBind(this.hc)&&this.hc.bind(t,s,i);const h=this.ec,e=n.get(h);if(!e)throw kernel.Reporter.error(203,this);null==i[h]?(i[h]=e,e.bind.apply(e,[t,s,i].concat(C(t,s,n,this.Pi)))):kernel.Reporter.write(204,this)}ke(t,s,i){const n=this.ec;null!=i[n]?(i[n].ke(t,s,i),i[n]=null):kernel.Reporter.write(204,this),hasUnbind(this.hc)&&this.hc.ke(t,s,i)}accept(t){return t.rc(this)}},t.BindingBehaviorResource=BindingBehaviorResource,t.BindingContext=BindingContext,t.BindingIdentifier=class{constructor(name){this.Z=65558,this.name=name}evaluate(t,s,i){return this.name}connect(t,s,i){}accept(t){return t.oc(this)}},t.BindingModeBehavior=BindingModeBehavior,t.Call=Call,t.CallBindingInstruction=class{constructor(from,to){this.type="rh",this.from=from,this.to=to}},t.CallBindingRendererRegistration=CallBindingRendererRegistration,t.CallFunction=class{constructor(t,s){this.Z=1162,this.assign=kernel.PLATFORM.Ai,this.lc=t,this.Pi=s}evaluate(t,s,i){const n=this.lc.evaluate(t,s,i);if("function"==typeof n)return n.apply(null,C(t,s,i,this.Pi));if(1048576&t||null!=n)throw kernel.Reporter.error(207,this)}connect(t,s,i){const n=this.lc.evaluate(t,s,null);if(this.lc.connect(t,s,i),"function"==typeof n){const n=this.Pi;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}}accept(t){return t.cc(this)}},t.CallMember=CallMember,t.CallScope=CallScope,t.CompiledTemplate=class{constructor(dom,t,s,i){this.dom=dom,this.uc=t,this.Ho=s,this.No=i}ys(t,host,parts,s=0){const i=t.$nodes=this.Ho.ac();t.$context=this.No,this.No.ys(s|=this.uc.strategy,t,i.Ao(),this.uc,host,parts)}},t.CompositionCoordinator=CompositionCoordinator,t.Conditional=class{constructor(t,s,i){this.Z=63,this.assign=kernel.PLATFORM.Ai,this.fc=t,this.dc=s,this.bc=i}evaluate(t,s,i){return this.fc.evaluate(t,s,i)?this.dc.evaluate(t,s,i):this.bc.evaluate(t,s,i)}connect(t,s,i){this.fc.evaluate(t,s,null)?(this.fc.connect(t,s,i),this.dc.connect(t,s,i)):(this.fc.connect(t,s,i),this.bc.connect(t,s,i))}accept(t){return t.pc(this)}},t.CustomAttributeRendererRegistration=CustomAttributeRendererRegistration,t.CustomAttributeResource=CustomAttributeResource,t.CustomElementRendererRegistration=CustomElementRendererRegistration,t.CustomElementResource=CustomElementResource,t.DOM=DOM,t.DebounceBindingBehavior=DebounceBindingBehavior,t.DebounceBindingBehaviorRegistration=DebounceBindingBehaviorRegistration,t.DefaultResources=DefaultResources,t.DirtyCheckSettings=DirtyCheckSettings,t.Else=Else,t.ElseRegistration=ElseRegistration,t.ForOfStatement=class{constructor(t,s){this.Z=6199,this.assign=kernel.PLATFORM.Ai,this.vl=t,this.vc=s}evaluate(t,s,i){return this.vc.evaluate(t,s,i)}count(t,s){return Mt[xt.call(s)](s)}Cl(t,s,i){Ft[xt.call(s)](16777216|t,s,i)}connect(t,s,i){this.vl.connect(t,s,i),this.vc.connect(t,s,i)}bind(t,s,i){hasBind(this.vc)&&this.vc.bind(t,s,i)}ke(t,s,i){hasUnbind(this.vc)&&this.vc.ke(t,s,i)}accept(t){return t.gc(this)}},t.FromViewBindingBehavior=FromViewBindingBehavior,t.FromViewBindingBehaviorRegistration=FromViewBindingBehaviorRegistration,t.FromViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.Yi,this.oneTime=0,this.to=to}},t.HtmlLiteral=class{constructor(parts){this.Z=51,this.assign=kernel.PLATFORM.Ai,this.parts=parts}evaluate(t,s,i){const n=this.parts;let value,h="";for(let e=0,r=n.length;r>e;++e)null!=(value=n[e].evaluate(t,s,i))&&(h+=value);return h}connect(t,s,i){for(let n=0,h=this.parts.length;h>n;++n)this.parts[n].connect(t,s,i)}accept(t){return t.wc(this)}},t.HydrateAttributeInstruction=class{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}},t.HydrateElementInstruction=class{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}},t.HydrateTemplateController=class{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}},t.IDOM=IDOM,t.IDOMInitializer=IDOMInitializer,t.IDirtyChecker=IDirtyChecker,t.IExpressionParser=IExpressionParser,t.IInstructionRenderer=IInstructionRenderer,t.ILifecycle=ILifecycle,t.ILifecycleRegistration=ILifecycleRegistration,t.INode=INode,t.IObserverLocator=IObserverLocator,t.IObserverLocatorRegistration=IObserverLocatorRegistration,t.IProjectorLocator=IProjectorLocator,t.IRenderLocation=IRenderLocation,t.IRenderable=IRenderable,t.IRenderer=IRenderer,t.IRendererRegistration=IRendererRegistration,t.IRenderingEngine=IRenderingEngine,t.ISanitizer=ISanitizer,t.ISignaler=ISignaler,t.ITargetAccessorLocator=ITargetAccessorLocator,t.ITargetObserverLocator=ITargetObserverLocator,t.ITargetedInstruction=ITargetedInstruction,t.ITemplateCompiler=ITemplateCompiler,t.ITemplateFactory=ITemplateFactory,t.IViewFactory=IViewFactory,t.If=If,t.IfRegistration=IfRegistration,t.Interpolation=class{constructor(parts,t){this.Z=24,this.assign=kernel.PLATFORM.Ai,this.parts=parts,this.tt=void 0===t?kernel.PLATFORM.Ei:t,this.Ll=this.tt.length>1,this.Bl=this.tt[0]}evaluate(t,s,i){if(this.Ll){const n=this.tt,parts=this.parts;let h=parts[0];for(let e=0,r=n.length;r>e;++e)h+=n[e].evaluate(t,s,i),h+=parts[e+1];return h}{const parts=this.parts;return parts[0]+this.Bl.evaluate(t,s,i)+parts[1]}}connect(t,s,i){}accept(t){return t.mc(this)}},t.InterpolationBindingRendererRegistration=InterpolationBindingRendererRegistration,t.InterpolationInstruction=class{constructor(from,to){this.type="rf",this.from=from,this.to=to}},t.IteratorBindingInstruction=class{constructor(from,to){this.type="rk",this.from=from,this.to=to}},t.IteratorBindingRendererRegistration=IteratorBindingRendererRegistration,t.KeyedBindingBehaviorRegistration=KeyedBindingBehaviorRegistration,t.LetBindingInstruction=class{constructor(from,to){this.type="ri",this.from=from,this.to=to}},t.LetElementInstruction=class{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}},t.LetElementRendererRegistration=LetElementRendererRegistration,t.LifecycleTask=LifecycleTask,t.MultiInterpolationBinding=MultiInterpolationBinding,t.NodeSequence=NodeSequence,t.ObjectBindingPattern=class{constructor(t,s){this.Z=65557,this.keys=t,this.values=s}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.yc(this)}},t.ObjectLiteral=ObjectLiteral,t.OneTimeBindingBehavior=OneTimeBindingBehavior,t.OneTimeBindingBehaviorRegistration=OneTimeBindingBehaviorRegistration,t.OneTimeBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.oneTime,this.oneTime=1,this.to=to}},t.OverrideContext=OverrideContext,t.PrimitiveLiteral=PrimitiveLiteral,t.PrimitiveObserver=PrimitiveObserver,t.PromiseTask=class{constructor(t,s){this.done=0,this.me=0,this.Gr=s,this.Rh=t.then(value=>{if(1!=this.me)return this.done=1,this.Gr(value),value})}de(){return!this.done}cancel(){this.de()&&(this.me=1)}be(){return this.Rh}},t.PropertyAccessor=PropertyAccessor,t.PropertyBindingRendererRegistration=PropertyBindingRendererRegistration,t.Ref=Ref,t.RefBindingInstruction=class{constructor(from){this.type="rj",this.from=from}},t.RefBindingRendererRegistration=RefBindingRendererRegistration,t.Repeat=Repeat,t.RepeatRegistration=RepeatRegistration,t.Replaceable=Replaceable,t.ReplaceableRegistration=ReplaceableRegistration,t.RuntimeBasicConfiguration=RuntimeBasicConfiguration,t.SanitizeValueConverter=SanitizeValueConverter,t.SanitizeValueConverterRegistration=SanitizeValueConverterRegistration,t.Scope=Scope,t.SetPropertyInstruction=class{constructor(value,to){this.type="re",this.to=to,this.value=value}},t.SetPropertyRendererRegistration=SetPropertyRendererRegistration,t.SignalBindingBehavior=SignalBindingBehavior,t.SignalBindingBehaviorRegistration=SignalBindingBehaviorRegistration,t.TaggedTemplate=class{constructor(t,s,i,n){this.Z=1197,this.assign=kernel.PLATFORM.Ai,this.qi=t,this.qi.raw=s,this.lc=i,this.tt=void 0===n?kernel.PLATFORM.Ei:n}evaluate(t,s,i){const n=this.tt,h=n.length,e=Array(h);for(let r=0,o=h;o>r;++r)e[r]=n[r].evaluate(t,s,i);const r=this.lc.evaluate(t,s,i);if("function"!=typeof r)throw kernel.Reporter.error(207,this);return r.apply(null,[this.qi].concat(e))}connect(t,s,i){const n=this.tt;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i);this.lc.connect(t,s,i)}accept(t){return t.Cc(this)}},t.Template=Template,t.TemplateControllerRendererRegistration=TemplateControllerRendererRegistration,t.ThrottleBindingBehavior=ThrottleBindingBehavior,t.ThrottleBindingBehaviorRegistration=ThrottleBindingBehaviorRegistration,t.ToViewBindingBehavior=ToViewBindingBehavior,t.ToViewBindingBehaviorRegistration=ToViewBindingBehaviorRegistration,t.ToViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.Xi,this.oneTime=0,this.to=to}},t.TwoWayBindingBehavior=TwoWayBindingBehavior,t.TwoWayBindingBehaviorRegistration=TwoWayBindingBehaviorRegistration,t.TwoWayBindingInstruction=class{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=t.BindingMode.Zi,this.oneTime=0,this.to=to}},t.Unary=class{constructor(t,s){this.Z=39,this.assign=kernel.PLATFORM.Ai,this.Ml=t,this.hc=s,this.evaluate=this[t]}evaluate(t,s,i){throw kernel.Reporter.error(208,this)}connect(t,s,i){this.hc.connect(t,s,i)}Oc(t,s,i){this.hc.evaluate(t,s,i)}jc(t,s,i){return typeof this.hc.evaluate(t,s,i)}Ac(t,s,i){return!this.hc.evaluate(t,s,i)}Gl(t,s,i){return-this.hc.evaluate(t,s,i)}_l(t,s,i){return+this.hc.evaluate(t,s,i)}accept(t){return t.Tc(this)}},t.ValueConverter=class{constructor(t,name,s){this.Z=36913,this.hc=t,this.name=name,this.Pi=s,this.Rc=ValueConverterResource.Y(this.name)}evaluate(t,s,i){if(!i)throw kernel.Reporter.error(202,this);const n=i.get(this.Rc);if(!n)throw kernel.Reporter.error(205,this);if("toView"in n){const h=this.Pi,e=h.length,r=Array(e+1);r[0]=this.hc.evaluate(t,s,i);for(let n=0;e>n;++n)r[n+1]=h[n].evaluate(t,s,i);return n.Xi.apply(n,r)}return this.hc.evaluate(t,s,i)}assign(t,s,i,value){if(!i)throw kernel.Reporter.error(202,this);const n=i.get(this.Rc);if(!n)throw kernel.Reporter.error(205,this);return"fromView"in n&&(value=n.Yi.apply(n,[value].concat(C(t,s,i,this.Pi)))),this.hc.assign(t,s,i,value)}connect(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);if(!i)throw kernel.Reporter.error(206,this);const n=i.Ae;if(!n)throw kernel.Reporter.error(202,this);this.hc.connect(t,s,i);const h=this.Pi;for(let n=0,e=h.length;e>n;++n)h[n].connect(t,s,i);const e=n.get(this.Rc);if(!e)throw kernel.Reporter.error(205,this);const r=e.ai;if(void 0===r)return;const o=n.get(ISignaler);for(let t=0,s=r.length;s>t;++t)o.di(r[t],i)}ke(t,s,i){const n=i.Ae,h=n.get(this.Rc).ai;if(void 0===h)return;const e=n.get(ISignaler);for(let t=0,s=h.length;s>t;++t)e.bi(h[t],i)}accept(t){return t.Sc(this)}},t.ValueConverterResource=ValueConverterResource,t.With=With,t.WithRegistration=WithRegistration,t.addBinding=addBinding,t.addComponent=addComponent,t.arePureLiterals=arePureLiterals,t.batchedSubscriberCollection=batchedSubscriberCollection,t.bindable=bindable,t.bindingBehavior=function(t){return s=>BindingBehaviorResource.vi(t,s)},t.buildTemplateDefinition=buildTemplateDefinition,t.callsFunction=function(t){return 128==(128&t.Z)},t.collectionObserver=collectionObserver,t.computed=function(t){return function(s,i){(s.computed||(s.computed={}))[i]=t}},t.connectable=connectable,t.connects=function(t){return 32==(32&t.Z)},t.containerless=function(t){return void 0===t?Ot:Ot(t)},t.createRenderContext=createRenderContext,t.customAttribute=function(t){return s=>CustomAttributeResource.vi(t,s)},t.customElement=function(t){return s=>CustomElementResource.vi(t,s)},t.disableArrayObservation=function(){for(const t of cs)1==ts[t].q&&def(ts,t,Object.assign({},as,{value:ls[t]}))},t.disableMapObservation=function(){for(const t of gs)1==fs[t].q&&ys(fs,t,Object.assign({},ms,{value:vs[t]}))},t.disableSetObservation=function(){for(const t of Rs)1==Cs[t].q&&Is(Cs,t,Object.assign({},$s,{value:Ts[t]}))},t.dynamicOptions=function(t){return void 0===t?Rt:Rt(t)},t.enableArrayObservation=enableArrayObservation,t.enableMapObservation=enableMapObservation,t.enableSetObservation=enableSetObservation,t.ensureExpression=ensureExpression,t.getCollectionObserver=getCollectionObserver,t.hasAncestor=function(t){return 256==(256&t.Z)},t.hasBind=hasBind,t.hasUnbind=hasUnbind,t.instructionRenderer=instructionRenderer,t.isAssignable=function(t){return 8192==(8192&t.Z)},t.isLeftHandSide=function(t){return 1024==(1024&t.Z)},t.isLiteral=isLiteral,t.isPrimary=function(t){return 512==(512&t.Z)},t.isPureLiteral=isPureLiteral,t.isResource=function(t){return 32768==(32768&t.Z)},t.isTargetedInstruction=function(value){const type=value.type;return"string"==typeof type&&2===type.length},t.observes=function(t){return 64==(64&t.Z)},t.propertyObserver=propertyObserver,t.subscriberCollection=subscriberCollection,t.targetObserver=targetObserver,t.templateController=function(t){return s=>CustomAttributeResource.vi("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),s)},t.useShadowDOM=function(t){function s(t){return t.shadowOptions=i,t}const i="function"!=typeof t&&t?t:oi;return"function"==typeof t?s(t):s},t.valueConverter=function(t){return s=>ValueConverterResource.vi(t,s)},Object.defineProperty(t,"$c",{value:1})});
