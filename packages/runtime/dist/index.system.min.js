System.register("runtime",["@aurelia/kernel"],function(t){"use strict";var Reporter,DI,Registration,PLATFORM,Profiler,RuntimeCompilationResources,IContainer,all;return{t:[function(t){Reporter=t.Reporter,DI=t.DI,Registration=t.Registration,PLATFORM=t.PLATFORM,Profiler=t.Profiler,RuntimeCompilationResources=t.RuntimeCompilationResources,IContainer=t.IContainer,all=t.all}],i(){function i(t,i,s,e){var n,h,r=arguments.length,o=3>r?i:null===e?e=Object.getOwnPropertyDescriptor(i,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,s,e);else for(h=t.length-1;h>=0;h--)(n=t[h])&&(o=(3>r?n(o):r>3?n(i,s,o):n(i,s))||o);return r>3&&o&&Object.defineProperty(i,s,o),o}function subscriberCollection(t){return function(i){const h=i.prototype;switch(h.s=0,h.h=null,h.o=null,h.l=null,h.u=null,h.g=s,h.v=e,h.p=c,h.m=l,t){case MutationKind.C:h.O=n;break;case MutationKind.R:h.O=r;break;case MutationKind.I:h.O=o}}}function s(t){if(this.p(t))return 0;const i=this.s;return 1&i?2&i?4&i?8&i?(this.u.push(t),1):(this.u=[t],this.s|=8,1):(this.l=t,this.s|=4,1):(this.o=t,this.s|=2,1):(this.h=t,this.s|=1,1)}function e(t){const i=this.s;if(1&i&&this.h===t)return this.h=null,this.s&=-2,1;if(2&i&&this.o===t)return this.o=null,this.s&=-3,1;if(4&i&&this.l===t)return this.l=null,this.s&=-5,1;if(8&i){const i=this.u;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.s&=-9),1}return 0}function n(t,i,s){const e=this.h,n=this.o,r=this.l;let o=this.u;null!==o&&(o=o.slice()),null!==e&&h(e,t,i,s,this[e.id]),null!==n&&h(n,t,i,s,this[n.id]),null!==r&&h(r,t,i,s,this[r.id]);const l=o&&o.length;if(void 0!==l&&l>0){let e=null;for(let n=0;l>n;++n)null!==(e=o[n])&&h(e,t,i,s,this[e.id])}}function h(t,i,s,e,n){void 0===n?t.B(i,s,e):48==(48&(e|n))?(262144&e)>0&&t.B(i,s,-262193&e|n):t.B(i,s,e|n)}function r(t,i,s){const e=this.h,n=this.o,h=this.l;let r=this.u;null!==r&&(r=r.slice()),null!==e&&e.B(t,i,s),null!==n&&n.B(t,i,s),null!==h&&h.B(t,i,s);const o=r&&r.length;if(void 0!==o&&o>0)for(let e=0;o>e;++e){const n=r[e];null!==n&&n.B(t,i,s)}this.S.T(this).catch(t=>{throw t})}function o(t,i,s,e){const n=this.h,h=this.o,r=this.l;let o=this.u;null!==o&&(o=o.slice()),null!==n&&n.B(t,i,s,e),null!==h&&h.B(t,i,s,e),null!==r&&r.B(t,i,s,e);const l=o&&o.length;if(void 0!==l&&l>0)for(let n=0;l>n;++n){const h=o[n];null!==h&&h.B(t,i,s,e)}}function l(){return 0!==this.s}function c(t){const i=this.s;if(1&i&&this.h===t)return 1;if(2&i&&this.o===t)return 1;if(4&i&&this.l===t)return 1;if(8&i){const i=this.u;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const i=t.prototype;i.j=0,i.A=null,i.P=null,i.L=null,i.V=null,i.$=u,i.k=a,i.D=b,i.M=d,i.F=f}}function u(t){if(this.D(t))return 0;const i=this.j;return 1&i?2&i?4&i?8&i?(this.V.push(t),1):(this.V=[t],this.j|=8,1):(this.L=t,this.j|=4,1):(this.P=t,this.j|=2,1):(this.A=t,this.j|=1,1)}function a(t){const i=this.j;if(1&i&&this.A===t)return this.A=null,this.j&=-2,1;if(2&i&&this.P===t)return this.P=null,this.j&=-3,1;if(4&i&&this.L===t)return this.L=null,this.j&=-5,1;if(8&i){const i=this.V;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.j&=-9),1}return 0}function f(t,i){const s=this.A,e=this.P,n=this.L;let h=this.V;null!==h&&(h=h.slice()),null!==s&&s.N(t,i),null!==e&&e.N(t,i),null!==n&&n.N(t,i);const r=h&&h.length;if(void 0!==r&&r>0)for(let s=0;r>s;++s){const e=h[s];null!==e&&e.N(t,i)}}function d(){return 0!==this.j}function b(t){const i=this.j;if(1&i&&this.A===t)return 1;if(2&i&&this.P===t)return 1;if(4&i&&this.L===t)return 1;if(8&i){const i=this.V;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function g(value){return null!==value&&"object"==typeof value}function v(value,t){if(g(value))if(void 0!==value.U){const i=value.U;let s,e;for(s in i)void 0!==(e=i[s]).K&&e.K(468|t)}else void 0!==value.q&&void 0!==value.q.K&&value.q.K(468|t)}function p(t){0==this.H&&(this.H=1,this.W=this.G[this._],0==(4&this.J)&&(kt.get=(()=>this.X()),kt.set=(value=>{this.Y(value,0)}),$t(this.G,this._,kt)||Reporter.write(1,this._,this.G))),this.g(t)}function m(){Reflect.deleteProperty(this.G,this._),this.G=null,this._=null,this.W=null}function propertyObserver(){return function(t){subscriberCollection(MutationKind.C)(t);const i=t.prototype;i.H=0,i.G=null,i._=null,i.W=Symbol(),i.subscribe=i.subscribe||p,i.unsubscribe=i.unsubscribe||i.v,i.Z=i.Z||m}}function w(t){const i=BindingBehaviorResource.tt(this.description.name);t.register(Registration.singleton(i,this))}function y(t){const i=this.kind.tt(this.description.name);t.register(Registration.singleton(i,this))}function hasBind(t){return 2048==(2048&t.it)}function hasUnbind(t){return 4096==(4096&t.it)}function isLiteral(t){return 16384==(16384&t.it)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let i=0;t.length>i;++i)if(!isPureLiteral(t[i]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.it){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.st);case 17925:return 1}return 0}function C(t,i,s,e){const n=e.length,h=Array(n);for(let r=0;n>r;++r)h[r]=e[r].evaluate(t,i,s);return h}function O(t,i,name){const s=null==i?null:i[name];if("function"==typeof s)return s;if(!(1048576&t)&&null==s)return null;throw Reporter.error(207,i,name,s)}function R(strategy){return 0==(strategy&Nt)||8===strategy?1|strategy:strategy}function I(t){if(t===Wt){const i=qt.length=Ht.length=(Wt+=5)+1;for(let s=t+1;i>s;++s)qt[s]=`_observer${s}`,Ht[s]=`_observerVersion${s}`}}function B(t){const i=void 0===this.et?0:this.et;let s=i;for(;s--&&this[qt[s]]!==t;);if(-1===s){for(s=0;this[qt[s]];)s++;this[qt[s]]=t,t.subscribe(this),t[this.id]|=16,s===i&&(this.et=s+1)}void 0===this.version&&(this.version=0),this[Ht[s]]=this.version,I(s)}function T(t,i,s){const e=this.ht.nt(t,i,s);this.rt(e)}function S(all){const t=this.et;let i,s;if(1==all)for(let e=0;t>e;++e)null!=(s=this[i=qt[e]])&&(this[i]=null,s.unsubscribe(this),s[this.id]&=-17);else{const e=this.version;for(let n=0;t>n;++n)this[Ht[n]]!==e&&null!=(s=this[i=qt[n]])&&(this[i]=null,s.unsubscribe(this),s[this.id]&=-17)}}function j(t){const i=t.prototype;return i.hasOwnProperty("observeProperty")||(i.ot=T),i.hasOwnProperty("unobserve")||(i.unobserve=S),i.hasOwnProperty("addObserver")||(i.rt=B),t}function connectable(t){return void 0===t?j:j(t)}function A(t,i){if(this.W!==(t=null==t?this.defaultValue:t)){if(this.oldValue=this.W,this.W=t,!(2496&i)||this.lt&&4194304&i)return this.ct=i,this.S.T(this);this.ut(t,i)}return Promise.resolve()}function P(t){if(this.lt&&4194304&t)return void this.S.T(this).catch(t=>{throw t});const i=this.W;this.oldValue!==i&&(this.ut(i,this.ct|t|16),this.oldValue=this.W)}function L(t){const i=this.X();this.W!==i&&(this.ut(i,this.ct|t|16),this.W=i),v(i,t)}function V(){this.W=null,this.oldValue=null,this.defaultValue=null,this.G=null,this._=""}function targetObserver(t=null){return function(i){subscriberCollection(MutationKind.C)(i);const s=i.prototype;s.at=null,s.W=t,s.oldValue=t,s.defaultValue=t,s.G=null,s._="",s.K=s.K||L,s.Y=s.Y||A,s.flush=s.flush||P,s.Z=s.Z||V}}function $(t){this.F(this.ft,t|this.J),this.dt&&this.dt.K(464|this.J),this.bt()}function k(){this.R.q=void 0,this.R=null,this.ft=null}function D(){const t=this.R.length,i=this.ft=Array(t);let s=0;for(;t>s;)i[s]=s++;i.gt=[]}function M(){const t=this.R.size,i=this.ft=Array(t);let s=0;for(;t>s;)i[s]=s++;i.gt=[]}function F(){return void 0===this.dt?this.dt=new CollectionLengthObserver(this,this.vt):this.dt}function collectionObserver(t){return function(i){subscriberCollection(MutationKind.R)(i),batchedSubscriberCollection()(i);const s=i.prototype;s.at=null,s.R=null,s.ft=null,s.pt=0,s.vt=8&t?"length":"size",s.wt=t,s.bt=8&t?D:M,s.flush=$,s.Z=k,s.yt=F,s.subscribe=s.subscribe||s.g,s.unsubscribe=s.unsubscribe||s.v,s.Ct=s.Ct||s.$,s.Ot=s.Ot||s.k}}function x(t,i){return t===i?0:(i=null===i?"null":""+i)>(t=null===t?"null":""+t)?-1:1}function E(t,i){return void 0===t?void 0===i?0:1:void 0===i?-1:0}function N(t,i,from,to,s){let e,n,h,r,o,l,c;for(l=from+1;to>l;l++){for(e=t[l],n=i[l],c=l-1;c>=from&&(r=i[c],(o=s(h=t[c],e))>0);c--)t[c+1]=h,i[c+1]=r;t[c+1]=e,i[c+1]=n}}function U(t,i,from,to,s){let e,n,h,r,o,l,c,u,a,f,d,b,g,v,p,m,w,y,C,O=0,R=0;for(;;){if(10>=to-from)return void N(t,i,from,to,s);r=i[from],o=i[to-1],h=t[O=from+(to-from>>1)],l=i[O],(c=s(e=t[from],n=t[to-1]))>0&&(f=e,d=r,e=n,r=o,n=f,o=d),0>(u=s(e,h))?(a=s(n,h))>0&&(f=n,d=o,n=h,o=l,h=f,l=d):(f=e,d=r,e=h,r=l,h=n,l=o,n=f,o=d),t[from]=e,i[from]=r,t[to-1]=h,i[to-1]=l,b=n,g=o,p=to-1,t[O]=t[v=from+1],i[O]=i[v],t[v]=b,i[v]=g;t:for(R=v+1;p>R;R++)if(w=i[R],0>(y=s(m=t[R],b)))t[R]=t[v],i[R]=i[v],t[v]=m,i[v]=w,v++;else if(y>0){do{if(--p==R)break t;y=s(C=t[p],b)}while(y>0);t[R]=t[p],i[R]=i[p],t[p]=m,i[p]=w,0>y&&(m=t[R],w=i[R],t[R]=t[v],i[R]=i[v],t[v]=m,i[v]=w,v++)}v-from>to-p?(U(t,i,p,to,s),to=v):(U(t,i,from,v,s),from=p)}}function enableArrayObservation(){for(const t of ci)1!=ti[t].H&&def(ti,t,Object.assign({},ai,{value:ui[t]}))}function z(t,i,s){return s.q||new ArrayObserver(t,i,s)}function enableMapObservation(){for(const t of pi)1!=fi[t].H&&yi(fi,t,Object.assign({},wi,{value:mi[t]}))}function K(t,i,s){return s.q||new MapObserver(t,i,s)}function enableSetObservation(){for(const t of Ti)1!=Ci[t].H&&Ai(Ci,t,Object.assign({},ji,{value:Si[t]}))}function q(t,i,s){return s.q||new SetObserver(t,i,s)}function getCollectionObserver(t,i,s){const e=s instanceof Object?ProxyObserver.Rt(s):s;switch(ki.call(s)){case"[object Array]":return z(t,i,e);case"[object Map]":return K(t,i,e);case"[object Set]":return q(t,i,e)}return null}function H(t,i,s){const e=this.It;PLATFORM.global.clearTimeout(e.Bt),e.Bt=PLATFORM.global.setTimeout(()=>{this.Tt(t,i,s)},e.St)}function W(t,i,s){const e=this.It;if(PLATFORM.global.clearTimeout(e.Bt),!(s&e.jt))return e.oldValue=Ni,void this.Tt(t,i,s);e.oldValue===Ni&&(e.oldValue=i);const n=PLATFORM.global.setTimeout(()=>{const i=e.oldValue;e.oldValue=Ni,this.Tt(t,i,s)},e.St);e.Bt=n}function Q(t){const i=this.At,s=+new Date-i.Pt;if(s>=i.St)return PLATFORM.global.clearTimeout(i.Bt),i.Bt=-1,i.Pt=+new Date,void this.Lt(t);if(i.newValue=t,-1===i.Bt){const t=PLATFORM.global.setTimeout(()=>{i.Bt=-1,i.Pt=+new Date,this.Lt(i.newValue)},i.St-s);i.Bt=t}}function bindable(t,i){let s;const e=function(t,i){arguments.length>1&&(s.Vt=i),zi.for(t.constructor).add(s)};return arguments.length>1?(s={},void e(t,i)):"string"==typeof t?(s={},e):(s=t||{},e)}function G(name){return`${Ki}:${name}`}function _(t){return void 0===t.$customElement?null:t.$customElement}function J(name){return`${qi}:${name}`}function buildTemplateDefinition(t,i,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,strategy){const def=new Qi,s=arguments.length;switch(s){case 13:null!==strategy&&(def.strategy=R(strategy));case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?Hi:0==build?Wi:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=zi.for(t).get()),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof i?i.length>0&&(def.name=i):null!==i&&(def.strategy=R(i.strategy),Gi.forEach(t=>{i[t]&&(def[t]=i[t])}),_i.forEach(t=>{i[t]&&(def[t]=PLATFORM.toArray(i[t]))}),i.bindables&&(def.bindables===PLATFORM.$t?def.bindables=zi.for(i).get():Object.assign(def.bindables,i.bindables)))}return 2!==s||null===t||"string"!=typeof i&&"build"in i||(def.build=Hi),def}function X(t){if(8&this.$state)return;const i=this.$lifecycle;i.kt(),this.$state|=4,t|=8192;const s=this.$hooks;16&s&&this.Dt(t),this.$state|=8,this.$state&=-5,32&s&&i.Mt(this),i.Ft(t)}function Y(t){if(8&this.$state)return;const i=this.$lifecycle;i.kt(),this.$state|=4,t|=8192;const s=this.$hooks;16&s&&this.Dt(t);let e=this.xt;for(;null!==e;)e.Et(t),e=e.Nt;i.Ut(this),this.$state|=8,this.$state&=-5,32&s&&i.Mt(this),i.Ft(t)}function Z(t){if(8&this.$state)return;this.$state|=4,t|=8192;let i=this.xt;for(;null!==i;)i.Et(t),i=i.Nt;this.$lifecycle.Ut(this),this.$state|=8,this.$state&=-5}function tt(t){if(8&this.$state){const i=this.$lifecycle;i.zt(),this.$state|=32,t|=16384;const s=this.$hooks;64&s&&this.Kt(t),this.$state&=-41,128&s&&i.qt(this),i.Ht(t)}}function it(t){if(8&this.$state){const i=this.$lifecycle;i.zt(),this.$state|=32,2097152&(t|=16384)^2097152|1024&t&&(i.Wt(this),t|=2097152);const s=this.$hooks;64&s&&this.Kt(t);let e=this.Qt;for(;null!==e;)e.Gt(t),e=e._t;this.$state&=-41,128&s&&i.qt(this),i.Ht(t)}}function st(t){if(8&this.$state){this.$state|=32,2097152&(t|=16384)^2097152|1024&t&&(this.$lifecycle.Wt(this),t|=2097152);let i=this.Qt;for(;null!==i;)i.Gt(t),i=i._t;this.$state&=-41}}function et(t){2048&this.$hooks&&this.Jt(t|=32768)}function nt(t){t|=32768,2048&this.$hooks&&this.Jt(t);let i=this.Qt;for(;null!==i;)i.Xt(t),i=i._t}function ht(t){t|=32768;let i=this.Qt;for(;null!==i;)i.Xt(t),i=i._t}function rt(){16&this.$state||(this.$state|=16,this.Zt.Yt(this.$nodes))}function ot(){16&this.$state&&(this.$state&=-17,this.Zt.ti(this.$nodes))}function lt(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function ct(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.ii&&(this.ii=0,this.cache.si(this))?(this.$state|=128,1):0):0}function ut(t,i){if(t|=2048,2&this.$state){if(this.$scope===i)return;this.ei(t)}const s=this.$lifecycle;s.ni(),this.$state|=1;const e=this.$hooks;8&e&&s.hi(this),this.$scope=i,4&e&&this.ri(t),this.$state|=2,this.$state&=-2,s.oi(t)}function at(t,i){if(2&this.$state)return;const s=this.$scope;s.li=i;const e=this.$lifecycle;e.ni(),this.$state|=1;const n=this.$hooks;t|=2048,8&n&&e.hi(this);let h=this.ci;for(;null!==h;)h.ui(t,s),h=h.ai;4&n&&this.ri(t);let component=this.xt;for(;null!==component;)component.ui(t,s),component=component.Nt;this.$state|=2,this.$state&=-2,e.oi(t)}function ft(t,i){if(t|=2048,2&this.$state){if(this.$scope===i)return;this.ei(t)}this.$state|=1,this.$scope=i;let s=this.ci;for(;null!==s;)s.ui(t,i),s=s.ai;let component=this.xt;for(;null!==component;)component.ui(t,i),component=component.Nt;this.$state|=2,this.$state&=-2}function dt(t){if(t|=2048,2&this.$state)return;this.$state|=1;const i=this.$scope;let s=this.ci;for(;null!==s;)s.ui(t,i),s=s.ai;let component=this.xt;for(;null!==component;)component.ui(t,i),component=component.Nt;this.$state|=2,this.$state&=-2}function bt(t){if(2&this.$state){const i=this.$lifecycle;i.fi(),this.$state|=64;const s=this.$hooks;t|=4096,512&s&&i.di(this),256&s&&this.bi(t),this.$state&=-67,i.gi(t)}}function gt(t){if(2&this.$state){const i=this.$lifecycle;i.fi(),this.$state|=64;const s=this.$hooks;t|=4096,512&s&&i.di(this),256&s&&this.bi(t);let component=this.Qt;for(;null!==component;)component.ei(t),component=component._t;let e=this.vi;for(;null!==e;)e.ei(t),e=e.pi;this.$scope.li=null,this.$state&=-67,i.gi(t)}}function vt(t){if(2&this.$state){this.$state|=64,t|=4096;let component=this.Qt;for(;null!==component;)component.ei(t),component=component._t;let i=this.vi;for(;null!==i;)i.ei(t),i=i.pi;this.$state&=-67,this.$scope=null}}function pt(t){if(2&this.$state){this.$state|=64,t|=4096;let component=this.Qt;for(;null!==component;)component.ei(t),component=component._t;let i=this.vi;for(;null!==i;)i.ei(t),i=i.pi;this.$state&=-67}}function mt(t){v(this,t);let component=this.xt;for(;component;)component.K(t),component=component.Nt;let i=this.ci;for(;i;)void 0!==i.K&&i.K(t),i=i.ai}function createRenderContext(dom,t,dependencies,i){const s=t.mi(),e=new es,n=new es,h=new es,r=new ns,o=new es,l=s.get(IRenderer);return dom.wi(s,n),s.yi(IViewFactory,r),s.yi(IRenderable,e),s.yi(ITargetedInstruction,h),s.yi(IRenderLocation,o),dependencies&&s.register(...dependencies),i&&i.register(s),s.Ci=function(t,i,targets,s,host,parts){l.Ci(t,dom,this,i,targets,s,host,parts)},s.Oi=function(t,i,l,c,parts,u){return e.Ri(t),n.Ri(i),h.Ri(l),c&&r.Ri(c,parts),u&&o.Ri(u),s},s.Z=function(){r.Z(),e.Z(),h.Z(),n.Z(),o.Z()},s}function wt(t){const i=[];for(let s=0,e=t.length;e>s;++s){const component=_(t[s]);null!==component&&i.push(component)}return i}function yt(t,i,name){Reflect.defineProperty(i,name,{Ii:1,get(){return this.U[name].X()},set(value){this.U[name].Y(value,67108879&t)}})}function Ct(t){const i=this.kind.tt(this.description.name);t.register(Registration.transient(i,this))}function Ot(t){return t.containerless=1,t}function Rt(t,i){const s=this.constructor;t|=s.description.strategy;const e=i.get(IRenderingEngine);let n;n=2&t?ProxyObserver.Bi(this).I:this,e.Ti(t,s,this),2&this.$hooks&&n.Si(t)}function It(t,i,host,s=PLATFORM.$t){const e=this.constructor,n=e.description;t|=n.strategy;const h=i.get(IProjectorLocator),r=i.get(IRenderingEngine),dom=i.get(IDOM);let o;if(o=2&t?ProxyObserver.Bi(this).I:this,this.$scope=Scope.create(t,o,null),this.ji=host,this.Zt=h.Ai(dom,this,host,n),r.Ti(t,e,this),1024&this.$hooks){const n=this.Ci(t,host,s.parts,i);n&&"getElementTemplate"in n&&n.Pi(r,e,i).Ci(this,host,s.parts)}else r.Pi(dom,n,i,e).Ci(this,host,s.parts);2&this.$hooks&&o.Si(t)}function Bt(t){const i=this.description,s=this.kind.tt(i.name),aliases=i.aliases;t.register(Registration.transient(s,this));for(let i=0,e=aliases.length;e>i;++i){const e=this.kind.tt(aliases[i]);t.register(Registration.Li(s,e))}}function Tt(t){return t.Vi=1,t}function instructionRenderer(t){return function(i){const s=function(...s){const e=new i(...s);return e.$i=t,e};s.register=function(t){return Registration.singleton(IInstructionRenderer,s).register(t,IInstructionRenderer)};const e=Object.getOwnPropertyDescriptors(i);return Object.keys(e).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,e[t])}),s}}function ensureExpression(t,i,s){return"string"==typeof i?t.parse(i,s):i}function addBinding(t,i){i.pi=t.vi,i.ai=null,null===t.vi?t.ci=i:t.vi.ai=i,t.vi=i}function addComponent(t,component){component._t=t.Qt,component.Nt=null,null===t.Qt?t.xt=component:t.Qt.Nt=component,t.Qt=component}var St,DelegationStrategy,MutationKind,CollectionKind,jt,At,Pt,BindingMode,BindingStrategy,State,Hooks,LifecycleFlags,ExpressionKind,BindingType,TargetedInstructionType,ViewCompileFlags;t({BindingMode:void 0,BindingStrategy:void 0,BindingType:void 0,CollectionKind:void 0,DelegationStrategy:void 0,ExpressionKind:void 0,Hooks:void 0,LifecycleFlags:void 0,MutationKind:void 0,State:void 0,TargetedInstructionType:void 0,ViewCompileFlags:void 0,addBinding,addComponent,arePureLiterals,batchedSubscriberCollection,bindable,bindingBehavior:t=>i=>BindingBehaviorResource.ki(t,i),buildTemplateDefinition,callsFunction:t=>128==(128&t.it),collectionObserver,computed:t=>(function(i,s){(i.computed||(i.computed={}))[s]=t}),connectable,connects:t=>32==(32&t.it),containerless:t=>void 0===t?Ot:Ot(t),createRenderContext,customAttribute:t=>i=>CustomAttributeResource.ki(t,i),customElement:t=>i=>CustomElementResource.ki(t,i),disableArrayObservation(){for(const t of ci)1==ti[t].H&&def(ti,t,Object.assign({},ai,{value:li[t]}))},disableMapObservation(){for(const t of pi)1==fi[t].H&&yi(fi,t,Object.assign({},wi,{value:vi[t]}))},disableSetObservation(){for(const t of Ti)1==Ci[t].H&&Ai(Ci,t,Object.assign({},ji,{value:Bi[t]}))},dynamicOptions:t=>void 0===t?Tt:Tt(t),enableArrayObservation,enableMapObservation,enableSetObservation,ensureExpression,getCollectionObserver,hasAncestor:t=>256==(256&t.it),hasBind,hasUnbind,instructionRenderer,isAssignable:t=>8192==(8192&t.it),isLeftHandSide:t=>1024==(1024&t.it),isLiteral,isPrimary:t=>512==(512&t.it),isPureLiteral,isResource:t=>32768==(32768&t.it),isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},observes:t=>64==(64&t.it),propertyObserver,subscriberCollection,targetObserver,templateController:t=>i=>CustomAttributeResource.ki("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),i),useShadowDOM(t){function i(t){return t.shadowOptions=s,t}const s="function"!=typeof t&&t?t:os;return"function"==typeof t?i(t):i},valueConverter:t=>i=>ValueConverterResource.ki(t,i)}),(function(t){t[t.Di=0]="None",t[t.Mi=1]="Subscriber0",t[t.Fi=2]="Subscriber1",t[t.xi=4]="Subscriber2",t[t.Ei=8]="SubscribersRest",t[t.Ni=15]="Any"})(St||(St={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.Ui=0]="none",DelegationStrategy[DelegationStrategy.zi=1]="capturing",DelegationStrategy[DelegationStrategy.Ki=2]="bubbling"})(DelegationStrategy||(DelegationStrategy=t("DelegationStrategy",{}))),(function(MutationKind){MutationKind[MutationKind.C=1]="instance",MutationKind[MutationKind.R=2]="collection",MutationKind[MutationKind.I=4]="proxy"})(MutationKind||(MutationKind=t("MutationKind",{}))),(function(CollectionKind){CollectionKind[CollectionKind.qi=8]="indexed",CollectionKind[CollectionKind.Hi=4]="keyed",CollectionKind[CollectionKind.Wi=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind=t("CollectionKind",{})));const Lt=new WeakMap;let Vt=class{constructor(t,i,s){this.raw=i,this.key=s,this.I=t,this.subscribe=this.g,this.unsubscribe=this.v,i[s]instanceof Object&&(i[s]=ProxyObserver.Bi(i[s]).I)}Y(value,t){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.O(value,i,18|t))}X(){return this.raw[this.key]}};Vt=i([subscriberCollection(MutationKind.C)],Vt);let ProxyObserver=t("ProxyObserver",jt=class{constructor(t){this.raw=t,this.I=new Proxy(t,this),Lt.set(t,this.I),this.Qi={}}static Gi(t){if(void 0===t._i){const i=Lt.get(t);return void 0===i?t:i}return t}static Rt(t){const i=t._i;return void 0===i?t:i}static Bi(t,i){let s;if(void 0===t._i){const i=Lt.get(t);s=void 0===i?new jt(t):i.q}else s=t.q;if(1===arguments.length)return s;let e=s.Qi[i];if(void 0===e){const n=this.Rt(t);e=s.Qi[i]=new Vt(s.I,n,i)}return e}static Ji(t){return void 0!==t._i}get(t,i,s){return"$observer"===i?this:"$raw"===i?t:t[i]}set(t,i,value,s){const e=t[i];return e!==value&&(Reflect.set(t,i,value,t),this.Xi(value,e,i),this.O(i,value,e,18)),1}deleteProperty(t,i){const s=t[i];return Reflect.deleteProperty(t,i)?(void 0!==s&&(this.Xi(void 0,s,i),this.O(i,void 0,s,18)),1):0}defineProperty(t,i,s){const e=t[i];return Reflect.defineProperty(t,i,s)?(s.value!==e&&(this.Xi(s.value,e,i),this.O(i,s.value,e,18)),1):0}apply(t,i,s){return Reflect.apply(t,t,s)}subscribe(t,i){if(1===arguments.length)this.g(t);else{let s=this.Qi[i];void 0===s&&(s=this.Qi[i]=new Vt(this.I,this.raw,i)),s.g(t)}}unsubscribe(t,i){if(1===arguments.length)this.v(t);else{const s=this.Qi[i];void 0!==s&&s.v(t)}}Xi(t,i,s){const e=this.Qi[s];void 0!==e&&e.O(t,i,18)}});ProxyObserver=t("ProxyObserver",jt=i([subscriberCollection(MutationKind.I)],ProxyObserver));const $t=Reflect.defineProperty,kt={get:void 0,set:void 0,Ii:1,Yi:1};let SetterObserver=t("SetterObserver",class{constructor(t,i,s){this.J=67108879&t,this.G=i,this._=s,4&t&&(this.X=this.Zi)}X(){return this.W}Zi(){return this.G[this._]}Y(t,i){const s=this.W;(s!==t||4&i)&&(this.W=t,2048&i||this.O(t,s,this.J|i),this.H||(this.G[this._]=t))}K(t){this.O(this.G[this._],this.W,this.J|t),v(this.G[this._],t)}});SetterObserver=t("SetterObserver",i([propertyObserver()],SetterObserver)),(function(t){t[t.ts=250]="UndefinedScope",t[t.ss=251]="NullScope",t[t.es=252]="NilOverrideContext",t[t.ns=253]="NilParentScope"})(At||(At={}));class Dt{Bi(t,i,s){return void 0===this[s]&&(this[s]=new SetterObserver(t,i,s)),this[s]}}class BindingContext{constructor(t,value){if(this.hs=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}static create(t,i,value){const s=new BindingContext(i,value);return 2&t?ProxyObserver.Bi(s).I:s}static get(t,name,i,s){if(void 0===t)throw Reporter.error(250);if(null===t)throw Reporter.error(251);let e=t.rs;if(i>0){for(;i>0;){if(null===e.os)return;i--,e=e.os}return name in e?e:e.ls}for(;e&&!(name in e)&&!(e.ls&&name in e.ls);)e=e.os;if(e)return name in e?e:e.ls;if(67108864&s&&null!==t.li){const e=this.get(t.li,name,i,-67108865&s|8388608);if(null!==e)return e}return 8388608&s?null:t.ls||t.rs}cs(t){return void 0===this.U&&(this.U=new Dt),this.U}}t("BindingContext",BindingContext);class Scope{constructor(t,i){this.ls=t,this.rs=i,this.li=null}static create(t,i,s){return new Scope(i,null==s?OverrideContext.create(t,i,s):s)}static us(t,i){if(null==i)throw Reporter.error(252);return new Scope(i.ls,i)}static as(t,i,s){if(null==i)throw Reporter.error(253);return new Scope(s,OverrideContext.create(t,s,i.rs))}}t("Scope",Scope);class OverrideContext{constructor(t,i){this.hs=1,this.ls=t,this.os=i}static create(t,i,s){return new OverrideContext(i,void 0===s?null:s)}cs(){return void 0===this.U&&(this.U=new Dt),this.U}}t("OverrideContext",OverrideContext);const ISignaler=t("ISignaler",DI.ds("ISignaler").fs(t=>t.singleton(Mt)));class Mt{constructor(){this.bs=Object.create(null)}gs(name,t){const i=this.bs[name];if(void 0!==i)for(const s of i.keys())s.B(void 0,void 0,16|t)}vs(name,t){const i=this.bs,s=i[name];void 0===s?i[name]=new Set([t]):s.add(t)}ps(name,t){const i=this.bs[name];i&&i.delete(t)}}const BindingBehaviorResource=t("BindingBehaviorResource",{name:"binding-behavior",tt(name){return`${this.name}:${name}`},ms(t){return t.kind===this},ki(t,i){const s=i,e=s,n="string"==typeof t?{name:t}:t;return e.kind=BindingBehaviorResource,e.description=n,s.register=w,s}}),ValueConverterResource=t("ValueConverterResource",{name:"value-converter",tt(name){return`${this.name}:${name}`},ms(t){return t.kind===this},ki(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=ValueConverterResource,s.description=e,s.register=y,s}});(function(t){t[t.ws=202]="NoLocator",t[t.ys=203]="NoBehaviorFound",t[t.Cs=204]="BehaviorAlreadyApplied",t[t.Os=205]="NoConverterFound",t[t.Rs=206]="NoBinding",t[t.Is=207]="NotAFunction",t[t.Bs=208]="UnknownOperator",t[t.ts=250]="UndefinedScope",t[t.ss=251]="NullScope"})(Pt||(Pt={})),t("BindingBehavior",class{constructor(t,name,i){this.it=38962,this.Ts=t,this.name=name,this.Ss=i,this.js=BindingBehaviorResource.tt(this.name)}evaluate(t,i,s){return this.Ts.evaluate(t,i,s)}assign(t,i,s,value){return this.Ts.assign(t,i,s,value)}connect(t,i,s){this.Ts.connect(t,i,s)}bind(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);if(!s)throw Reporter.error(206,this);const e=s.As;if(!e)throw Reporter.error(202,this);hasBind(this.Ts)&&this.Ts.bind(t,i,s);const n=this.js,h=e.get(n);if(!h)throw Reporter.error(203,this);null==s[n]?(s[n]=h,h.bind.apply(h,[t,i,s].concat(C(t,i,e,this.Ss)))):Reporter.write(204,this)}Ps(t,i,s){const e=this.js;null!=s[e]?(s[e].Ps(t,i,s),s[e]=null):Reporter.write(204,this),hasUnbind(this.Ts)&&this.Ts.Ps(t,i,s)}accept(t){return t.Ls(this)}}),t("ValueConverter",class{constructor(t,name,i){this.it=36913,this.Ts=t,this.name=name,this.Ss=i,this.Vs=ValueConverterResource.tt(this.name)}evaluate(t,i,s){if(!s)throw Reporter.error(202,this);const e=s.get(this.Vs);if(!e)throw Reporter.error(205,this);if("toView"in e){const n=this.Ss,h=n.length,r=Array(h+1);r[0]=this.Ts.evaluate(t,i,s);for(let e=0;h>e;++e)r[e+1]=n[e].evaluate(t,i,s);return e.$s.apply(e,r)}return this.Ts.evaluate(t,i,s)}assign(t,i,s,value){if(!s)throw Reporter.error(202,this);const e=s.get(this.Vs);if(!e)throw Reporter.error(205,this);return"fromView"in e&&(value=e.ks.apply(e,[value].concat(C(t,i,s,this.Ss)))),this.Ts.assign(t,i,s,value)}connect(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);if(!s)throw Reporter.error(206,this);const e=s.As;if(!e)throw Reporter.error(202,this);this.Ts.connect(t,i,s);const n=this.Ss;for(let e=0,h=n.length;h>e;++e)n[e].connect(t,i,s);const h=e.get(this.Vs);if(!h)throw Reporter.error(205,this);const r=h.bs;if(void 0===r)return;const o=e.get(ISignaler);for(let t=0,i=r.length;i>t;++t)o.vs(r[t],s)}Ps(t,i,s){const e=s.As,n=e.get(this.Vs).bs;if(void 0===n)return;const h=e.get(ISignaler);for(let t=0,i=n.length;i>t;++t)h.ps(n[t],s)}accept(t){return t.Ds(this)}}),t("Assign",class{constructor(t,value){this.it=8208,this.target=t,this.value=value}evaluate(t,i,s){return this.target.assign(t,i,s,this.value.evaluate(t,i,s))}connect(t,i,s){}assign(t,i,s,value){return this.value.assign(t,i,s,value),this.target.assign(t,i,s,value)}accept(t){return t.Ms(this)}}),t("Conditional",class{constructor(t,i,s){this.it=63,this.assign=PLATFORM.Fs,this.xs=t,this.Es=i,this.Ns=s}evaluate(t,i,s){return this.xs.evaluate(t,i,s)?this.Es.evaluate(t,i,s):this.Ns.evaluate(t,i,s)}connect(t,i,s){this.xs.evaluate(t,i,null)?(this.xs.connect(t,i,s),this.Es.connect(t,i,s)):(this.xs.connect(t,i,s),this.Ns.connect(t,i,s))}accept(t){return t.Us(this)}});class AccessThis{constructor(t=0){this.it=1793,this.assign=PLATFORM.Fs,this.connect=PLATFORM.Fs,this.zs=t}evaluate(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);let e=i.rs,n=this.zs;for(;n--&&e;)e=e.os;return 1>n&&e?e.ls:void 0}accept(t){return t.Ks(this)}}t("AccessThis",AccessThis),AccessThis.qs=new AccessThis(0),AccessThis.Hs=new AccessThis(1);class AccessScope{constructor(name,t=0){this.it=10082,this.name=name,this.zs=t}evaluate(t,i,s){return BindingContext.get(i,this.name,this.zs,t)[this.name]}assign(t,i,s,value){const e=BindingContext.get(i,this.name,this.zs,t);if(e instanceof Object)return void 0!==e.U&&void 0!==e.U[this.name]?(e.U[this.name].Y(value,t),value):e[this.name]=value}connect(t,i,s){const e=BindingContext.get(i,this.name,this.zs,t);s.ot(t,e,this.name)}accept(t){return t.Ws(this)}}t("AccessScope",AccessScope);class AccessMember{constructor(t,name){this.it=9323,this.object=t,this.name=name}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);return null==e?e:e[this.name]}assign(t,i,s,value){const e=this.object.evaluate(t,i,s);return e instanceof Object?void 0!==e.U&&void 0!==e.U[this.name]?e.U[this.name].Y(value,t):e[this.name]=value:this.object.assign(t,i,s,{[this.name]:value}),value}connect(t,i,s){const e=this.object.evaluate(t,i,null);this.object.connect(t,i,s),e instanceof Object&&s.ot(t,e,this.name)}accept(t){return t.Qs(this)}}t("AccessMember",AccessMember),t("AccessKeyed",class{constructor(t,i){this.it=9324,this.object=t,this.key=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);if(e instanceof Object)return e[this.key.evaluate(t,i,s)]}assign(t,i,s,value){return this.object.evaluate(t,i,s)[this.key.evaluate(t,i,s)]=value}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),"object"==typeof e&&null!==e){this.key.connect(t,i,s);const n=this.key.evaluate(t,i,null);Array.isArray(e)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const i=value.length;if(0===i)return 0;let s;for(let t=0;i>t;++t)if(48>(s=value.charCodeAt(t))||s>57)return 0;return 1})(n)?2&t&&s.ot(t,e,n):s.ot(t,e,n)}}accept(t){return t.Gs(this)}});class CallScope{constructor(name,t,i=0){this.it=1448,this.assign=PLATFORM.Fs,this.name=name,this.Ss=t,this.zs=i}evaluate(t,i,s){const e=C(t,i,s,this.Ss),n=BindingContext.get(i,this.name,this.zs,t),h=O(t,n,this.name);if(h)return h.apply(n,e)}connect(t,i,s){const e=this.Ss;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}accept(t){return t._s(this)}}t("CallScope",CallScope);class CallMember{constructor(t,name,i){this.it=1161,this.assign=PLATFORM.Fs,this.object=t,this.name=name,this.Ss=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s),n=C(t,i,s,this.Ss),h=O(t,e,this.name);if(h)return h.apply(e,n)}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),O(-1048577&t,e,this.name)){const e=this.Ss;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}}accept(t){return t.Js(this)}}t("CallMember",CallMember),t("CallFunction",class{constructor(t,i){this.it=1162,this.assign=PLATFORM.Fs,this.Xs=t,this.Ss=i}evaluate(t,i,s){const e=this.Xs.evaluate(t,i,s);if("function"==typeof e)return e.apply(null,C(t,i,s,this.Ss));if(1048576&t||null!=e)throw Reporter.error(207,this)}connect(t,i,s){const e=this.Xs.evaluate(t,i,null);if(this.Xs.connect(t,i,s),"function"==typeof e){const e=this.Ss;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}}accept(t){return t.Ys(this)}}),t("Binary",class{constructor(t,i,s){this.it=46,this.assign=PLATFORM.Fs,this.Zs=t,this.left=i,this.right=s,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){const e=this.left.evaluate(t,i,null);this.left.connect(t,i,s),"&&"===this.Zs&&!e||"||"===this.Zs&&e||this.right.connect(t,i,s)}te(t,i,s){return this.left.evaluate(t,i,s)&&this.right.evaluate(t,i,s)}ie(t,i,s){return this.left.evaluate(t,i,s)||this.right.evaluate(t,i,s)}se(t,i,s){return this.left.evaluate(t,i,s)==this.right.evaluate(t,i,s)}ee(t,i,s){return this.left.evaluate(t,i,s)===this.right.evaluate(t,i,s)}ne(t,i,s){return this.left.evaluate(t,i,s)!=this.right.evaluate(t,i,s)}he(t,i,s){return this.left.evaluate(t,i,s)!==this.right.evaluate(t,i,s)}re(t,i,s){const e=this.right.evaluate(t,i,s);return"function"==typeof e?this.left.evaluate(t,i,s)instanceof e:0}oe(t,i,s){const e=this.right.evaluate(t,i,s);return null!==e&&"object"==typeof e?this.left.evaluate(t,i,s)in e:0}le(t,i,s){return this.left.evaluate(t,i,s)+this.right.evaluate(t,i,s)}ce(t,i,s){return this.left.evaluate(t,i,s)-this.right.evaluate(t,i,s)}ue(t,i,s){return this.left.evaluate(t,i,s)*this.right.evaluate(t,i,s)}ae(t,i,s){return this.left.evaluate(t,i,s)/this.right.evaluate(t,i,s)}fe(t,i,s){return this.left.evaluate(t,i,s)%this.right.evaluate(t,i,s)}de(t,i,s){return this.left.evaluate(t,i,s)<this.right.evaluate(t,i,s)}be(t,i,s){return this.left.evaluate(t,i,s)>this.right.evaluate(t,i,s)}ge(t,i,s){return this.left.evaluate(t,i,s)<=this.right.evaluate(t,i,s)}ve(t,i,s){return this.left.evaluate(t,i,s)>=this.right.evaluate(t,i,s)}accept(t){return t.pe(this)}}),t("Unary",class{constructor(t,i){this.it=39,this.assign=PLATFORM.Fs,this.Zs=t,this.Ts=i,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){this.Ts.connect(t,i,s)}me(t,i,s){this.Ts.evaluate(t,i,s)}we(t,i,s){return typeof this.Ts.evaluate(t,i,s)}ye(t,i,s){return!this.Ts.evaluate(t,i,s)}ce(t,i,s){return-this.Ts.evaluate(t,i,s)}le(t,i,s){return+this.Ts.evaluate(t,i,s)}accept(t){return t.Ce(this)}});class PrimitiveLiteral{constructor(value){this.it=17925,this.assign=PLATFORM.Fs,this.connect=PLATFORM.Fs,this.value=value}evaluate(t,i,s){return this.value}accept(t){return t.Oe(this)}}t("PrimitiveLiteral",PrimitiveLiteral),PrimitiveLiteral.Re=new PrimitiveLiteral(void 0),PrimitiveLiteral.Ie=new PrimitiveLiteral(null),PrimitiveLiteral.Be=new PrimitiveLiteral(1),PrimitiveLiteral.Te=new PrimitiveLiteral(0),PrimitiveLiteral.Se=new PrimitiveLiteral(""),t("HtmlLiteral",class{constructor(parts){this.it=51,this.assign=PLATFORM.Fs,this.parts=parts}evaluate(t,i,s){const e=this.parts;let value,n="";for(let h=0,r=e.length;r>h;++h)null!=(value=e[h].evaluate(t,i,s))&&(n+=value);return n}connect(t,i,s){for(let e=0,n=this.parts.length;n>e;++e)this.parts[e].connect(t,i,s)}accept(t){return t.je(this)}});class ArrayLiteral{constructor(t){this.it=17955,this.assign=PLATFORM.Fs,this.elements=t}evaluate(t,i,s){const e=this.elements,n=e.length,h=Array(n);for(let r=0;n>r;++r)h[r]=e[r].evaluate(t,i,s);return h}connect(t,i,s){const e=this.elements;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}accept(t){return t.Ae(this)}}t("ArrayLiteral",ArrayLiteral),ArrayLiteral.Se=new ArrayLiteral(PLATFORM.Pe);class ObjectLiteral{constructor(t,i){this.it=17956,this.assign=PLATFORM.Fs,this.keys=t,this.values=i}evaluate(t,i,s){const e={},n=this.keys,h=this.values;for(let r=0,o=n.length;o>r;++r)e[n[r]]=h[r].evaluate(t,i,s);return e}connect(t,i,s){const e=this.values;for(let n=0,h=this.keys.length;h>n;++n)e[n].connect(t,i,s)}accept(t){return t.Le(this)}}t("ObjectLiteral",ObjectLiteral),ObjectLiteral.Se=new ObjectLiteral(PLATFORM.Pe,PLATFORM.Pe);class Template{constructor(t,i){this.it=17958,this.assign=PLATFORM.Fs,this.Ve=t,this.st=void 0===i?PLATFORM.Pe:i}evaluate(t,i,s){const e=this.st,n=this.Ve;let h=n[0];for(let r=0,o=e.length;o>r;++r)h+=e[r].evaluate(t,i,s),h+=n[r+1];return h}connect(t,i,s){const e=this.st;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s),n++}accept(t){return t.$e(this)}}t("Template",Template),Template.Se=new Template([""]),t("TaggedTemplate",class{constructor(t,i,s,e){this.it=1197,this.assign=PLATFORM.Fs,this.Ve=t,this.Ve.raw=i,this.Xs=s,this.st=void 0===e?PLATFORM.Pe:e}evaluate(t,i,s){const e=this.st,n=e.length,h=Array(n);for(let r=0,o=n;o>r;++r)h[r]=e[r].evaluate(t,i,s);const r=this.Xs.evaluate(t,i,s);if("function"!=typeof r)throw Reporter.error(207,this);return r.apply(null,[this.Ve].concat(h))}connect(t,i,s){const e=this.st;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s);this.Xs.connect(t,i,s)}accept(t){return t.ke(this)}}),t("ArrayBindingPattern",class{constructor(t){this.it=65556,this.elements=t}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.De(this)}}),t("ObjectBindingPattern",class{constructor(t,i){this.it=65557,this.keys=t,this.values=i}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.Me(this)}}),t("BindingIdentifier",class{constructor(name){this.it=65558,this.name=name}evaluate(t,i,s){return this.name}connect(t,i,s){}accept(t){return t.Fe(this)}});const Ft={}.toString;t("ForOfStatement",class{constructor(t,i){this.it=6199,this.assign=PLATFORM.Fs,this.xe=t,this.Ee=i}evaluate(t,i,s){return this.Ee.evaluate(t,i,s)}count(t,i){return Et[Ft.call(i)](i)}Ne(t,i,s){xt[Ft.call(i)](16777216|t,i,s)}connect(t,i,s){this.xe.connect(t,i,s),this.Ee.connect(t,i,s)}bind(t,i,s){hasBind(this.Ee)&&this.Ee.bind(t,i,s)}Ps(t,i,s){hasUnbind(this.Ee)&&this.Ee.Ps(t,i,s)}accept(t){return t.Ue(this)}}),t("Interpolation",class{constructor(parts,t){this.it=24,this.assign=PLATFORM.Fs,this.parts=parts,this.st=void 0===t?PLATFORM.Pe:t,this.ze=this.st.length>1,this.Ke=this.st[0]}evaluate(t,i,s){if(this.ze){const e=this.st,parts=this.parts;let n=parts[0];for(let h=0,r=e.length;r>h;++h)n+=e[h].evaluate(t,i,s),n+=parts[h+1];return n}{const parts=this.parts;return parts[0]+this.Ke.evaluate(t,i,s)+parts[1]}}connect(t,i,s){}accept(t){return t.qe(this)}});const xt={He(t,i,s){if(16777218==(16777218&t)){const t=ProxyObserver.Rt(i),e=t.length;let n,h=0;for(;e>h;++h)(n=t[h])instanceof Object&&(n=t[h]=ProxyObserver.Bi(n).I),s(t,h,n)}else for(let t=0,e=i.length;e>t;++t)s(i,t,i[t])},We(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.entries())e[++n]=t;xt["He"](-16777217&t,e,s)},Qe(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.keys())e[++n]=t;xt["He"](-16777217&t,e,s)},Ge(t,i,s){const e=Array(i);for(let t=0;i>t;++t)e[t]=t;xt["He"](-16777217&t,e,s)},_e(t,i,s){},Je(t,i,s){}},Et={He:t=>t.length,We:t=>t.size,Qe:t=>t.size,Ge:t=>t,_e:()=>0,Je:()=>0};(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.$s=2]="toView",BindingMode[BindingMode.ks=4]="fromView",BindingMode[BindingMode.Xe=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode=t("BindingMode",{}))),(function(BindingStrategy){BindingStrategy[BindingStrategy.Ye=1]="getterSetter",BindingStrategy[BindingStrategy.Ze=2]="proxies",BindingStrategy[BindingStrategy.tn=4]="patch",BindingStrategy[BindingStrategy.Hi=8]="keyed"})(BindingStrategy||(BindingStrategy=t("BindingStrategy",{})));const Nt=7;(function(State){State[State.Ui=0]="none",State[State.in=1]="isBinding",State[State.sn=2]="isBound",State[State.en=4]="isAttaching",State[State.nn=8]="isAttached",State[State.hn=16]="isMounted",State[State.rn=32]="isDetaching",State[State.on=64]="isUnbinding",State[State.ln=128]="isCached",State[State.cn=256]="isContainerless",State[State.un=512]="isPatching"})(State||(State=t("State",{}))),(function(Hooks){Hooks[Hooks.Ui=1]="none",Hooks[Hooks.an=2]="hasCreated",Hooks[Hooks.fn=4]="hasBinding",Hooks[Hooks.dn=8]="hasBound",Hooks[Hooks.bn=16]="hasAttaching",Hooks[Hooks.gn=32]="hasAttached",Hooks[Hooks.vn=64]="hasDetaching",Hooks[Hooks.pn=128]="hasDetached",Hooks[Hooks.mn=256]="hasUnbinding",Hooks[Hooks.wn=512]="hasUnbound",Hooks[Hooks.yn=1024]="hasRender",Hooks[Hooks.Cn=2048]="hasCaching"})(Hooks||(Hooks=t("Hooks",{}))),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.Ui=0]="none",LifecycleFlags[LifecycleFlags.On=67108879]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Rn=67108864]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.In=15]="bindingStrategy",LifecycleFlags[LifecycleFlags.Bn=1]="getterSetterStrategy",LifecycleFlags[LifecycleFlags.Tn=2]="proxyStrategy",LifecycleFlags[LifecycleFlags.Sn=4]="patchStrategy",LifecycleFlags[LifecycleFlags.jn=8]="keyedStrategy",LifecycleFlags[LifecycleFlags.update=48]="update",LifecycleFlags[LifecycleFlags.An=16]="updateTargetInstance",LifecycleFlags[LifecycleFlags.Pn=32]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=262080]="from",LifecycleFlags[LifecycleFlags.Ln=448]="fromFlush",LifecycleFlags[LifecycleFlags.Vn=64]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.$n=128]="fromSyncFlush",LifecycleFlags[LifecycleFlags.kn=256]="fromTick",LifecycleFlags[LifecycleFlags.Dn=512]="fromStartTask",LifecycleFlags[LifecycleFlags.Mn=1024]="fromStopTask",LifecycleFlags[LifecycleFlags.Fn=2048]="fromBind",LifecycleFlags[LifecycleFlags.xn=4096]="fromUnbind",LifecycleFlags[LifecycleFlags.En=8192]="fromAttach",LifecycleFlags[LifecycleFlags.Nn=16384]="fromDetach",LifecycleFlags[LifecycleFlags.Un=32768]="fromCache",LifecycleFlags[LifecycleFlags.zn=65536]="fromDOMEvent",LifecycleFlags[LifecycleFlags.Kn=131072]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.qn=262144]="allowPublishRoundtrip",LifecycleFlags[LifecycleFlags.Hn=524288]="isPublishing",LifecycleFlags[LifecycleFlags.Wn=1048576]="mustEvaluate",LifecycleFlags[LifecycleFlags.Qn=2097152]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.Gn=4194304]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags._n=8388608]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Jn=16777216]="isOriginalArray",LifecycleFlags[LifecycleFlags.Xn=33554432]="isCollectionMutation"})(LifecycleFlags||(LifecycleFlags=t("LifecycleFlags",{}))),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Yn=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Zn=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind=t("ExpressionKind",{})));const IRenderable=t("IRenderable",DI.ds("IRenderable").th()),IViewFactory=t("IViewFactory",DI.ds("IViewFactory").th()),Ut=Object.freeze(Object.create(null)),ILifecycle=t("ILifecycle",DI.ds("ILifecycle").fs(t=>t.singleton(zt)));class zt{constructor(){this.ih=0,this.sh=0,this.eh=0,this.nh=0,this.hh=0,this.rh=this,this.oh=this,this.lh=this,this.uh=this,this.ah=this,this.fh=this,this.dh=this,this.bh=this,this.gh=this,this.vh=this,this.ph=this,this.mh=this,this.wh=this,this.yh=this,this.Ch=this,this.Oh=this,this.Rh=null,this.Ih=Promise.resolve(),this.Bh=0,this.Th=0,this.Sh=0,this.jh=0,this.Ah=0,this.Ph=0,this.Lh=0,this.Vh=0,this.$h=0,this.at=Ut,this.flush=PLATFORM.Fs,this.kh=Ut,this.bound=PLATFORM.Fs,this.Dh=Ut,this.Mh=PLATFORM.Fs,this.Fh=Ut,this.xh=PLATFORM.Fs,this.Eh=Ut,this.Nh=PLATFORM.Fs,this.Uh=Ut,this.zh=PLATFORM.Fs,this.Kh=Ut,this.ei=PLATFORM.Fs,this.qh=Ut,this.Hh=PLATFORM.Fs,this.Wh=null}static register(t){return Registration.singleton(ILifecycle,this).register(t)}Qh(t){null===this.Wh&&(this.Wh=new AggregateLifecycleTask),this.Wh.Gh(t)}_h(t){null!==this.Wh&&(this.Wh===t?this.Wh=null:this.Wh.Jh(t))}T(t){return this.rh===this&&(this.Rh=this.Ih.then(()=>{this.Xh(64)})),null===t.at&&(t.at=Ut,this.oh.at=t,this.oh=t,++this.Bh),this.Rh}Xh(t){for(t|=128;this.Bh>0;){let i,s=this.rh.at;this.rh=this.oh=this,this.Bh=0;do{i=s.at,s.at=null,s.flush(t),s=i}while(s!==Ut);if(4194304&t)break}}ni(){++this.ih}hi(t){null===t.kh&&(t.kh=Ut,this.uh.kh=t,this.uh=t,++this.Sh)}oi(t){if(0==--this.ih)return null===this.Wh||this.Wh.done?(this.Yh(t),LifecycleTask.done):(this.Wh.Zh=this,this.Wh)}Yh(t){for(512&t&&this.Xh(128|t);this.Sh>0;){this.Sh=0;let i,s=this.lh.kh;this.lh=this.uh=this;do{s.bound(t),i=s.kh,s.kh=null,s=i}while(s!==Ut)}}fi(){++this.hh}di(t){null===t.qh&&(t.qh=Ut,this.Oh.qh=t,this.Oh=t,++this.$h)}gi(t){if(0==--this.hh)return null===this.Wh||this.Wh.done?(this.tr(t),LifecycleTask.done):(this.Wh.Zh=this,this.Wh)}tr(t){for(;this.$h>0;){this.$h=0;let i,s=this.Ch.qh;this.Ch=this.Oh=this;do{s.Hh(t),i=s.qh,s.qh=null,s=i}while(s!==Ut)}}kt(){++this.eh}Ut(t){null===t.Dh&&(t.Dh=Ut,this.fh.Dh=t,this.fh=t,++this.jh)}Mt(t){null===t.Fh&&(t.Fh=Ut,this.bh.Fh=t,this.bh=t,++this.Ah)}Ft(t){if(0==--this.eh)return null===this.Wh||this.Wh.done?(this.ir(t),LifecycleTask.done):(this.Wh.Zh=this,this.Wh)}ir(t){if(this.Xh(128|t),this.jh>0){this.jh=0;let i,s=this.ah.Dh;this.ah=this.fh=this;do{s.Mh(t),i=s.Dh,s.Dh=null,s=i}while(s!==Ut)}if(this.Ah>0){this.Ah=0;let i,s=this.dh.Fh;this.dh=this.bh=this;do{s.xh(t),i=s.Fh,s.Fh=null,s=i}while(s!==Ut)}}zt(){++this.nh}Wt(t){if(null===t.Eh&&(t.Eh=Ut,this.vh.Eh=t,this.vh=t,++this.Ph),null!==t.Dh){let i=this.ah,s=i.Dh;for(;s!==t;)s=(i=s).Dh;i.Dh=s.Dh,s.Dh=null,this.fh===s&&(this.fh=this),--this.jh}}qt(t){null===t.Uh&&(t.Uh=Ut,this.mh.Uh=t,this.mh=t,++this.Lh)}sr(t){null===t.Kh&&(t.Kh=Ut,this.yh.Kh=t,this.yh=t,++this.Vh)}Ht(t){if(0==--this.nh)return null===this.Wh||this.Wh.done?(this.er(t),LifecycleTask.done):(this.Wh.Zh=this,this.Wh)}er(t){if(this.Xh(4194752|t),this.Ph>0){this.Ph=0;let i,s=this.gh.Eh;this.gh=this.vh=this;do{s.Nh(t),i=s.Eh,s.Eh=null,s=i}while(s!==Ut)}if(this.Lh>0){this.Lh=0;let i,s=this.ph.Uh;this.ph=this.mh=this;do{s.zh(t),i=s.Uh,s.Uh=null,s=i}while(s!==Ut)}if(this.Vh>0){this.fi(),this.Vh=0;let i,s=this.wh.Kh;this.wh=this.yh=this;do{s.ei(t),i=s.Kh,s.Kh=null,s=i}while(s!==Ut);this.gi(t)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.nr=PLATFORM.Fs,this.currentView=null,this.nn=0,this.sn=0,this.hr=null,this.rr=LifecycleTask.done}static register(t){return Registration.transient(this,this).register(t,this)}or(value,t){this.rr.done?value instanceof Promise?(this.lr(new Kt(this,value)),this.cr()):this.ur(value,t):(value instanceof Promise?this.lr(new Kt(this,value)):this.lr(value),this.rr.ar()&&this.rr.cancel())}ri(t,i){this.scope=i,this.sn=1,null!==this.currentView&&this.currentView.ui(t,i)}Dt(t){this.nn=1,null!==this.currentView&&this.currentView.Et(t)}Kt(t){this.nn=0,null!==this.currentView&&this.currentView.Gt(t)}bi(t){this.sn=0,null!==this.currentView&&this.currentView.ei(t)}Jt(t){this.currentView=null}lr(t){null===this.hr&&(this.hr=[]),this.hr.push(t)}ur(t,i){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,s=new AggregateLifecycleTask;let e,n=this.currentView;null===n?e=LifecycleTask.done:($lifecycle.sr(n),$lifecycle.zt(),n.Gt(i),e=$lifecycle.Ht(i)),s.Gh(e),null===(n=this.currentView=t)?e=LifecycleTask.done:(this.sn&&($lifecycle.ni(),n.ui(i,this.scope),$lifecycle.oi(i)),this.nn?($lifecycle.kt(),n.Et(i),e=$lifecycle.Ft(i)):e=LifecycleTask.done),s.Gh(e),s.done?(this.rr=LifecycleTask.done,this.nr()):(this.rr=s,this.rr.dr().then(()=>{this.nr(),this.cr()}).catch(t=>{throw t}))}cr(){if(null!==this.hr&&this.hr.length>0){const t=this.hr.pop();this.hr.length=0,Kt.is(t)?this.rr=t.start():this.ur(t,131072)}else this.rr=LifecycleTask.done}}t("CompositionCoordinator",CompositionCoordinator),CompositionCoordinator.inject=[ILifecycle];const LifecycleTask=t("LifecycleTask",{done:{done:1,ar:()=>0,cancel(){},dr:()=>Promise.resolve()}});class AggregateLifecycleTask{constructor(){this.done=1,this.Zh=null,this.resolve=null,this.br=[],this.gr=null}Gh(t){t.done||(this.done=0,this.br.push(t),t.dr().then(()=>{this.vr()}).catch(t=>{throw t}))}Jh(t){if(t.done){const i=this.br.indexOf(t);-1!==i&&this.br.splice(i,1)}0===this.br.length&&null!==this.Zh&&(this.Zh._h(this),this.Zh=null)}ar(){return this.done?0:this.br.every(t=>t.ar())}cancel(){this.ar()&&(this.br.forEach(t=>{t.cancel()}),this.done=0)}dr(){return null===this.gr&&(this.gr=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.gr}vr(){this.done||this.br.every(t=>t.done)&&this.complete(1)}complete(t){this.done=1,t&&null!==this.Zh&&(this.Zh.er(131072),this.Zh.tr(131072),this.Zh.Yh(131072),this.Zh.ir(131072)),this.Zh._h(this),null!==this.resolve&&this.resolve()}}t("AggregateLifecycleTask",AggregateLifecycleTask);class Kt{constructor(t,i){this.pr=t,this.done=0,this.mr=0,this.Ih=i}static is(t){return"start"in t}start(){return this.mr?LifecycleTask.done:(this.Ih=this.Ih.then(t=>(this.wr(t),t)),this)}ar(){return!this.done}cancel(){this.ar()&&(this.mr=1)}dr(){return this.Ih}wr(value){this.mr||(this.done=1,this.pr.or(value,131072))}}t("PromiseTask",class{constructor(t,i){this.done=0,this.mr=0,this.yr=i,this.Ih=t.then(value=>{if(1!=this.mr)return this.done=1,this.yr(value),value})}ar(){return!this.done}cancel(){this.ar()&&(this.mr=1)}dr(){return this.Ih}});const qt=[],Ht=[];let Wt=-1;I(-1);const Qt={Yi:0,Ii:0,Cr:0,value:0};connectable.Or=(t=>{++Qt.value,Reflect.defineProperty(t,"id",Qt)});const{oneTime,$s:Gt,ks:_t}=BindingMode,Jt=Gt|oneTime;let Binding=t("Binding",class{constructor(t,i,s,mode,e,n){connectable.Or(this),this.ai=null,this.pi=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.Rr=null,this.$scope=null,this.As=n,this.mode=mode,this.ht=e,this.Ir=t,this.target=i,this.Br=s,this.J=0}Tr(value,t){this.targetObserver.Y(value,t|=this.J),4&t&&this.targetObserver.K(t)}Sr(value,t){this.Ir.assign(t|=this.J,this.$scope,this.As,value)}B(t,i,s){if(0!=(2&this.$state)){if((16&(s|=this.J))>0){const i=this.targetObserver.X();return(10082!==this.Ir.it||this.et>1)&&(t=this.Ir.evaluate(s,this.$scope,this.As)),t!==i&&this.Tr(t,s),void(0==(this.mode&oneTime)&&(this.version++,this.Ir.connect(s,this.$scope,this),this.unobserve(0)))}if(0>=(32&s))throw Reporter.error(15,s);t!==this.Ir.evaluate(s,this.$scope,this.As)&&this.Sr(t,s)}}ui(t,i){if(2&this.$state){if(this.$scope===i)return;this.ei(2048|t)}this.$state|=1,this.J=67108879&t,this.$scope=i;let s=this.Ir;hasBind(s)&&s.bind(t,i,this);let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=this.mode&_t?this.ht.nt(t,this.target,this.Br):this.ht.jr(t,this.target,this.Br)),targetObserver.bind&&targetObserver.bind(t),s=this.Ir,this.mode&Jt&&this.Tr(s.evaluate(t,i,this.As),t),this.mode&Gt&&s.connect(t,i,this),this.mode&_t&&(targetObserver.subscribe(this),targetObserver[this.id]|=32),this.$state|=2,this.$state&=-2}ei(t){2&this.$state&&(this.$state|=64,this.J=0,hasUnbind(this.Ir)&&this.Ir.Ps(t,this.$scope,this),this.$scope=null,this.targetObserver.Ps&&this.targetObserver.Ps(t),this.targetObserver.unsubscribe&&(this.targetObserver.unsubscribe(this),this.targetObserver[this.id]&=-33),this.unobserve(1),this.$state&=-67)}K(t){2&this.$state&&this.targetObserver.K(t|this.J)}});Binding=t("Binding",i([connectable()],Binding));class Call{constructor(t,i,s,e,n){this.ai=null,this.pi=null,this.$state=0,this.As=n,this.Ir=t,this.targetObserver=e.nt(0,i,s)}Ar(t){const i=this.$scope.rs;Object.assign(i,t);const s=this.Ir.evaluate(1048576,this.$scope,this.As);for(const s in t)Reflect.deleteProperty(i,s);return s}ui(t,i){if(2&this.$state){if(this.$scope===i)return;this.ei(2048|t)}this.$state|=1,this.$scope=i,hasBind(this.Ir)&&this.Ir.bind(t,i,this),this.targetObserver.Y(t=>this.Ar(t),t),this.$state|=2,this.$state&=-2}ei(t){2&this.$state&&(this.$state|=64,hasUnbind(this.Ir)&&this.Ir.Ps(t,this.$scope,this),this.$scope=null,this.targetObserver.Y(null,t),this.$state&=-67)}ot(t,i,s){}B(t,i,s){}}t("Call",Call);const IExpressionParser=t("IExpressionParser",DI.ds("IExpressionParser").fs(t=>t.singleton(Xt)));class Xt{constructor(){this.Pr=Object.create(null),this.Lr=Object.create(null),this.Vr=Object.create(null)}parse(t,i){switch(i){case 2048:{let s=this.Vr[t];return void 0===s&&(s=this.Vr[t]=this.$r(t,i)),s}case 539:{let s=this.Lr[t];return void 0===s&&(s=this.Lr[t]=this.$r(t,i)),s}default:{if(0===t.length&&55&i)return PrimitiveLiteral.Se;let s=this.Pr[t];return void 0===s&&(s=this.Pr[t]=this.$r(t,i)),s}}}cache(t){const{Lr:i,Pr:s,Vr:e}=this;for(const n in t){const h=t[n];switch(h.it){case 24:e[n]=h;break;case 6199:i[n]=h;break;default:s[n]=h}}}$r(t,i){try{const parts=t.split("."),i=parts[0];let s;s=i.endsWith("()")?new CallScope(i.replace("()",""),PLATFORM.Pe):new AccessScope(parts[0]);let e=1;for(;parts.length>e;){const t=parts[e];s=t.endsWith("()")?new CallMember(s,t.replace("()",""),PLATFORM.Pe):new AccessMember(s,parts[e]),e++}return s}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.Di=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.kr=1280]="IsRef",BindingType[BindingType.Dr=512]="IsIterator",BindingType[BindingType.Mr=256]="IsCustom",BindingType[BindingType.Fr=128]="IsFunction",BindingType[BindingType.xr=64]="IsEvent",BindingType[BindingType.Er=32]="IsProperty",BindingType[BindingType.Nr=16]="IsCommand",BindingType[BindingType.Ur=48]="IsPropertyCommand",BindingType[BindingType.zr=80]="IsEventCommand",BindingType[BindingType.Kr=6]="DelegationStrategyDelta",BindingType[BindingType.qr=15]="Command",BindingType[BindingType.Hr=49]="OneTimeCommand",BindingType[BindingType.Wr=50]="ToViewCommand",BindingType[BindingType.Qr=51]="FromViewCommand",BindingType[BindingType.Gr=52]="TwoWayCommand",BindingType[BindingType._r=53]="BindCommand",BindingType[BindingType.Jr=86]="TriggerCommand",BindingType[BindingType.Xr=87]="CaptureCommand",BindingType[BindingType.Yr=88]="DelegateCommand",BindingType[BindingType.Zr=153]="CallCommand",BindingType[BindingType.io=26]="OptionsCommand",BindingType[BindingType.so=539]="ForCommand",BindingType[BindingType.eo=284]="CustomCommand"})(BindingType||(BindingType=t("BindingType",{})));const{$s:Yt,oneTime:Zt}=BindingMode;class MultiInterpolationBinding{constructor(t,i,s,e,mode,n){this.ai=null,this.pi=null,this.$state=0,this.$scope=null,this.no=i,this.As=n,this.mode=mode,this.ht=t,this.target=s,this.Br=e;const h=i.st,parts=this.parts=Array(h.length);for(let r=0,o=h.length;o>r;++r)parts[r]=new InterpolationBinding(h[r],i,s,e,mode,t,n,0===r)}ui(t,i){if(2&this.$state){if(this.$scope===i)return;this.ei(t)}this.$state|=2,this.$scope=i;const parts=this.parts;for(let s=0,e=parts.length;e>s;++s)parts[s].ui(t,i)}ei(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].ei(t)}}t("MultiInterpolationBinding",MultiInterpolationBinding);let InterpolationBinding=t("InterpolationBinding",class{constructor(t,i,s,e,mode,n,h,r){connectable.Or(this),this.$state=0,this.no=i,this.ho=r,this.mode=mode,this.As=h,this.ht=n,this.Ir=t,this.target=s,this.Br=e,this.targetObserver=n.jr(0,s,e)}Tr(value,t){this.targetObserver.Y(value,16|t)}B(t,i,s){if(!(2&this.$state))return;const e=this.targetObserver.X(),n=this.no.evaluate(s,this.$scope,this.As);n!==e&&this.Tr(n,s),0==(this.mode&Zt)&&(this.version++,this.Ir.connect(s,this.$scope,this),this.unobserve(0))}ui(t,i){if(2&this.$state){if(this.$scope===i)return;this.ei(t)}this.$state|=2,this.$scope=i;const s=this.Ir;s.bind&&s.bind(t,i,this),this.ho&&this.Tr(this.no.evaluate(t,i,this.As),t),this.mode&Yt&&s.connect(t,i,this)}ei(t){if(!(2&this.$state))return;this.$state&=-3;const i=this.Ir;i.Ps&&i.Ps(t,this.$scope,this),this.$scope=null,this.unobserve(1)}});InterpolationBinding=t("InterpolationBinding",i([connectable()],InterpolationBinding));let LetBinding=t("LetBinding",class{constructor(t,i,s,e,toViewModel=0){connectable.Or(this),this.ai=null,this.pi=null,this.$state=0,this.$lifecycle=e.get(ILifecycle),this.$scope=null,this.As=e,this.ht=s,this.Ir=t,this.target=null,this.Br=i,this.toViewModel=toViewModel}B(t,i,s){if(2&this.$state){if(!(16&s))throw Reporter.error(15,s);{const{target:t,Br:i}=this,e=t[i],n=this.Ir.evaluate(s,this.$scope,this.As);n!==e&&(t[i]=n)}}}ui(t,i){if(2&this.$state){if(this.$scope===i)return;this.ei(2048|t)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.ls:i.rs;const s=this.Ir;s.bind&&s.bind(t,i,this),this.target[this.Br]=this.Ir.evaluate(2048,i,this.As),this.Ir.connect(t,i,this),this.$state|=2,this.$state&=-2}ei(t){if(!(2&this.$state))return;this.$state|=64;const i=this.Ir;i.Ps&&i.Ps(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}});LetBinding=t("LetBinding",i([connectable()],LetBinding));class Ref{constructor(t,i,s){this.ai=null,this.pi=null,this.$state=0,this.As=s,this.Ir=t,this.target=i}ui(t,i){if(2&this.$state){if(this.$scope===i)return;this.ei(2048|t)}this.$state|=1,this.$scope=i,hasBind(this.Ir)&&this.Ir.bind(t,i,this),this.Ir.assign(t,this.$scope,this.As,this.target),this.$state|=2,this.$state&=-2}ei(t){if(!(2&this.$state))return;this.$state|=64,this.Ir.evaluate(t,this.$scope,this.As)===this.target&&this.Ir.assign(t,this.$scope,this.As,null);const i=this.Ir;hasUnbind(i)&&i.Ps(t,this.$scope,this),this.$scope=null,this.$state&=-67}ot(t,i,s){}B(t,i,s){}}t("Ref",Ref);let CollectionLengthObserver=t("CollectionLengthObserver",class{constructor(t,i){this.G=t,this._=i,this.W=t[i]}X(){return this.G[this._]}ut(t){this.G[this._]=t}K(t){const i=this.G[this._],s=this.W;s!==i&&(this.G[this._]=i,this.W=i,this.O(i,s,16|t))}subscribe(t){this.g(t)}unsubscribe(t){this.v(t)}});CollectionLengthObserver=t("CollectionLengthObserver",i([targetObserver()],CollectionLengthObserver));const ti=Array.prototype,ii=ti.push,si=ti.unshift,ei=ti.pop,ni=ti.shift,hi=ti.splice,ri=ti.reverse,oi=ti.sort,li={push:ii,unshift:si,pop:ei,shift:ni,splice:hi,reverse:ri,sort:oi},ci=["push","unshift","pop","shift","splice","reverse","sort"],ui={push(){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return ii.apply(t,arguments);const s=t.length,e=arguments.length;if(0===e)return s;t.length=i.ft.length=s+e;let n=s;for(;t.length>n;)t[n]=arguments[n-s],i.ft[n]=-2,n++;return i.O("push",arguments,33554432|i.J),t.length},unshift(){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return si.apply(t,arguments);const s=arguments.length,e=Array(s);let n=0;for(;s>n;)e[n++]=-2;si.apply(i.ft,e);const h=si.apply(t,arguments);return i.O("unshift",arguments,33554432|i.J),h},pop(){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return ei.call(t);const s=i.ft,e=ei.call(t),n=s.length-1;return s[n]>-1&&s.gt.push(s[n]),ei.call(s),i.O("pop",arguments,33554432|i.J),e},shift(){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return ni.call(t);const s=i.ft,e=ni.call(t);return s[0]>-1&&s.gt.push(s[0]),ni.call(s),i.O("shift",arguments,33554432|i.J),e},splice(t,i){let s=this;void 0!==s._i&&(s=s._i);const e=s.q;if(void 0===e)return hi.apply(s,arguments);const n=e.ft;if(i>0){let s=isNaN(t)?0:t;const to=s+i;for(;to>s;)n[s]>-1&&n.gt.push(n[s]),s++}const h=arguments.length;if(h>2){const s=h-2,e=Array(s);let r=0;for(;s>r;)e[r++]=-2;hi.call(n,t,i,...e)}else 2===h&&hi.call(n,t,i);const r=hi.apply(s,arguments);return e.O("splice",arguments,33554432|e.J),r},reverse(){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return ri.call(t),this;const s=t.length,e=s/2|0;let n=0;for(;n!==e;){const e=s-n-1,h=t[n],r=i.ft[n],o=i.ft[e];t[n]=t[e],i.ft[n]=o,t[e]=h,i.ft[e]=r,n++}return i.O("reverse",arguments,33554432|i.J),this},sort(t){let i=this;void 0!==i._i&&(i=i._i);const s=i.q;if(void 0===s)return oi.call(i,t),this;const e=i.length;if(2>e)return this;U(i,s.ft,0,e,E);let n=0;for(;e>n&&void 0!==i[n];)n++;return void 0!==t&&"function"==typeof t||(t=x),U(i,s.ft,0,n,t),s.O("sort",arguments,33554432|s.J),this}},ai={Cr:1,Ii:0,Yi:1},def=Reflect.defineProperty;for(const t of ci)def(ui[t],"observing",{value:1,Cr:0,Yi:0,Ii:0});enableArrayObservation();let ArrayObserver=t("ArrayObserver",class{constructor(t,i,s){this.S=i,s.q=this,this.R=s,this.flags=67108879&t,this.bt()}K(t){const i=this.R,s=i.length;let e=0;for(;s>e;++e)v(i[e],t)}});ArrayObserver=t("ArrayObserver",i([collectionObserver(9)],ArrayObserver));const fi=Map.prototype,di=fi.set,bi=fi.clear,gi=fi.delete,vi={set:di,clear:bi,delete:gi},pi=["set","clear","delete"],mi={set(t,value){let i=this;void 0!==i._i&&(i=i._i);const s=i.q;if(void 0===s)return di.call(i,t,value),this;const e=i.size;if(di.call(i,t,value),i.size===e){let e=0;for(const n of i.entries()){if(n[0]===t)return n[1]!==value&&(s.ft[e]=-2),this;e++}return this}return s.ft[e]=-2,s.O("set",arguments,33554432|s.J),this},clear(){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return bi.call(t);if(t.size>0){const s=i.ft;let e=0;for(const i of t.keys())s[e]>-1&&s.gt.push(s[e]),e++;bi.call(t),s.length=0,i.O("clear",arguments,33554432|i.J)}},delete(value){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return gi.call(t,value);if(0===t.size)return 0;let s=0;const e=i.ft;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.gt.push(e[s]),e.splice(s,1),gi.call(t,value);s++}return i.O("delete",arguments,33554432|i.J),0}},wi={Cr:1,Ii:0,Yi:1},yi=Reflect.defineProperty;for(const t of pi)yi(mi[t],"observing",{value:1,Cr:0,Yi:0,Ii:0});enableMapObservation();let MapObserver=t("MapObserver",class{constructor(t,i,s){this.S=i,s.q=this,this.R=s,this.flags=67108879&t,this.bt()}K(t){this.R.forEach((value,i)=>{v(value,t),v(i,t)})}});MapObserver=t("MapObserver",i([collectionObserver(6)],MapObserver));const Ci=Set.prototype,Oi=Ci.add,Ri=Ci.clear,Ii=Ci.delete,Bi={add:Oi,clear:Ri,delete:Ii},Ti=["add","clear","delete"],Si={add(value){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return Oi.call(t,value),this;const s=t.size;return Oi.call(t,value),t.size===s?this:(i.ft[s]=-2,i.O("add",arguments,33554432|i.J),this)},clear(){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return Ri.call(t);if(t.size>0){const s=i.ft;let e=0;for(const i of t.keys())s[e]>-1&&s.gt.push(s[e]),e++;Ri.call(t),s.length=0,i.O("clear",arguments,33554432|i.J)}},delete(value){let t=this;void 0!==t._i&&(t=t._i);const i=t.q;if(void 0===i)return Ii.call(t,value);if(0===t.size)return 0;let s=0;const e=i.ft;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.gt.push(e[s]),e.splice(s,1),Ii.call(t,value);s++}return i.O("delete",arguments,33554432|i.J),0}},ji={Cr:1,Ii:0,Yi:1},Ai=Reflect.defineProperty;for(const t of Ti)Ai(Si[t],"observing",{value:1,Cr:0,Yi:0,Ii:0});enableSetObservation();let SetObserver=t("SetObserver",class{constructor(t,i,s){this.S=i,s.q=this,this.R=s,this.flags=67108879&t,this.bt()}K(t){this.R.forEach((value,i)=>{v(i,t)})}});SetObserver=t("SetObserver",i([collectionObserver(7)],SetObserver));const Pi={ro:0,oo:0};let CustomSetterObserver=t("CustomSetterObserver",class{constructor(t,i,s){this.G=t,this._=i,this.W=this.oldValue=void 0,this.lo=s,this.H=0}Y(t){this.lo.set.call(this.G,t),this.W!==t&&(this.oldValue=this.W,this.W=t,this.O(t,this.oldValue,16))}subscribe(t){this.H||this.co(),this.g(t)}unsubscribe(t){this.v(t)}co(){this.H=1,this.W=this.G[this._],Reflect.defineProperty(this.G,this._,{set:t=>{this.Y(t)}})}});CustomSetterObserver=t("CustomSetterObserver",i([subscriberCollection(MutationKind.C)],CustomSetterObserver));let GetterObserver=t("GetterObserver",class{constructor(t,i,s,e,n,h,r){this.G=s,this._=e,this.uo=0,this.W=this.oldValue=void 0,this.ao=[],this.fo=[],this.do=i,this.bo=0,this.lo=n,this.I=new Proxy(s,(function t(i,s,e){return{get(n,h,r){if(e.vo(h))return Reflect.get(n,h,r);switch(Li.call(n)){case"[object Array]":if(e.po(s.mo(i,n)),"length"===h)return Reflect.get(n,h,n);case"[object Map]":if(e.po(s.wo(i,n)),"size"===h)return Reflect.get(n,h,n);case"[object Set]":if(e.po(s.yo(i,n)),"size"===h)return Reflect.get(n,h,n);default:e.Co(s.nt(i,n,h))}return(function(i,s,e,n,h){const value=Reflect.get(s,e,s);return"function"==typeof value?s[e].bind(s):"object"!=typeof value||null===value?value:new Proxy(value,t(i,n,h))})(i,n,h,s,e)}}})(t,h,this)),Reflect.defineProperty(s,e,{get:()=>this.X()})}Co(t){-1===this.ao.indexOf(t)&&this.ao.push(t)}po(t){-1===this.fo.indexOf(t)&&this.fo.push(t)}X(){return this.W=0===this.bo||this.uo?Reflect.apply(this.lo.get,this.I,PLATFORM.Pe):Reflect.apply(this.lo.get,this.G,PLATFORM.Pe),this.W}subscribe(t){this.g(t),1==++this.bo&&this.Oo(1)}unsubscribe(t){this.v(t),0==--this.bo&&this.Ro()}B(){const t=this.W,i=this.Oo(0);t!==i&&this.O(i,t,16)}N(){const t=this.W,i=this.Oo(0);t!==i&&this.O(i,t,464)}Oo(t){const i=!this.do.ro||t;return i&&(this.Ro(),this.uo=1),this.W=this.X(),i&&(this.ao.forEach(t=>{t.subscribe(this)}),this.fo.forEach(t=>{t.Ct(this)}),this.uo=0),this.W}vo(t){return!this.uo||"$observers"===t}Ro(){this.ao.forEach(t=>{t.unsubscribe(this)}),this.ao.length=0,this.fo.forEach(t=>{t.Ot(this)}),this.fo.length=0}});GetterObserver=t("GetterObserver",i([subscriberCollection(MutationKind.C)],GetterObserver));const Li={}.toString,IDirtyChecker=t("IDirtyChecker",DI.ds("IDirtyChecker").fs(t=>t.singleton(Vi))),DirtyCheckSettings=t("DirtyCheckSettings",{Io:6,disabled:0,warn:1,Bo:0,To(){this.Io=6,this.disabled=0,this.warn=1,this.Bo=0}});class Vi{constructor(){this.So=0,this.jo=[]}Ao(t,i){if(DirtyCheckSettings.Bo)throw Reporter.error(800);return DirtyCheckSettings.warn&&Reporter.write(801),new DirtyCheckProperty(this,t,i)}Po(t){this.jo.push(t),1===this.jo.length&&PLATFORM.Lo.add(this.Vo,this)}removeProperty(t){this.jo.splice(this.jo.indexOf(t),1),0===this.jo.length&&PLATFORM.Lo.remove(this.Vo,this)}Vo(t){if(DirtyCheckSettings.disabled)return;if(++this.So<DirtyCheckSettings.Io)return;this.So=0;const i=this.jo,s=i.length;let e,n=0;for(;s>n;++n)(e=i[n]).$o()&&e.flush(256)}}let DirtyCheckProperty=t("DirtyCheckProperty",class{constructor(t,i,s){this.G=i,this._=s,this.ko=t}$o(){return this.oldValue!==this.G[this._]}flush(t){const i=this.G[this._];this.O(i,this.oldValue,16|t),this.oldValue=i}subscribe(t){this.m()||(this.oldValue=this.G[this._],this.ko.Po(this)),this.g(t)}unsubscribe(t){this.v(t)&&!this.m()&&this.ko.removeProperty(this)}});DirtyCheckProperty=t("DirtyCheckProperty",i([propertyObserver()],DirtyCheckProperty));const $i=PLATFORM.Fs;class PrimitiveObserver{constructor(t,i){this.Do=1,"length"===i?(this.G=t,this.X=this.Mo):this.X=this.Fo}Mo(){return this.G.length}Fo(){}}t("PrimitiveObserver",PrimitiveObserver),PrimitiveObserver.prototype.Y=$i,PrimitiveObserver.prototype.subscribe=$i,PrimitiveObserver.prototype.unsubscribe=$i,PrimitiveObserver.prototype.Z=$i,PrimitiveObserver.prototype.K=$i;class PropertyAccessor{constructor(t,i){this.G=t,this._=i}X(){return this.G[this._]}Y(value){this.G[this._]=value}K(t){(function(value,t,i){if(g(value)&&void 0!==value.U){const s=value.U[t];s&&void 0!==s.K&&s.K(468|i)}})(this.G,this._,t)}}t("PropertyAccessor",PropertyAccessor);const ki={}.toString,IObserverLocator=t("IObserverLocator",DI.ds("IObserverLocator").th()),ITargetObserverLocator=t("ITargetObserverLocator",DI.ds("ITargetObserverLocator").th()),ITargetAccessorLocator=t("ITargetAccessorLocator",DI.ds("ITargetAccessorLocator").th());class Di{constructor(t,i,s,e){this.xo=[],this.ko=i,this.S=t,this.Eo=s,this.No=e}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}nt(t,i,s){if(2&t&&"object"==typeof i)return ProxyObserver.Bi(i,s);if((function(t){return 1==t.hs})(i))return i.cs(t).Bi(t,i,s);let e,n=i.U;return n&&s in n?n[s]:((e=this.Uo(t,i,s)).Do||(void 0===n&&(n=this.zo(i)),n[s]=e),e)}Ko(t){this.xo.push(t)}jr(t,i,s){return this.No.qo(t,i)?this.Eo.Ho(t,i,s)?this.nt(t,i,s):this.No.jr(t,this.S,i,s):2&t?ProxyObserver.Bi(i,s):new PropertyAccessor(i,s)}mo(t,i){return z(t,this.S,i)}wo(t,i){return K(t,this.S,i)}yo(t,i){return q(t,this.S,i)}zo(t){return t.U||this.Wo(t)}Wo(t){const value={};return Reflect.defineProperty(t,"$observers",{Ii:0,Yi:0,Cr:0,value})||Reporter.write(0,t),value}Qo(t,i,s,e){for(let n=0,h=this.xo.length;h>n;n++){const h=this.xo[n].nt(t,i,s,e);if(h)return h}return null}Uo(t,i,s){if(!(i instanceof Object))return new PrimitiveObserver(i,s);let e=0;if(this.Eo.qo(t,i)){const n=this.Eo.nt(t,this.S,this,i,s);if(null!==n)return n;if(null!==n)return n;e=1}switch(ki.call(i)){case"[object Array]":return"length"===s?this.mo(t,i).yt(t):this.ko.Ao(i,s);case"[object Map]":return"size"===s?this.wo(t,i).yt(t):this.ko.Ao(i,s);case"[object Set]":return"size"===s?this.yo(t,i).yt(t):this.ko.Ao(i,s)}const n=(function(t,name){let i=Object.getOwnPropertyDescriptor(t,name),s=Object.getPrototypeOf(t);for(;void 0===i&&null!==s;)i=Object.getOwnPropertyDescriptor(s,name),s=Object.getPrototypeOf(s);return i})(i,s);if(n&&(n.get||n.set)){if(n.get&&n.get.nt)return n.get.nt(i);return this.Qo(t,i,s,n)||(e?this.ko.Ao(i,s):(function(t,i,s,e,n,h,r){if(0==r.Yi)return s.Ao(n,h);if(r.get){const s=n.constructor.computed&&n.constructor.computed[h]||Pi;return r.set?s.oo?new GetterObserver(t,s,n,h,r,i,e):new CustomSetterObserver(n,h,r):new GetterObserver(t,s,n,h,r,i,e)}throw Reporter.error(18,h)})(t,this,this.ko,this.S,i,s,n))}return new SetterObserver(t,i,s)}}Di.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];let SelfObserver=t("SelfObserver",class{constructor(t,i,s,e){this.J=67108879&t,ProxyObserver.Ji(i)?(i.q.subscribe(this,s),this.G=i._i):this.G=i,this._=s,this.W=this.G[s],this.yr=void 0===this.G[e]?null:this.G[e],4&t&&(this.X=this.Zi)}B(t,i,s){this.Y(t,s)}X(){return this.W}Zi(){return this.G[this._]}Y(t,i){if(t!==this.W||(4&i)>0)if(0==(2048&i)){const s=this.W;i|=this.J,this.W=t,this.O(t,s,262144|i),null!==this.yr&&this.yr.call(this.G,t,s,i)}else this.W=t}K(t){const i=this.W,s=this.G[this._];t|=this.J,this.W=s,this.O(s,i,t),null!==this.yr&&this.yr.call(this.G,s,i,t)}});SelfObserver=t("SelfObserver",i([propertyObserver()],SelfObserver));const{oneTime:Mi,$s:Fi,ks:xi,Xe:Ei}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,i,s){s.Go=s.mode,s.mode=this.mode}Ps(t,i,s){s.mode=s.Go,s.Go=null}}t("BindingModeBehavior",BindingModeBehavior);class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Mi)}}t("OneTimeBindingBehavior",OneTimeBindingBehavior),BindingBehaviorResource.ki("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(Fi)}}t("ToViewBindingBehavior",ToViewBindingBehavior),BindingBehaviorResource.ki("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(xi)}}t("FromViewBindingBehavior",FromViewBindingBehavior),BindingBehaviorResource.ki("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Ei)}}t("TwoWayBindingBehavior",TwoWayBindingBehavior),BindingBehaviorResource.ki("twoWay",TwoWayBindingBehavior);const Ni={},Ui=BindingMode.ks;class DebounceBindingBehavior{bind(t,i,s,e=200){let n,h,r;s instanceof Binding?(n="handleChange",r=W,h=s.mode&Ui?32:16):(n="callSource",r=H,h=16),s.Tt=s[n],s.Tt._o=n,s[n]=r,s.It={jt:h,St:e,Bt:0,oldValue:Ni}}Ps(t,i,s){s[s.Tt._o]=s.Tt,s.Tt=null,PLATFORM.global.clearTimeout(s.It.Bt),s.It=null}}t("DebounceBindingBehavior",DebounceBindingBehavior),BindingBehaviorResource.ki("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.Jo=t}bind(t,i,s,...e){if(!s.Tr)throw Reporter.error(11);if(4===arguments.length){const name=e[0];this.Jo.vs(name,s),s.Xo=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let i=t.length;for(;i--;)this.Jo.vs(t[i],s);s.Xo=t}}}Ps(t,i,s){const name=s.Xo;if(s.Xo=null,Array.isArray(name)){const t=name;let i=t.length;for(;i--;)this.Jo.ps(t[i],s)}else this.Jo.ps(name,s)}}t("SignalBindingBehavior",SignalBindingBehavior),SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.ki("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,i,s,e=200){let n;s.Lt=s[n=s instanceof Binding?s.mode===BindingMode.Xe?"updateSource":"updateTarget":"callSource"],s.Lt._o=n,s[n]=Q,s.At={St:e,Pt:0,Bt:-1}}Ps(t,i,s){s[s.Lt._o]=s.Lt,s.Lt=null,PLATFORM.global.clearTimeout(s.At.Bt),s.At=null}}t("ThrottleBindingBehavior",ThrottleBindingBehavior),BindingBehaviorResource.ki("throttle",ThrottleBindingBehavior);const zi={for(t){const i={add(i){let s;null!==i&&"object"==typeof i?s=i:"string"==typeof i&&(s={Vt:i});const e=s.Vt;if(!e)throw Reporter.error(0);return s.Yo||(s.Yo=PLATFORM.Zo(e)),s.yr||(s.yr=`${e}Changed`),void 0===s.mode&&(s.mode=BindingMode.$s),t.bindables[e]=s,this},get:()=>t.bindables};if(void 0===t.bindables)t.bindables={};else if(Array.isArray(t.bindables)){const s=t.bindables;t.bindables={},s.forEach(i.add)}return i}},Ki="custom-element",qi="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.tl="ra",TargetedInstructionType.il="rb",TargetedInstructionType.sl="rc",TargetedInstructionType.el="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.no="rf",TargetedInstructionType.nl="rg",TargetedInstructionType.hl="rh",TargetedInstructionType.rl="ri",TargetedInstructionType.ol="rj",TargetedInstructionType.ll="rk"})(TargetedInstructionType||(TargetedInstructionType=t("TargetedInstructionType",{})));const ITargetedInstruction=t("ITargetedInstruction",DI.ds("createInterface").th()),Hi=Object.freeze({required:1,compiler:"default"}),Wi=Object.freeze({required:0,compiler:"default"});class Qi{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=Wi,this.bindables=PLATFORM.$t,this.instructions=PLATFORM.Pe,this.dependencies=PLATFORM.Pe,this.surrogates=PLATFORM.Pe,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.strategy=1}}const Gi=["name","template","cache","build","containerless","shadowOptions","hasSlots"],_i=["instructions","dependencies","surrogates"],INode=(Profiler.cl("AttachLifecycle"),Profiler.cl("BindLifecycle"),t("INode",DI.ds("INode").th())),IRenderLocation=t("IRenderLocation",DI.ds("IRenderLocation").th()),IDOM=t("IDOM",DI.ds("IDOM").th()),Ji=function(){throw Reporter.error(1e3)},Xi={addEventListener:Ji,appendChild:Ji,cloneNode:Ji,ul:Ji,createDocumentFragment:Ji,createElement:Ji,al:Ji,dispatchEvent:Ji,fl:Ji,dl:Ji,createTextNode:Ji,insertBefore:Ji,bl:Ji,gl:Ji,vl:Ji,pl:Ji,wi:Ji,remove:Ji,removeEventListener:Ji,setAttribute:Ji},NodeSequence=(t("DOM",Object.assign({},Xi,{get ml(){return 1==Reflect.get(this,"$initialized")},initialize(dom){if(this.ml)throw Reporter.error(1001);const t={},i=[dom];let s=Object.getPrototypeOf(dom);for(;s&&s!==Object.prototype;)i.unshift(s),s=Object.getPrototypeOf(s);for(s of i)Object.assign(t,Object.getOwnPropertyDescriptors(s));const e=[];let n,h;for(n in t)(h=t[n]).Yi&&h.Cr&&(Reflect.defineProperty(this,n,h),e.push(n));Reflect.set(this,"$domKeys",e),Reflect.set(this,"$initialized",1)},wl(){if(!this.ml)throw Reporter.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,Xi),Reflect.set(this,"$domKeys",PLATFORM.Pe),Reflect.set(this,"$initialized",0)}})),t("NodeSequence",{empty:{childNodes:PLATFORM.Pe,firstChild:null,lastChild:null,yl:()=>PLATFORM.Pe,insertBefore(t){},Cl(t){},remove(){}}}));class Yi{constructor($lifecycle,cache){this.ci=null,this.vi=null,this.xt=null,this.Qt=null,this.xt=null,this.Qt=null,this.Nt=null,this._t=null,this.Ol=null,this.Dh=null,this.Eh=null,this.Kh=null,this.$state=0,this.$scope=null,this.ii=0,this.$lifecycle=$lifecycle,this.cache=cache}Rl(t){this.ii=0,this.location=t}release(t){return this.ii=1,8&this.$state?this.cache.Il(this):!!this.Nh(t)}Bl(t){this.$scope=t,this.ui=dt,this.ei=pt}}class Zi{constructor(name,template,t){this.Tl=0,this.Sl=-1,this.cache=null,this.S=t,this.name=name,this.template=template}jl(t,i){t&&("*"===t?t=Zi.Al:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.Sl&&i||(this.Sl=t)),this.cache=this.Sl>0?[]:null,this.Tl=this.Sl>0}Il(t){return null!==this.cache&&this.Sl>this.cache.length}si(t){return this.Il(t)?(t.Xt(0),this.cache.push(t),1):0}create(t){const cache=this.cache;let i;if(null!==cache&&cache.length>0)return(i=cache.pop()).$state&=-129,i;if(i=new Yi(this.S,this),this.template.Ci(i,null,null,t),!i.$nodes)throw Reporter.error(90);return i}}Zi.Al=65535,(t=>{t.ui=ft,t.K=mt,t.ei=vt,t.Et=Z,t.Gt=st,t.Xt=ht,t.Mh=lt,t.Nh=ct})(Yi.prototype);const ITemplateCompiler=t("ITemplateCompiler",DI.ds("ITemplateCompiler").th());(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.Ui=1]="none",ViewCompileFlags[ViewCompileFlags.Pl=2]="surrogate",ViewCompileFlags[ViewCompileFlags.Ll=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags=t("ViewCompileFlags",{})));const ITemplateFactory=t("ITemplateFactory",DI.ds("ITemplateFactory").th());t("CompiledTemplate",class{constructor(dom,t,i,s){this.dom=dom,this.Vl=t,this.$l=i,this.kl=s}Ci(t,host,parts,i=0){const s=t.$nodes=this.$l.Dl();t.$context=this.kl,this.kl.Ci(i|=this.Vl.strategy,t,s.yl(),this.Vl,host,parts)}});const ts={kl:null,dom:null,Ci(t){t.$nodes=NodeSequence.empty,t.$context=null}},is="default",IInstructionRenderer=t("IInstructionRenderer",DI.ds("IInstructionRenderer").th()),IRenderer=t("IRenderer",DI.ds("IRenderer").th()),IRenderingEngine=t("IRenderingEngine",DI.ds("IRenderingEngine").fs(t=>t.singleton(ss)));class ss{constructor(t,i,s,e){this.Ml=new Map,this.Fl=t,this.xl=i,this.El=new Map,this.S=s,this.Nl=new Map,this.Ul=e.reduce((t,i)=>(t[i.name]=i,t),Object.create(null))}Pi(dom,t,i,s){if(!t)return null;let e=this.Nl.get(t);return e||(e=this.zl(dom,t,i,s),this.Nl.set(t,e)),e}Kl(dom,t,i){if(!t)return null;let s=this.El.get(t);if(!s){const e=buildTemplateDefinition(null,t),template=this.zl(dom,e,i,null);(s=new Zi(e.name,template,this.S)).jl(e.cache,1),this.El.set(t,s)}return s}Ti(t,i,s){let e=this.Ml.get(i);e||(e=rs.create(i),this.Ml.set(i,e)),e.ql(t,s,this.S)}zl(dom,t,i,s){if(null===i&&(i=this.Fl),null!==t.template){const e=createRenderContext(dom,i,t.dependencies,s);if(t.build.required){const i=t.build.compiler||is,compiler=this.Ul[i];if(void 0===compiler)throw Reporter.error(20,i);t=compiler.compile(dom,t,new RuntimeCompilationResources(e),ViewCompileFlags.Pl)}return this.xl.create(e,t)}return ts}}ss.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class es{constructor(){this.C=null}Ri(t){this.C=t}resolve(t,i){if(void 0===this.C)throw Reporter.error(50);return this.C}Z(){this.C=null}}class ns{Ri(t,parts){this.$l=t,this.Hl=parts||PLATFORM.$t}resolve(t,i){const s=this.$l;if(null==s)throw Reporter.error(50);if(!s.name||!s.name.length)throw Reporter.error(51);const e=this.Hl[s.name];if(e){const s=t.get(IRenderingEngine),dom=t.get(IDOM);return s.Kl(dom,e,i)}return s}Z(){this.$l=null,this.Hl=PLATFORM.$t}}let hs=class{constructor(t,customElement){this.pt=0,this.children=null,this.customElement=customElement,this.S=t,this.H=0}X(){return this.H||(this.H=1,this.customElement.Zt.Wl(()=>{this.Ql()}),this.children=wt(this.customElement.Zt.children)),this.children}Y(t){}flush(t){this.O(this.children,void 0,16|t),this.pt=0}subscribe(t){this.g(t)}unsubscribe(t){this.v(t)}Ql(){this.children=wt(this.customElement.Zt.children),"$childrenChanged"in this.customElement&&this.customElement.Gl(),this.S.T(this).catch(t=>{throw t}),this.pt=1}};hs=i([subscriberCollection(MutationKind.C)],hs);class rs{constructor(){}static create(t){const i=new rs;return i.bindables=t.description.bindables,i}ql(t,i,s){i.$lifecycle=s,"$projector"in i?this._l(t,s,i):this.Jl(t,i)}_l(t,i,s){this.Jl(t,s).Xl=new hs(i,s),Reflect.defineProperty(s,"$children",{Ii:0,get(){return this.U.Xl.X()}})}Jl(t,i){const s={},bindables=this.bindables,e=Object.getOwnPropertyNames(bindables);if(2&t)for(let n=0,h=e.length;h>n;++n){const name=e[n];s[name]=new SelfObserver(t,ProxyObserver.Bi(i).I,name,bindables[name].yr)}else{for(let n=0,h=e.length;h>n;++n){const name=e[n];s[name]=new SelfObserver(t,i,name,bindables[name].yr),4&t||yt(t,i,name)}Reflect.defineProperty(i,"$observers",{Ii:0,value:s})}return s}}const IProjectorLocator=t("IProjectorLocator",DI.ds("IProjectorLocator").th()),CustomElementResource=t("CustomElementResource",{name:Ki,tt:G,ms(t){return t.kind===this},Yl:_,ki(t,i=null){if(!t)throw Reporter.error(70);const s=null===i?class{}:i,e=s,n=buildTemplateDefinition(s,t),h=s.prototype;return e.kind=CustomElementResource,s.description=n,s.register=Ct,h.Zl=It,h.ui=at,h.K=mt,h.Et=Y,h.Gt=it,h.ei=gt,h.Xt=nt,h._t=null,h.Nt=null,h.Ol=null,h.Kh=null,h.$scope=null,h.$hooks=0,h.ci=null,h.vi=null,h.xt=null,h.Qt=null,h.Mh=rt,h.Nh=ot,h.Dh=null,h.Eh=null,h.Zt=null,"flush"in h&&(h.at=null),"binding"in h&&(h.$hooks|=4),"bound"in h&&(h.$hooks|=8,h.kh=null),"unbinding"in h&&(h.$hooks|=256),"unbound"in h&&(h.$hooks|=512,h.qh=null),"render"in h&&(h.$hooks|=1024),"created"in h&&(h.$hooks|=2),"attaching"in h&&(h.$hooks|=16),"attached"in h&&(h.$hooks|=32,h.Fh=null),"detaching"in h&&(h.$hooks|=64),"caching"in h&&(h.$hooks|=2048),"detached"in h&&(h.$hooks|=128,h.Uh=null),s}}),os={mode:"open"},CustomAttributeResource=(Profiler.cl("RenderLifecycle"),t("CustomAttributeResource",{name:qi,tt:J,ms(t){return t.kind===this},ki(t,i){const s=i,e=s,n=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.Pe:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.$s:defaultBindingMode,Vi:void 0===def.Vi?0:def.Vi,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},zi.for(t).get(),zi.for(def).get()),strategy:R(def.strategy)}})("string"==typeof t?{name:t}:t,s),h=s.prototype;return e.kind=CustomAttributeResource,e.description=n,s.register=Bt,h.Zl=Rt,h.ui=ut,h.K=mt,h.Et=X,h.Gt=tt,h.ei=bt,h.Xt=et,h._t=null,h.Nt=null,h.Ol=null,h.Kh=null,h.$scope=null,h.$hooks=0,h.$state=0,"flush"in h&&(h.at=null),"binding"in h&&(h.$hooks|=4),"bound"in h&&(h.$hooks|=8,h.kh=null),"unbinding"in h&&(h.$hooks|=256),"unbound"in h&&(h.$hooks|=512,h.qh=null),"created"in h&&(h.$hooks|=2),"attaching"in h&&(h.$hooks|=16),"attached"in h&&(h.$hooks|=32,h.Fh=null),"detaching"in h&&(h.$hooks|=64),"caching"in h&&(h.$hooks|=2048),"detached"in h&&(h.$hooks|=128,h.Uh=null),s}}));class If{constructor(t,i,s){this.value=0,this.pr=s,this.tc=null,this.ic=null,this.sc=t,this.ec=null,this.location=i,this.J=0}ri(t){this.J=67108879&t;const i=this.nc(t);this.pr.or(i,t),this.pr.ri(t,this.$scope)}Dt(t){this.pr.Dt(t)}Kt(t){this.pr.Kt(t)}bi(t){this.pr.bi(t)}Jt(t){null!==this.ec&&this.ec.release(t)&&(this.ec=null),null!==this.ic&&this.ic.release(t)&&(this.ic=null),this.pr.Jt(t)}hc(t,i,s){if(3&this.$state){s|=this.J;const t=ProxyObserver.Rt(this);if(448&s){const i=t.nc(s);t.pr.or(i,s)}else t.$lifecycle.T(t).catch(t=>{throw t})}}flush(t){t|=this.J;const i=ProxyObserver.Rt(this),s=i.nc(t);i.pr.or(s,t)}nc(t){return this.value?this.ec=this.rc(this.ec,this.sc,t):null!==this.tc?this.ic=this.rc(this.ic,this.tc,t):null}rc(t,i,s){return null===t&&(t=i.create(s)),t.Rl(this.location),t}}t("If",If),If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],i([bindable],If.prototype,"value",void 0),CustomAttributeResource.ki({name:"if",isTemplateController:1},If);class Else{constructor(t){this.$l=t}link(t){t.tc=this.$l}}t("Else",Else),Else.inject=[IViewFactory],CustomAttributeResource.ki({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,i,s){this.$l=s,this.oc=0,this.location=t,this.lc=null,this.cc=i,this.uc=[],this.key=null,this.Hi=0}ri(t){this.J=67108879&t,this.ac(t);let i=this.cc.ci;for(;null!==i;){if(ProxyObserver.Rt(i.target)===ProxyObserver.Rt(this)&&"items"===i.Br){this.fc=i.Ir;break}i=i.ai}this.dc=this.fc.xe.evaluate(t,this.$scope,null),this.Hi||(8&t)>0?this.bc(null,t):this.gc(null,t)}Dt(t){const{uc:i,location:s}=this;let e;for(let n=0,h=i.length;h>n;++n)(e=i[n]).Rl(s),e.Et(t)}Kt(t){const{uc:i}=this;let s;for(let e=0,n=i.length;n>e;++e)(s=i[e]).Gt(t),s.release(t)}bi(t){this.ac(t);const{uc:i}=this;let s;for(let e=0,n=i.length;n>e;++e)(s=i[e]).ei(t)}vc(t,i,s){s|=this.J;const e=ProxyObserver.Rt(this);e.ac(s),s|=16,e.Hi||(8&s)>0?e.bc(null,s):e.gc(null,s)}N(t,i){i|=this.J;const s=ProxyObserver.Rt(this);i|=464,s.Hi||(8&i)>0?s.bc(t,i):s.gc(t,i)}gc(t,i){const{uc:s,$lifecycle}=this;let e;if(3&this.$state){const{dc:n,$scope,$l:h,fc:r,pc:o}=this,l=s.length,c=r.count(i,o);if(c>l){s.length=c;for(let t=l;c>t;++t)s[t]=h.create(i)}else if(l>c){$lifecycle.zt();for(let t=c;l>t;++t)(e=s[t]).release(i),e.Gt(i);$lifecycle.Ht(i),$lifecycle.fi();for(let t=c;l>t;++t)(e=s[t]).ei(i);if($lifecycle.gi(i),s.length=c,0===c)return}else if(0===c)return;$lifecycle.ni(),r.Ne(i,o,null===t?(t,h,r)=>{(e=s[h]).ui(i,Scope.as(i,$scope,e.$scope&&e.$scope.ls[n]===r?e.$scope.ls:BindingContext.create(i,n,r)))}:(h,r,o)=>{(e=s[r]).ui(i,Scope.as(i,$scope,!e.$scope||t[r]!==r&&e.$scope.ls[n]!==o?BindingContext.create(i,n,o):e.$scope.ls))}),$lifecycle.oi(i)}if(12&this.$state){const{location:n}=this;if($lifecycle.kt(),null===t)for(let t=0,h=s.length;h>t;++t)(e=s[t]).Rl(n),e.Et(i);else for(let h=0,r=s.length;r>h;++h)t[h]!==h&&((e=s[h]).Rl(n),e.Et(i));$lifecycle.Ft(i)}}bc(t,i){const{$lifecycle,dc:s,$scope,$l:e,fc:n,pc:h}=this;let r=this.uc;if(null===t){if(3&this.$state){$lifecycle.zt();const t=r.length;let o;for(let s=0;t>s;++s)(o=r[s]).release(i),o.Gt(i);$lifecycle.Ht(i),$lifecycle.fi();for(let s=0;t>s;++s)(o=r[s]).ei(i);$lifecycle.gi(i);const l=n.count(i,h);r=this.uc=Array(l),$lifecycle.ni(),n.Ne(i,h,(t,n,h)=>{(o=r[n]=e.create(i)).ui(i,Scope.as(i,$scope,BindingContext.create(i,s,h)))}),$lifecycle.oi(i)}if(12&this.$state){const{location:t}=this;let s;$lifecycle.kt();const e=r.length;for(let n=0;e>n;++n)(s=r[n]).Rl(t),s.Et(i);$lifecycle.Ft(i)}}else{const n=t.length;let o;const l=t.gt,c=l.length;let u=0;if(3&this.$state){if(c>0){for($lifecycle.zt(),u=0;c>u;++u)(o=r[l[u]]).release(i),o.Gt(i);for($lifecycle.Ht(i),$lifecycle.fi(),u=0;c>u;++u)(o=r[l[u]]).ei(i);$lifecycle.gi(i),u=0;let s=0,e=0;for(l.sort();c>u;++u)for(r.splice(s=l[u]-u,1),e=0;n>e;++e)s>t[e]||--t[e]}for($lifecycle.ni(),u=0;n>u;++u)-2===t[u]&&((o=e.create(i)).ui(i,Scope.as(i,$scope,BindingContext.create(i,s,h[u]))),r.splice(u,0,o));if($lifecycle.oi(i),r.length!==n)throw Error(`viewsLen=${r.length}, mapLen=${n}`)}if(12&this.$state){const{location:s}=this,e=(function(t){const i=t.length,s=i+t.gt.length,e=255>s?Uint8Array:65535>s?Uint16Array:Uint32Array;i>us&&(us=i,ls=new e(i),cs=new e(i));let n=0,h=0,r=0,o=0,l=0,c=0,u=0,a=0;for(;i>o;o++)if(-2!==(h=t[o])){if(-2!==(r=t[l=ls[n]])&&h>r){cs[o]=l,ls[++n]=o;continue}for(c=0,u=n;u>c;)-2!==(r=t[ls[a=c+u>>1]])&&h>r?c=a+1:u=a;((r=t[ls[c]])>h||-2===r)&&(c>0&&(ls[o]=ls[c-1]),ls[c]=o)}const f=new e(o=++n);for(h=ls[n-1];n-- >0;)f[n]=h,h=cs[h];for(;o-- >0;)ls[o]=0;return f})(t),n=e.length;$lifecycle.zt(),$lifecycle.kt(),$lifecycle.Ut({Mh(){let h=s,l=n-1;for(u=t.length-1;u>=0;--u)if(-2===t[u]){(o=r[u]).$state|=4;let t=o.xt;for(;null!==t;)t.Et(8192|i),t=t.Nt;o.$nodes.insertBefore(h),o.$state|=24,o.$state&=-5,h=o.$nodes.firstChild}else if(0>l||1===n||u!==e[l]){(o=r[t[u]]).$state|=32;let s=o.Qt;for(;null!==s;)s.Gt(16384|i),s=s._t;for(o.$nodes.remove(),o.$state&=-57,o.$state|=4,s=o.xt;null!==s;)s.Et(8192|i),s=s.Nt;o.$nodes.insertBefore(h),o.$state|=24,o.$state&=-5,h=o.$nodes.firstChild}else h=(o=r[u]).$nodes.firstChild,--l},Dh:null}),$lifecycle.Ht(i),$lifecycle.Ft(i)}}}ac(t){const i=ProxyObserver.Rt(this),s=i.lc;if(3&i.$state){const e=i.lc=getCollectionObserver(t,i.$lifecycle,i.pc);s!==e&&s&&s.Ot(i),e&&e.Ct(i)}else s&&s.Ot(i)}}let ls,cs;t("Repeat",Repeat),Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],i([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.ki({name:"repeat",isTemplateController:1},Repeat);let us=0;class Replaceable{constructor(t,i){this.$l=t,this.currentView=this.$l.create(),this.currentView.Rl(i)}ri(t){this.currentView.ui(67108864|t,this.$scope)}Dt(t){this.currentView.Et(t)}Kt(t){this.currentView.Gt(t)}bi(t){this.currentView.ei(t)}}t("Replaceable",Replaceable),Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.ki({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,i){this.value=null,this.$l=t,this.currentView=this.$l.create(),this.currentView.Rl(i)}hc(){3&this.$state&&this.mc(2048)}ri(t){this.mc(t)}Dt(t){this.currentView.Et(t)}Kt(t){this.currentView.Gt(t)}bi(t){this.currentView.ei(t)}mc(t){const i=Scope.as(t,this.$scope,this.value);this.currentView.ui(t,i)}}t("With",With),With.inject=[IViewFactory,IRenderLocation],i([bindable],With.prototype,"value",void 0),CustomAttributeResource.ki({name:"with",isTemplateController:1},With);const ISanitizer=t("ISanitizer",DI.ds("ISanitizer").fs(t=>t.singleton(class{wc(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}})));class SanitizeValueConverter{constructor(t){this.yc=t}$s(t){return null==t?null:this.yc.wc(t)}}t("SanitizeValueConverter",SanitizeValueConverter),SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.ki("sanitize",SanitizeValueConverter),Profiler.cl("Aurelia.start"),Profiler.cl("Aurelia.stop");class Aurelia{constructor(t=DI.Cc()){this.Fl=t,this.Oc=[],this.Rc=[],this.Ic=[],this.Bc=0,this.Tc=null,Registration.C(Aurelia,this).register(t,Aurelia)}register(...t){return this.Fl.register(...t),this}app(t){const host=t.host;this.Fl.get(IDOMInitializer).initialize(t),Registration.C(INode,host).register(this.Fl);const i=512|t.strategy,s=1024|t.strategy;let component;const e=t.component;CustomElementResource.ms(e)?(this.Fl.register(e),component=this.Fl.get(CustomElementResource.tt(e.description.name))):component=e,component=ProxyObserver.Rt(component);const n=()=>{host.$au=this,this.Oc.includes(component)||(this.Tc=component,this.Oc.push(component),component.Zl(i,this.Fl,host)),component.ui(2048|i,null),component.Et(8192|i)};return this.Rc.push(n),this.Ic.push(()=>{component.Gt(16384|s),component.ei(4096|s),host.$au=null}),this.Bc&&n(),this}root(){return ProxyObserver.Gi(this.Tc)}start(){for(const t of this.Rc)t();return this.Bc=1,this}stop(){this.Bc=0;for(const t of this.Ic)t();return this}}t("Aurelia",Aurelia),PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=t("IDOMInitializer",DI.ds("IDOMInitializer").th());class as{constructor(t){const i=this.Sc={};t.forEach(t=>{i[t.$i]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Ci(t,dom,i,s,targets,e,host,parts){const n=e.instructions,h=this.Sc;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);let instructions,r,o;for(let e=0,l=targets.length;l>e;++e){r=targets[e];for(let l=0,c=(instructions=n[e]).length;c>l;++l)h[(o=instructions[l]).type].Ci(t,dom,i,s,r,o,parts)}if(host){const n=e.surrogates;for(let e=0,r=n.length;r>e;++e)h[(o=n[e]).type].Ci(t,dom,i,s,host,o,parts)}}}as.inject=[all(IInstructionRenderer)];let fs=class{Ci(t,dom,i,s,e,n){e[n.to]=n.value}};fs=i([instructionRenderer("re")],fs);let ds=class{Ci(t,dom,i,s,e,n){const h=i.Oi(s,e,n,null,null,e,1),component=i.get(G(n.res)),r=i.get(IRenderer).Sc,o=n.instructions;let l;component.Zl(t,i,e,n);for(let e=0,n=o.length;n>e;++e)r[(l=o[e]).type].Ci(t,dom,i,s,component,l);addComponent(s,component),h.Z()}};ds=i([instructionRenderer("ra")],ds);let bs=class{Ci(t,dom,i,s,e,n){const h=i.Oi(s,e,n),component=i.get(J(n.res)),r=i.get(IRenderer).Sc,o=n.instructions;let l;component.Zl(t,i);for(let e=0,n=o.length;n>e;++e)r[(l=o[e]).type].Ci(t,dom,i,s,component,l);addComponent(s,component),h.Z()}};bs=i([instructionRenderer("rb")],bs);let gs=class{constructor(t){this.jc=t}Ci(t,dom,i,s,e,n,parts){const h=this.jc.Kl(dom,n.def,i),r=i.Oi(s,e,n,h,parts,dom.ul(e),0),component=i.get(J(n.res)),o=i.get(IRenderer).Sc,l=n.instructions;let c;component.Zl(t,i),n.link&&component.link(s.Qt);for(let e=0,n=l.length;n>e;++e)o[(c=l[e]).type].Ci(t,dom,i,s,component,c);addComponent(s,component),r.Z()}};gs.inject=[IRenderingEngine],gs=i([instructionRenderer("rc")],gs);let vs=class{constructor(t,i){this.Ac=t,this.ht=i}Ci(t,dom,i,s,e,n){dom.remove(e);const h=n.instructions,toViewModel=n.toViewModel;let r,o,l;for(let t=0,e=h.length;e>t;++t)o=ensureExpression(this.Ac,(r=h[t]).from,48),addBinding(s,l=new LetBinding(o,r.to,this.ht,i,toViewModel))}};vs.inject=[IExpressionParser,IObserverLocator],vs=i([instructionRenderer("rd")],vs);let ps=class{constructor(t,i){this.Ac=t,this.ht=i}Ci(t,dom,i,s,e,n){const h=ensureExpression(this.Ac,n.from,153);addBinding(s,new Call(h,e,n.to,this.ht,i))}};ps.inject=[IExpressionParser,IObserverLocator],ps=i([instructionRenderer("rh")],ps);let ms=class{constructor(t){this.Ac=t}Ci(t,dom,i,s,e,n){const h=ensureExpression(this.Ac,n.from,1280);addBinding(s,new Ref(h,e,i))}};ms.inject=[IExpressionParser],ms=i([instructionRenderer("rj")],ms);let ws=class{constructor(t,i){this.Ac=t,this.ht=i}Ci(t,dom,i,s,e,n){let h;const r=ensureExpression(this.Ac,n.from,2048);addBinding(s,h=r.ze?new MultiInterpolationBinding(this.ht,r,e,n.to,BindingMode.$s,i):new InterpolationBinding(r.Ke,r,e,n.to,BindingMode.$s,this.ht,i,1))}};ws.inject=[IExpressionParser,IObserverLocator],ws=i([instructionRenderer("rf")],ws);let ys=class{constructor(t,i){this.Ac=t,this.ht=i}Ci(t,dom,i,s,e,n){const h=ensureExpression(this.Ac,n.from,48|n.mode);addBinding(s,new Binding(h,e,n.to,n.mode,this.ht,i))}};ys.inject=[IExpressionParser,IObserverLocator],ys=i([instructionRenderer("rg")],ys);let Cs=class{constructor(t,i){this.Ac=t,this.ht=i}Ci(t,dom,i,s,e,n){const h=ensureExpression(this.Ac,n.from,539);addBinding(s,new Binding(h,e,n.to,BindingMode.$s,this.ht,i))}};Cs.inject=[IExpressionParser,IObserverLocator],Cs=i([instructionRenderer("rk")],Cs);class Os{bind(t,i,s,e){s.target.key=e,s.target.Hi=1}Ps(t,i,s){s.target.key=null,s.target.Hi=0}}BindingBehaviorResource.ki("keyed",Os);const DefaultComponents=[t("IObserverLocatorRegistration",Di),t("ILifecycleRegistration",zt),t("IRendererRegistration",as)],IfRegistration=t("IfRegistration",If),ElseRegistration=t("ElseRegistration",Else),RepeatRegistration=t("RepeatRegistration",Repeat),ReplaceableRegistration=t("ReplaceableRegistration",Replaceable),WithRegistration=t("WithRegistration",With),SanitizeValueConverterRegistration=t("SanitizeValueConverterRegistration",SanitizeValueConverter),DebounceBindingBehaviorRegistration=t("DebounceBindingBehaviorRegistration",DebounceBindingBehavior),KeyedBindingBehaviorRegistration=t("KeyedBindingBehaviorRegistration",Os),OneTimeBindingBehaviorRegistration=t("OneTimeBindingBehaviorRegistration",OneTimeBindingBehavior),ToViewBindingBehaviorRegistration=t("ToViewBindingBehaviorRegistration",ToViewBindingBehavior),FromViewBindingBehaviorRegistration=t("FromViewBindingBehaviorRegistration",FromViewBindingBehavior),SignalBindingBehaviorRegistration=t("SignalBindingBehaviorRegistration",SignalBindingBehavior),ThrottleBindingBehaviorRegistration=t("ThrottleBindingBehaviorRegistration",ThrottleBindingBehavior),TwoWayBindingBehaviorRegistration=t("TwoWayBindingBehaviorRegistration",TwoWayBindingBehavior),DefaultResources=t("DefaultResources",[IfRegistration,ElseRegistration,RepeatRegistration,ReplaceableRegistration,WithRegistration,SanitizeValueConverterRegistration,DebounceBindingBehaviorRegistration,KeyedBindingBehaviorRegistration,OneTimeBindingBehaviorRegistration,ToViewBindingBehaviorRegistration,FromViewBindingBehaviorRegistration,SignalBindingBehaviorRegistration,ThrottleBindingBehaviorRegistration,TwoWayBindingBehaviorRegistration]),CallBindingRendererRegistration=t("CallBindingRendererRegistration",ps),CustomAttributeRendererRegistration=t("CustomAttributeRendererRegistration",bs),CustomElementRendererRegistration=t("CustomElementRendererRegistration",ds),InterpolationBindingRendererRegistration=t("InterpolationBindingRendererRegistration",ws),IteratorBindingRendererRegistration=t("IteratorBindingRendererRegistration",Cs),LetElementRendererRegistration=t("LetElementRendererRegistration",vs),DefaultRenderers=[t("PropertyBindingRendererRegistration",ys),IteratorBindingRendererRegistration,CallBindingRendererRegistration,t("RefBindingRendererRegistration",ms),InterpolationBindingRendererRegistration,t("SetPropertyRendererRegistration",fs),CustomElementRendererRegistration,CustomAttributeRendererRegistration,t("TemplateControllerRendererRegistration",gs),LetElementRendererRegistration];t("RuntimeBasicConfiguration",{register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Cc(){return this.register(DI.Cc())}}),t("InterpolationInstruction",class{constructor(from,to){this.type="rf",this.from=from,this.to=to}}),t("OneTimeBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}),t("ToViewBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.$s,this.oneTime=0,this.to=to}}),t("FromViewBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.ks,this.oneTime=0,this.to=to}}),t("TwoWayBindingInstruction",class{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.Xe,this.oneTime=0,this.to=to}}),t("IteratorBindingInstruction",class{constructor(from,to){this.type="rk",this.from=from,this.to=to}}),t("CallBindingInstruction",class{constructor(from,to){this.type="rh",this.from=from,this.to=to}}),t("RefBindingInstruction",class{constructor(from){this.type="rj",this.from=from}}),t("SetPropertyInstruction",class{constructor(value,to){this.type="re",this.to=to,this.value=value}}),t("HydrateElementInstruction",class{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}),t("HydrateAttributeInstruction",class{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}),t("HydrateTemplateController",class{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}}),t("LetElementInstruction",class{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}),t("LetBindingInstruction",class{constructor(from,to){this.type="ri",this.from=from,this.to=to}})}}});
