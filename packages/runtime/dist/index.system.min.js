System.register("runtime",["@aurelia/kernel"],function(t){"use strict";var Tracer,PLATFORM,Reporter,DI,Registration,isNumeric,kebabCase,toArray,nextId,compareNumber,RuntimeCompilationResources,IContainer,all,InstanceProvider,Profiler;return{t:[function(t){Tracer=t.Tracer,PLATFORM=t.PLATFORM,Reporter=t.Reporter,DI=t.DI,Registration=t.Registration,isNumeric=t.isNumeric,kebabCase=t.kebabCase,toArray=t.toArray,nextId=t.nextId,compareNumber=t.compareNumber,RuntimeCompilationResources=t.RuntimeCompilationResources,IContainer=t.IContainer,all=t.all,InstanceProvider=t.InstanceProvider,Profiler=t.Profiler}],i(){function i(t,i,s,e){var n,r,o=arguments.length,c=3>o?i:null===e?e=Object.getOwnPropertyDescriptor(i,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,s,e);else for(r=t.length-1;r>=0;r--)(n=t[r])&&(c=(3>o?n(c):o>3?n(i,s,c):n(i,s))||c);return o>3&&c&&Object.defineProperty(i,s,c),c}function subscriberCollection(){return function(t){const i=t.prototype;i.s=0,i.o=s,i.l=r,i.u=d,i.v=l,i.g=b,void 0===i.subscribe&&(i.subscribe=s),void 0===i.unsubscribe&&(i.unsubscribe=r)}}function proxySubscriberCollection(){return function(t){const i=t.prototype;i.p=0,i.m=e,i.C=o,i.O=f,i.B=a,i.R=p,void 0===i.I&&(i.I=e),void 0===i.S&&(i.S=o)}}function collectionSubscriberCollection(){return function(t){const i=t.prototype;i.A=0,i.T=n,i.k=c,i.j=v,i.P=u,i.V=m,void 0===i.L&&(i.L=n),void 0===i.M&&(i.M=c)}}function s(t){if(this.u(t))return 0;const i=this.s;return 0==(1&i)?(this.$=t,this.s|=1):0==(2&i)?(this.D=t,this.s|=2):0==(4&i)?(this.F=t,this.s|=4):0==(8&i)?(this.N=[t],this.s|=8):this.N.push(t),1}function e(t){if(this.O(t))return 0;const i=this.p;return 0==(1&i)?(this.U=t,this.p|=1):0==(2&i)?(this.K=t,this.p|=2):0==(4&i)?(this.H=t,this.p|=4):0==(8&i)?(this.W=[t],this.p|=8):this.W.push(t),1}function n(t){if(this.j(t))return 0;const i=this.A;return 0==(1&i)?(this.q=t,this.A|=1):0==(2&i)?(this.G=t,this.A|=2):0==(4&i)?(this.J=t,this.A|=4):0==(8&i)?(this.X=[t],this.A|=8):this.X.push(t),1}function r(t){const i=this.s;if((1&i)>0&&this.$===t)return this.$=void 0,this.s=1^(1|this.s),1;if((2&i)>0&&this.D===t)return this.D=void 0,this.s=2^(2|this.s),1;if((4&i)>0&&this.F===t)return this.F=void 0,this.s=4^(4|this.s),1;if((8&i)>0){const i=this.N;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.s=8^(8|this.s)),1}return 0}function o(t){const i=this.p;if((1&i)>0&&this.U===t)return this.U=void 0,this.p=1^(1|this.p),1;if((2&i)>0&&this.K===t)return this.K=void 0,this.p=2^(2|this.p),1;if((4&i)>0&&this.H===t)return this.H=void 0,this.p=4^(4|this.p),1;if((8&i)>0){const i=this.W;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.p=8^(8|this.p)),1}return 0}function c(t){const i=this.A;if((1&i)>0&&this.q===t)return this.q=void 0,this.A=1^(1|this.A),1;if((2&i)>0&&this.G===t)return this.G=void 0,this.A=2^(2|this.A),1;if((4&i)>0&&this.J===t)return this.J=void 0,this.A=4^(4|this.A),1;if((8&i)>0){const i=this.X;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.A=8^(8|this.A)),1}return 0}function l(){return 0!==this.s}function a(){return 0!==this.p}function u(){return 0!==this.A}function d(t){const i=this.s;if((1&i)>0&&this.$===t)return 1;if((2&i)>0&&this.D===t)return 1;if((4&i)>0&&this.F===t)return 1;if((8&i)>0){const i=this.N;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function f(t){const i=this.p;if((1&i)>0&&this.U===t)return 1;if((2&i)>0&&this.K===t)return 1;if((4&i)>0&&this.H===t)return 1;if((8&i)>0){const i=this.W;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function v(t){const i=this.A;if((1&i)>0&&this.q===t)return 1;if((2&i)>0&&this.G===t)return 1;if((4&i)>0&&this.J===t)return 1;if((8&i)>0){const i=this.X;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function b(t,i,s){const e=this.$,n=this.D,r=this.F;let o=this.N;if(void 0!==o&&(o=o.slice()),void 0!==e&&g(e,t,i,s,void 0===e.id?0:this[e.id]),void 0!==n&&g(n,t,i,s,void 0===n.id?0:this[n.id]),void 0!==r&&g(r,t,i,s,void 0===r.id?0:this[r.id]),void 0!==o){const{length:e}=o;let n;for(let r=0;e>r;++r)void 0!==(n=o[r])&&g(n,t,i,s,void 0===n.id?0:this[n.id])}}function g(t,i,s,e,n){t.Y(i,s,48^(48|e)|n)}function p(t,i,s,e){const n=this.U,r=this.K,o=this.H;let c=this.W;if(void 0!==c&&(c=c.slice()),void 0!==n&&n.Z(t,i,s,e),void 0!==r&&r.Z(t,i,s,e),void 0!==o&&o.Z(t,i,s,e),void 0!==c){const{length:n}=c;let r;for(let o=0;n>o;++o)void 0!==(r=c[o])&&r.Z(t,i,s,e)}}function m(t,i){const s=this.q,e=this.G,n=this.J;let r=this.X;if(void 0!==r&&(r=r.slice()),void 0!==s&&s.tt(t,i),void 0!==e&&e.tt(t,i),void 0!==n&&n.tt(t,i),void 0!==r){const{length:s}=r;let e;for(let n=0;s>n;++n)void 0!==(e=r[n])&&e.tt(t,i)}}function w(t){const i=BindingBehaviorResource.it(this.description.name);t.register(Registration.singleton(i,this)),t.register(Registration.singleton(this,this))}function y(t){const i=this.kind.it(this.description.name);t.register(Registration.singleton(i,this)),t.register(Registration.singleton(this,this))}function hasBind(t){return 2048==(2048&t.st)}function hasUnbind(t){return 4096==(4096&t.st)}function isLiteral(t){return 16384==(16384&t.st)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let i=0;t.length>i;++i)if(!isPureLiteral(t[i]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.st){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.et);case 17925:return 1}return 0}function C(t,i,s,e){const n=e.length,r=Array(n);for(let o=0;n>o;++o)r[o]=e[o].evaluate(t,i,s);return r}function O(t,i,name){const s=null==i?null:i[name];if("function"==typeof s)return s;if(!(2097152&t)&&null==s)return null;throw Reporter.error(207,i,name,s)}function B(strategy){return 0==(strategy&ct)?1|strategy:strategy}function R(t){if(t===Bt){const i=Ct.length=Ot.length=(Bt+=5)+1;for(let s=t+1;i>s;++s)Ct[s]=`_observer${s}`,Ot[s]=`_observerVersion${s}`}}function I(t){const i=null==this.ht?0:this.ht;let s=i;for(;s--&&this[Ct[s]]!==t;);if(-1===s){for(s=0;this[Ct[s]];)s++;this[Ct[s]]=t,t.subscribe(this),t[this.id]|=16,s===i&&(this.ht=s+1)}null==this.version&&(this.version=0),this[Ot[s]]=this.version,R(s)}function S(t,i,s){Tracer.enabled&&Tracer.nt(this.constructor.name,"observeProperty",yt.call(arguments));const e=this.ot.rt(t,i,s);this.ct(e),Tracer.enabled&&Tracer.lt()}function A(all){const t=this.ht;let i,s;if(1==all)for(let e=0;t>e;++e)null!=(s=this[i=Ct[e]])&&(this[i]=void 0,s.unsubscribe(this),s[this.id]&=-17);else{const e=this.version;for(let n=0;t>n;++n)this[Ot[n]]!==e&&null!=(s=this[i=Ct[n]])&&(this[i]=void 0,s.unsubscribe(this),s[this.id]&=-17)}}function T(t){const i=t.prototype;return i.hasOwnProperty("observeProperty")||(i.at=S),i.hasOwnProperty("unobserve")||(i.unobserve=A),i.hasOwnProperty("addObserver")||(i.ct=I),t}function connectable(t){return null==t?T:T(t)}function createIndexMap(t=0){const i=Array(t);let s=0;for(;t>s;)i[s]=s++;return i.ut=[],i.isIndexMap=1,i}function k(t,i){return t===i?0:(i=null===i?"null":""+i)>(t=null===t?"null":""+t)?-1:1}function j(t,i){return void 0===t?void 0===i?0:1:void 0===i?-1:0}function P(t,i,from,to,s){let e,n,r,o,c,l,a;for(l=from+1;to>l;l++){for(e=t[l],n=i[l],a=l-1;a>=from&&(o=i[a],(c=s(r=t[a],e))>0);a--)t[a+1]=r,i[a+1]=o;t[a+1]=e,i[a+1]=n}}function V(t,i,from,to,s){let e,n,r,o,c,l,a,u,d,f,v,b,g,p,m,w,y,C,O,B=0,R=0;for(;;){if(10>=to-from)return void P(t,i,from,to,s);o=i[from],c=i[to-1],r=t[B=from+(to-from>>1)],l=i[B],(a=s(e=t[from],n=t[to-1]))>0&&(f=e,v=o,e=n,o=c,n=f,c=v),0>(u=s(e,r))?(d=s(n,r))>0&&(f=n,v=c,n=r,c=l,r=f,l=v):(f=e,v=o,e=r,o=l,r=n,l=c,n=f,c=v),t[from]=e,i[from]=o,t[to-1]=r,i[to-1]=l,b=n,g=c,m=to-1,t[B]=t[p=from+1],i[B]=i[p],t[p]=b,i[p]=g;t:for(R=p+1;m>R;R++)if(y=i[R],0>(C=s(w=t[R],b)))t[R]=t[p],i[R]=i[p],t[p]=w,i[p]=y,p++;else if(C>0){do{if(--m==R)break t;C=s(O=t[m],b)}while(C>0);t[R]=t[m],i[R]=i[m],t[m]=w,i[m]=y,0>C&&(w=t[R],y=i[R],t[R]=t[p],i[R]=i[p],t[p]=w,i[p]=y,p++)}p-from>to-m?(V(t,i,m,to,s),to=p):(V(t,i,from,p,s),from=m)}}function enableArrayObservation(){for(const t of Kt)1!=Mt[t].dt&&def(Mt,t,{...Wt,value:Ht[t]})}function L(t,i,s){return void 0===s.ft&&(s.ft=new ArrayObserver(t,i,s)),s.ft}function enableMapObservation(){for(const t of Zt)1!=Gt[t].dt&&si(Gt,t,{...ii,value:ti[t]})}function M(t,i,s){return void 0===s.ft&&(s.ft=new MapObserver(t,i,s)),s.ft}function enableSetObservation(){for(const t of ai)1!=ni[t].dt&&fi(ni,t,{...di,value:ui[t]})}function E(t,i,s){return void 0===s.ft&&(s.ft=new SetObserver(t,i,s)),s.ft}function createComputedObserver(t,i,s,e,n,r,o){if(0==o.vt)return s.bt(n,r);if(o.get){const s=n.constructor.computed&&n.constructor.computed[r]||pi;return o.set?s.gt?new GetterObserver(t,s,n,r,o,i,e):new CustomSetterObserver(n,r,o):new GetterObserver(t,s,n,r,o,i,e)}throw Reporter.error(18,r)}function getCollectionObserver(t,i,s){const e=s instanceof Object?ProxyObserver.pt(s):s;switch(Ri.call(s)){case"[object Array]":return L(t,i,e);case"[object Map]":return M(t,i,e);case"[object Set]":return E(t,i,e)}}function $(t,i,s){const e=this.wt;PLATFORM.global.clearTimeout(e.yt),e.yt=PLATFORM.global.setTimeout(()=>{this.Ct(t,i,s)},e.Ot)}function D(t,i,s){const e=this.wt;if(PLATFORM.global.clearTimeout(e.yt),!(s&e.Bt))return e.oldValue=ki,void this.Ct(t,i,s);e.oldValue===ki&&(e.oldValue=i);const n=PLATFORM.global.setTimeout(()=>{const i=e.oldValue;e.oldValue=ki,this.Ct(t,i,s)},e.Ot);e.yt=n}function x(t){const i=this.Rt,s=+new Date-i.It;if(s>=i.Ot)return PLATFORM.global.clearTimeout(i.yt),i.yt=-1,i.It=+new Date,void this.St(t);if(i.newValue=t,-1===i.yt){const t=PLATFORM.global.setTimeout(()=>{i.yt=-1,i.It=+new Date,this.St(i.newValue)},i.Ot-s);i.yt=t}}function F(name){return`${Pi}:${name}`}function N(t){return t.At}function z(name){return`${Vi}:${name}`}function buildTemplateDefinition(t,i,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,strategy){const def=new Ei,s=arguments.length;switch(s){case 13:null!=strategy&&(def.strategy=B(strategy));case 12:null!=hasSlots&&(def.hasSlots=hasSlots);case 11:null!=shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!=containerless&&(def.containerless=containerless);case 9:null!=surrogates&&(def.surrogates=toArray(surrogates));case 8:null!=dependencies&&(def.dependencies=toArray(dependencies));case 7:null!=instructions&&(def.instructions=toArray(instructions));case 6:null!=bindables&&(def.bindables={...bindables});case 5:null!=build&&(def.build=1==build?Li:0==build?Mi:{...build});case 4:null!=cache&&(def.cache=cache);case 3:null!=template&&(def.template=template);case 2:null!=t&&(t.bindables&&(def.bindables=Bindable.for(t).get()),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions),t.prototype&&(def.Tt=new HooksDefinition(t.prototype))),"string"==typeof i?i.length>0&&(def.name=i):null!=i&&(def.strategy=B(i.strategy),$i.forEach(t=>{i[t]&&(def[t]=i[t])}),Di.forEach(t=>{i[t]&&(def[t]=toArray(i[t]))}),i.bindables&&(def.bindables===PLATFORM.kt?def.bindables=Bindable.for(i).get():Object.assign(def.bindables,i.bindables)))}return 2!==s||null===t||"string"!=typeof i&&"build"in i||(def.build=Li),def}function U(t){const i=this.description,s=this.kind.it(i.name),aliases=i.aliases;t.register(Registration.transient(s,this)),t.register(Registration.transient(this,this));for(let i=0,e=aliases.length;e>i;++i){const e=this.kind.it(aliases[i]);t.register(Registration.jt(s,e))}}function K(t){return t.Pt=1,t}function H(value){return!(void 0===value||1==value.done)}function W(t){const i=this.kind.it(this.description.name);t.register(Registration.transient(i,this)),t.register(Registration.transient(this,this))}function Q(t){return t.containerless=1,t}function createRenderContext(dom,t,dependencies,i){const s=t.Vt(),e=new InstanceProvider,n=new InstanceProvider,r=new InstanceProvider,o=new qi,c=new InstanceProvider,l=s.get(IRenderer);return dom.Lt(s,n),s.Mt(IViewFactory,o),s.Mt(IController,e),s.Mt(ITargetedInstruction,r),s.Mt(IRenderLocation,c),null!=dependencies&&s.register(...dependencies),i&&i.register(s),s.Et=function(t,i,targets,s,host,parts){l.Et(t,dom,this,i,targets,s,host,parts)},s.$t=function(t,i,l,a,parts,u){return e.Dt(t),n.Dt(i),r.Dt(l),a&&o.Dt(a,parts),u&&c.Dt(u),s},s.xt=function(){o.xt(),e.xt(),r.xt(),n.xt(),c.xt()},s}function q(t){const i=[];for(let s=0,e=t.length;e>s;++s){const component=N(t[s]);null!=component&&i.push(component)}return i}function instructionRenderer(t){return function(i){const s=function(...s){const e=new i(...s);return e.Ft=t,e};s.register=function(t){return Registration.singleton(IInstructionRenderer,s).register(t,IInstructionRenderer)};const e=Object.getOwnPropertyDescriptors(i);return Object.keys(e).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,e[t])}),s}}function ensureExpression(t,i,s){return"string"==typeof i?t.parse(i,s):i}function addBinding(t,i){Tracer.enabled&&Tracer.nt("Renderer","addBinding",is.call(arguments)),null==t.Nt?t.Nt=[i]:t.Nt.push(i),Tracer.enabled&&Tracer.lt()}function addComponent(t,component){Tracer.enabled&&Tracer.nt("Renderer","addComponent",is.call(arguments)),null==t.zt?t.zt=[component]:t.zt.push(component),Tracer.enabled&&Tracer.lt()}function getTarget(t){return void 0!==t.Ut?t.Ut:t}var G,J,X,BindingMode,BindingStrategy,State,Hooks,LifecycleFlags,ExpressionKind,ViewModelKind,Priority,BindingType,Y,DelegationStrategy,CollectionKind,TargetedInstructionType,ViewCompileFlags;t({BindingMode:void 0,BindingStrategy:void 0,BindingType:void 0,CollectionKind:void 0,DelegationStrategy:void 0,ExpressionKind:void 0,Hooks:void 0,LifecycleFlags:void 0,Priority:void 0,State:void 0,TargetedInstructionType:void 0,ViewCompileFlags:void 0,ViewModelKind:void 0,addBinding,addComponent,arePureLiterals,bindable(t,i){let s;const e=function(t,i){arguments.length>1&&(s.Kt=i),Bindable.for(t.constructor).add(s)};return arguments.length>1?(s={},void e(t,i)):"string"==typeof t?(s={},e):(s=t||{},e)},bindingBehavior:t=>i=>BindingBehaviorResource.Ht(t,i),buildTemplateDefinition,callsFunction:t=>128==(128&t.st),cloneIndexMap(t){const i=t.slice();return i.ut=t.ut.slice(),i.isIndexMap=1,i},collectionSubscriberCollection,computed:t=>(function(i,s){(i.computed||(i.computed={}))[s]=t}),connectable,connects:t=>32==(32&t.st),containerless:t=>void 0===t?Q:Q(t),copyIndexMap(t,i){const{length:s}=t,e=Array(s);let n=0;for(;s>n;)e[n]=t[n],++n;return e.ut=void 0!==i?i.slice(0):void 0!==t.ut?t.ut.slice(0):[],e.isIndexMap=1,e},createComputedObserver,createIndexMap,createRenderContext,customAttribute:t=>i=>CustomAttributeResource.Ht(t,i),customElement:t=>i=>CustomElementResource.Ht(t,i),disableArrayObservation(){for(const t of Kt)1==Mt[t].dt&&def(Mt,t,{...Wt,value:Ut[t]})},disableMapObservation(){for(const t of Zt)1==Gt[t].dt&&si(Gt,t,{...ii,value:Yt[t]})},disableSetObservation(){for(const t of ai)1==ni[t].dt&&fi(ni,t,{...di,value:li[t]})},dynamicOptions:t=>void 0===t?K:K(t),enableArrayObservation,enableMapObservation,enableSetObservation,ensureExpression,getCollectionObserver,hasAncestor:t=>256==(256&t.st),hasBind,hasUnbind,instructionRenderer,isAssignable:t=>8192==(8192&t.st),isIndexMap:value=>value instanceof Array&&1==value.isIndexMap,isLeftHandSide:t=>1024==(1024&t.st),isLiteral,isPrimary:t=>512==(512&t.st),isPureLiteral,isResource:t=>32768==(32768&t.st),isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},observes:t=>64==(64&t.st),proxySubscriberCollection,subscriberCollection,templateController:t=>i=>CustomAttributeResource.Ht("string"==typeof t?{isTemplateController:1,name:t}:{isTemplateController:1,...t},i),useShadowDOM(t){function i(t){return t.shadowOptions=s,t}const s="function"!=typeof t&&t?t:Ki;return"function"==typeof t?i(t):i},valueConverter:t=>i=>ValueConverterResource.Ht(t,i)});const Z=[].slice,tt=new WeakMap;let it=class{constructor(t,i,s){Tracer.enabled&&Tracer.nt("ProxySubscriberCollection","constructor",Z.call(arguments)),this.Wt=0,this.raw=i,this.key=s,this.Qt=t,this.subscribe=this.o,this.unsubscribe=this.l,i[s]instanceof Object&&(i[s]=ProxyObserver.qt(i[s]).Qt),Tracer.enabled&&Tracer.lt()}Gt(value,t){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.g(value,i,18|t))}_t(){return this.raw[this.key]}Jt(t){}};it=i([subscriberCollection()],it);let ProxyObserver=t("ProxyObserver",G=class{constructor(t){Tracer.enabled&&Tracer.nt("ProxyObserver","constructor",Z.call(arguments)),this.raw=t,this.Qt=new Proxy(t,this),tt.set(t,this.Qt),this.Xt={},Tracer.enabled&&Tracer.lt()}static Yt(t){if(void 0===t.Zt){const i=tt.get(t);return void 0===i?t:i}return t}static pt(t){const i=t.Zt;return void 0===i?t:i}static qt(t,i){let s;if(void 0===t.Zt){const i=tt.get(t);s=void 0===i?new G(t):i.ft}else s=t.ft;if(void 0===i)return s;let e=s.Xt[i];if(void 0===e){const n=this.pt(t);e=s.Xt[i]=new it(s.Qt,n,i)}return e}static ti(t){return void 0!==t.Zt}get(t,i,s){return"$observer"===i?this:"$raw"===i?t:t[i]}set(t,i,value,s){const e=t[i];return e!==value&&(t[i]=value,this.ii(value,e,i),this.R(i,value,e,18)),1}deleteProperty(t,i){const s=t[i];return Reflect.deleteProperty(t,i)?(void 0!==s&&(this.ii(void 0,s,i),this.R(i,void 0,s,18)),1):0}defineProperty(t,i,s){const e=t[i];return Reflect.defineProperty(t,i,s)?(s.value!==e&&(this.ii(s.value,e,i),this.R(i,s.value,e,18)),1):0}apply(t,i,s=PLATFORM.si){return Reflect.apply(t,t,s)}subscribe(t,i){if(void 0===i)this.m(t);else{let s=this.Xt[i];void 0===s&&(s=this.Xt[i]=new it(this.Qt,this.raw,i)),s.o(t)}}unsubscribe(t,i){if(void 0===i)this.C(t);else{const s=this.Xt[i];void 0!==s&&s.l(t)}}ii(t,i,s){const e=this.Xt[s];void 0!==e&&e.g(t,i,18)}});ProxyObserver=t("ProxyObserver",G=i([proxySubscriberCollection()],ProxyObserver));let SetterObserver=t("SetterObserver",class{constructor(t,i,s,e){this.ei=t,this.hi=s,this.ni=e,this.ri=void 0,this.oldValue=void 0,this.Wt=0,this.dt=0,this.oi=536870927&i,Tracer.enabled&&Tracer.lt()}_t(){return this.ri}Gt(t,i){if(this.dt){const s=this.ri;this.ri=t,0===this.ei.li.ci?0==(4096&i)&&this.g(t,s,this.oi|i):this.Wt||(this.Wt=1,this.oldValue=s,this.ei.li.add(this))}else this.hi[this.ni]=t}Jt(t){this.Wt=0;const i=this.ri,s=this.oldValue;this.oldValue=i,this.g(i,s,this.oi|t)}subscribe(t){0==this.dt&&(this.dt=1,this.ri=this.hi[this.ni],Reflect.defineProperty(this.hi,this.ni,{ai:1,vt:1,get:()=>this._t(),set:value=>{this.Gt(value,0)}})||Reporter.write(1,this.ni,this.hi)),this.o(t)}});SetterObserver=t("SetterObserver",i([subscriberCollection()],SetterObserver));const st=[].slice;(function(t){t[t.ui=250]="NilScope",t[t.di=252]="NilOverrideContext",t[t.fi=253]="NilParentScope"})(J||(J={}));class et{qt(t,i,s,e){return Tracer.enabled&&Tracer.nt("InternalObserversLookup","getOrCreate",st.call(arguments)),void 0===this[e]&&(this[e]=new SetterObserver(t,i,s,e)),Tracer.enabled&&Tracer.lt(),this[e]}}class BindingContext{constructor(t,value){if(this.vi=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}static create(t,i,value){const s=new BindingContext(i,value);return 2&t?ProxyObserver.qt(s).Qt:s}static get(t,name,i,s){if(Tracer.enabled&&Tracer.nt("BindingContext","get",st.call(arguments)),null==t)throw Reporter.error(250);let e=t.bi;if(i>0){for(;i>0;){if(null==e.gi)return void(Tracer.enabled&&Tracer.lt());i--,e=e.gi}return Tracer.enabled&&Tracer.lt(),name in e?e:e.Ut}for(;e&&!(name in e)&&!(e.Ut&&name in e.Ut);)e=e.gi;if(e)return Tracer.enabled&&Tracer.lt(),name in e?e:e.Ut;if((536870912&s)>0){const e=this.get(t.pi[BindingContext.mi],name,i,-536870913&s|16777216);if(null!==e)return Tracer.enabled&&Tracer.lt(),e}return 16777216&s?(Tracer.enabled&&Tracer.lt(),null):(Tracer.enabled&&Tracer.lt(),t.Ut||t.bi)}wi(t){return Tracer.enabled&&Tracer.nt("BindingContext","getObservers",st.call(arguments)),null==this.yi&&(this.yi=new et),Tracer.enabled&&Tracer.lt(),this.yi}}t("BindingContext",BindingContext),BindingContext.mi=null;class Scope{constructor(t,i){this.Ut=t,this.bi=i,this.pi=void 0}static create(t,i,s){return Tracer.enabled&&Tracer.nt("Scope","create",st.call(arguments)),Tracer.enabled&&Tracer.lt(),new Scope(i,null==s?OverrideContext.create(t,i,s):s)}static Ci(t,i){if(Tracer.enabled&&Tracer.nt("Scope","fromOverride",st.call(arguments)),null==i)throw Reporter.error(252);return Tracer.enabled&&Tracer.lt(),new Scope(i.Ut,i)}static Oi(t,i,s){if(Tracer.enabled&&Tracer.nt("Scope","fromParent",st.call(arguments)),null==i)throw Reporter.error(253);return Tracer.enabled&&Tracer.lt(),new Scope(s,OverrideContext.create(t,s,i.bi))}}t("Scope",Scope);class OverrideContext{constructor(t,i){this.vi=1,this.Ut=t,this.gi=i}static create(t,i,s){return Tracer.enabled&&Tracer.nt("OverrideContext","create",st.call(arguments)),Tracer.enabled&&Tracer.lt(),new OverrideContext(i,void 0===s?null:s)}wi(){return Tracer.enabled&&Tracer.nt("OverrideContext","getObservers",st.call(arguments)),void 0===this.yi&&(this.yi=new et),Tracer.enabled&&Tracer.lt(),this.yi}}t("OverrideContext",OverrideContext);const ISignaler=t("ISignaler",DI.Ri("ISignaler").Bi(t=>t.singleton(ht)));class ht{constructor(){this.Ii=Object.create(null)}Si(name,t){const i=this.Ii[name];if(void 0!==i)for(const s of i.keys())s.Y(void 0,void 0,16|t)}Ai(name,t){const i=this.Ii,s=i[name];void 0===s?i[name]=new Set([t]):s.add(t)}Ti(name,t){const i=this.Ii[name];i&&i.delete(t)}}const BindingBehaviorResource=t("BindingBehaviorResource",{name:"binding-behavior",it(name){return`${this.name}:${name}`},ki(t){return t.kind===this},Ht(t,i){const s=i,e=s,n="string"==typeof t?{name:t}:t;return e.kind=BindingBehaviorResource,e.description=n,s.register=w,s}}),ValueConverterResource=t("ValueConverterResource",{name:"value-converter",it(name){return`${this.name}:${name}`},ki(t){return t.kind===this},Ht(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=ValueConverterResource,s.description=e,s.register=y,s}});(function(t){t[t.ji=202]="NoLocator",t[t.Pi=203]="NoBehaviorFound",t[t.Vi=204]="BehaviorAlreadyApplied",t[t.Li=205]="NoConverterFound",t[t.Mi=206]="NoBinding",t[t.Ei=207]="NotAFunction",t[t.$i=208]="UnknownOperator",t[t.ui=250]="NilScope"})(X||(X={})),t("BindingBehavior",class{constructor(t,name,i){this.st=38962,this.Di=t,this.name=name,this.xi=i,this.Fi=BindingBehaviorResource.it(this.name)}evaluate(t,i,s){return this.Di.evaluate(t,i,s)}assign(t,i,s,value){return this.Di.assign(t,i,s,value)}connect(t,i,s){this.Di.connect(t,i,s)}bind(t,i,s){if(null==i)throw Reporter.error(250,this);if(!s)throw Reporter.error(206,this);const e=s.Ni;if(!e)throw Reporter.error(202,this);hasBind(this.Di)&&this.Di.bind(t,i,s);const n=this.Fi,r=e.get(n);if(!r)throw Reporter.error(203,this);void 0===s[n]?(s[n]=r,r.bind.call(r,t,i,s,...C(t,i,e,this.xi))):Reporter.write(204,this)}zi(t,i,s){const e=this.Fi;void 0!==s[e]?(s[e].zi(t,i,s),s[e]=void 0):Reporter.write(204,this),hasUnbind(this.Di)&&this.Di.zi(t,i,s)}accept(t){return t.Ui(this)}}),t("ValueConverter",class{constructor(t,name,i){this.st=36913,this.Di=t,this.name=name,this.xi=i,this.Ki=ValueConverterResource.it(this.name)}evaluate(t,i,s){if(!s)throw Reporter.error(202,this);const e=s.get(this.Ki);if(!e)throw Reporter.error(205,this);if("toView"in e){const n=this.xi,r=n.length,o=Array(r+1);o[0]=this.Di.evaluate(t,i,s);for(let e=0;r>e;++e)o[e+1]=n[e].evaluate(t,i,s);return e.Hi.call(e,...o)}return this.Di.evaluate(t,i,s)}assign(t,i,s,value){if(!s)throw Reporter.error(202,this);const e=s.get(this.Ki);if(!e)throw Reporter.error(205,this);return"fromView"in e&&(value=e.Wi.call(e,value,...C(t,i,s,this.xi))),this.Di.assign(t,i,s,value)}connect(t,i,s){if(null==i)throw Reporter.error(250,this);if(!s)throw Reporter.error(206,this);const e=s.Ni;if(!e)throw Reporter.error(202,this);this.Di.connect(t,i,s);const n=this.xi;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,i,s);const r=e.get(this.Ki);if(!r)throw Reporter.error(205,this);const o=r.Ii;if(void 0===o)return;const c=e.get(ISignaler);for(let t=0,i=o.length;i>t;++t)c.Ai(o[t],s)}zi(t,i,s){const e=s.Ni,n=e.get(this.Ki).Ii;if(void 0===n)return;const r=e.get(ISignaler);for(let t=0,i=n.length;i>t;++t)r.Ti(n[t],s)}accept(t){return t.Qi(this)}}),t("Assign",class{constructor(t,value){this.st=8208,this.target=t,this.value=value}evaluate(t,i,s){return this.target.assign(t,i,s,this.value.evaluate(t,i,s))}connect(t,i,s){}assign(t,i,s,value){return this.value.assign(t,i,s,value),this.target.assign(t,i,s,value)}accept(t){return t.qi(this)}}),t("Conditional",class{constructor(t,i,s){this.st=63,this.assign=PLATFORM.Gi,this._i=t,this.Ji=i,this.Xi=s}evaluate(t,i,s){return this._i.evaluate(t,i,s)?this.Ji.evaluate(t,i,s):this.Xi.evaluate(t,i,s)}connect(t,i,s){this._i.evaluate(t,i,null)?(this._i.connect(t,i,s),this.Ji.connect(t,i,s)):(this._i.connect(t,i,s),this.Xi.connect(t,i,s))}accept(t){return t.Yi(this)}});class AccessThis{constructor(t=0){this.st=1793,this.assign=PLATFORM.Gi,this.connect=PLATFORM.Gi,this.Zi=t}evaluate(t,i,s){if(null==i)throw Reporter.error(250,this);let e=i.bi,n=this.Zi;for(;n--&&e;)e=e.gi;return 1>n&&e?e.Ut:void 0}accept(t){return t.ts(this)}}t("AccessThis",AccessThis),AccessThis.ss=new AccessThis(0),AccessThis.es=new AccessThis(1);class AccessScope{constructor(name,t=0){this.st=10082,this.name=name,this.Zi=t}evaluate(t,i,s){return BindingContext.get(i,this.name,this.Zi,t)[this.name]}assign(t,i,s,value){const e=BindingContext.get(i,this.name,this.Zi,t);if(e instanceof Object)return void 0!==e.yi&&void 0!==e.yi[this.name]?(e.yi[this.name].Gt(value,t),value):e[this.name]=value}connect(t,i,s){const e=BindingContext.get(i,this.name,this.Zi,t);s.at(t,e,this.name)}accept(t){return t.hs(this)}}t("AccessScope",AccessScope);class AccessMember{constructor(t,name){this.st=9323,this.object=t,this.name=name}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);return null==e?e:e[this.name]}assign(t,i,s,value){const e=this.object.evaluate(t,i,s);return e instanceof Object?void 0!==e.yi&&void 0!==e.yi[this.name]?e.yi[this.name].Gt(value,t):e[this.name]=value:this.object.assign(t,i,s,{[this.name]:value}),value}connect(t,i,s){const e=this.object.evaluate(t,i,null);this.object.connect(t,i,s),e instanceof Object&&s.at(t,e,this.name)}accept(t){return t.ns(this)}}t("AccessMember",AccessMember),t("AccessKeyed",class{constructor(t,i){this.st=9324,this.object=t,this.key=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);if(e instanceof Object)return e[this.key.evaluate(t,i,s)]}assign(t,i,s,value){return this.object.evaluate(t,i,s)[this.key.evaluate(t,i,s)]=value}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),e instanceof Object){this.key.connect(t,i,s);const n=this.key.evaluate(t,i,null);Array.isArray(e)&&isNumeric(n)?2&t&&s.at(t,e,n):s.at(t,e,n)}}accept(t){return t.rs(this)}});class CallScope{constructor(name,t,i=0){this.st=1448,this.assign=PLATFORM.Gi,this.name=name,this.xi=t,this.Zi=i}evaluate(t,i,s){const e=C(t,i,s,this.xi),n=BindingContext.get(i,this.name,this.Zi,t),r=O(t,n,this.name);if(r)return r.apply(n,e)}connect(t,i,s){const e=this.xi;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.os(this)}}t("CallScope",CallScope);class CallMember{constructor(t,name,i){this.st=1161,this.assign=PLATFORM.Gi,this.object=t,this.name=name,this.xi=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s),n=C(t,i,s,this.xi),r=O(t,e,this.name);if(r)return r.apply(e,n)}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),O(-2097153&t,e,this.name)){const e=this.xi;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.cs(this)}}t("CallMember",CallMember),t("CallFunction",class{constructor(t,i){this.st=1162,this.assign=PLATFORM.Gi,this.ls=t,this.xi=i}evaluate(t,i,s){const e=this.ls.evaluate(t,i,s);if("function"==typeof e)return e.apply(null,C(t,i,s,this.xi));if(2097152&t||null!=e)throw Reporter.error(207,this)}connect(t,i,s){const e=this.ls.evaluate(t,i,null);if(this.ls.connect(t,i,s),"function"==typeof e){const e=this.xi;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.as(this)}}),t("Binary",class{constructor(t,i,s){this.st=46,this.assign=PLATFORM.Gi,this.us=t,this.left=i,this.right=s,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){const e=this.left.evaluate(t,i,null);this.left.connect(t,i,s),"&&"===this.us&&!e||"||"===this.us&&e||this.right.connect(t,i,s)}ds(t,i,s){return this.left.evaluate(t,i,s)&&this.right.evaluate(t,i,s)}fs(t,i,s){return this.left.evaluate(t,i,s)||this.right.evaluate(t,i,s)}vs(t,i,s){return this.left.evaluate(t,i,s)==this.right.evaluate(t,i,s)}bs(t,i,s){return this.left.evaluate(t,i,s)===this.right.evaluate(t,i,s)}gs(t,i,s){return this.left.evaluate(t,i,s)!=this.right.evaluate(t,i,s)}ps(t,i,s){return this.left.evaluate(t,i,s)!==this.right.evaluate(t,i,s)}ms(t,i,s){const e=this.right.evaluate(t,i,s);return"function"==typeof e?this.left.evaluate(t,i,s)instanceof e:0}ws(t,i,s){const e=this.right.evaluate(t,i,s);return e instanceof Object?this.left.evaluate(t,i,s)in e:0}ys(t,i,s){return this.left.evaluate(t,i,s)+this.right.evaluate(t,i,s)}Cs(t,i,s){return this.left.evaluate(t,i,s)-this.right.evaluate(t,i,s)}Os(t,i,s){return this.left.evaluate(t,i,s)*this.right.evaluate(t,i,s)}Bs(t,i,s){return this.left.evaluate(t,i,s)/this.right.evaluate(t,i,s)}Rs(t,i,s){return this.left.evaluate(t,i,s)%this.right.evaluate(t,i,s)}Is(t,i,s){return this.left.evaluate(t,i,s)<this.right.evaluate(t,i,s)}Ss(t,i,s){return this.left.evaluate(t,i,s)>this.right.evaluate(t,i,s)}As(t,i,s){return this.left.evaluate(t,i,s)<=this.right.evaluate(t,i,s)}Ts(t,i,s){return this.left.evaluate(t,i,s)>=this.right.evaluate(t,i,s)}accept(t){return t.ks(this)}}),t("Unary",class{constructor(t,i){this.st=39,this.assign=PLATFORM.Gi,this.us=t,this.Di=i,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){this.Di.connect(t,i,s)}js(t,i,s){this.Di.evaluate(t,i,s)}Ps(t,i,s){return typeof this.Di.evaluate(t,i,s)}Vs(t,i,s){return!this.Di.evaluate(t,i,s)}Cs(t,i,s){return-this.Di.evaluate(t,i,s)}ys(t,i,s){return+this.Di.evaluate(t,i,s)}accept(t){return t.Ls(this)}});class PrimitiveLiteral{constructor(value){this.st=17925,this.assign=PLATFORM.Gi,this.connect=PLATFORM.Gi,this.value=value}evaluate(t,i,s){return this.value}accept(t){return t.Ms(this)}}t("PrimitiveLiteral",PrimitiveLiteral),PrimitiveLiteral.Es=new PrimitiveLiteral(void 0),PrimitiveLiteral.$s=new PrimitiveLiteral(null),PrimitiveLiteral.Ds=new PrimitiveLiteral(1),PrimitiveLiteral.xs=new PrimitiveLiteral(0),PrimitiveLiteral.Fs=new PrimitiveLiteral(""),t("HtmlLiteral",class{constructor(parts){this.st=51,this.assign=PLATFORM.Gi,this.parts=parts}evaluate(t,i,s){const e=this.parts;let value,n="";for(let r=0,o=e.length;o>r;++r)null!=(value=e[r].evaluate(t,i,s))&&(n+=value);return n}connect(t,i,s){for(let e=0,n=this.parts.length;n>e;++e)this.parts[e].connect(t,i,s)}accept(t){return t.Ns(this)}});class ArrayLiteral{constructor(t){this.st=17955,this.assign=PLATFORM.Gi,this.elements=t}evaluate(t,i,s){const e=this.elements,n=e.length,r=Array(n);for(let o=0;n>o;++o)r[o]=e[o].evaluate(t,i,s);return r}connect(t,i,s){const e=this.elements;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.zs(this)}}t("ArrayLiteral",ArrayLiteral),ArrayLiteral.Fs=new ArrayLiteral(PLATFORM.si);class ObjectLiteral{constructor(t,i){this.st=17956,this.assign=PLATFORM.Gi,this.keys=t,this.values=i}evaluate(t,i,s){const e={},n=this.keys,r=this.values;for(let o=0,c=n.length;c>o;++o)e[n[o]]=r[o].evaluate(t,i,s);return e}connect(t,i,s){const e=this.values;for(let n=0,r=this.keys.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.Us(this)}}t("ObjectLiteral",ObjectLiteral),ObjectLiteral.Fs=new ObjectLiteral(PLATFORM.si,PLATFORM.si);class Template{constructor(t,i){this.st=17958,this.assign=PLATFORM.Gi,this.Ks=t,this.et=void 0===i?PLATFORM.si:i}evaluate(t,i,s){const e=this.et,n=this.Ks;let r=n[0];for(let o=0,c=e.length;c>o;++o)r+=e[o].evaluate(t,i,s),r+=n[o+1];return r}connect(t,i,s){const e=this.et;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s),n++}accept(t){return t.Hs(this)}}t("Template",Template),Template.Fs=new Template([""]),t("TaggedTemplate",class{constructor(t,i,s,e){this.st=1197,this.assign=PLATFORM.Gi,this.Ks=t,this.Ks.raw=i,this.ls=s,this.et=void 0===e?PLATFORM.si:e}evaluate(t,i,s){const e=this.et,n=e.length,r=Array(n);for(let o=0,c=n;c>o;++o)r[o]=e[o].evaluate(t,i,s);const o=this.ls.evaluate(t,i,s);if("function"!=typeof o)throw Reporter.error(207,this);return o.apply(null,[this.Ks].concat(r))}connect(t,i,s){const e=this.et;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s);this.ls.connect(t,i,s)}accept(t){return t.Ws(this)}}),t("ArrayBindingPattern",class{constructor(t){this.st=65556,this.elements=t}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.Qs(this)}}),t("ObjectBindingPattern",class{constructor(t,i){this.st=65557,this.keys=t,this.values=i}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.qs(this)}}),t("BindingIdentifier",class{constructor(name){this.st=65558,this.name=name}evaluate(t,i,s){return this.name}connect(t,i,s){}accept(t){return t.Gs(this)}});const nt={}.toString;t("ForOfStatement",class{constructor(t,i){this.st=6199,this.assign=PLATFORM.Gi,this._s=t,this.Js=i}evaluate(t,i,s){return this.Js.evaluate(t,i,s)}count(t,i){return ot[nt.call(i)](i)}Xs(t,i,s){rt[nt.call(i)](33554432|t,i,s)}connect(t,i,s){this._s.connect(t,i,s),this.Js.connect(t,i,s)}bind(t,i,s){hasBind(this.Js)&&this.Js.bind(t,i,s)}zi(t,i,s){hasUnbind(this.Js)&&this.Js.zi(t,i,s)}accept(t){return t.Ys(this)}}),t("Interpolation",class{constructor(parts,t){this.st=24,this.assign=PLATFORM.Gi,this.parts=parts,this.et=void 0===t?PLATFORM.si:t,this.Zs=this.et.length>1,this.te=this.et[0]}evaluate(t,i,s){if(this.Zs){const e=this.et,parts=this.parts;let n=parts[0];for(let r=0,o=e.length;o>r;++r)n+=e[r].evaluate(t,i,s),n+=parts[r+1];return n}{const parts=this.parts;return parts[0]+this.te.evaluate(t,i,s)+parts[1]}}connect(t,i,s){}accept(t){return t.ie(this)}});const rt={se(t,i,s){if(33554434==(33554434&t)){const t=ProxyObserver.pt(i),e=t.length;let n,r=0;for(;e>r;++r)(n=t[r])instanceof Object&&(n=t[r]=ProxyObserver.qt(n).Qt),s(t,r,n)}else for(let t=0,e=i.length;e>t;++t)s(i,t,i[t])},ee(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.entries())e[++n]=t;rt["se"](-33554433&t,e,s)},he(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.keys())e[++n]=t;rt["se"](-33554433&t,e,s)},ne(t,i,s){const e=Array(i);for(let t=0;i>t;++t)e[t]=t;rt["se"](-33554433&t,e,s)},re(t,i,s){},oe(t,i,s){}},ot={se:t=>t.length,ee:t=>t.size,he:t=>t.size,ne:t=>t,re:()=>0,oe:()=>0};(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Hi=2]="toView",BindingMode[BindingMode.Wi=4]="fromView",BindingMode[BindingMode.ce=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode=t("BindingMode",{}))),(function(BindingStrategy){BindingStrategy[BindingStrategy.le=1]="getterSetter",BindingStrategy[BindingStrategy.ae=2]="proxies"})(BindingStrategy||(BindingStrategy=t("BindingStrategy",{})));const ct=3;(function(State){State[State.ue=0]="none",State[State.de=1]="isBinding",State[State.fe=2]="isUnbinding",State[State.ve=4]="isBound",State[State.be=5]="isBoundOrBinding",State[State.ge=6]="isBoundOrUnbinding",State[State.pe=8]="isAttaching",State[State.me=16]="isDetaching",State[State.we=32]="isAttached",State[State.ye=40]="isAttachedOrAttaching",State[State.Ce=48]="isAttachedOrDetaching",State[State.Oe=64]="isMounted",State[State.Be=128]="isCached",State[State.Re=256]="needsBind",State[State.Ie=512]="needsUnbind",State[State.Se=1024]="needsAttach",State[State.Ae=2048]="needsDetach",State[State.Te=4096]="needsMount",State[State.ke=8192]="needsUnmount",State[State.je=16384]="hasLockedScope",State[State.Pe=32768]="canBeCached",State[State.Ve=65536]="inBoundQueue",State[State.Le=131072]="inUnboundQueue",State[State.Me=262144]="inAttachedQueue",State[State.Ee=524288]="inDetachedQueue",State[State.$e=1048576]="inMountQueue",State[State.De=2097152]="inUnmountQueue"})(State||(State=t("State",{}))),(function(Hooks){Hooks[Hooks.ue=1]="none",Hooks[Hooks.xe=2]="hasCreated",Hooks[Hooks.Fe=4]="hasBinding",Hooks[Hooks.Ne=8]="hasBound",Hooks[Hooks.ze=16]="hasAttaching",Hooks[Hooks.Ue=32]="hasAttached",Hooks[Hooks.Ke=64]="hasDetaching",Hooks[Hooks.He=128]="hasDetached",Hooks[Hooks.We=256]="hasUnbinding",Hooks[Hooks.Qe=512]="hasUnbound",Hooks[Hooks.qe=1024]="hasRender",Hooks[Hooks.Ge=2048]="hasCaching"})(Hooks||(Hooks=t("Hooks",{}))),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.ue=0]="none",LifecycleFlags[LifecycleFlags._e=536870927]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Je=536870912]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.Xe=15]="bindingStrategy",LifecycleFlags[LifecycleFlags.Ye=1]="getterSetterStrategy",LifecycleFlags[LifecycleFlags.Ze=2]="proxyStrategy",LifecycleFlags[LifecycleFlags.update=48]="update",LifecycleFlags[LifecycleFlags.th=16]="updateTargetInstance",LifecycleFlags[LifecycleFlags.ih=32]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524224]="from",LifecycleFlags[LifecycleFlags.sh=960]="fromFlush",LifecycleFlags[LifecycleFlags.eh=64]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.hh=128]="fromSyncFlush",LifecycleFlags[LifecycleFlags.nh=256]="fromTick",LifecycleFlags[LifecycleFlags.rh=512]="fromBatch",LifecycleFlags[LifecycleFlags.oh=1024]="fromStartTask",LifecycleFlags[LifecycleFlags.lh=2048]="fromStopTask",LifecycleFlags[LifecycleFlags.ah=4096]="fromBind",LifecycleFlags[LifecycleFlags.uh=8192]="fromUnbind",LifecycleFlags[LifecycleFlags.dh=16384]="fromAttach",LifecycleFlags[LifecycleFlags.fh=32768]="fromDetach",LifecycleFlags[LifecycleFlags.vh=65536]="fromCache",LifecycleFlags[LifecycleFlags.bh=131072]="fromDOMEvent",LifecycleFlags[LifecycleFlags.gh=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.ph=524288]="allowPublishRoundtrip",LifecycleFlags[LifecycleFlags.mh=1048576]="isPublishing",LifecycleFlags[LifecycleFlags.wh=2097152]="mustEvaluate",LifecycleFlags[LifecycleFlags.yh=4194304]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.Ch=8388608]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Oh=16777216]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Bh=33554432]="isOriginalArray",LifecycleFlags[LifecycleFlags.Rh=67108864]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Ih=134217728]="updateOneTimeBindings",LifecycleFlags[LifecycleFlags.Sh=268435456]="reorderNodes"})(LifecycleFlags||(LifecycleFlags=t("LifecycleFlags",{}))),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Ah=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Th=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind=t("ExpressionKind",{}))),(function(ViewModelKind){ViewModelKind[ViewModelKind.customElement=0]="customElement",ViewModelKind[ViewModelKind.customAttribute=1]="customAttribute",ViewModelKind[ViewModelKind.kh=2]="synthetic"})(ViewModelKind||(ViewModelKind=t("ViewModelKind",{})));const IController=t("IController",DI.Ri("IController").jh()),IViewFactory=t("IViewFactory",DI.Ri("IViewFactory").jh());class lt{get Ph(){let t=this;for(;void 0!==t.Vh&&t.Vh.Lh===this.Lh;)t=t.Vh;return t}get It(){let t=this;for(;void 0!==t.next&&t.next.Lh===this.Lh;)t=t.next;return t}constructor(t,i,s=16384,e=0){this.Mh=t,this.context=i,this.Lh=s,this.Eh=e,this.next=void 0,this.Vh=void 0,this.$h=0}Dh(t,i){return this.Mh===t&&this.context===i}call(t){if(void 0!==this.Mh&&(void 0!==this.context?this.Mh.call(this.context,t):this.Mh(t)),this.Eh)return this.xh(1);if(this.$h){const t=this.next;return this.next=void 0,t}return this.next}rotate(){if(void 0===this.Vh||this.Vh.Lh>this.Lh)return;const{Ph:t,It:i}=this,s=t.Vh,e=i.next,n=this.Vh;this.Vh=s,void 0!==s&&(s.next=this),i.next=t,t.Vh=i,n.next=e,void 0!==e&&(e.Vh=n)}link(t){this.Vh=t,void 0!==t.next&&(t.next.Vh=this),this.next=t.next,t.next=this}xh(t=0){if(this.$h=1,this.Mh=void 0,this.context=void 0,void 0!==this.Vh&&(this.Vh.next=this.next),void 0!==this.next&&(this.next.Vh=this.Vh),this.Vh=void 0,t){const{next:t}=this;return this.next=void 0,t}return this.next}}(function(Priority){Priority[Priority.Fh=32768]="preempt",Priority[Priority.high=28672]="high",Priority[Priority.bind=24576]="bind",Priority[Priority.Nh=20480]="attach",Priority[Priority.zh=16384]="normal",Priority[Priority.Uh=12288]="propagate",Priority[Priority.connect=8192]="connect",Priority[Priority.low=4096]="low"})(Priority||(Priority=t("Priority",{})));const ILifecycle=t("ILifecycle",DI.Ri("ILifecycle").Bi(t=>t.singleton(wt))),{min:at,max:ut}=Math;class dt{constructor(t){this.ei=t,this.ci=0,this.head=void 0,this.Kh=void 0}Hh(){++this.ci}end(t){void 0===t&&(t=0),0==--this.ci&&this.process(t)}Wh(t,i){this.Hh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Qh=this.Kh,this.Kh.qh=t),this.Kh=t,t.state|=65536}remove(t){void 0!==t.Qh&&(t.Qh.qh=t.qh),void 0!==t.qh&&(t.qh.Qh=t.Qh),t.Qh=void 0,t.qh=void 0,this.Kh===t&&(this.Kh=t.Qh),this.head===t&&(this.head=t.qh),t.state=65536^(65536|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Kh=void 0;do{s.state=65536^(65536|s.state),s.bound(t),i=s.qh,s.qh=void 0,s.Qh=void 0,s=i}while(void 0!==s)}}}class ft{constructor(t){this.ei=t,this.ci=0,this.head=void 0,this.Kh=void 0}Hh(){++this.ci}end(t){void 0===t&&(t=0),0==--this.ci&&this.process(t)}Wh(t,i){this.Hh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Gh=this.Kh,this.Kh._h=t),this.Kh=t,t.state|=131072}remove(t){void 0!==t.Gh&&(t.Gh._h=t._h),void 0!==t._h&&(t._h.Gh=t.Gh),t.Gh=void 0,t._h=void 0,this.Kh===t&&(this.Kh=t.Gh),this.head===t&&(this.head=t._h),t.state=131072^(131072|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Kh=void 0;do{s.state=131072^(131072|s.state),s.Jh(t),i=s._h,s._h=void 0,s.Gh=void 0,s=i}while(void 0!==s)}}}class vt{constructor(t){this.ei=t,this.ci=0,this.head=void 0,this.Kh=void 0}Hh(){++this.ci}end(t){void 0===t&&(t=0),0==--this.ci&&(this.ei.mount.process(t),this.process(t))}Wh(t,i){this.Hh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Xh=this.Kh,this.Kh.Yh=t),this.Kh=t,t.state|=262144}remove(t){void 0!==t.Xh&&(t.Xh.Yh=t.Yh),void 0!==t.Yh&&(t.Yh.Xh=t.Xh),t.Xh=void 0,t.Yh=void 0,this.Kh===t&&(this.Kh=t.Xh),this.head===t&&(this.head=t.Yh),t.state=262144^(262144|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Kh=void 0;do{s.state=262144^(262144|s.state),s.Zh(t),i=s.Yh,s.Yh=void 0,s.Xh=void 0,s=i}while(void 0!==s)}}}class bt{constructor(t){this.ei=t,this.ci=0,this.head=void 0,this.Kh=void 0}Hh(){++this.ci}end(t){void 0===t&&(t=0),0==--this.ci&&(this.ei.unmount.process(t),this.process(t))}Wh(t,i){this.Hh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.tn=this.Kh,this.Kh.in=t),this.Kh=t,t.state|=524288}remove(t){void 0!==t.tn&&(t.tn.in=t.in),void 0!==t.in&&(t.in.tn=t.tn),t.tn=void 0,t.in=void 0,this.Kh===t&&(this.Kh=t.tn),this.head===t&&(this.head=t.in),t.state=524288^(524288|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Kh=void 0;do{s.state=524288^(524288|s.state),s.sn(t),i=s.in,s.in=void 0,s.tn=void 0,s=i}while(void 0!==s)}}}class gt{constructor(t){this.ei=t,this.head=void 0,this.Kh=void 0}add(t){(2097152&t.state)>0?this.ei.unmount.remove(t):(void 0===this.head?this.head=t:(t.en=this.Kh,this.Kh.hn=t),this.Kh=t,t.state|=1048576)}remove(t){void 0!==t.en&&(t.en.hn=t.hn),void 0!==t.hn&&(t.hn.en=t.en),t.en=void 0,t.hn=void 0,this.Kh===t&&(this.Kh=t.en),this.head===t&&(this.head=t.hn),t.state=1048576^(1048576|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Kh=void 0;do{s.state=1048576^(1048576|s.state),s.mount(t),i=s.hn,s.hn=void 0,s.en=void 0,s=i}while(void 0!==s)}}}class pt{constructor(t){this.ei=t,this.head=void 0,this.Kh=void 0}add(t){(1048576&t.state)>0?this.ei.mount.remove(t):(void 0===this.head?this.head=t:(t.nn=this.Kh,this.Kh.rn=t),this.Kh=t,t.state|=2097152)}remove(t){void 0!==t.nn&&(t.nn.rn=t.rn),void 0!==t.rn&&(t.rn.nn=t.nn),t.nn=void 0,t.rn=void 0,this.Kh===t&&(this.Kh=t.nn),this.head===t&&(this.head=t.rn),t.state=2097152^(2097152|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Kh=void 0;do{s.state=2097152^(2097152|s.state),s.unmount(t),i=s.rn,s.rn=void 0,s.nn=void 0,s=i}while(void 0!==s)}}}class mt{constructor(t){this.ei=t,this.on=[],this.ci=0}Hh(){++this.ci}end(t){void 0===t&&(t=0),0==--this.ci&&this.process(t)}Wh(t,i){this.Hh(),t(),this.end(i)}add(t){this.on.push(t)}remove(t){const i=this.on.indexOf(t);i>-1&&this.on.splice(i,1)}process(t){for(t|=512;this.on.length>0;){const i=this.on.slice();this.on=[];const{length:s}=i;for(let e=0;s>e;++e)i[e].Jt(t)}}}class wt{get cn(){return 1e3/this.ln}get an(){return 1e3/this.un}set an(t){this.un=1e3/at(ut(0,at(this.dn,t)),60)}get dn(){return this.fn>0?1e3/this.fn:60}set dn(t){this.fn=60>t?1e3/at(ut(1,ut(this.an,t)),60):0}constructor(){this.vn=new lt(void 0,void 0,1/0),this.bn=void 0,this.gn=0,this.pn=0,this.mn=-1,this.wn=-1,this.yn=0,this.li=new mt(this),this.mount=new gt(this),this.unmount=new pt(this),this.bound=new dt(this),this.Jh=new ft(this),this.Zh=new vt(this),this.sn=new bt(this),this.fn=0,this.un=1e3/30,this.ln=0,this.Cn=new Promise(t=>{this.On=t}),this.Bn=(t=>{this.mn=-1,this.yn&&(this.Rn(960,t),this.yn&&-1===this.mn&&void 0!==this.vn.next&&(this.mn=PLATFORM.requestAnimationFrame(this.Bn)),++this.gn>1&&(this.On(t),this.Cn=new Promise(t=>{this.On=t})))}),this.In=0,this.Sn=0,this.An=0,this.Tn=1}static register(t){return Registration.singleton(ILifecycle,this).register(t)}kn(){this.yn?-1===this.mn&&void 0!==this.vn.next&&(this.wn=PLATFORM.now(),this.mn=PLATFORM.requestAnimationFrame(this.Bn)):(this.yn=1,-1===this.mn&&void 0!==this.vn.next&&(this.wn=PLATFORM.now(),this.mn=PLATFORM.requestAnimationFrame(this.Bn)))}jn(){this.yn?(this.yn=0,-1!==this.mn&&(PLATFORM.cancelAnimationFrame(this.mn),this.mn=-1)):-1!==this.mn&&(PLATFORM.cancelAnimationFrame(this.mn),this.mn=-1)}Pn(t,i,s=16384,e=0){const n=new lt(t,i,s,e);let r=this.vn,o=r.next;if(void 0===o)n.link(r);else{do{if(s>o.Lh||s===o.Lh&&e&&!o.Eh){n.link(r);break}r=o,o=o.next}while(void 0!==o);void 0===n.Vh&&n.link(r)}void 0===n.next&&(this.bn=n),this.kn()}Vn(t,i){let s=this.vn.next;for(;void 0!==s;)s=s.Dh(t,i)?s.xh():s.next}Rn(t,i=PLATFORM.now()){if(!this.pn){if(this.pn=1,i>this.wn){const s=this.ln=i-this.wn;if(this.fn>s+1)return;let e=0;this.Tn=this.An&&this.un>0?at(ut(this.Tn*(this.un/s),.1),10):1;const n=i+ut(this.un*this.Tn,1),r=i+ut(this.un*this.Tn*5,5),o=i+ut(this.un*this.Tn*15,15);t|=256;do{this.In=0;let i=this.vn.next;for(;void 0!==i;){if(10==++e&&(e=0,this.Sn)){const{Lh:t}=i,s=PLATFORM.now();if(t>4096){if(28672>t){if(s>=r){if(i.rotate(),null==i.It||null==i.It.next)break;i=i.It.next}}else if(s>=o){if(i.rotate(),null==i.It||null==i.It.next)break;i=i.It.next}}else if(s>=n){if(i.rotate(),null==i.It||null==i.It.next)break;i=i.It.next}}i=i.call(t)}}while(this.In>0);void 0===this.vn.next&&this.jn()}this.wn=i,this.pn=0}}Ln(t=1){this.Sn=1,this.An=1==t}Mn(){this.Sn=0}}const yt=[].slice,Ct=[],Ot=[];let Bt=-1;R(-1);let value=0;connectable.En=(t=>{t.id=++value});const Rt=[].slice,{oneTime,Hi:It,Wi:St}=BindingMode,At=It|oneTime;let Binding=t("Binding",class{constructor(t,i,s,mode,e,n){connectable.En(this),this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$scope=void 0,this.Ni=n,this.mode=mode,this.ot=e,this.$n=t,this.target=i,this.Dn=s,this.xn=void 0,this.oi=0}Fn(value,t){this.xn.Gt(value,t|=this.oi)}Nn(value,t){this.$n.assign(t|=this.oi,this.$scope,this.Ni,value)}Y(t,i,s){if(Tracer.enabled&&Tracer.nt("Binding","handleChange",Rt.call(arguments)),0!=(4&this.$state)){if((16&(s|=this.oi))>0){const i=this.xn._t();return(10082!==this.$n.st||this.ht>1)&&(t=this.$n.evaluate(s,this.$scope,this.Ni)),t!==i&&this.Fn(t,s),0==(this.mode&oneTime)&&(this.version++,this.$n.connect(s,this.$scope,this),this.unobserve(0)),void(Tracer.enabled&&Tracer.lt())}if((32&s)>0)return t!==this.$n.evaluate(s,this.$scope,this.Ni)&&this.Nn(t,s),void(Tracer.enabled&&Tracer.lt());throw Tracer.enabled&&Tracer.lt(),Reporter.error(15,s)}Tracer.enabled&&Tracer.lt()}zn(t,i){if(Tracer.enabled&&Tracer.nt("Binding","$bind",Rt.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Un(4096|t)}this.$state|=1,this.oi=536870927&t,this.$scope=i;let s=this.$n;hasBind(s)&&s.bind(t,i,this);let e=this.xn;e||(e=this.xn=this.mode&St?this.ot.rt(t,this.target,this.Dn):this.ot.Kn(t,this.target,this.Dn)),this.mode!==BindingMode.oneTime&&e.bind&&e.bind(t),s=this.$n,this.mode&At&&this.Fn(s.evaluate(t,i,this.Ni),t),this.mode&It&&s.connect(t,i,this),this.mode&St&&(e.subscribe(this),e[this.id]|=32),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Un(t){Tracer.enabled&&Tracer.nt("Binding","$unbind",Rt.call(arguments)),4&this.$state?(this.$state|=2,this.oi=0,hasUnbind(this.$n)&&this.$n.zi(t,this.$scope,this),this.$scope=void 0,this.xn.zi&&this.xn.zi(t),this.xn.unsubscribe&&(this.xn.unsubscribe(this),this.xn[this.id]&=-33),this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.lt()):Tracer.enabled&&Tracer.lt()}});Binding=t("Binding",i([connectable()],Binding));const Tt=[].slice;class Call{constructor(t,i,s,e,n){this.$state=0,this.Ni=n,this.$n=t,this.xn=e.rt(0,i,s)}Hn(t){Tracer.enabled&&Tracer.nt("Call","callSource",Tt.call(arguments));const i=this.$scope.bi;Object.assign(i,t);const s=this.$n.evaluate(2097152,this.$scope,this.Ni);for(const s in t)Reflect.deleteProperty(i,s);return Tracer.enabled&&Tracer.lt(),s}zn(t,i){if(Tracer.enabled&&Tracer.nt("Call","$bind",Tt.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Un(4096|t)}this.$state|=1,this.$scope=i,hasBind(this.$n)&&this.$n.bind(t,i,this),this.xn.Gt(t=>this.Hn(t),t),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Un(t){Tracer.enabled&&Tracer.nt("Call","$unbind",Tt.call(arguments)),4&this.$state?(this.$state|=2,hasUnbind(this.$n)&&this.$n.zi(t,this.$scope,this),this.$scope=void 0,this.xn.Gt(null,t),this.$state&=-7,Tracer.enabled&&Tracer.lt()):Tracer.enabled&&Tracer.lt()}at(t,i,s){}Y(t,i,s){}}t("Call",Call);const IExpressionParser=t("IExpressionParser",DI.Ri("IExpressionParser").Bi(t=>t.singleton(kt)));class kt{constructor(){this.Wn=Object.create(null),this.Qn=Object.create(null),this.qn=Object.create(null)}parse(t,i){switch(i){case 2048:{let s=this.qn[t];return void 0===s&&(s=this.qn[t]=this.Gn(t,i)),s}case 539:{let s=this.Qn[t];return void 0===s&&(s=this.Qn[t]=this.Gn(t,i)),s}default:{if(0===t.length&&55&i)return PrimitiveLiteral.Fs;let s=this.Wn[t];return void 0===s&&(s=this.Wn[t]=this.Gn(t,i)),s}}}cache(t){const{Qn:i,Wn:s,qn:e}=this;for(const n in t){const r=t[n];switch(r.st){case 24:e[n]=r;break;case 6199:i[n]=r;break;default:s[n]=r}}}Gn(t,i){try{const parts=t.split("."),i=parts[0];let s;s=i.endsWith("()")?new CallScope(i.replace("()",""),PLATFORM.si):new AccessScope(parts[0]);let e=1;for(;parts.length>e;){const t=parts[e];s=t.endsWith("()")?new CallMember(s,t.replace("()",""),PLATFORM.si):new AccessMember(s,parts[e]),e++}return s}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType._n=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Jn=1280]="IsRef",BindingType[BindingType.Xn=512]="IsIterator",BindingType[BindingType.Yn=256]="IsCustom",BindingType[BindingType.Zn=128]="IsFunction",BindingType[BindingType.tr=64]="IsEvent",BindingType[BindingType.ir=32]="IsProperty",BindingType[BindingType.sr=16]="IsCommand",BindingType[BindingType.er=48]="IsPropertyCommand",BindingType[BindingType.hr=80]="IsEventCommand",BindingType[BindingType.nr=6]="DelegationStrategyDelta",BindingType[BindingType.rr=15]="Command",BindingType[BindingType.or=49]="OneTimeCommand",BindingType[BindingType.cr=50]="ToViewCommand",BindingType[BindingType.lr=51]="FromViewCommand",BindingType[BindingType.ar=52]="TwoWayCommand",BindingType[BindingType.ur=53]="BindCommand",BindingType[BindingType.dr=86]="TriggerCommand",BindingType[BindingType.vr=87]="CaptureCommand",BindingType[BindingType.br=88]="DelegateCommand",BindingType[BindingType.gr=153]="CallCommand",BindingType[BindingType.pr=26]="OptionsCommand",BindingType[BindingType.mr=539]="ForCommand",BindingType[BindingType.wr=284]="CustomCommand"})(BindingType||(BindingType=t("BindingType",{})));const{Hi:jt,oneTime:Pt}=BindingMode;class MultiInterpolationBinding{constructor(t,i,s,e,mode,n){this.$state=0,this.$scope=void 0,this.yr=i,this.Ni=n,this.mode=mode,this.ot=t,this.target=s,this.Dn=e;const r=i.et,parts=this.parts=Array(r.length);for(let o=0,c=r.length;c>o;++o)parts[o]=new InterpolationBinding(r[o],i,s,e,mode,t,n,0===o)}zn(t,i){if(4&this.$state){if(this.$scope===i)return;this.Un(t)}this.$state|=4,this.$scope=i;const parts=this.parts;for(let s=0,e=parts.length;e>s;++s)parts[s].zn(t,i)}Un(t){if(!(4&this.$state))return;this.$state&=-5,this.$scope=void 0;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].Un(t)}}t("MultiInterpolationBinding",MultiInterpolationBinding);let InterpolationBinding=t("InterpolationBinding",class{constructor(t,i,s,e,mode,n,r,o){connectable.En(this),this.$state=0,this.yr=i,this.Cr=o,this.mode=mode,this.Ni=r,this.ot=n,this.$n=t,this.target=s,this.Dn=e,this.xn=n.Kn(0,s,e)}Fn(value,t){this.xn.Gt(value,16|t)}Y(t,i,s){if(!(4&this.$state))return;const e=this.xn._t(),n=this.yr.evaluate(s,this.$scope,this.Ni);n!==e&&this.Fn(n,s),0==(this.mode&Pt)&&(this.version++,this.$n.connect(s,this.$scope,this),this.unobserve(0))}zn(t,i){if(4&this.$state){if(this.$scope===i)return;this.Un(t)}this.$state|=4,this.$scope=i;const s=this.$n;s.bind&&s.bind(t,i,this),this.mode!==BindingMode.oneTime&&this.xn.bind&&this.xn.bind(t),this.Cr&&this.Fn(this.yr.evaluate(t,i,this.Ni),t),this.mode&jt&&s.connect(t,i,this)}Un(t){if(!(4&this.$state))return;this.$state&=-5;const i=this.$n;i.zi&&i.zi(t,this.$scope,this),this.xn.zi&&this.xn.zi(t),this.$scope=void 0,this.unobserve(1)}});InterpolationBinding=t("InterpolationBinding",i([connectable()],InterpolationBinding));const Vt=[].slice;let LetBinding=t("LetBinding",class{constructor(t,i,s,e,toViewModel=0){connectable.En(this),this.$state=0,this.$lifecycle=e.get(ILifecycle),this.$scope=void 0,this.Ni=e,this.ot=s,this.$n=t,this.target=null,this.Dn=i,this.toViewModel=toViewModel}Y(t,i,s){if(Tracer.enabled&&Tracer.nt("LetBinding","handleChange",Vt.call(arguments)),4&this.$state){if(16&s){const{target:t,Dn:i}=this,e=t[i],n=this.$n.evaluate(s,this.$scope,this.Ni);return n!==e&&(t[i]=n),void(Tracer.enabled&&Tracer.lt())}throw Reporter.error(15,s)}Tracer.enabled&&Tracer.lt()}zn(t,i){if(Tracer.enabled&&Tracer.nt("LetBinding","$bind",Vt.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Un(4096|t)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.Ut:i.bi;const s=this.$n;s.bind&&s.bind(t,i,this),this.target[this.Dn]=this.$n.evaluate(4096,i,this.Ni),this.$n.connect(t,i,this),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Un(t){if(Tracer.enabled&&Tracer.nt("LetBinding","$unbind",Vt.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.lt());this.$state|=2;const i=this.$n;i.zi&&i.zi(t,this.$scope,this),this.$scope=void 0,this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.lt()}});LetBinding=t("LetBinding",i([connectable()],LetBinding));const Lt=[].slice;class Ref{constructor(t,i,s){this.$state=0,this.$scope=void 0,this.Ni=s,this.$n=t,this.target=i}zn(t,i){if(Tracer.enabled&&Tracer.nt("Ref","$bind",Lt.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Un(4096|t)}this.$state|=1,this.$scope=i,hasBind(this.$n)&&this.$n.bind(t,i,this),this.$n.assign(t,this.$scope,this.Ni,this.target),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Un(t){if(Tracer.enabled&&Tracer.nt("Ref","$unbind",Lt.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.lt());this.$state|=2,this.$n.evaluate(t,this.$scope,this.Ni)===this.target&&this.$n.assign(t,this.$scope,this.Ni,null);const i=this.$n;hasUnbind(i)&&i.zi(t,this.$scope,this),this.$scope=void 0,this.$state&=-7,Tracer.enabled&&Tracer.lt()}at(t,i,s){}Y(t,i,s){}}t("Ref",Ref),(function(t){t[t._n=0]="None",t[t.Or=1]="Subscriber0",t[t.Br=2]="Subscriber1",t[t.Rr=4]="Subscriber2",t[t.Ir=8]="SubscribersRest",t[t.Sr=15]="Any"})(Y||(Y={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.ue=0]="none",DelegationStrategy[DelegationStrategy.Ar=1]="capturing",DelegationStrategy[DelegationStrategy.Tr=2]="bubbling"})(DelegationStrategy||(DelegationStrategy=t("DelegationStrategy",{}))),(function(CollectionKind){CollectionKind[CollectionKind.kr=8]="indexed",CollectionKind[CollectionKind.jr=4]="keyed",CollectionKind[CollectionKind.Pr=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind=t("CollectionKind",{})));let CollectionLengthObserver=t("CollectionLengthObserver",class{constructor(t){this.hi=t,this.ri=t.length}_t(){return this.hi.length}Gt(t,i){const{ri:s}=this;t!==s&&(this.ri=t,this.g(t,s,16|i))}});CollectionLengthObserver=t("CollectionLengthObserver",i([subscriberCollection()],CollectionLengthObserver));const Mt=Array.prototype,Et=Mt.push,$t=Mt.unshift,Dt=Mt.pop,xt=Mt.shift,Ft=Mt.splice,Nt=Mt.reverse,zt=Mt.sort,Ut={push:Et,unshift:$t,pop:Dt,shift:xt,splice:Ft,reverse:Nt,sort:zt},Kt=["push","unshift","pop","shift","splice","reverse","sort"],Ht={push(){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return Et.apply(t,arguments);const s=t.length,e=arguments.length;if(0===e)return s;t.length=i.Vr.length=s+e;let n=s;for(;t.length>n;)t[n]=arguments[n-s],i.Vr[n]=-2,n++;return i.Lr(),t.length},unshift(){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return $t.apply(t,arguments);const s=arguments.length,e=[];let n=0;for(;s>n;)e[n++]=-2;$t.apply(i.Vr,e);const r=$t.apply(t,arguments);return i.Lr(),r},pop(){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return Dt.call(t);const s=i.Vr,e=Dt.call(t),n=s.length-1;return s[n]>-1&&s.ut.push(s[n]),Dt.call(s),i.Lr(),e},shift(){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return xt.call(t);const s=i.Vr,e=xt.call(t);return s[0]>-1&&s.ut.push(s[0]),xt.call(s),i.Lr(),e},splice(t,i){let s=this;void 0!==s.Zt&&(s=s.Zt);const e=s.ft;if(void 0===e)return Ft.apply(s,arguments);const n=e.Vr;if(i>0){let s=isNaN(t)?0:t;const to=s+i;for(;to>s;)n[s]>-1&&n.ut.push(n[s]),s++}const r=arguments.length;if(r>2){const s=r-2,e=[];let o=0;for(;s>o;)e[o++]=-2;Ft.call(n,t,i,...e)}else 2===r&&Ft.call(n,t,i);const o=Ft.apply(s,arguments);return e.Lr(),o},reverse(){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return Nt.call(t),this;const s=t.length,e=s/2|0;let n=0;for(;n!==e;){const e=s-n-1,r=t[n],o=i.Vr[n],c=i.Vr[e];t[n]=t[e],i.Vr[n]=c,t[e]=r,i.Vr[e]=o,n++}return i.Lr(),this},sort(t){let i=this;void 0!==i.Zt&&(i=i.Zt);const s=i.ft;if(void 0===s)return zt.call(i,t),this;const e=i.length;if(2>e)return this;V(i,s.Vr,0,e,j);let n=0;for(;e>n&&void 0!==i[n];)n++;return void 0!==t&&"function"==typeof t||(t=k),V(i,s.Vr,0,n,t),s.Lr(),this}},Wt={Mr:1,ai:0,vt:1},def=Reflect.defineProperty;for(const t of Kt)def(Ht[t],"observing",{value:1,Mr:0,vt:0,ai:0});let Qt=0;const qt=[].slice;let ArrayObserver=t("ArrayObserver",class{constructor(t,i,s){Tracer.enabled&&Tracer.nt("ArrayObserver","constructor",qt.call(arguments)),Qt||(Qt=1,enableArrayObservation()),this.Wt=0,this.Er=s,this.oi=536870927&t,this.Vr=createIndexMap(s.length),this.ei=i,this.$r=void 0,Reflect.defineProperty(s,"$observer",{value:this,ai:0,Mr:1,vt:1}),Tracer.enabled&&Tracer.lt()}Lr(){this.ei.li.ci>0?this.Wt||(this.Wt=1,this.ei.li.add(this)):this.Jt(0)}Dr(){return void 0===this.$r&&(this.$r=new CollectionLengthObserver(this.Er)),this.$r}Jt(t){this.Wt=0;const{Vr:i,Er:s}=this,{length:e}=s;this.Vr=createIndexMap(e),this.V(i,16|this.oi),void 0!==this.$r&&this.$r.Gt(e,16)}});ArrayObserver=t("ArrayObserver",i([collectionSubscriberCollection()],ArrayObserver));let CollectionSizeObserver=t("CollectionSizeObserver",class{constructor(t){this.hi=t,this.ri=t.size}_t(){return this.hi.size}Gt(t,i){const{ri:s}=this;t!==s&&(this.ri=t,this.g(t,s,16|i))}});CollectionSizeObserver=t("CollectionSizeObserver",i([subscriberCollection()],CollectionSizeObserver));const Gt=Map.prototype,_t=Gt.set,Jt=Gt.clear,Xt=Gt.delete,Yt={set:_t,clear:Jt,delete:Xt},Zt=["set","clear","delete"],ti={set(t,value){let i=this;void 0!==i.Zt&&(i=i.Zt);const s=i.ft;if(void 0===s)return _t.call(i,t,value),this;const e=i.size;if(_t.call(i,t,value),i.size===e){let e=0;for(const n of i.entries()){if(n[0]===t)return n[1]!==value&&(s.Vr[e]=-2),this;e++}return this}return s.Vr[e]=-2,s.Lr(),this},clear(){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return Jt.call(t);if(t.size>0){const s=i.Vr;let e=0;for(const i of t.keys())s[e]>-1&&s.ut.push(s[e]),e++;Jt.call(t),s.length=0,i.Lr()}},delete(value){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return Xt.call(t,value);if(0===t.size)return 0;let s=0;const e=i.Vr;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.ut.push(e[s]),e.splice(s,1),Xt.call(t,value);s++}return i.Lr(),0}},ii={Mr:1,ai:0,vt:1},si=Reflect.defineProperty;for(const t of Zt)si(ti[t],"observing",{value:1,Mr:0,vt:0,ai:0});let ei=0;const hi=[].slice;let MapObserver=t("MapObserver",class{constructor(t,i,s){Tracer.enabled&&Tracer.nt("MapObserver","constructor",hi.call(arguments)),ei||(ei=1,enableMapObservation()),this.Wt=0,this.Er=s,this.oi=536870927&t,this.Vr=createIndexMap(s.size),this.ei=i,this.$r=void 0,s.ft=this,Tracer.enabled&&Tracer.lt()}Lr(){this.ei.li.ci>0?this.Wt||(this.Wt=1,this.ei.li.add(this)):this.Jt(0)}Dr(){return void 0===this.$r&&(this.$r=new CollectionSizeObserver(this.Er)),this.$r}Jt(t){this.Wt=0;const{Vr:i,Er:s}=this,{size:e}=s;this.Vr=createIndexMap(e),this.V(i,16|this.oi),void 0!==this.$r&&this.$r.Gt(e,16)}});MapObserver=t("MapObserver",i([collectionSubscriberCollection()],MapObserver));const ni=Set.prototype,ri=ni.add,oi=ni.clear,ci=ni.delete,li={add:ri,clear:oi,delete:ci},ai=["add","clear","delete"],ui={add(value){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return ri.call(t,value),this;const s=t.size;return ri.call(t,value),t.size===s?this:(i.Vr[s]=-2,i.Lr(),this)},clear(){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return oi.call(t);if(t.size>0){const s=i.Vr;let e=0;for(const i of t.keys())s[e]>-1&&s.ut.push(s[e]),e++;oi.call(t),s.length=0,i.Lr()}},delete(value){let t=this;void 0!==t.Zt&&(t=t.Zt);const i=t.ft;if(void 0===i)return ci.call(t,value);if(0===t.size)return 0;let s=0;const e=i.Vr;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.ut.push(e[s]),e.splice(s,1),ci.call(t,value);s++}return i.Lr(),0}},di={Mr:1,ai:0,vt:1},fi=Reflect.defineProperty;for(const t of ai)fi(ui[t],"observing",{value:1,Mr:0,vt:0,ai:0});let vi=0;const bi=[].slice;let SetObserver=t("SetObserver",class{constructor(t,i,s){Tracer.enabled&&Tracer.nt("SetObserver","constructor",bi.call(arguments)),vi||(vi=1,enableSetObservation()),this.Wt=0,this.Er=s,this.oi=536870927&t,this.Vr=createIndexMap(s.size),this.ei=i,this.$r=void 0,s.ft=this,Tracer.enabled&&Tracer.lt()}Lr(){this.ei.li.ci>0?this.Wt||(this.Wt=1,this.ei.li.add(this)):this.Jt(0)}Dr(){return void 0===this.$r&&(this.$r=new CollectionSizeObserver(this.Er)),this.$r}Jt(t){this.Wt=0;const{Vr:i,Er:s}=this,{size:e}=s;this.Vr=createIndexMap(e),this.V(i,16|this.oi),void 0!==this.$r&&this.$r.Gt(e,16)}});SetObserver=t("SetObserver",i([collectionSubscriberCollection()],SetObserver));const gi=[].slice,pi={xr:0,gt:0};let CustomSetterObserver=t("CustomSetterObserver",class{constructor(t,i,s){this.hi=t,this.ni=i,this.ri=this.oldValue=void 0,this.Fr=s,this.dt=0}Gt(t){Tracer.enabled&&Tracer.nt("CustomSetterObserver","setValue",gi.call(arguments)),this.Fr.set.call(this.hi,t),this.ri!==t&&(this.oldValue=this.ri,this.ri=t,this.g(t,this.oldValue,16)),Tracer.enabled&&Tracer.lt()}subscribe(t){this.dt||this.Nr(),this.o(t)}unsubscribe(t){this.l(t)}Nr(){Tracer.enabled&&Tracer.nt("CustomSetterObserver","convertProperty",gi.call(arguments)),this.dt=1,this.ri=this.hi[this.ni],Reflect.defineProperty(this.hi,this.ni,{set:t=>{this.Gt(t)}}),Tracer.enabled&&Tracer.lt()}});CustomSetterObserver=t("CustomSetterObserver",i([subscriberCollection()],CustomSetterObserver));let GetterObserver=t("GetterObserver",class{constructor(t,i,s,e,n,r,o){this.hi=s,this.ni=e,this.zr=0,this.ri=this.oldValue=void 0,this.Ur=[],this.Kr=[],this.Hr=i,this.Wr=0,this.Fr=n,this.Qt=new Proxy(s,(function t(i,s,e){Tracer.enabled&&Tracer.nt("computed","createGetterTraps",gi.call(arguments));const n={get(n,r,o){if(Tracer.enabled&&Tracer.nt("computed","get",gi.call(arguments)),e.Qr(r))return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,o);switch(mi.call(n)){case"[object Array]":if(e.qr(s.Gr(i,n)),"length"===r)return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,n);case"[object Map]":if(e.qr(s._r(i,n)),"size"===r)return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,n);case"[object Set]":if(e.qr(s.Jr(i,n)),"size"===r)return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,n);default:e.Xr(s.rt(i,n,r))}return Tracer.enabled&&Tracer.lt(),(function(i,s,e,n,r){const value=Reflect.get(s,e,s);return"function"==typeof value?s[e].bind(s):"object"!=typeof value||null===value?value:new Proxy(value,t(i,n,r))})(i,n,r,s,e)}};return Tracer.enabled&&Tracer.lt(),n})(t,r,this)),Reflect.defineProperty(s,e,{get:()=>this._t()})}Xr(t){-1===this.Ur.indexOf(t)&&this.Ur.push(t)}qr(t){-1===this.Kr.indexOf(t)&&this.Kr.push(t)}_t(){return Tracer.enabled&&Tracer.nt("GetterObserver","getValue",gi.call(arguments)),this.ri=0===this.Wr||this.zr?Reflect.apply(this.Fr.get,this.Qt,PLATFORM.si):Reflect.apply(this.Fr.get,this.hi,PLATFORM.si),Tracer.enabled&&Tracer.lt(),this.ri}subscribe(t){this.o(t),1==++this.Wr&&this.Yr(1)}unsubscribe(t){this.l(t),0==--this.Wr&&this.Zr()}Y(){const t=this.ri,i=this.Yr(0);t!==i&&this.g(i,t,16)}tt(){const t=this.ri,i=this.Yr(0);t!==i&&this.g(i,t,16)}Yr(t){Tracer.enabled&&Tracer.nt("GetterObserver","getValueAndCollectDependencies",gi.call(arguments));const i=!this.Hr.xr||t;return i&&(this.Zr(),this.zr=1),this.ri=this._t(),i&&(this.Ur.forEach(t=>{t.subscribe(this)}),this.Kr.forEach(t=>{t.L(this)}),this.zr=0),Tracer.enabled&&Tracer.lt(),this.ri}Qr(t){return!this.zr||"$observers"===t}Zr(){this.Ur.forEach(t=>{t.unsubscribe(this)}),this.Ur.length=0,this.Kr.forEach(t=>{t.M(this)}),this.Kr.length=0}});GetterObserver=t("GetterObserver",i([subscriberCollection()],GetterObserver));const mi={}.toString,IDirtyChecker=t("IDirtyChecker",DI.Ri("IDirtyChecker").Bi(t=>t.singleton(wi))),DirtyCheckSettings=t("DirtyCheckSettings",{io:6,disabled:0,warn:1,so:0,eo(){this.io=6,this.disabled=0,this.warn=1,this.so=0}});class wi{constructor(t){this.ho=0,this.no=[],this.ei=t}bt(t,i){if(DirtyCheckSettings.so)throw Reporter.error(800,i);return DirtyCheckSettings.warn&&Reporter.write(801,i),new DirtyCheckProperty(this,t,i)}ro(t){this.no.push(t),1===this.no.length&&this.ei.Pn(this.oo,this,4096)}removeProperty(t){this.no.splice(this.no.indexOf(t),1),0===this.no.length&&this.ei.Vn(this.oo,this)}oo(t){if(DirtyCheckSettings.disabled)return;if(++this.ho<DirtyCheckSettings.io)return;this.ho=0;const i=this.no,s=i.length;let e,n=0;for(;s>n;++n)(e=i[n]).co()&&e.flush(256)}}wi.inject=[ILifecycle];const yi=[].slice;let DirtyCheckProperty=t("DirtyCheckProperty",class{constructor(t,i,s){Tracer.enabled&&Tracer.nt("DirtyCheckProperty","constructor",yi.call(arguments)),this.hi=i,this.ni=s,this.lo=t,Tracer.enabled&&Tracer.lt()}co(){return this.oldValue!==this.hi[this.ni]}flush(t){const i=this.hi[this.ni];this.g(i,this.oldValue,16|t),this.oldValue=i}subscribe(t){this.v()||(this.oldValue=this.hi[this.ni],this.lo.ro(this)),this.o(t)}unsubscribe(t){this.l(t)&&!this.v()&&this.lo.removeProperty(this)}});DirtyCheckProperty=t("DirtyCheckProperty",i([subscriberCollection()],DirtyCheckProperty));const Ci=[].slice,Oi=PLATFORM.Gi;class PrimitiveObserver{constructor(t,i){this.ao=1,Tracer.enabled&&Tracer.nt("PrimitiveObserver","constructor",Ci.call(arguments)),"length"===i?(this.hi=t,this._t=this.uo):this._t=this.do,Tracer.enabled&&Tracer.lt()}uo(){return this.hi.length}do(){}}t("PrimitiveObserver",PrimitiveObserver),PrimitiveObserver.prototype.Gt=Oi,PrimitiveObserver.prototype.subscribe=Oi,PrimitiveObserver.prototype.unsubscribe=Oi,PrimitiveObserver.prototype.xt=Oi;const Bi=[].slice;class PropertyAccessor{constructor(t,i){Tracer.enabled&&Tracer.nt("PropertyAccessor","constructor",Bi.call(arguments)),this.hi=t,this.ni=i,Tracer.enabled&&Tracer.lt()}_t(){return this.hi[this.ni]}Gt(value){this.hi[this.ni]=value}}t("PropertyAccessor",PropertyAccessor);const Ri={}.toString,IObserverLocator=t("IObserverLocator",DI.Ri("IObserverLocator").jh()),ITargetObserverLocator=t("ITargetObserverLocator",DI.Ri("ITargetObserverLocator").jh()),ITargetAccessorLocator=t("ITargetAccessorLocator",DI.Ri("ITargetAccessorLocator").jh());class ObserverLocator{constructor(t,i,s,e){this.fo=[],this.lo=i,this.ei=t,this.vo=s,this.bo=e}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}rt(t,i,s){if(2&t&&"object"==typeof i)return ProxyObserver.qt(i,s);if((function(t){return 1==t.vi})(i))return i.wi(t).qt(this.ei,t,i,s);let e,n=i.yi;return n&&s in n?n[s]:((e=this.po(t,i,s)).ao||(void 0===n&&(n=this.mo(i)),n[s]=e),e)}wo(t){this.fo.push(t)}Kn(t,i,s){return this.bo.yo(t,i)?this.vo.Co(t,i,s)?this.rt(t,i,s):this.bo.Kn(t,this.ei,i,s):2&t?ProxyObserver.qt(i,s):new PropertyAccessor(i,s)}Gr(t,i){return L(t,this.ei,i)}_r(t,i){return M(t,this.ei,i)}Jr(t,i){return E(t,this.ei,i)}mo(t){return t.yi||this.Oo(t)}Oo(t){const value={};return Reflect.defineProperty(t,"$observers",{ai:0,vt:0,Mr:0,value})||Reporter.write(0,t),value}Bo(t,i,s,e){for(let n=0,r=this.fo.length;r>n;n++){const r=this.fo[n].rt(t,i,s,e);if(null!=r)return r}return null}po(t,i,s){if(!(i instanceof Object))return new PrimitiveObserver(i,s);let e=0;if(this.vo.yo(t,i)){const n=this.vo.rt(t,this.ei,this,i,s);if(null!=n)return n;e=1}switch(Ri.call(i)){case"[object Array]":return"length"===s?this.Gr(t,i).Dr():this.lo.bt(i,s);case"[object Map]":return"size"===s?this._r(t,i).Dr():this.lo.bt(i,s);case"[object Set]":return"size"===s?this.Jr(t,i).Dr():this.lo.bt(i,s)}const n=(function(t,name){let i=Object.getOwnPropertyDescriptor(t,name),s=Object.getPrototypeOf(t);for(;null==i&&null!=s;)i=Object.getOwnPropertyDescriptor(s,name),s=Object.getPrototypeOf(s);return i})(i,s);if(n&&(n.get||n.set)){if(n.get&&n.get.rt)return n.get.rt(i);return this.Bo(t,i,s,n)||(e?this.lo.bt(i,s):createComputedObserver(t,this,this.lo,this.ei,i,s,n))}return new SetterObserver(this.ei,t,i,s)}}t("ObserverLocator",ObserverLocator),ObserverLocator.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];let SelfObserver=t("SelfObserver",class{constructor(t,i,s,e,n){this.ei=t;let r=0;ProxyObserver.ti(s)?(r=1,s.ft.subscribe(this,e),this.hi=s.Zt):this.hi=s,this.ni=e,this.ri=void 0,this.oldValue=void 0,this.Wt=0,this.Ro=this.hi[n],void 0===this.Ro?this.dt=0:(this.dt=1,this.ri=this.hi[this.ni],r||this.Io()),this.oi=536870927&i}Y(t,i,s){this.Gt(t,s)}_t(){return this.ri}Gt(t,i){if(this.dt){const s=this.ri;this.ri=t,0===this.ei.li.ci?0==(4096&i)&&(this.g(t,s,this.oi|i),void 0!==this.Ro&&this.Ro.call(this.hi,t,s,this.oi|i)):this.Wt||(this.Wt=1,this.oldValue=s,this.ei.li.add(this))}else this.hi[this.ni]=t}subscribe(t){0==this.dt&&(this.dt=1,this.ri=this.hi[this.ni],this.Io()),this.o(t)}Io(){Reflect.defineProperty(this.hi,this.ni,{ai:1,vt:1,get:()=>this.ri,set:value=>{this.Gt(value,0)}})||Reporter.write(1,this.ni,this.hi)}});SelfObserver=t("SelfObserver",i([subscriberCollection()],SelfObserver));const{oneTime:Ii,Hi:Si,Wi:Ai,ce:Ti}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,i,s){s.So=s.mode,s.mode=this.mode}zi(t,i,s){s.mode=s.So,s.So=null}}t("BindingModeBehavior",BindingModeBehavior);class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Ii)}}t("OneTimeBindingBehavior",OneTimeBindingBehavior),BindingBehaviorResource.Ht("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(Si)}}t("ToViewBindingBehavior",ToViewBindingBehavior),BindingBehaviorResource.Ht("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Ai)}}t("FromViewBindingBehavior",FromViewBindingBehavior),BindingBehaviorResource.Ht("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Ti)}}t("TwoWayBindingBehavior",TwoWayBindingBehavior),BindingBehaviorResource.Ht("twoWay",TwoWayBindingBehavior);const ki={},ji=BindingMode.Wi;class DebounceBindingBehavior{bind(t,i,s,e=200){let n,r,o;s instanceof Binding?(n="handleChange",o=D,r=s.mode&ji?32:16):(n="callSource",o=$,r=16),s.Ct=s[n],s.Ct.Ao=n,s[n]=o,s.wt={Bt:r,Ot:e,yt:0,oldValue:ki}}zi(t,i,s){s[s.Ct.Ao]=s.Ct,s.Ct=null,PLATFORM.global.clearTimeout(s.wt.yt),s.wt=null}}t("DebounceBindingBehavior",DebounceBindingBehavior),BindingBehaviorResource.Ht("debounce",DebounceBindingBehavior);class PriorityBindingBehavior{static register(t){t.register(Registration.singleton("binding-behavior:priority",this)),t.register(Registration.singleton(this,this))}bind(t,i=4096){const{xn:s}=t;if(null!=s)if(this[t.id]=s.Lh,"number"==typeof i)s.Lh=i;else switch(i){case"preempt":s.Lh=32768;break;case"high":s.Lh=28672;break;case"bind":s.Lh=24576;break;case"attach":s.Lh=20480;break;case"normal":s.Lh=16384;break;case"propagate":s.Lh=12288;break;case"connect":s.Lh=8192;break;case"low":s.Lh=4096}}zi(t){null!=t.xn&&(t.xn.Lh=this[t.id])}}t("PriorityBindingBehavior",PriorityBindingBehavior),PriorityBindingBehavior.kind=BindingBehaviorResource,PriorityBindingBehavior.description=Object.freeze({name:"priority"});class SignalBindingBehavior{constructor(t){this.To=t}bind(t,i,s,...e){if(!s.Fn)throw Reporter.error(11);if(4===arguments.length){const name=e[0];this.To.Ai(name,s),s.ko=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let i=t.length;for(;i--;)this.To.Ai(t[i],s);s.ko=t}}}zi(t,i,s){const name=s.ko;if(s.ko=null,Array.isArray(name)){const t=name;let i=t.length;for(;i--;)this.To.Ti(t[i],s)}else this.To.Ti(name,s)}}t("SignalBindingBehavior",SignalBindingBehavior),SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.Ht("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,i,s,e=200){let n;s.St=s[n=s instanceof Binding?s.mode===BindingMode.ce?"updateSource":"updateTarget":"callSource"],s.St.Ao=n,s[n]=x,s.Rt={Ot:e,It:0,yt:-1}}zi(t,i,s){s[s.St.Ao]=s.St,s.St=null,PLATFORM.global.clearTimeout(s.Rt.yt),s.Rt=null}}t("ThrottleBindingBehavior",ThrottleBindingBehavior),BindingBehaviorResource.Ht("throttle",ThrottleBindingBehavior);const Bindable=t("Bindable",{for(t){const i={add(i){let s=void 0;i instanceof Object?s=i:"string"==typeof i&&(s={Kt:i});const e=s.Kt;if(!e)throw Reporter.error(0);return s.jo||(s.jo=kebabCase(e)),s.Ro||(s.Ro=`${e}Changed`),void 0===s.mode&&(s.mode=BindingMode.Hi),t.bindables[e]=s,this},get:()=>t.bindables};if(void 0===t.bindables)t.bindables={};else if(Array.isArray(t.bindables)){const s=t.bindables;t.bindables={},s.forEach(i.add)}return i}}),Pi="custom-element",Vi="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.Po="ra",TargetedInstructionType.Vo="rb",TargetedInstructionType.Lo="rc",TargetedInstructionType.Mo="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.yr="rf",TargetedInstructionType.Eo="rg",TargetedInstructionType.$o="rh",TargetedInstructionType.Do="ri",TargetedInstructionType.xo="rj",TargetedInstructionType.Fo="rk"})(TargetedInstructionType||(TargetedInstructionType=t("TargetedInstructionType",{})));const ITargetedInstruction=t("ITargetedInstruction",DI.Ri("createInterface").jh()),Li=Object.freeze({required:1,compiler:"default"}),Mi=Object.freeze({required:0,compiler:"default"});class HooksDefinition{constructor(t){this.qe="render"in t,this.xe="created"in t,this.Fe="binding"in t,this.Ne="bound"in t,this.We="unbinding"in t,this.Qe="unbound"in t,this.ze="attaching"in t,this.Ue="attached"in t,this.Ke="detaching"in t,this.He="detached"in t,this.Ge="caching"in t}}t("HooksDefinition",HooksDefinition),HooksDefinition.ue=Object.freeze(new HooksDefinition({}));class Ei{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=Mi,this.bindables=PLATFORM.kt,this.instructions=PLATFORM.si,this.dependencies=PLATFORM.si,this.surrogates=PLATFORM.si,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.strategy=1,this.Tt=HooksDefinition.ue}}const $i=["name","template","cache","build","containerless","shadowOptions","hasSlots"],Di=["instructions","dependencies","surrogates"],CustomAttributeResource=t("CustomAttributeResource",{name:Vi,it:z,ki(t){return t.kind===this},Ht(t,i){const s=i,e=s,n=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.si:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.Hi:defaultBindingMode,Pt:void 0===def.Pt?0:def.Pt,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:{...Bindable.for(t).get(),...Bindable.for(def).get()},strategy:B(def.strategy),Tt:new HooksDefinition(t.prototype)}})("string"==typeof t?{name:t}:t,s);return e.kind=CustomAttributeResource,e.description=n,s.register=U,s}}),INode=t("INode",DI.Ri("INode").jh()),IRenderLocation=t("IRenderLocation",DI.Ri("IRenderLocation").jh()),IDOM=t("IDOM",DI.Ri("IDOM").jh()),xi=function(){throw Reporter.error(1e3)},Fi={addEventListener:xi,appendChild:xi,cloneNode:xi,No:xi,createDocumentFragment:xi,createElement:xi,zo:xi,dispatchEvent:xi,Uo:xi,Ko:xi,createTextNode:xi,insertBefore:xi,Ho:xi,Wo:xi,Qo:xi,qo:xi,Lt:xi,remove:xi,removeEventListener:xi,setAttribute:xi},NodeSequence=(t("DOM",{...Fi,get Go(){return 1==Reflect.get(this,"$initialized")},initialize(dom){if(this.Go)throw Reporter.error(1001);const t={},i=[dom];let s=Object.getPrototypeOf(dom);for(;s&&s!==Object.prototype;)i.unshift(s),s=Object.getPrototypeOf(s);for(s of i)Object.assign(t,Object.getOwnPropertyDescriptors(s));const e=[];let n,r;for(n in t)(r=t[n]).vt&&r.Mr&&(Reflect.defineProperty(this,n,r),e.push(n));Reflect.set(this,"$domKeys",e),Reflect.set(this,"$initialized",1)},_o(){if(!this.Go)throw Reporter.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,Fi),Reflect.set(this,"$domKeys",PLATFORM.si),Reflect.set(this,"$initialized",0)}}),t("NodeSequence",{empty:{Oe:0,Jo:0,next:void 0,childNodes:PLATFORM.si,firstChild:null,lastChild:null,Xo:()=>PLATFORM.si,insertBefore(t){},Yo(t){},remove(){},Zo(){},xh(){},link(t){}}})),LifecycleTask=t("LifecycleTask",{done:{done:1,tc:()=>0,cancel(){},ic:()=>Promise.resolve()}});class PromiseTask{constructor(t,i,s,...e){this.done=0,this.sc=0,this.ec=0,this.hc=t.then(value=>{if(1!=this.sc&&(this.ec=1,null!==i)){const t=i.call(s,value,...e);if(void 0!==t)return(t.then instanceof Function?t:t.ic()).then(()=>{this.done=1});this.done=1}})}tc(){return!this.ec}cancel(){this.tc()&&(this.sc=1)}ic(){return this.hc}}t("PromiseTask",PromiseTask);class ContinuationTask{constructor(t,i,s,...e){this.done=0,this.ec=0,this.sc=0;const n=t.then instanceof Function?t:t.ic();this.hc=n.then(()=>{if(1==this.sc)return;this.ec=1;const t=i.call(s,...e);if(void 0!==t)return(t.then instanceof Function?t:t.ic()).then(()=>{this.done=1});this.done=1})}tc(){return!this.ec}cancel(){this.tc()&&(this.sc=1)}ic(){return this.hc}}t("ContinuationTask",ContinuationTask),t("TerminalTask",class{constructor(t){this.done=0,this.hc=t.then instanceof Function?t:t.ic(),this.hc.then(()=>{this.done=1}).catch(t=>{throw t})}tc(){return 0}cancel(){}ic(){return this.hc}});class AggregateContinuationTask{constructor(t,i,s,...e){this.done=0,this.ec=0,this.sc=0,this.hc=Promise.all(t.map(t=>t.ic())).then(()=>{if(1==this.sc)return;this.ec=1;const t=i.call(s,...e);if(void 0!==t)return t.ic().then(()=>{this.done=1});this.done=1})}tc(){return!this.ec}cancel(){this.tc()&&(this.sc=1)}ic(){return this.hc}}t("AggregateContinuationTask",AggregateContinuationTask),t("AggregateTerminalTask",class{constructor(t){this.done=0,this.hc=Promise.all(t.map(t=>t.ic())).then(()=>{this.done=1})}tc(){return 0}cancel(){}ic(){return this.hc}});class If{constructor(t,i){this.yi={value:this},this.id=nextId("au$component"),this.nc=void 0,this.rc=void 0,this.oc=t,this.cc=void 0,this.location=i,this.lc=1,this.ac=LifecycleTask.done,this.view=void 0,this.uc=0}get value(){return this.uc}set value(t){const i=this.uc;i!==t&&(this.uc=t,this.dc(t,i,this.At.flags))}static register(t){t.register(Registration.transient("custom-attribute:if",this)),t.register(Registration.transient(this,this))}_t(){return this.uc}Gt(t,i){const s=this.uc;s!==t&&(this.uc=t,this.dc(t,s,i|this.At.flags))}fc(t){return this.ac=this.ac.done?this.vc(this.value,t):new ContinuationTask(this.ac,this.vc,this,this.value,t),this.ac}bc(t){this.ac.done?this.gc(t):this.ac=new ContinuationTask(this.ac,this.gc,this,t)}pc(t){return void 0!==this.view&&(this.ac.done?this.view.detach(t):this.ac=new ContinuationTask(this.ac,this.view.detach,this.view,t)),this.ac}mc(t){return void 0!==this.view&&(this.ac=this.ac.done?this.view.zi(t):new ContinuationTask(this.ac,this.view.zi,this.view,t)),this.ac}wc(t){void 0!==this.cc&&this.cc.release(t)&&(this.cc=void 0),void 0!==this.rc&&this.rc.release(t)&&(this.rc=void 0),this.view=void 0}dc(t,i,s){0!=(4&this.At.state)&&(this.ac=this.ac.done?this.vc(this.value,s):new ContinuationTask(this.ac,this.vc,this,this.value,s))}yc(value,t){return value?this.cc=this.Cc(this.cc,this.oc,t):null!=this.nc?this.rc=this.Cc(this.rc,this.nc,t):void 0}Cc(t,i,s){return void 0===t&&(t=i.create(s)),t.Oc(this.location),t}vc(value,t){let i=LifecycleTask.done;if((1==value&&void 0!==this.rc||1!=value&&void 0!==this.cc)&&(i=this.Bc(t)),i.done){const s=this.yc(value,t);i=this.Rc(s,t)}else i=new PromiseTask(i.ic().then(()=>this.yc(value,t)),this.Rc,this,t);return i}Bc(t){const i=this.view;return void 0===i?LifecycleTask.done:(i.detach(t),i.zi(t))}Rc(t,i){if(this.view=t,void 0===t)return LifecycleTask.done;let s=this.Ic(i);return 0==(32&this.At.state)?s:(s.done?this.gc(i):s=new ContinuationTask(s,this.gc,this,i),s)}Ic(t){return void 0!==this.view&&(5&this.At.state)>0?this.view.bind(t,this.At.scope):LifecycleTask.done}gc(t){void 0!==this.view&&(40&this.At.state)>0&&this.view.Nh(t)}}t("If",If),If.inject=[IViewFactory,IRenderLocation],If.kind=CustomAttributeResource,If.description=Object.freeze({name:"if",aliases:PLATFORM.si,defaultBindingMode:BindingMode.Hi,Pt:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,Tt:Object.freeze(new HooksDefinition(If.prototype))});class Else{constructor(t){this.Sc=t}static register(t){t.register(Registration.transient("custom-attribute:else",this))}link(t){if(t instanceof If)t.nc=this.Sc;else{if(!(t.Ac instanceof If))throw Error("Unsupported IfBehavior");t.Ac.nc=this.Sc}}}t("Else",Else),Else.inject=[IViewFactory],Else.kind=CustomAttributeResource,Else.description={name:"else",aliases:PLATFORM.si,defaultBindingMode:BindingMode.Hi,Pt:0,isTemplateController:1,bindables:PLATFORM.kt,strategy:1,Tt:HooksDefinition.ue};class Repeat{constructor(t,i,s){this.yi={Tc:this},this.id=nextId("au$component"),this.Sc=s,this.kc=0,this.location=t,this.jc=void 0,this.Pc=i,this.Vc=[],this.key=void 0,this.lc=1,this.ac=LifecycleTask.done}get Tc(){return this.Lc}set Tc(t){this.Lc!==t&&(this.Lc=t,this.Mc(this.At.flags))}static register(t){t.register(Registration.transient("custom-attribute:repeat",this)),t.register(Registration.transient(this,this))}fc(t){this.Ec(t);const i=this.Pc.Nt,{length:s}=i;let e;for(let t=0;s>t;++t)if((e=i[t]).target===this&&"items"===e.Dn){this.$c=e.$n;break}return this.Dc=this.$c._s.evaluate(t,this.At.scope,null),this.xc(void 0,t),this.ac}bc(t){this.ac.done?this.Fc(void 0,t):this.ac=new ContinuationTask(this.ac,this.Fc,this,void 0,t)}pc(t){this.ac.done?this.Nc(0,this.Vc.length,t):this.ac=new ContinuationTask(this.ac,this.Nc,this,0,this.Vc.length,t)}mc(t){return this.Ec(t),this.ac=this.ac.done?this.zc(0,this.Vc.length,t,0):new ContinuationTask(this.ac,this.zc,this,0,this.Vc.length,t,0),this.ac}Mc(t){this.Ec(t|=this.At.flags),this.xc(void 0,t|=16)}tt(t,i){i|=this.At.flags,this.xc(t,i|=976)}xc(t,i){if(void 0===t){if((5&this.At.state)>0){const t=this.Vc.length;this.Nc(0,t,i),this.ac=this.ac.done?this.zc(0,t,i,0):new ContinuationTask(this.ac,this.zc,this,0,t,i,0),this.ac=this.ac.done?this.Uc(i):new ContinuationTask(this.ac,this.Uc,this,i)}(40&this.At.state)>0&&(this.ac.done?this.Kc(i):this.ac=new ContinuationTask(this.ac,this.Kc,this,i))}else(function(t){let i=0,s=0;const e=t.length;for(let n=0;e>n;++n){for(;n-i>=t.ut[s];)++s,--i;-2===t[n]?++i:t[n]+=i}})(t),(5&this.At.state)>0&&(t.ut.length>0&&(t.ut.sort(compareNumber),this.ac.done?this.Hc(t,i):this.ac=new ContinuationTask(this.ac,this.Hc,this,t,i),this.ac=this.ac.done?this.Wc(t,i):new ContinuationTask(this.ac,this.Wc,this,t,i)),this.ac=this.ac.done?this.Qc(t,i):new ContinuationTask(this.ac,this.Qc,this,t,i)),(40&this.At.state)>0&&(this.ac.done?this.qc(t,i):this.ac=new ContinuationTask(this.ac,this.qc,this,t,i))}Ec(t){const i=this.jc;if((5&this.At.state)>0){const s=this.jc=getCollectionObserver(t,this.At.ei,this.Tc);i!==s&&i&&i.M(this),s&&s.L(this)}else i&&i.M(this)}Nc(t,i,s){const e=this.Vc;let n;this.At.ei.sn.Hh();for(let r=t;i>r;++r)(n=e[r]).release(s),n.detach(s);this.At.ei.sn.end(s)}zc(t,i,s,e){const n=this.Vc;let r,o,c=void 0;this.At.ei.Jh.Hh();for(let e=t;i>e;++e)(r=(o=n[e]).zi(s)).done||(void 0===c&&(c=[]),c.push(r));return e&&(this.Vc.length=t),void 0===c?(this.At.ei.Jh.end(s),LifecycleTask.done):new AggregateContinuationTask(c,this.At.ei.Jh.end,this.At.ei.Jh,s)}Hc(t,i){const s=this.Vc;this.At.ei.sn.Hh();const e=t.ut,n=e.length;let r;for(let t=0;n>t;++t)(r=s[e[t]]).release(i),r.detach(i);this.At.ei.sn.end(i)}Wc(t,i){const s=this.Vc;let e,n=void 0;this.At.ei.Jh.Hh();const r=t.ut,o=r.length;let c,l=0;for(;o>l;++l)(e=(c=s[r[l]]).zi(i)).done||(void 0===n&&(n=[]),n.push(e));l=0;let a=0;for(;o>l;++l)this.Vc.splice(a=r[l]-l,1);return void 0===n?(this.At.ei.Jh.end(i),LifecycleTask.done):new AggregateContinuationTask(n,this.At.ei.Jh.end,this.At.ei.Jh,i)}Uc(t){let i,s,e=void 0;this.At.ei.bound.Hh();const n=this.Sc,r=this.Dc,o=this.Tc,c=this.$c.count(t,o),l=this.Vc=Array(c);return this.$c.Xs(t,o,(o,c,a)=>{s=l[c]=n.create(t),(i=s.bind(t,this.Gc(t,r,a,s))).done||(void 0===e&&(e=[]),e.push(i))}),void 0===e?(this.At.ei.bound.end(t),LifecycleTask.done):new AggregateContinuationTask(e,this.At.ei.bound.end,this.At.ei.bound,t)}Qc(t,i){let s,e,n=void 0;const r=this.Sc,o=this.Vc,c=this.Dc,l=this.Tc;this.At.ei.bound.Hh();const a=t.length;for(let u=0;a>u;++u)-2===t[u]&&(s=(e=r.create(i)).bind(i,this.Gc(i,c,l[u],e)),o.splice(u,0,e),s.done||(void 0===n&&(n=[]),n.push(s)));if(o.length!==a)throw Error(`viewsLen=${o.length}, mapLen=${a}`);return void 0===n?(this.At.ei.bound.end(i),LifecycleTask.done):new AggregateContinuationTask(n,this.At.ei.bound.end,this.At.ei.bound,i)}Gc(t,i,s,e){const n=this.At,r=n.scope,o=BindingContext.create(t,i,s);o._c=e;const c=Scope.Oi(t,r,o);if(n.Jc!==PLATFORM.si){c.pi=void 0!==r.pi&&r.pi!==PLATFORM.kt?{...r.pi}:{};for(const t of n.Jc)c.pi[t]=c}return c}Fc(t,i){let s;const{Vc:e,location:n}=this;if(this.At.ei.Zh.Hh(),void 0===t)for(let t=0,r=e.length;r>t;++t)(s=e[t]).Oc(n),s.Xc.xh(),s.Nh(i);else for(let r=0,o=e.length;o>r;++r)t[r]!==r&&((s=e[r]).Oc(n),s.Xc.xh(),s.Nh(i));this.At.ei.Zh.end(i)}Kc(t){let i;const{Vc:s,location:e}=this;this.At.ei.Zh.Hh();for(let n=0,r=s.length;r>n;++n)(i=s[n]).Oc(e),i.Xc.xh(),i.Nh(t);this.At.ei.Zh.end(t)}qc(t,i){const s=this.location,e=this.Vc;(function(t,i){const s=t.slice(),e=i.length;let to=0,from=0;for(;e>to;)-2!==(from=i[to])&&(t[to]=s[from]),++to})(e,t);const n=(function(t){const i=t.length;i>Ui&&(Ui=i,Ni=new Int32Array(i),zi=new Int32Array(i));let s=0,e=0,n=0,r=0,o=0,c=0,l=0,a=0;for(;i>r;r++)if(-2!==(e=t[r])){if(-2!==(n=t[o=Ni[s]])&&e>n){zi[r]=o,Ni[++s]=r;continue}for(c=0,l=s;l>c;)-2!==(n=t[Ni[a=c+l>>1]])&&e>n?c=a+1:l=a;((n=t[Ni[c]])>e||-2===n)&&(c>0&&(zi[r]=Ni[c-1]),Ni[c]=r)}r=++s;const u=new Int32Array(r);for(e=Ni[s-1];s-- >0;)u[s]=e,e=zi[e];for(;r-- >0;)Ni[r]=0;return u})(t),r=n.length;let o;this.At.ei.Zh.Hh(),i|=268435456;let c=r-1,l=t.length-1;for(;l>=0;--l)-2===t[l]?(e[l].Oc(s),e[l].Nh(i)):0>c||1===r||l!==n[c]?e[l].Nh(i):--c,e[l].Xc.link(void 0!==(o=e[l+1])?o.Xc:s);this.At.ei.Zh.end(i)}}let Ni,zi;t("Repeat",Repeat),Repeat.inject=[IRenderLocation,IController,IViewFactory],Repeat.kind=CustomAttributeResource,Repeat.description=Object.freeze({name:"repeat",aliases:PLATFORM.si,defaultBindingMode:BindingMode.Hi,Pt:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["items"]}).get()),strategy:1,Tt:Object.freeze(new HooksDefinition(Repeat.prototype))});let Ui=0;class Replaceable{constructor(t,i){this.id=nextId("au$component"),this.Sc=t,this.view=this.Sc.create(),this.view.Oc(i)}static register(t){t.register(Registration.transient("custom-attribute:replaceable",this)),t.register(Registration.transient(this,this))}fc(t){const i=BindingContext.mi;BindingContext.mi=this.Sc.name;const s=this.view.bind(536870912|t,this.At.scope);return s.done?BindingContext.mi=i:s.ic().then(()=>{BindingContext.mi=i}),s}bc(t){this.view.Nh(t)}pc(t){this.view.detach(t)}mc(t){return this.view.zi(t)}}t("Replaceable",Replaceable),Replaceable.inject=[IViewFactory,IRenderLocation],Replaceable.kind=CustomAttributeResource,Replaceable.description=Object.freeze({name:"replaceable",aliases:PLATFORM.si,defaultBindingMode:BindingMode.Hi,Pt:0,isTemplateController:1,bindables:PLATFORM.kt,strategy:1,Tt:Object.freeze(new HooksDefinition(Replaceable.prototype))});class With{constructor(t,i){this.yi={value:this},this.id=nextId("au$component"),this.Sc=t,this.view=this.Sc.create(),this.view.Oc(i),this.uc=void 0}get value(){return this.uc}set value(t){const i=this.uc;i!==t&&(this.uc=t,this.dc(t,i,0))}static register(t){t.register(Registration.transient("custom-attribute:with",this)),t.register(Registration.transient(this,this))}dc(t,i,s){(5&this.At.state)>0&&this.Yc(4096)}fc(t){this.Yc(t)}bc(t){this.view.Nh(t)}pc(t){this.view.detach(t)}mc(t){this.view.zi(t)}Yc(t){const i=Scope.Oi(t,this.At.scope,void 0===this.value?{}:this.value);this.view.bind(t,i)}}t("With",With),With.inject=[IViewFactory,IRenderLocation],With.kind=CustomAttributeResource,With.description=Object.freeze({name:"with",aliases:PLATFORM.si,defaultBindingMode:BindingMode.Hi,Pt:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,Tt:Object.freeze(new HooksDefinition(With.prototype))});const IProjectorLocator=t("IProjectorLocator",DI.Ri("IProjectorLocator").jh()),CustomElementResource=t("CustomElementResource",{name:Pi,it:F,ki(t){return t.kind===this},Zc:N,Ht(t,i=null){if(!t)throw Reporter.error(70);const s=null==i?class{}:i,e=s,n=buildTemplateDefinition(s,t);return e.kind=CustomElementResource,s.description=n,s.register=W,s}}),Ki={mode:"open"},ISanitizer=t("ISanitizer",DI.Ri("ISanitizer").Bi(t=>t.singleton(class{tl(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}})));class SanitizeValueConverter{constructor(t){this.il=t}Hi(t){return null==t?null:this.il.tl(t)}}t("SanitizeValueConverter",SanitizeValueConverter),SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.Ht("sanitize",SanitizeValueConverter);class ViewFactory{constructor(name,template,t){this.sl=0,this.el=-1,this.cache=null,this.ei=t,this.name=name,this.template=template,this.parts=PLATFORM.kt}hl(t,i){t&&("*"===t?t=ViewFactory.nl:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.el&&i||(this.el=t)),this.cache=this.el>0?[]:null,this.sl=this.el>0}rl(t){return null!=this.cache&&this.el>this.cache.length}ol(t){return this.rl(t)?(t.cache(0),this.cache.push(t),1):0}create(t){const cache=this.cache;let i;if(null!=cache&&cache.length>0)return(i=cache.pop()).state=128^(128|i.state),i;if(i=Controller.cl(this,this.ei,t),this.template.Et(i,null,this.parts,t),!i.Xc)throw Reporter.error(90);return i}ll(parts){this.parts===PLATFORM.kt?this.parts={...parts}:Object.assign(this.parts,parts)}}t("ViewFactory",ViewFactory),ViewFactory.nl=65535;const ITemplateCompiler=t("ITemplateCompiler",DI.Ri("ITemplateCompiler").jh());(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.ue=1]="none",ViewCompileFlags[ViewCompileFlags.al=2]="surrogate",ViewCompileFlags[ViewCompileFlags.ul=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags=t("ViewCompileFlags",{})));const ITemplateFactory=t("ITemplateFactory",DI.Ri("ITemplateFactory").jh());t("CompiledTemplate",class{constructor(dom,t,i,s){this.dom=dom,this.dl=t,this.Sc=i,this.fl=s}Et(t,host,parts,i=0){const s=t instanceof Controller?t:t.At;if(null==s)throw Error("Controller is missing from the view model");const e=s.Xc=this.Sc.vl();s.context=this.fl,this.fl.Et(i|=this.dl.strategy,s,e.Xo(),this.dl,host,parts)}});const Hi={fl:void 0,dom:void 0,dl:void 0,Et(t){const i=t instanceof Controller?t:t.At;i.Xc=NodeSequence.empty,i.context=void 0}},Wi="default",IInstructionRenderer=t("IInstructionRenderer",DI.Ri("IInstructionRenderer").jh()),IRenderer=t("IRenderer",DI.Ri("IRenderer").jh()),IRenderingEngine=t("IRenderingEngine",DI.Ri("IRenderingEngine").Bi(t=>t.singleton(Qi)));class Qi{constructor(t,i,s,e){this.bl=t,this.gl=i,this.pl=new Map,this.ei=s,this.ml=new Map,this.wl=e.reduce((t,i)=>(t[i.name]=i,t),Object.create(null))}yl(dom,t,i,s){if(null==t)return;let e=this.ml.get(t);return e||(e=this.Cl(dom,t,i,s),this.ml.set(t,e)),e}Ol(dom,t,i){if(null==t)throw Error("No definition provided");let s=this.pl.get(t);if(!s){const e=buildTemplateDefinition(null,t),template=this.Cl(dom,e,i,void 0);(s=new ViewFactory(e.name,template,this.ei)).hl(e.cache,1),this.pl.set(t,s)}return s}Cl(dom,t,i,s){if(null==i&&(i=this.bl),null!=t.template){const e=createRenderContext(dom,i,t.dependencies,s);if(t.build.required){const i=t.build.compiler||Wi,compiler=this.wl[i];if(void 0===compiler)throw Reporter.error(20,i);t=compiler.compile(dom,t,new RuntimeCompilationResources(e),ViewCompileFlags.al)}return this.gl.create(e,t)}return Hi}}Qi.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class qi{Dt(t,parts){this.Sc=t,t.ll(parts)}resolve(t,i){const s=this.Sc;if(null==s)throw Reporter.error(50);if(!s.name||!s.name.length)throw Reporter.error(51);const e=s.parts[s.name];if(e){const s=t.get(IRenderingEngine),dom=t.get(IDOM);return s.Ol(dom,e,i)}return s}xt(){this.Sc=null}}let Gi=class{constructor(t,i){this.Bl=0,this.children=void 0,this.controller=i,this.ei=t,this.controller=Controller.Rl(i,void 0,void 0),this.Il=this.controller.Il,this.dt=0,this.Sl=0}_t(){return this.dt||(this.dt=1,this.Il.Al(()=>{this.Tl()}),this.children=q(this.Il.children)),this.children}Gt(t){}kl(t){this.Bl&&(this.g(this.children,void 0,16|t),this.Bl=0)}subscribe(t){this.Sl||(this.Sl=1,this.ei.Pn(this.kl,this,24576)),this.o(t)}unsubscribe(t){this.l(t),this.Sl&&!this.v()&&(this.Sl=0,this.ei.Vn(this.kl,this))}Tl(){var t;this.children=q(this.Il.children),null!=(t=this.controller.Ac)&&"$childrenChanged"in t&&this.controller.Ac.jl(),this.Bl=1}};Gi=i([subscriberCollection()],Gi);class Controller{constructor(t,i,s,e,n,host,r,o){if(this.id=nextId("au$component"),this.qh=void 0,this._h=void 0,this.Qh=void 0,this.Gh=void 0,this.Yh=void 0,this.in=void 0,this.Xh=void 0,this.tn=void 0,this.hn=void 0,this.rn=void 0,this.en=void 0,this.nn=void 0,this.flags=t,this.Pl=i,this.Nt=void 0,this.zt=void 0,this.state=0,this.Jc=o,null==e){if(null==i)throw Error("No IViewCache was provided when rendering a synthetic view.");if(null==s)throw Error("No ILifecycle was provided when rendering a synthetic view.");this.ei=s,this.Tt=HooksDefinition.ue,this.Ac=void 0,this.Ut=void 0,this.host=void 0,this.Vl=2,this.scope=void 0,this.Il=void 0,this.Xc=void 0,this.context=void 0,this.location=void 0}else{if(null==n)throw Error("No parentContext was provided when rendering a custom element or attribute.");this.ei=n.get(ILifecycle),e.At=this;const i=e.constructor;if(null==i.description)throw Error("The provided viewModel does not have a (valid) description.");const{description:s}=i;switch((function(t,i,s,e){const n=null!=e.yi?e.yi:{},bindables=i.bindables,r=Object.getOwnPropertyNames(bindables),o=(2&s)>0,{length:c}=r;let name;for(let i=0;c>i;++i)null==n[name=r[i]]&&(n[name]=new SelfObserver(t,s,o?ProxyObserver.qt(e).Qt:e,name,bindables[name].Ro));o||Reflect.defineProperty(e,"$observers",{ai:0,value:n})})(this.ei,s,t|=s.strategy,e),this.Tt=s.Tt,this.Ac=e,this.Ut=(function(t){return 1==e.lc||0==(2&t)?e:ProxyObserver.qt(e).Qt})(t),this.host=host,i.kind.name){case"custom-element":if(null==host)throw Error("No host element was provided when rendering a custom element.");this.Vl=0;const c=n.get(IRenderingEngine);let template=void 0;if(this.Tt.qe){const s=this.Ut.Et(t,host,null==r.parts?PLATFORM.kt:r.parts,n);null!=s&&"getElementTemplate"in s&&(template=s.yl(c,i,n))}else{const dom=n.get(IDOM);template=c.yl(dom,s,n,i)}if(void 0!==template){let parts;if(null==template.dl||0===template.dl.instructions.length||0===template.dl.instructions[0].length||null==template.dl.instructions[0][0].parts)parts=null==r.parts?PLATFORM.kt:r.parts;else{const t=template.dl.instructions[0][0];parts=null==r.parts?t.parts:{...r.parts,...t.parts},o===PLATFORM.si&&(this.Jc=Object.keys(t.parts))}template.Et(this,host,parts)}this.scope=Scope.create(t,this.Ut,null),this.Il=n.get(IProjectorLocator).Ll(n.get(IDOM),this,host,s),this.location=void 0;break;case"custom-attribute":this.Vl=1,this.scope=void 0,this.Il=void 0,this.Xc=void 0,this.context=void 0,this.location=void 0;break;default:throw Error(`Invalid resource kind: '${i.kind.name}'`)}this.Tt.xe&&this.Ut.Ml(t)}}static Rl(t,i,host,s=0,e=PLATFORM.kt){let n=Controller.El.get(t);return void 0===n&&(n=new Controller(s,void 0,void 0,t,i,host,e,PLATFORM.si),this.El.set(t,n)),n}static $l(t,i,s=0,e=PLATFORM.si){let n=Controller.El.get(t);return void 0===n&&(n=new Controller(s,void 0,void 0,t,i,void 0,PLATFORM.kt,e),this.El.set(t,n)),n}static cl(t,i,s=0){return new Controller(s,t,i,void 0,void 0,void 0,PLATFORM.kt,PLATFORM.si)}Dl(t){this.scope=t,this.state|=16384}Oc(t){this.state=32768^(32768|this.state),this.location=t}release(t){return this.state|=32768,(32&this.state)>0?this.Pl.rl(this):this.xl(t)}bind(t,i){switch(t|=4096,this.Vl){case 0:return this.Fl(t,i);case 1:return this.Nl(t,i);case 2:return this.zl(t,i)}}zi(t){switch(t|=8192,this.Vl){case 0:return this.Ul(t);case 1:return this.Kl(t);case 2:return this.Hl(t)}}bound(t){this.Ut.bound(t)}Jh(t){this.Ut.Jh(t)}Nh(t){if(0>=(40&this.state)||0!=(268435456&t))switch(t|=16384,this.Vl){case 0:this.Wl(t);break;case 1:this.Ql(t);break;case 2:this.ql(t)}}detach(t){if(0!=(40&this.state))switch(t|=32768,this.Vl){case 0:this.Gl(t);break;case 1:this._l(t);break;case 2:this.Jl(t)}}Zh(t){this.Ut.Zh(t)}sn(t){this.Ut.sn(t)}mount(t){switch(this.Vl){case 0:this.Xl(t);break;case 2:this.Yl(t)}}unmount(t){switch(this.Vl){case 0:this.Zl(t);break;case 2:this.xl(t)}}cache(t){switch(this.Vl){case 0:this.ta(t);break;case 1:this.ia(t);break;case 2:this.sa(t)}}ea(t){const{Nt:i}=this;if(void 0!==i){const s=i.find(i=>i.Dn===t);if(void 0!==s)return s.xn}}Fl(t,i){const $scope=this.scope;if(null==$scope.pi)if(null!=i&&null!=i.pi&&i.pi!==PLATFORM.kt?$scope.pi={...i.pi}:this.Jc!==PLATFORM.si&&($scope.pi={}),null==$scope.pi)$scope.pi=PLATFORM.kt;else for(const t of this.Jc)$scope.pi[t]=$scope;if((134217728&t)>0)return this.ha(t,$scope),LifecycleTask.done;if((4&this.state)>0)return LifecycleTask.done;if(t|=4096,this.state|=1,this.ei.bound.Hh(),this.ha(t,$scope),this.Tt.Fe){const i=this.Ut.fc(t);if(H(i))return new ContinuationTask(i,this.na,this,t,$scope)}return this.na(t,$scope)}Nl(t,i){if((4&this.state)>0){if(this.scope===i)return LifecycleTask.done;const s=this.zi(t|=4096);if(!s.done)return new ContinuationTask(s,this.bind,this,t,i)}else t|=4096;if(this.state|=1,this.scope=i,this.ei.bound.Hh(),this.Tt.Fe){const i=this.Ut.fc(t);if(H(i))return new ContinuationTask(i,this.ra,this,t)}return this.ra(t),LifecycleTask.done}zl(t,i){if(null==i)throw Error("Scope is null or undefined");if((134217728&t)>0)return this.ha(t,i),LifecycleTask.done;if((4&this.state)>0){if(this.scope===i||(16384&this.state)>0)return LifecycleTask.done;const s=this.zi(t|=4096);if(!s.done)return new ContinuationTask(s,this.bind,this,t,i)}else t|=4096;return 0==(16384&this.state)&&(this.scope=i),this.state|=1,this.ei.bound.Hh(),this.ha(t,i),this.na(t,i)}ha(t,i){const{Nt:s}=this;if(void 0!==s){const{length:e}=s;for(let n=0;e>n;++n)s[n].zn(t,i)}}na(t,i){let s,e=void 0;const{zt:n}=this;if(void 0!==n){const{length:r}=n;for(let o=0;r>o;++o)(s=n[o].bind(t,i)).done||(void 0===e&&(e=[]),e.push(s))}return void 0===e?(this.ra(t),LifecycleTask.done):new AggregateContinuationTask(e,this.ra,this,t)}ra(t){this.Tt.Ne&&this.ei.bound.add(this),this.state=1^this.state|4,this.ei.bound.end(t)}Ul(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.ei.Jh.Hh(),this.Tt.We){const i=this.Ut.mc(t);if(H(i))return new ContinuationTask(i,this.oa,this,t)}return this.oa(t)}Kl(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.ei.Jh.Hh(),this.Tt.We){const i=this.Ut.mc(t);if(H(i))return new ContinuationTask(i,this.ca,this,t)}return this.ca(t),LifecycleTask.done}Hl(t){return 0==(4&this.state)?LifecycleTask.done:(this.state|=2,t|=8192,this.ei.Jh.Hh(),this.oa(t))}la(t){const{Nt:i}=this;if(void 0!==i)for(let s=i.length-1;s>=0;--s)i[s].Un(t);this.ca(t)}oa(t){let i,s=void 0;const{zt:e}=this;if(void 0!==e)for(let n=e.length-1;n>=0;--n)(i=e[n].zi(t)).done||(void 0===s&&(s=[]),s.push(i));return void 0===s?(this.la(t),LifecycleTask.done):new AggregateContinuationTask(s,this.la,this,t)}ca(t){switch(this.Vl){case 1:this.scope=void 0;break;case 2:0==(16384&this.state)&&(this.scope=void 0)}this.Tt.Qe&&this.ei.Jh.add(this),this.state=6^(6|this.state),this.ei.Jh.end(t)}Wl(t){t|=16384,this.state|=8,this.ei.mount.add(this),this.ei.Zh.Hh(),this.Tt.ze&&this.Ut.bc(t),this.aa(t),this.Tt.Ue&&this.ei.Zh.add(this),this.state=8^this.state|32,this.ei.Zh.end(t)}Ql(t){t|=16384,this.state|=8,this.ei.Zh.Hh(),this.Tt.ze&&this.Ut.bc(t),this.Tt.Ue&&this.ei.Zh.add(this),this.state=8^this.state|32,this.ei.Zh.end(t)}ql(t){((32&this.state)>0&&268435456&t)>0?this.ei.mount.add(this):(t|=16384,this.state|=8,this.ei.mount.add(this),this.ei.Zh.Hh(),this.aa(t),this.state=8^this.state|32,this.ei.Zh.end(t))}Gl(t){t|=32768,this.state|=16,this.ei.sn.Hh(),this.ei.unmount.add(this),this.Tt.Ke&&this.Ut.pc(t),this.ua(t),this.Tt.He&&this.ei.sn.add(this),this.state=48^(48|this.state),this.ei.sn.end(t)}_l(t){t|=32768,this.state|=16,this.ei.sn.Hh(),this.Tt.Ke&&this.Ut.pc(t),this.Tt.He&&this.ei.sn.add(this),this.state=48^(48|this.state),this.ei.sn.end(t)}Jl(t){t|=32768,this.state|=16,this.ei.sn.Hh(),this.ei.unmount.add(this),this.ua(t),this.state=48^(48|this.state),this.ei.sn.end(t)}aa(t){const{zt:i}=this;if(void 0!==i){const{length:s}=i;for(let e=0;s>e;++e)i[e].Nh(t)}}ua(t){const{zt:i}=this;if(void 0!==i)for(let s=i.length-1;s>=0;--s)i[s].detach(t)}Xl(t){(64&this.state)>0||(this.state|=64,this.Il.da(this.Xc))}Yl(t){this.state|=64,this.Xc.insertBefore(this.location)}Zl(t){0!=(64&this.state)&&(this.state=64^(64|this.state),this.Il.fa(this.Xc))}xl(t){return 0==(64&this.state)?0:(this.state=64^(64|this.state),this.Xc.remove(),this.Xc.xh(),(32768&this.state)>0&&(this.state=32768^(32768|this.state),this.Pl.ol(this))?(this.state|=128,1):0)}ta(t){this.Tt.Ge&&this.Ut.wc(t|=65536)}ia(t){t|=65536,this.Tt.Ge&&this.Ut.wc(t);const{zt:i}=this;if(void 0!==i){const{length:s}=i;for(let e=s-1;e>=0;--e)i[e].cache(t)}}sa(t){const{zt:i}=this;if(void 0!==i){const{length:s}=i;for(let e=s-1;e>=0;--e)i[e].cache(t)}}}t("Controller",Controller),Controller.El=new WeakMap;const _i=DI.Ri("IActivator").Bi(t=>t.singleton(Ji));class Ji{static register(t){return Registration.singleton(_i,this).register(t)}Rc(host,component,t,i=1024,s){const e=Controller.Rl(component,t,host,i=void 0===i?0:i);let n=e.bind(4096|i,s);return n.done?e.Nh(16384|i):n=new ContinuationTask(n,e.Nh,e,16384|i),n}Bc(component,t=2048){const i=Controller.Rl(component,void 0,void 0);return i.detach(32768|t),i.zi(8192|t)}}const{nt:Xi,lt:Yi}=Profiler.va("Aurelia.start"),{nt:Zi,lt:ts}=Profiler.va("Aurelia.stop");class CompositionRoot{constructor(t,i){if(this.ba=t,null!=t.host)this.bl=i.has(INode,0)?i.Vt():i,Registration.ga(INode,t.host).register(this.bl),this.host=t.host;else{if(!i.has(INode,1))throw Error("No host element found.");this.bl=i,this.host=i.get(INode)}this.strategy=null!=t.strategy?t.strategy:1;const s=this.bl.get(IDOMInitializer);this.dom=s.initialize(t),this.Ac=CustomElementResource.ki(t.component)?this.bl.get(t.component):t.component,this.controller=Controller.Rl(this.Ac,this.bl,this.host,this.strategy),this.ei=this.bl.get(ILifecycle),this.pa=this.bl.get(_i),1==t.ma?this.ei.Ln(t.wa):this.ei.Mn(),this.ac=LifecycleTask.done,this.ya=1,this.Ca=1}Rc(t){const{ac:i,host,Ac:s,bl:e,pa:n,strategy}=this,r=1024|strategy;if(i.done)this.ac=null==t||t.done?n.Rc(host,s,e,r,void 0):new ContinuationTask(t,n.Rc,n,host,s,e,r,void 0);else if(null==t||t.done)this.ac=new ContinuationTask(i,n.Rc,n,host,s,e,r,void 0);else{const o=new ContinuationTask(i,t.ic,t);this.ac=new ContinuationTask(o,n.Rc,n,host,s,e,r,void 0)}return this.ac}Bc(t){const{ac:i,Ac:s,pa:e,strategy}=this,n=2048|strategy;if(i.done)this.ac=null==t||t.done?e.Bc(s,n):new ContinuationTask(t,e.Bc,e,s,n);else if(null==t||t.done)this.ac=new ContinuationTask(i,e.Bc,e,s,n);else{const r=new ContinuationTask(i,t.ic,t);this.ac=new ContinuationTask(r,e.Bc,e,s,n)}return this.ac}}t("CompositionRoot",CompositionRoot);class Aurelia{constructor(t=DI.Oa()){this.bl=t,this.ac=LifecycleTask.done,this.Ba=0,this.Ra=0,this.Ia=0,this.Sa=void 0,this.next=void 0,Registration.ga(Aurelia,this).register(t)}get Aa(){return this.Ba}get Ta(){return this.Ra}get ka(){return this.Ia}get root(){if(null==this.Sa){if(null==this.next)throw Error("root is not defined");return this.next}return this.Sa}register(...t){return this.bl.register(...t),this}app(t){return this.next=new CompositionRoot(t,this.bl),this.Aa&&this.start(),this}start(t=this.next){if(null==t)throw Error("There is no composition root");return this.stop(t),this.ac.done?this.ja(t):this.ac=new ContinuationTask(this.ac,this.ja,this,t),this.ac=this.root.Rc(this.ac),this.ac=this.ac.done?this.Pa(t):new ContinuationTask(this.ac,this.Pa,this,t),this.ac}stop(t=this.Sa){return this.Ba&&null!=t&&(this.ac.done?this.Va(t):this.ac=new ContinuationTask(this.ac,this.Va,this,t),this.ac=t.Bc(this.ac),this.ac=this.ac.done?this.La(t):new ContinuationTask(this.ac,this.La,this,t)),this.ac}ic(){return this.ac.ic()}ja(t){Reflect.set(t.host,"$au",this),this.Sa=t,this.Ra=1,Profiler.enabled&&Xi()}Pa(t){return this.Ba=1,this.Ra=0,this.dispatchEvent(t,"aurelia-composed",t.dom),this.dispatchEvent(t,"au-started",t.host),Profiler.enabled&&Yi(),LifecycleTask.done}Va(t){this.Ba=0,this.Ia=1,Profiler.enabled&&Zi()}La(t){return Reflect.deleteProperty(t.host,"$au"),this.Sa=void 0,this.Ia=0,this.dispatchEvent(t,"au-stopped",t.host),Profiler.enabled&&ts(),LifecycleTask.done}dispatchEvent(t,name,i){(i="dispatchEvent"in i?i:t.dom).dispatchEvent(t.dom.zo(name,{detail:this,bubbles:1,cancelable:1}))}}t("Aurelia",Aurelia),PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=t("IDOMInitializer",DI.Ri("IDOMInitializer").jh()),is=[].slice;class ss{constructor(t){const i=this.Ma={};t.forEach(t=>{i[t.Ft]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Et(t,dom,i,s,targets,e,host,parts){Tracer.enabled&&Tracer.nt("Renderer","render",is.call(arguments));const n=e.instructions,r=this.Ma;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);let instructions,o,c;for(let e=0,l=targets.length;l>e;++e){o=targets[e];for(let l=0,a=(instructions=n[e]).length;a>l;++l)r[(c=instructions[l]).type].Et(t,dom,i,s,o,c,parts)}if(host){const n=e.surrogates;for(let e=0,o=n.length;o>e;++e)r[(c=n[e]).type].Et(t,dom,i,s,host,c,parts)}Tracer.enabled&&Tracer.lt()}}ss.inject=[all(IInstructionRenderer)];let es=class{Et(t,dom,i,s,e,n){Tracer.enabled&&Tracer.nt("SetPropertyRenderer","render",is.call(arguments)),getTarget(e)[n.to]=n.value,Tracer.enabled&&Tracer.lt()}};es=i([instructionRenderer("re")],es);let hs=class{Et(t,dom,i,s,e,n){Tracer.enabled&&Tracer.nt("CustomElementRenderer","render",is.call(arguments));const r=i.$t(s,e,n,null,null,e,1),component=i.get(F(n.res)),o=i.get(IRenderer).Ma,c=n.instructions,l=Controller.Rl(component,i,e,t,n);let a;for(let e=0,n=c.length;n>e;++e)o[(a=c[e]).type].Et(t,dom,i,s,l,a);addComponent(s,l),r.xt(),Tracer.enabled&&Tracer.lt()}};hs=i([instructionRenderer("ra")],hs);let ns=class{Et(t,dom,i,s,e,n){Tracer.enabled&&Tracer.nt("CustomAttributeRenderer","render",is.call(arguments));const r=i.$t(s,e,n),component=i.get(z(n.res)),o=i.get(IRenderer).Ma,c=n.instructions,l=Controller.$l(component,i,t);let a;for(let e=0,n=c.length;n>e;++e)o[(a=c[e]).type].Et(t,dom,i,s,l,a);addComponent(s,l),r.xt(),Tracer.enabled&&Tracer.lt()}};ns=i([instructionRenderer("rb")],ns);let rs=class{constructor(t){this.Ea=t}Et(t,dom,i,s,e,n,parts){Tracer.enabled&&Tracer.nt("TemplateControllerRenderer","render",is.call(arguments));const r=this.Ea.Ol(dom,n.def,i),o=i.$t(s,e,n,r,parts,dom.No(e),0),component=i.get(z(n.res)),c=i.get(IRenderer).Ma,l=n.instructions,a=Controller.$l(component,i,t,null==n.parts?PLATFORM.si:Object.keys(n.parts));if(n.link){const t=s.zt;component.link(t[t.length-1])}let u;for(let e=0,n=l.length;n>e;++e)c[(u=l[e]).type].Et(t,dom,i,s,a,u);addComponent(s,a),o.xt(),Tracer.enabled&&Tracer.lt()}};rs.inject=[IRenderingEngine],rs=i([instructionRenderer("rc")],rs);let os=class{constructor(t,i){this.$a=t,this.ot=i}Et(t,dom,i,s,e,n){Tracer.enabled&&Tracer.nt("LetElementRenderer","render",is.call(arguments)),dom.remove(e);const r=n.instructions,toViewModel=n.toViewModel;let o,c,l;for(let t=0,e=r.length;e>t;++t)c=ensureExpression(this.$a,(o=r[t]).from,48),addBinding(s,l=new LetBinding(c,o.to,this.ot,i,toViewModel));Tracer.enabled&&Tracer.lt()}};os.inject=[IExpressionParser,IObserverLocator],os=i([instructionRenderer("rd")],os);let cs=class{constructor(t,i){this.$a=t,this.ot=i}Et(t,dom,i,s,e,n){Tracer.enabled&&Tracer.nt("CallBindingRenderer","render",is.call(arguments));const r=ensureExpression(this.$a,n.from,153);addBinding(s,new Call(r,getTarget(e),n.to,this.ot,i)),Tracer.enabled&&Tracer.lt()}};cs.inject=[IExpressionParser,IObserverLocator],cs=i([instructionRenderer("rh")],cs);let ls=class{constructor(t){this.$a=t}Et(t,dom,i,s,e,n){Tracer.enabled&&Tracer.nt("RefBindingRenderer","render",is.call(arguments));const r=ensureExpression(this.$a,n.from,1280);addBinding(s,new Ref(r,getTarget(e),i)),Tracer.enabled&&Tracer.lt()}};ls.inject=[IExpressionParser],ls=i([instructionRenderer("rj")],ls);let as=class{constructor(t,i){this.$a=t,this.ot=i}Et(t,dom,i,s,e,n){let r;Tracer.enabled&&Tracer.nt("InterpolationBindingRenderer","render",is.call(arguments));const o=ensureExpression(this.$a,n.from,2048);addBinding(s,r=o.Zs?new MultiInterpolationBinding(this.ot,o,getTarget(e),n.to,BindingMode.Hi,i):new InterpolationBinding(o.te,o,getTarget(e),n.to,BindingMode.Hi,this.ot,i,1)),Tracer.enabled&&Tracer.lt()}};as.inject=[IExpressionParser,IObserverLocator],as=i([instructionRenderer("rf")],as);let us=class{constructor(t,i){this.$a=t,this.ot=i}Et(t,dom,i,s,e,n){Tracer.enabled&&Tracer.nt("PropertyBindingRenderer","render",is.call(arguments));const r=ensureExpression(this.$a,n.from,48|n.mode);addBinding(s,new Binding(r,getTarget(e),n.to,n.mode,this.ot,i)),Tracer.enabled&&Tracer.lt()}};us.inject=[IExpressionParser,IObserverLocator],us=i([instructionRenderer("rg")],us);let ds=class{constructor(t,i){this.$a=t,this.ot=i}Et(t,dom,i,s,e,n){Tracer.enabled&&Tracer.nt("IteratorBindingRenderer","render",is.call(arguments));const r=ensureExpression(this.$a,n.from,539);addBinding(s,new Binding(r,getTarget(e),n.to,BindingMode.Hi,this.ot,i)),Tracer.enabled&&Tracer.lt()}};ds.inject=[IExpressionParser,IObserverLocator],ds=i([instructionRenderer("rk")],ds);const DefaultComponents=[t("IObserverLocatorRegistration",ObserverLocator),t("ILifecycleRegistration",wt),t("IRendererRegistration",ss)],IfRegistration=t("IfRegistration",If),ElseRegistration=t("ElseRegistration",Else),RepeatRegistration=t("RepeatRegistration",Repeat),ReplaceableRegistration=t("ReplaceableRegistration",Replaceable),WithRegistration=t("WithRegistration",With),SanitizeValueConverterRegistration=t("SanitizeValueConverterRegistration",SanitizeValueConverter),DebounceBindingBehaviorRegistration=t("DebounceBindingBehaviorRegistration",DebounceBindingBehavior),OneTimeBindingBehaviorRegistration=t("OneTimeBindingBehaviorRegistration",OneTimeBindingBehavior),ToViewBindingBehaviorRegistration=t("ToViewBindingBehaviorRegistration",ToViewBindingBehavior),FromViewBindingBehaviorRegistration=t("FromViewBindingBehaviorRegistration",FromViewBindingBehavior),SignalBindingBehaviorRegistration=t("SignalBindingBehaviorRegistration",SignalBindingBehavior),ThrottleBindingBehaviorRegistration=t("ThrottleBindingBehaviorRegistration",ThrottleBindingBehavior),TwoWayBindingBehaviorRegistration=t("TwoWayBindingBehaviorRegistration",TwoWayBindingBehavior),PriorityBindingBehaviorRegistration=t("PriorityBindingBehaviorRegistration",PriorityBindingBehavior),DefaultResources=t("DefaultResources",[IfRegistration,ElseRegistration,RepeatRegistration,ReplaceableRegistration,WithRegistration,SanitizeValueConverterRegistration,DebounceBindingBehaviorRegistration,OneTimeBindingBehaviorRegistration,ToViewBindingBehaviorRegistration,FromViewBindingBehaviorRegistration,SignalBindingBehaviorRegistration,PriorityBindingBehaviorRegistration,ThrottleBindingBehaviorRegistration,TwoWayBindingBehaviorRegistration]),CallBindingRendererRegistration=t("CallBindingRendererRegistration",cs),CustomAttributeRendererRegistration=t("CustomAttributeRendererRegistration",ns),CustomElementRendererRegistration=t("CustomElementRendererRegistration",hs),InterpolationBindingRendererRegistration=t("InterpolationBindingRendererRegistration",as),IteratorBindingRendererRegistration=t("IteratorBindingRendererRegistration",ds),LetElementRendererRegistration=t("LetElementRendererRegistration",os),DefaultRenderers=[t("PropertyBindingRendererRegistration",us),IteratorBindingRendererRegistration,CallBindingRendererRegistration,t("RefBindingRendererRegistration",ls),InterpolationBindingRendererRegistration,t("SetPropertyRendererRegistration",es),CustomElementRendererRegistration,CustomAttributeRendererRegistration,t("TemplateControllerRendererRegistration",rs),LetElementRendererRegistration];t("RuntimeBasicConfiguration",{register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Oa(){return this.register(DI.Oa())}}),t("InterpolationInstruction",class{constructor(from,to){this.type="rf",this.from=from,this.to=to}}),t("OneTimeBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}),t("ToViewBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Hi,this.oneTime=0,this.to=to}}),t("FromViewBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Wi,this.oneTime=0,this.to=to}}),t("TwoWayBindingInstruction",class{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.ce,this.oneTime=0,this.to=to}}),t("IteratorBindingInstruction",class{constructor(from,to){this.type="rk",this.from=from,this.to=to}}),t("CallBindingInstruction",class{constructor(from,to){this.type="rh",this.from=from,this.to=to}}),t("RefBindingInstruction",class{constructor(from){this.type="rj",this.from=from}}),t("SetPropertyInstruction",class{constructor(value,to){this.type="re",this.to=to,this.value=value}}),t("HydrateElementInstruction",class{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}),t("HydrateAttributeInstruction",class{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}),t("HydrateTemplateController",class{constructor(def,res,instructions,link,parts){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.parts=parts,this.res=res}}),t("LetElementInstruction",class{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}),t("LetBindingInstruction",class{constructor(from,to){this.type="ri",this.from=from,this.to=to}})}}});
