function $noop(){}function enableLiveLogging(){}function createResolver(e){return function(t){const r=function(e,t,n){DI.inject(r)(e,t,n)};return r.resolve=function(r,n){return e(t,r,n)},r}}function transientDecorator(e){return DI.transient(e)}function transient(e){return null==e?transientDecorator:transientDecorator(e)}function singletonDecorator(e){return DI.singleton(e)}function singleton(e){return null==e?singletonDecorator:singletonDecorator(e)}function isRegistry(e){return"function"==typeof e.register}function isClass(e){return void 0!==e.prototype}function validateKey(e){if(null==e||e===Object)throw Reporter.error(5)}function buildAllResponse(e,t,r){if(e instanceof Resolver&&4===e.strategy){const n=e.state;let i=n.length;const o=[];for(;i--;)o[i]=n[i].resolve(t,r);return o}return[e.resolve(t,r)]}function invokeWithDynamicDependencies(e,t,r,n){let i,o=r.length,s=[];for(;o--;){if(null==(i=r[o]))throw Reporter.error(7,`Index ${o}.`);s[o]=e.get(i)}return void 0!==n&&(s=s.concat(n)),Reflect.construct(t,s)}function trimDots(e){const t=e.length;let r,n=0;for(;t>n;++n)if("."===(r=e[n]))e.splice(n,1),n-=1;else if(".."===r){if(0===n||1===n&&".."===e[2]||".."===e[n-1])continue;n>0&&(e.splice(n-1,2),n-=2)}}function relativeToFile(name,e){const t=e?e.split("/"):e,r=name.trim().split("/");if("."===r[0].charAt(0)&&t){const e=t.slice(0,t.length-1);r.unshift(...e)}return trimDots(r),r.join("/")}function join(e,t){if(!e)return t;if(!t)return e;const r=e.match(/^([^\/]*?:)\//),n=r&&r.length>0?r[1]:"";let i;i=0===(e=e.slice(n.length)).indexOf("///")&&"file:"===n?"///":0===e.indexOf("//")?"//":0===e.indexOf("/")?"/":"";const o="/"===t.slice(-1)?"/":"",s=e.split("/"),l=t.split("/"),a=[];for(let e=0,t=s.length;t>e;++e)".."===s[e]?a.pop():"."!==s[e]&&""!==s[e]&&a.push(s[e]);for(let e=0,t=l.length;t>e;++e)".."===l[e]?a.pop():"."!==l[e]&&""!==l[e]&&a.push(l[e]);return n+i+a.join("/")+o}function buildParam(e,value,t){let r=[];if(null==value)return r;if(Array.isArray(value))for(let n=0,i=value.length;i>n;n++)t?r.push(`${encodeKey(e)}=${encode(value[n])}`):r=r.concat(buildParam(`${e}[${"object"==typeof value[n]&&null!=value[n]?n:""}]`,value[n]));else if("object"!=typeof value||t)r.push(`${encodeKey(e)}=${encode(value)}`);else for(const t in value)r=r.concat(buildParam(`${e}[${t}]`,value[t]));return r}function buildQueryString(e,t){if(null==e)return"";const r=[],n=Object.keys(e).sort();let i;for(let o=0,s=n.length;s>o;++o)r.push(...buildParam(i=n[o],e[i],t));return 0===r.length?"":r.join("&")}function processScalarParam(e,value){return Array.isArray(e)?(e.push(value),e):void 0!==e?[e,value]:value}function parseComplexParam(e,t,value){let r=e;const n=t.length-1;let i,o;for(let e=0;n>=e;++e)r=r[i=""===t[e]?r.length:t[e]]=n>e?(o=r[i]&&"object"!=typeof r[i]?[r[i]]:r[i])||(isNaN(t[e+1])?{}:[]):value}function parseQueryString(e){const t={};if(!e||"string"!=typeof e)return t;let r=e;"?"===r.charAt(0)&&(r=r.slice(1));const n=r.replace(/\+/g," ").split("&");for(let e=0;n.length>e;e++){const r=n[e].split("="),i=decodeURIComponent(r[0]);if(!i)continue;let o=i.split("]["),s=o.length-1;if(/\[/.test(o[0])&&/\]$/.test(o[s])?(o[s]=o[s].replace(/\]$/,""),s=(o=o.shift().split("[").concat(o)).length-1):s=0,2>r.length)t[i]=1;else{const value=r[1]?decodeURIComponent(r[1]):"";s?parseComplexParam(t,o,value):t[i]=processScalarParam(t[i],value)}}return t}function invokeCallback(e,t,r){try{e(t,r)}catch(e){Reporter.error(0,e)}}function invokeHandler(e,t){try{e.t(t)}catch(e){Reporter.error(0,e)}}function isNumeric(value){switch(typeof value){case"number":return 1;case"string":{const e=isNumericLookup[value];if(void 0!==e)return e;const{length:t}=value;if(0===t)return isNumericLookup[value]=0;let r=0;for(let e=0;t>e;++e)if(48>(r=value.charCodeAt(e))||r>57)return isNumericLookup[value]=0;return isNumericLookup[value]=1}default:return 0}}function camelCase(e){let value=camelCaseLookup[e];if(void 0!==value)return value;value="";let t,r=1,n=0;for(let i=0,o=e.length;o>i;++i)"-"===(t=e.charAt(i))||"."===t||"_"===t?n=1:(value+=r?t.toLowerCase():n?t.toUpperCase():t,n=0),r=0;return camelCaseLookup[e]=value}function kebabCase(e){let value=kebabCaseLookup[e];if(void 0!==value)return value;value="";let t,r,n=1;for(let i=0,o=e.length;o>i;++i)r=(t=e.charAt(i)).toLowerCase(),value+=n?r:t!==r?`-${r}`:r,n=0;return kebabCaseLookup[e]=value}function toArray(e){const{length:t}=e,r=Array(t);for(let n=0;t>n;++n)r[n]=e[n];return r}function nextId(e){return void 0===ids[e]&&(ids[e]=0),++ids[e]}function resetId(e){ids[e]=0}function compareNumber(e,t){return e-t}var LogLevel,ResolverStrategy;const $global=(function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return Function("","return this")()}catch(e){return{}}})(),isBrowserLike="undefined"!=typeof window&&void 0!==window.document,isWebWorkerLike="object"==typeof self&&null!=self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,isNodeLike="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,$now=(function(){let e,t,r,n,i;if(null!=$global.performance&&null!=$global.performance.now){const e=$global.performance;return function(){return e.now()}}if(null!=$global.process&&null!=$global.process.i){const o=function(){return(e()-n)/1e6};return t=$global.process.i,r=(e=function(){let e;return 1e9*(e=t())[0]+e[1]})(),i=1e9*$global.process.o(),n=r-i,o}throw Error("Unsupported runtime")})(),{s:$mark,l:$measure,u:$getEntriesByName,g:$getEntriesByType,p:$clearMarks,v:$clearMeasures}=(function(){if(null!=$global.performance&&null!=$global.performance.mark&&null!=$global.performance.measure&&null!=$global.performance.getEntriesByName&&null!=$global.performance.getEntriesByType&&null!=$global.performance.clearMarks&&null!=$global.performance.clearMeasures){const e=$global.performance;return{s(name){e.mark(name)},l(name,t,r){e.measure(name,t,r)},u:name=>e.getEntriesByName(name),g:type=>e.getEntriesByType(type),p(name){e.clearMarks(name)},v(name){e.clearMeasures(name)}}}if(null!=$global.process&&null!=$global.process.i){const e=[],t={},r=function(t,value){let r=0;const n=e.length,i=[];for(;n>r;r++)e[r][t]===value&&i.push(e[r]);return i},n=function(type,name){let t,r=e.length;for(;r--;)(t=e[r]).entryType!==type||void 0!==name&&t.name!==name||e.splice(r,1)};return{s(name){const r={name,entryType:"mark",startTime:$now(),duration:0};e.push(r),t[name]=r},l(name,r,n){let i,o;if(null!=n){if(null==t[n])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${n}' does not exist.`);o=void 0!==t[n]?t[n].startTime:$now()}else o=$now();if(null!=r){if(null==t[r])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${r}' does not exist.`);i=void 0!==t[r]?t[r].startTime:0}else i=0;e.push({name,entryType:"measure",startTime:i,duration:o-i})},u:name=>r("name",name),g:type=>r("entryType",type),p(name){n("mark",name)},v(name){n("measure",name)}}}throw Error("Unsupported runtime")})(),{m:$raf,$:$caf}=(function(){let e=$global.requestAnimationFrame,t=$global.cancelAnimationFrame;if(void 0===e||void 0===t){let r=0,n=0;const i=[],o=1e3/60;e=function(e){let t,s;return 0===i.length&&(t=$now(),r=(s=Math.max(0,o-(t-r)))+t,setTimeout(function(){const e=i.slice(0);i.length=0;for(let t=0;e.length>t;++t)if(!e[t].k)try{e[t].R(r)}catch(e){setTimeout(function(){throw e},0)}},Math.round(s))),i.push({t:++n,R:e,k:0}),n},t=function(e){for(let t=0;i.length>t;++t)i[t].t===e&&(i[t].k=1)}}const r=function(t){return e.call($global,t)};return r.cancel=function(e){t.call($global,e)},$global.requestAnimationFrame=e,$global.cancelAnimationFrame=t,{m:r,$:t}})(),hasOwnProperty={}.hasOwnProperty,emptyArray=Object.freeze([]),emptyObject=Object.freeze({}),$PLATFORM=Object.freeze({T:isBrowserLike,D:isWebWorkerLike,L:isNodeLike,global:$global,I:emptyArray,C:emptyObject,O:$noop,now:$now,mark:$mark,measure:$measure,getEntriesByName:$getEntriesByName,getEntriesByType:$getEntriesByType,clearMarks:$clearMarks,clearMeasures:$clearMeasures,hasOwnProperty,requestAnimationFrame:e=>$raf(e),cancelAnimationFrame:e=>$caf(e),clearInterval(e){$global.clearInterval(e)},clearTimeout(e){$global.clearTimeout(e)},setInterval:(e,t,...r)=>$global.setInterval(e,t,...r),setTimeout:(e,t,...r)=>$global.setTimeout(e,t,...r),restore(){Object.assign(PLATFORM,$PLATFORM)}}),PLATFORM={...$PLATFORM};(function(LogLevel){LogLevel[LogLevel.error=0]="error",LogLevel[LogLevel.warn=1]="warn",LogLevel[LogLevel.info=2]="info",LogLevel[LogLevel.debug=3]="debug"})(LogLevel||(LogLevel={}));const Reporter={level:1,write(e,...t){},error:e=>Error(`Code ${e}`)},Tracer={enabled:0,A:0,P:null,j(e,t,r){},M(){},F(e){},W(e){},N:enableLiveLogging,B(){}},slice=[].slice;"getOwnMetadata"in Reflect||(Reflect.getOwnMetadata=function(e,t){return t[e]},Reflect.metadata=function(e,t){return function(r){r[e]=t}});const hasOwnProperty$1=PLATFORM.hasOwnProperty;class DI{constructor(){}static S(...e){return 0===e.length?new Container:(new Container).register(...e)}static K(e){const t=Reflect.getOwnMetadata("design:paramtypes",e);return null==t?PLATFORM.I:t}static U(e){let dependencies;if(null==e.inject)dependencies=DI.K(e);else{dependencies=[];let t=e;for(;"function"==typeof t;)hasOwnProperty$1.call(t,"inject")&&dependencies.push(...t.inject),t=Object.getPrototypeOf(t)}return dependencies}static H(e){const t=function(e,r,n){if(null==e)throw Reporter.error(16,t.q,t);return null==e.inject&&(e.inject=[]),e.inject[n]=t,e};return t.q=null==e?"Interface":e,t.G=function(){return t},t.J=function(e){return t.J=function(){throw Reporter.error(17,t)},t.register=function(r,n){const i=null==n?t:n;return e({V:value=>r.X(i,new Resolver(i,0,value)),singleton:value=>r.X(i,new Resolver(i,1,value)),transient:value=>r.X(i,new Resolver(i,2,value)),R:value=>r.X(i,new Resolver(i,3,value)),Y:e=>r.X(i,new Resolver(i,5,e))})},t},t}static inject(...dependencies){return function(e,t,r){if("number"==typeof r){if(!hasOwnProperty$1.call(e,"inject")){const t=DI.K(e);e.inject=t.slice()}1===dependencies.length&&(e.inject[r]=dependencies[0])}else if(t){const r=e.constructor;null==r.inject&&(r.inject=[]),r.inject[t]=dependencies[0]}else if(r)r.value.inject=dependencies;else if(0===dependencies.length){const t=DI.K(e);e.inject=t.slice()}else e.inject=dependencies}}static transient(e){return e.register=function(t){return Registration.transient(e,e).register(t,e)},e}static singleton(e){return e.register=function(t){return Registration.singleton(e,e).register(t,e)},e}}const IContainer=DI.H("IContainer").G(),IServiceLocator=IContainer,inject=DI.inject,all=createResolver((e,t,r)=>r.getAll(e)),lazy=createResolver((e,t,r)=>{let n=null;return()=>(null==n&&(n=r.get(e)),n)}),optional=createResolver((e,t,r)=>r.has(e,1)?r.get(e):null);(function(e){e[e.V=0]="instance",e[e.singleton=1]="singleton",e[e.transient=2]="transient",e[e.R=3]="callback",e[e.Z=4]="array",e[e.ee=5]="alias"})(ResolverStrategy||(ResolverStrategy={}));class Resolver{constructor(e,strategy,t){this.key=e,this.strategy=strategy,this.state=t}register(e,t){return e.X(t||this.key,this)}resolve(e,t){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const t=e.te(this.state);return this.state=t.construct(e)}case 2:return e.te(this.state).construct(t);case 3:return this.state(e,t,this);case 4:return this.state[0].resolve(e,t);case 5:return e.get(this.state);default:throw Reporter.error(6,this.strategy)}}te(e){switch(this.strategy){case 1:case 2:return e.te(this.state);default:return null}}}class Factory{constructor(e,t,dependencies){this.re=e,this.ne=t,this.dependencies=dependencies,this.ie=null}static create(e){const dependencies=DI.U(e);return new Factory(e,classInvokers.length>dependencies.length?classInvokers[dependencies.length]:fallbackInvoker,dependencies)}construct(e,t){Tracer.enabled&&Tracer.j("Factory","construct",[this.re,...slice.call(arguments)]);const r=this.ie;let n=void 0!==t?this.ne.oe(e,this.re,this.dependencies,t):this.ne.se(e,this.re,this.dependencies);if(null==r)return Tracer.enabled&&Tracer.M(),n;for(let e=0,t=r.length;t>e;++e)n=r[e](n);return Tracer.enabled&&Tracer.M(),n}le(e){return null==this.ie&&(this.ie=[]),this.ie.push(e),1}}const containerResolver={resolve:(e,t)=>t};class Container{constructor(e={}){this.parent=null,this.ae=0,this.ce=new Map,this.ue=e,null==e.fe&&(e.fe=new Map),this.fe=e.fe,this.he=e.he||(e.he=Object.create(null)),this.ce.set(IContainer,containerResolver)}register(...e){if(Tracer.enabled&&Tracer.j("Container","register",slice.call(arguments)),100==++this.ae)throw Error("Unable to autoregister dependency");let t,r,value,n,i;for(let o=0,s=e.length;s>o;++o)if(isRegistry(t=e[o]))t.register(this);else if(isClass(t))Registration.singleton(t,t).register(this);else for(n=0,i=(r=Object.keys(t)).length;i>n;++n)isRegistry(value=t[r[n]])?value.register(this):this.register(value);return--this.ae,Tracer.enabled&&Tracer.M(),this}X(e,t){validateKey(e);const r=this.ce,n=r.get(e);return null==n?(r.set(e,t),"string"==typeof e&&(this.he[e]=t)):n instanceof Resolver&&4===n.strategy?n.state.push(t):r.set(e,new Resolver(e,4,[n,t])),t}le(e,t){const r=this.ge(e);if(null==r)return 0;if(r.te){const e=r.te(this);return null==e?0:e.le(t)}return 0}ge(e,t=1){if(validateKey(e),void 0!==e.resolve)return e;let r,n=this;for(;null!=n;){if(null!=(r=n.ce.get(e)))return r;if(null==n.parent)return t?this.de(e,n):null;n=n.parent}return null}has(e,t=0){return this.ce.has(e)?1:t&&null!=this.parent?this.parent.has(e,1):0}get(e){if(Tracer.enabled&&Tracer.j("Container","get",slice.call(arguments)),validateKey(e),void 0!==e.resolve)return Tracer.enabled&&Tracer.M(),e.resolve(this,this);let t,r=this;for(;null!=r;){if(null!=(t=r.ce.get(e)))return Tracer.enabled&&Tracer.M(),t.resolve(r,this);if(null==r.parent)return t=this.de(e,r),Tracer.enabled&&Tracer.M(),t.resolve(r,this);r=r.parent}throw Error(`Unable to resolve key: ${e}`)}getAll(e){Tracer.enabled&&Tracer.j("Container","getAll",slice.call(arguments)),validateKey(e);let t,r=this;for(;null!=r;){if(null!=(t=r.ce.get(e)))return Tracer.enabled&&Tracer.M(),buildAllResponse(t,r,this);if(null==this.parent)return Tracer.enabled&&Tracer.M(),PLATFORM.I;r=r.parent}return Tracer.enabled&&Tracer.M(),PLATFORM.I}te(e){let t=this.fe.get(e);return null==t&&(t=Factory.create(e),this.fe.set(e,t)),t}pe(){Tracer.enabled&&Tracer.j("Container","createChild",slice.call(arguments));const e=this.ue,t={fe:e.fe,he:Object.assign(Object.create(null),e.he)},r=new Container(t);return r.parent=this,Tracer.enabled&&Tracer.M(),r}de(e,t){if(void 0!==e.register){const r=e.register(t,e);if(!(r instanceof Object)||null==r.resolve){const r=t.ce.get(e);if(null!=r)return r;throw Reporter.error(40)}return r}const r=new Resolver(e,1,e);return t.ce.set(e,r),r}}class Registration{constructor(){}static V(e,value){return new Resolver(e,0,value)}static singleton(e,value){return new Resolver(e,1,value)}static transient(e,value){return new Resolver(e,2,value)}static R(e,t){return new Resolver(e,3,t)}static ee(e,t){return new Resolver(t,5,e)}}class InstanceProvider{constructor(){this.V=null}ve(e){this.V=e}resolve(e,t){if(void 0===this.V)throw Reporter.error(50);return this.V}ye(){this.V=null}}const classInvokers=[{se:(e,t)=>new t,oe:invokeWithDynamicDependencies},{se:(e,t,r)=>new t(e.get(r[0])),oe:invokeWithDynamicDependencies},{se:(e,t,r)=>new t(e.get(r[0]),e.get(r[1])),oe:invokeWithDynamicDependencies},{se:(e,t,r)=>new t(e.get(r[0]),e.get(r[1]),e.get(r[2])),oe:invokeWithDynamicDependencies},{se:(e,t,r)=>new t(e.get(r[0]),e.get(r[1]),e.get(r[2]),e.get(r[3])),oe:invokeWithDynamicDependencies},{se:(e,t,r)=>new t(e.get(r[0]),e.get(r[1]),e.get(r[2]),e.get(r[3]),e.get(r[4])),oe:invokeWithDynamicDependencies}],fallbackInvoker={se:invokeWithDynamicDependencies,oe:invokeWithDynamicDependencies},encode=encodeURIComponent,encodeKey=e=>encode(e).replace("%24","$"),Profiler=(function(){const e=PLATFORM.now,t=[];let r;const n={me(name){t.push(name);let n=0,i=0;return{j(){1==++n&&(i=e(),++r[name].be),++r[name].$e},M(){0==--n&&(r[name].duration+=e()-i)}}},enable(){r={};for(const e of t)r[e]={name:e,duration:0,be:0,$e:0};n.enabled=1},disable(){n.enabled=0},ke(e){Object.keys(r).map(e=>r[e]).sort((e,t)=>t.duration-e.duration).forEach(t=>{e(t.name,t.duration,t.be,t.$e)})},enabled:0};return n})();class RuntimeCompilationResources{constructor(e){this.context=e}find(e,name){const t=e.we(name),r=this.context.he;let n=r[t];if(void 0===n&&(n=r[t]=this.context.ge(t,0)),null!=n&&n.te){const e=n.te(this.context);if(null!=e){const t=e.re.description;return void 0===t?null:t}}return null}create(e,name){const t=e.we(name),r=this.context.he;let n=r[t];if(void 0===n&&(n=r[t]=this.context.ge(t,0)),null!=n){const e=n.resolve(this.context,this.context);return void 0===e?null:e}return null}}class Handler{constructor(e,t){this.Re=e,this.R=t}t(e){e instanceof this.Re&&this.R.call(null,e)}}const IEventAggregator=DI.H("IEventAggregator").J(e=>e.singleton(EventAggregator));class EventAggregator{constructor(){this.Te={},this.messageHandlers=[]}De(e,t){let r,n;if(!e)throw Reporter.error(0);if("string"==typeof e){const i=e;if(null!=(r=this.Te[i]))for(n=(r=r.slice()).length;n--;)invokeCallback(r[n],t,i)}else{const t=e;for(n=(r=this.messageHandlers.slice()).length;n--;)invokeHandler(r[n],t)}}subscribe(e,t){let r,n;if(!e)throw Reporter.error(0);if("string"==typeof e){const i=e;r=t,void 0===this.Te[i]&&(this.Te[i]=[]),n=this.Te[i]}else r=new Handler(e,t),n=this.messageHandlers;return n.push(r),{ye(){const e=n.indexOf(r);-1!==e&&n.splice(e,1)}}}Le(e,t){const r=this.subscribe(e,(e,n)=>(r.ye(),t(e,n)));return r}}const camelCaseLookup={},kebabCaseLookup={},isNumericLookup={},ids={};export{DI,EventAggregator,IContainer,IEventAggregator,IServiceLocator,InstanceProvider,LogLevel,PLATFORM,Profiler,Registration,Reporter,RuntimeCompilationResources,Tracer,all,buildQueryString,camelCase,compareNumber,inject,isNumeric,join,kebabCase,lazy,nextId,optional,parseQueryString,relativeToFile,resetId,singleton,toArray,transient};
