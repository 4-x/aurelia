function __decorate(t,e,i,s){var r,n,o=arguments.length,h=3>o?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,e,i,s);else for(n=t.length-1;n>=0;n--)(r=t[n])&&(h=(3>o?r(h):o>3?r(e,i,h):r(e,i))||h);return o>3&&h&&Object.defineProperty(e,i,h),h}function invokeHandleMutation(t){t.t(this)}function findOriginalEventTarget(t){return t.i&&t.i()[0]||t.s&&t.s()[0]||t.path&&t.path[0]||t.target}function stopPropagation(){this.o(),this.h=1}function handleCapturedEvent(t){t.h=0;let e=findOriginalEventTarget(t);const i=[];for(;e;){if(e.u){const s=e.u[t.type];s&&(t.stopPropagation!==stopPropagation&&(t.o=t.stopPropagation,t.stopPropagation=stopPropagation),i.push(s))}e=e.parentNode}for(let e=i.length-1;e>=0&&!t.h;e--){const s=i[e];"handleEvent"in s?s.l(t):s(t)}}function handleDelegatedEvent(t){t.h=0;let e=findOriginalEventTarget(t);for(;e&&!t.h;){if(e.g){const i=e.g[t.type];i&&(t.stopPropagation!==stopPropagation&&(t.o=t.stopPropagation,t.stopPropagation=stopPropagation),"handleEvent"in i?i.l(t):i(t))}e=e.parentNode}}function defaultMatcher$1(t,e){return t===e}function isDataAttribute(t,e,i){if(1==IsDataAttribute[e])return 1;const s=e.slice(0,5);return IsDataAttribute[e]="aria-"===s||"data-"===s||i.p(t,e)}function handleSelfEvent(t){const e=findOriginalEventTarget(t);if(this.target===e)return this.v(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,e,i){return"string"==typeof t?createElementForTag(dom,t,e,i):createElementForType(dom,t,e,i)}function createElementForTag(dom,t,e,i){const instructions=[],s=[],dependencies=[],r=dom.createElement(t);let n=0;return e&&Object.keys(e).forEach(to=>{const value=e[to];isHTMLTargetedInstruction(value)?(n=1,instructions.push(value)):dom.setAttribute(r,to,value)}),n&&(dom.A(r),s.push(instructions)),i&&addChildren(dom,r,i,s,dependencies),new RenderPlan(dom,r,s,dependencies)}function createElementForType(dom,t,e,i){const s=t.description.name,instructions=[],r=[instructions],dependencies=[],n=[],bindables=t.description.bindables,o=dom.createElement(s);return dom.A(o),dependencies.includes(t)||dependencies.push(t),instructions.push(new HydrateElementInstruction(s,n)),e&&Object.keys(e).forEach(to=>{const value=e[to];isHTMLTargetedInstruction(value)?n.push(value):n.push(bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}),i&&addChildren(dom,o,i,r,dependencies),new RenderPlan(dom,o,r,dependencies)}function addChildren(dom,t,e,i,dependencies){for(let s=0,r=e.length;r>s;++s){const r=e[s];switch(typeof r){case"string":dom.appendChild(t,dom.createTextNode(r));break;case"object":dom.m(r)?dom.appendChild(t,r):"mergeInto"in r&&r.B(t,i,dependencies)}}}function isRenderLocation(t){return"au-end"===t.textContent}var HTMLTargetedInstructionType,NodeType;import{Reporter,DI,Registration,PLATFORM}from"@aurelia/kernel";import{hasBind,hasUnbind,targetObserver,DOM,connectable,ILifecycle,BindingMode,DelegationStrategy,ITargetObserverLocator,SetterObserver,IDOM,ITargetAccessorLocator,BindingBehaviorResource,IObserverLocator,buildTemplateDefinition,HydrateElementInstruction,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator,bindable,CustomElementResource,INode,ITemplateFactory,CompiledTemplate,NodeSequence,IExpressionParser,instructionRenderer,ensureExpression,MultiInterpolationBinding,InterpolationBinding,addBinding,Binding,IProjectorLocator,RuntimeBasicConfiguration}from"@aurelia/runtime";class Listener{constructor(dom,t,e,i,s,preventDefault,r,n){this.dom=dom,this.T=null,this.R=null,this.$state=0,this.S=e,this.O=n,this.preventDefault=preventDefault,this.I=i,this.target=s,this.C=t,this.M=r}L(t){const e=this.$scope.D;e.P=t;const i=this.I.evaluate(1048576,this.$scope,this.O);return Reflect.deleteProperty(e,"$event"),1!=i&&this.preventDefault&&t.preventDefault(),i}l(t){this.L(t)}V(t,e){if(2&this.$state){if(this.$scope===e)return;this.N(2048|t)}this.$state|=1,this.$scope=e;const i=this.I;hasBind(i)&&i.bind(t,e,this),this.k=this.M.addEventListener(this.dom,this.target,this.C,this,this.S),this.$state|=2,this.$state&=-2}N(t){if(!(2&this.$state))return;this.$state|=64;const e=this.I;hasUnbind(e)&&e._(t,this.$scope,this),this.$scope=null,this.k.j(),this.k=null,this.$state&=-67}F(t,e,i){}H(t,e,i){}}let AttributeObserver=class{constructor(t,e,i,s,r,n){this.U=1,this.$=67108879&t,this.q=i,this.G=e,this.X=s,this.Z=r,"class"===r?(this.J=this.K,this.W=this.Y,this.tt=this.et):"style"===r&&(this.J=this.it,this.W=this.st,this.tt=this.rt),this.nt=n}tt(){return this.X.getAttribute(this.nt)}rt(){return this.X.style.getPropertyValue(this.nt)}et(){return this.X.classList.contains(this.nt)}W(t,e){const i=this.X,s=this.Z;null==t?i.removeAttribute(s):i.setAttribute(s,t)}st(value){let t="";"string"==typeof value&&-1!==value.indexOf("!important")&&(t="important",value=value.replace("!important","")),this.X.style.setProperty(this.nt,value,t)}Y(t){const e=this.nt,i=this.X.classList;t?i.add(e):i.remove(e)}t(t){let e=0;for(let i=0,s=t.length;s>i;++i){const s=t[i];if("attributes"===s.type&&s.attributeName===this.Z){e=1;break}}e&&this.J()}J(){const t=this.X.getAttribute(this.Z);t!==this.ot&&(this.ot=t,this.ht(t,0))}it(){const t=this.X.style.getPropertyValue(this.nt);t!==this.ot&&(this.ot=t,this.ht(t,0))}K(){const t=this.X.classList.contains(this.nt);t!==this.ot&&(this.ot=t,this.ht(t,0))}subscribe(t){this.at()||startObservation(this.X,this),this.ct(t)}unsubscribe(t){this.ut(t)&&!this.at()&&stopObservation(this.X,this)}};AttributeObserver=__decorate([targetObserver("")],AttributeObserver);const startObservation=(t,e)=>{void 0===t.lt&&(t.lt=new Set),void 0===t.dt&&(t.dt=DOM.gt(t,handleMutation,{attributes:1})),t.lt.add(e)},stopObservation=(t,e)=>{const i=t.lt;return i.delete(e)?(0===i.size&&(t.dt.disconnect(),t.dt=void 0),1):0},handleMutation=t=>{t[0].target.lt.forEach(invokeHandleMutation,t)},{oneTime,bt:toView,pt:fromView}=BindingMode,toViewOrOneTime=toView|oneTime;let AttributeBinding=class{constructor(t,e,i,s,mode,r,n){connectable.ft(this),this.T=null,this.R=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.vt=null,this.At=null,this.$scope=null,this.O=n,this.mode=mode,this.q=r,this.I=t,this.target=e,this.Z=i,this.Bt=s,this.$=0}Tt(value,t){this.targetObserver.ht(value,16|(t|=this.$))}Rt(value,t){this.I.assign(32|(t|=this.$),this.$scope,this.O,value)}H(t,e,i){if(2&this.$state){if(i|=this.$,this.mode===BindingMode.pt&&(i&=-17,i|=32),16&i){const e=this.targetObserver.tt();return(10082!==this.I.St||this.Ot>1)&&(t=this.I.evaluate(i,this.$scope,this.O)),t!==e&&this.Tt(t,i),void(0==(this.mode&oneTime)&&(this.version++,this.I.connect(i,this.$scope,this),this.unobserve(0)))}if(!(32&i))throw Reporter.error(15,i);t!==this.I.evaluate(i,this.$scope,this.O)&&this.Rt(t,i)}}V(t,e){if(2&this.$state){if(this.$scope===e)return;this.N(2048|t)}this.$state|=1,this.$=67108879&t,this.$scope=e;let i=this.I;hasBind(i)&&i.bind(t,e,this);let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=new AttributeObserver(2048,this.$lifecycle,this.q,this.target,this.Z,this.Bt)),targetObserver.bind&&targetObserver.bind(t),i=this.I,this.mode&toViewOrOneTime&&this.Tt(i.evaluate(t,e,this.O),t),this.mode&toView&&i.connect(t,e,this),this.mode&fromView&&(targetObserver[this.id]|=32,targetObserver.subscribe(this)),this.$state|=2,this.$state&=-2}N(t){2&this.$state&&(this.$state|=64,this.$=0,hasUnbind(this.I)&&this.I._(t,this.$scope,this),this.$scope=null,this.targetObserver._&&this.targetObserver._(t),this.targetObserver.unsubscribe&&(this.targetObserver.unsubscribe(this),this.targetObserver[this.id]&=-33),this.unobserve(1),this.$state&=-67)}connect(t){2&this.$state&&this.I.connect(1048576|(t|=this.$),this.$scope,this)}yt(t){2&this.$state&&this.Tt(this.I.evaluate(1048576|(t|=this.$),this.$scope,this.O),t)}};AttributeBinding=__decorate([connectable()],AttributeBinding);let AttributeNSAccessor=class{constructor(t,e,i,s,r){this.U=1,this.attributeName=s,this.G=t,this.X=e,this.oldValue=this.ot=this.tt(),this.nt=i,this.wt=r}tt(){return this.X.getAttributeNS(this.wt,this.attributeName)}W(t){this.X.setAttributeNS(this.wt,this.attributeName,t)}};AttributeNSAccessor=__decorate([targetObserver("")],AttributeNSAccessor);const defaultMatcher=(t,e)=>t===e;let CheckedObserver=class{constructor(t,e,i,s,r){this.$=67108879&t,this.U=1,this.k=s,this.G=e,this.X=i,this.q=r}tt(){return this.ot}W(t,e){this.It||(this.It=this.X.Ct&&(this.X.Ct.Et||this.X.Ct.value),this.It&&this.It.subscribe(this)),this.Mt&&(this.Mt.Lt(this),this.Mt=null),"checkbox"===this.X.type&&Array.isArray(t)&&(this.Mt=this.q.Dt(this.$|e,t),this.Mt.Pt(this)),this.Vt()}xt(){this.Vt(),this.Nt(448)}H(t,e,i){this.Vt(),this.Nt(i)}Vt(){const value=this.ot,t=this.X,e=t.hasOwnProperty("model")?t.Et:t.value,i=t.kt||defaultMatcher;t.checked="radio"===t.type?!!i(value,e):1==value?1:Array.isArray(value)?-1!==value.findIndex(t=>!!i(t,e)):0}Nt(t){2048&t||this.ot!==this.oldValue&&this._t(this.ot,this.oldValue,this.$|t)}l(){let value=this.ot;const t=this.X,e=t.hasOwnProperty("model")?t.Et:t.value;let i;const s=t.kt||defaultMatcher;if("checkbox"===t.type){if(Array.isArray(value))return i=value.findIndex(t=>!!s(t,e)),void(t.checked&&-1===i?value.push(e):t.checked||-1===i||value.splice(i,1));value=t.checked}else{if(!t.checked)return;value=e}this.oldValue=this.ot,this.ot=value,this.Nt(327680)}subscribe(t){this.at()||this.k.subscribe(this.X,this),this.ct(t)}unsubscribe(t){this.ut(t)&&!this.at()&&this.k.j()}_(){this.Mt&&(this.Mt.Lt(this),this.Mt=null),this.It&&this.It.unsubscribe(this)}};CheckedObserver=__decorate([targetObserver()],CheckedObserver);let ClassAttributeAccessor=class{constructor(t,e){this.U=1,this.jt=1,this.G=t,this.Ft=null,this.X=e,this.version=0}tt(){return this.ot}W(t){const e=this.Ft||{};let i,name,s=this.version;if(t.length){const r=this.X;for(let n=0,o=(i=t.split(/\s+/)).length;o>n;n++)(name=i[n]).length&&(e[name]=s,r.classList.add(name))}if(this.Ft=e,this.version+=1,0!==s)for(name in s-=1,e)e.hasOwnProperty(name)&&e[name]===s&&this.X.classList.remove(name)}};ClassAttributeAccessor=__decorate([targetObserver("")],ClassAttributeAccessor);let DataAttributeAccessor=class{constructor(t,e,i){this.U=1,this.G=t,this.X=e,this.oldValue=this.ot=this.tt(),this.nt=i}tt(){return this.X.getAttribute(this.nt)}W(t){null===t?this.X.removeAttribute(this.nt):this.X.setAttribute(this.nt,t)}};DataAttributeAccessor=__decorate([targetObserver()],DataAttributeAccessor);let ElementPropertyAccessor=class{constructor(t,e,i){this.U=1,this.G=t,this.X=e,this.nt=i}tt(){return this.X[this.nt]}W(value){this.X[this.nt]=value}};ElementPropertyAccessor=__decorate([targetObserver("")],ElementPropertyAccessor);class ListenerTracker{constructor(dom,t,e,i){this.dom=dom,this.Ht=i,this.count=0,this.Ut=t,this.listener=e}$t(){this.count++,1===this.count&&this.dom.addEventListener(this.Ut,this.listener,null,this.Ht)}qt(){this.count--,0===this.count&&this.dom.removeEventListener(this.Ut,this.listener,null,this.Ht)}j(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.Ut,this.listener,null,this.Ht))}}class DelegateOrCaptureSubscription{constructor(t,e,i,s){this.zt=t,this.Gt=e,this.C=i,e[i]=s}j(){this.zt.qt(),this.Gt[this.C]=null}}class TriggerSubscription{constructor(dom,t,e,i){this.dom=dom,this.target=t,this.C=e,this.Xt=i,dom.addEventListener(e,i,t)}j(){this.dom.removeEventListener(this.C,this.Xt,this.target)}}class EventSubscriber{constructor(dom,t){this.dom=dom,this.Zt=t,this.target=null,this.k=null}subscribe(t,e){this.target=t,this.k=e;const i=this.dom.addEventListener,s=this.Zt;for(let r=0,n=s.length;n>r;++r)i(s[r],e,t)}j(){const t=this.target,e=this.k,i=this.Zt,s=this.dom.removeEventListener;for(let r=0,n=i.length;n>r;++r)s(i[r],e,t);this.target=this.k=null}}const IEventManager=DI.Kt("IEventManager").Jt(t=>t.singleton(EventManager));class EventManager{constructor(){this.Qt={},this.Wt={},this.Qt={},this.Wt={}}addEventListener(dom,t,e,i,strategy){let s,r,n;if(strategy===DelegationStrategy.Yt){(n=(s=this.Qt)[e]||(s[e]=new ListenerTracker(dom,e,handleDelegatedEvent,0))).$t();const r=t.g||(t.g={});return new DelegateOrCaptureSubscription(n,r,e,i)}if(strategy===DelegationStrategy.te){(n=(r=this.Wt)[e]||(r[e]=new ListenerTracker(dom,e,handleCapturedEvent,1))).$t();const s=t.u||(t.u={});return new DelegateOrCaptureSubscription(n,s,e,i)}return new TriggerSubscription(dom,t,e,i)}j(){let t;const{Qt:e,Wt:i}=this;for(t in e)e[t].j();for(t in i)i[t].j()}}const childObserverOptions={ee:1,ie:1,se:1};let SelectValueObserver=class{constructor(t,e,i,s,r,dom){this.$=67108879&t,this.U=1,this.G=e,this.X=i,this.k=s,this.q=r,this.dom=dom}tt(){return this.ot}W(t,e){const i=Array.isArray(t);if(!i&&null!=t&&this.X.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.Mt&&(this.Mt.Lt(this),this.Mt=null),i&&(this.Mt=this.q.Dt(this.$|e,t),this.Mt.Pt(this)),this.re(),this.Nt(e)}xt(t){this.re(t)}H(t,e,i){this.ht(t,this.$|i)}Nt(t){if(2048&t)return;const e=this.oldValue,i=this.ot;i!==e&&this._t(i,e,this.$|t)}l(){this.ne()&&this.Nt(327680)}re(t){const e=this.ot,i=Array.isArray(e),s=this.X,r=s.kt||defaultMatcher$1,n=s.options;let o=n.length;for(;o--;){const t=n[o],s=t.hasOwnProperty("model")?t.Et:t.value;t.selected=i?-1!==e.findIndex(t=>!!r(s,t)):!!r(s,e)}}ne(){const t=this.X,e=t.options,i=e.length,s=this.ot;let r=0;if(t.multiple){if(!Array.isArray(s))return 1;let n;const o=t.kt||defaultMatcher$1,h=[];for(;i>r;)(n=e[r]).selected&&h.push(n.hasOwnProperty("model")?n.Et:n.value),++r;for(r=0;s.length>r;){const t=s[r];-1===h.findIndex(e=>!!o(t,e))?s.splice(r,1):++r}for(r=0;h.length>r;){const t=h[r];-1===s.findIndex(e=>!!o(t,e))&&s.push(t),++r}return 0}let value=null;for(;i>r;){const t=e[r];if(t.selected){value=t.hasOwnProperty("model")?t.Et:t.value;break}++r}return this.oldValue=this.ot,this.ot=value,1}subscribe(t){this.at()||this.k.subscribe(this.X,this),this.ct(t)}unsubscribe(t){this.ut(t)&&!this.at()&&this.k.j()}bind(){this.oe=this.dom.gt(this.X,this.he.bind(this),childObserverOptions)}_(){this.oe.disconnect(),this.oe=null,this.Mt&&(this.Mt.Lt(this),this.Mt=null)}he(){this.re(),this.ne()&&this.Nt(65536)}};SelectValueObserver=__decorate([targetObserver()],SelectValueObserver);let StyleAttributeAccessor=class{constructor(t,e){this.U=1,this.oldValue=this.ot=e.style.cssText,this.G=t,this.X=e,this.ae=null,this.version=0}tt(){return this.X.style.cssText}ce(t,value){let e="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(e="important",value=value.replace("!important","")),this.X.style.setProperty(t,value,e)}W(t){const e=this.ae||{};let i,s=this.version;if(null!==t)if(t instanceof Object){let value;for(i in t)t.hasOwnProperty(i)&&(value=t[i],e[i=i.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=s,this.ce(i,value))}else if(t.length){const r=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let n;for(;null!==(n=r.exec(t));)(i=n[1])&&(e[i]=s,this.ce(i,n[2]))}if(this.ae=e,this.version+=1,0!==s)for(i in s-=1,e)e.hasOwnProperty(i)&&e[i]===s&&this.X.style.removeProperty(i)}};StyleAttributeAccessor=__decorate([targetObserver()],StyleAttributeAccessor);const ISVGAnalyzer=DI.Kt("ISVGAnalyzer").Jt(t=>t.singleton(class{p(t,e){return 0}})),inputValueDefaults={button:"",ue:"on",color:"#000000",le:"",de:"",email:"",ge:"",hidden:"",be:"",pe:"",number:"",password:"",fe:"on",range:"50",reset:"",search:"",submit:"",tel:"",text:"",time:"",url:"",ve:""};let ValueAttributeObserver=class{constructor(t,e,i,s){if(this.U=1,this.k=s,this.G=t,this.X=e,this.nt=i,"value"===i){const t=e.type;this.defaultValue=inputValueDefaults[t||"text"],"file"===t&&(this.flush=this.Ae)}else this.defaultValue="";this.oldValue=this.ot=e[i]}tt(){return this.X[this.nt]}W(t,e){this.X[this.nt]=t,2048&e||this._t(this.ot,this.oldValue,e)}l(){const t=this.oldValue=this.ot,e=this.ot=this.tt();t!==e&&(this._t(e,t,327680),this.oldValue=e)}subscribe(t){this.at()||(this.oldValue=this.tt(),this.k.subscribe(this.X,this)),this.ct(t)}unsubscribe(t){this.ut(t)&&!this.at()&&this.k.j()}Ae(){const t=this.ot;this.oldValue!==t&&""===t&&(this.W(t,this.me),this.oldValue=this.ot)}};ValueAttributeObserver=__decorate([targetObserver("")],ValueAttributeObserver);const xlinkNS="http://www.w3.org/1999/xlink",xmlNS="http://www.w3.org/XML/1998/namespace",xmlnsNS="http://www.w3.org/2000/xmlns/",nsAttributes=(function(t){return t["Be"]=["actuate",xlinkNS],t["Te"]=["arcrole",xlinkNS],t["Re"]=["href",xlinkNS],t["Se"]=["role",xlinkNS],t["Oe"]=["show",xlinkNS],t["ye"]=["title",xlinkNS],t["we"]=["type",xlinkNS],t["Ie"]=["lang",xmlNS],t["Ce"]=["space",xmlNS],t.Ee=["xmlns",xmlnsNS],t["Me"]=["xlink",xmlnsNS],t})(Object.create(null)),inputEvents=["change","input"],selectEvents=["change"],contentEvents=["change","input","blur","keyup","paste"],scrollEvents=["scroll"],overrideProps=(function(t){return t.Le=1,t.style=1,t.De=1,t.checked=1,t.value=1,t.Et=1,t["Be"]=1,t["Te"]=1,t["Re"]=1,t["Se"]=1,t["Oe"]=1,t["ye"]=1,t["we"]=1,t["Ie"]=1,t["Ce"]=1,t.Ee=1,t["Me"]=1,t})(Object.create(null));class TargetObserverLocator{constructor(dom,t){this.dom=dom,this.Pe=t}static register(t){return Registration.singleton(ITargetObserverLocator,this).register(t)}Ve(t,e,i,s,r){switch(r){case"checked":return new CheckedObserver(t,e,s,new EventSubscriber(this.dom,inputEvents),i);case"value":return"SELECT"===s.tagName?new SelectValueObserver(t,e,s,new EventSubscriber(this.dom,selectEvents),i,this.dom):new ValueAttributeObserver(e,s,r,new EventSubscriber(this.dom,inputEvents));case"files":return new ValueAttributeObserver(e,s,r,new EventSubscriber(this.dom,inputEvents));case"textContent":case"innerHTML":return new ValueAttributeObserver(e,s,r,new EventSubscriber(this.dom,contentEvents));case"scrollTop":case"scrollLeft":return new ValueAttributeObserver(e,s,r,new EventSubscriber(this.dom,scrollEvents));case"class":return new ClassAttributeAccessor(e,s);case"style":case"css":return new StyleAttributeAccessor(e,s);case"model":return new SetterObserver(t,s,r);case"role":return new DataAttributeAccessor(e,s,r);default:if(void 0!==nsAttributes[r]){const t=nsAttributes[r];return new AttributeNSAccessor(e,s,r,t[0],t[1])}if(isDataAttribute(s,r,this.Pe))return new DataAttributeAccessor(e,s,r)}return null}xe(t,e,i){return 1==overrideProps[i]}Ne(t,e){return this.dom.m(e)}}TargetObserverLocator.inject=[IDOM,ISVGAnalyzer];class TargetAccessorLocator{constructor(dom,t){this.dom=dom,this.Pe=t}static register(t){return Registration.singleton(ITargetAccessorLocator,this).register(t)}ke(t,e,i,s){switch(s){case"textContent":return new ElementPropertyAccessor(e,i,s);case"class":return new ClassAttributeAccessor(e,i);case"style":case"css":return new StyleAttributeAccessor(e,i);case"src":case"href":case"role":return new DataAttributeAccessor(e,i,s);default:if(void 0!==nsAttributes[s]){const t=nsAttributes[s];return new AttributeNSAccessor(e,i,s,t[0],t[1])}return isDataAttribute(i,s,this.Pe)?new DataAttributeAccessor(e,i,s):new ElementPropertyAccessor(e,i,s)}}Ne(t,e){return this.dom.m(e)}}TargetAccessorLocator.inject=[IDOM,ISVGAnalyzer];const IsDataAttribute={};class AttrBindingBehavior{bind(t,e,i){i.targetObserver=new DataAttributeAccessor(i.O.get(ILifecycle),i.target,i.Bt)}_(t,e,i){}}BindingBehaviorResource._e("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,e,i){if(!i.L||!i.C)throw Reporter.error(8);i.v=i.L,i.L=handleSelfEvent}_(t,e,i){i.L=i.v,i.v=null}}BindingBehaviorResource._e("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.q=t}bind(t,e,i,...s){if(0===s.length)throw Reporter.error(9);if(i.mode!==BindingMode.je&&i.mode!==BindingMode.pt)throw Reporter.error(10);this.$=67108879&t;const targetObserver=this.q.Ve(this.$|t,i.target,i.Bt);if(!targetObserver.k)throw Reporter.error(10);i.targetObserver=targetObserver,targetObserver.Fe=i.targetObserver.k,targetObserver.k=new EventSubscriber(i.O.get(IDOM),s)}_(t,e,i){i.targetObserver.k.j(),i.targetObserver.k=i.targetObserver.Fe,i.targetObserver.Fe=null}}UpdateTriggerBindingBehavior.inject=[IObserverLocator],BindingBehaviorResource._e("updateTrigger",UpdateTriggerBindingBehavior),(function(HTMLTargetedInstructionType){HTMLTargetedInstructionType.He="ha",HTMLTargetedInstructionType.Ue="hb",HTMLTargetedInstructionType.$e="hc",HTMLTargetedInstructionType.qe="hd",HTMLTargetedInstructionType.setAttribute="he"})(HTMLTargetedInstructionType||(HTMLTargetedInstructionType={}));class TextBindingInstruction{constructor(from){this.type="ha",this.from=from}}class TriggerBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=DelegationStrategy.ze,this.to=to}}class DelegateBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Yt,this.to=to}}class CaptureBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.te,this.to=to}}class StylePropertyBindingInstruction{constructor(from,to){this.type="hd",this.from=from,this.to=to}}class SetAttributeInstruction{constructor(value,to){this.type="he",this.to=to,this.value=value}}class AttributeBindingInstruction{constructor(t,from,to){this.type="hc",this.from=from,this.Ge=t,this.to=to}}class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.Xe=t}get Ze(){return this.Je||(this.Je=buildTemplateDefinition(null,null,this.Xe,null,"string"==typeof this.Xe,null,this.instructions,this.dependencies))}Ke(t,e){return t.Ke(this.dom,this.Ze,null,e)}Qe(t,e,i){return this.We(e,i).create()}We(t,e){return t.We(this.dom,this.Ze,e)}B(t,instructions,dependencies){this.dom.appendChild(t,this.Xe),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}const composeSource={name:"au-compose",containerless:1},composeProps=["subject","composing"];class Compose{constructor(dom,t,e,i,s){this.dom=dom,this.subject=null,this.Ye=0,this.ti=s,this.ei=null,this.ii=t,this.si=i,this.ti.ri=(()=>{this.Ye=0}),this.properties=e.instructions.filter(t=>!composeProps.includes(t.to)).reduce((t,e)=>(e.to&&(t[e.to]=e),t),{})}ni(t){this.oi(this.subject,null,t),this.ti.ni(t,this.$scope)}hi(t){this.ti.hi(t)}ai(t){this.ti.ai(t)}ci(t){this.ei=null,this.ti.ci(t)}ui(t){this.ti.ui(t)}li(t,e,i){this.oi(t,e,i)}oi(t,e,i){this.ei!==t&&(this.ei=t,t=t instanceof Promise?t.then(t=>this.di(t,i)):this.di(t,i),this.Ye=1,this.ti.gi(t,i))}di(t,e){const i=this.bi(t,e);return i?(i.pi(this.fi.host),i.vi(this.ii.$scope),i):null}bi(t,e){return t?"lockScope"in t?t:"createView"in t?t.Qe(e,this.si,this.ii.$context):"create"in t?t.create():"template"in t?this.si.We(this.dom,t,this.ii.$context).create():createElement(this.dom,t,this.properties,this.fi.children).Qe(e,this.si,this.ii.$context):null}}Compose.inject=[IDOM,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator],__decorate([bindable],Compose.prototype,"subject",void 0),__decorate([bindable],Compose.prototype,"composing",void 0),CustomElementResource._e(composeSource,Compose),(function(NodeType){NodeType[NodeType.Element=1]="Element",NodeType[NodeType.Attr=2]="Attr",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATASection=4]="CDATASection",NodeType[NodeType.EntityReference=5]="EntityReference",NodeType[NodeType.Entity=6]="Entity",NodeType[NodeType.ProcessingInstruction=7]="ProcessingInstruction",NodeType[NodeType.Comment=8]="Comment",NodeType[NodeType.Document=9]="Document",NodeType[NodeType.DocumentType=10]="DocumentType",NodeType[NodeType.DocumentFragment=11]="DocumentFragment",NodeType[NodeType.Notation=12]="Notation"})(NodeType||(NodeType={}));class HTMLDOM{constructor(t,e,i,s,r,n){this.window=t,this.document=e,this.Node=i,this.Element=s,this.HTMLElement=r,this.CustomEvent=n,DOM.Ai&&(Reporter.write(1001),DOM.mi()),DOM.initialize(this)}static register(t){return Registration.Bi(IDOM,this).register(t)}addEventListener(t,e,i,s){(i||this.document).addEventListener(t,e,s)}appendChild(t,e){t.appendChild(e)}cloneNode(t,e){return t.cloneNode(0!=e)}Ti(t){if(this.Ri(t))return t;if(null===t.parentNode)throw Reporter.error(52);const e=this.document.createComment("au-end"),i=this.document.createComment("au-start");return t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(i,e),e.Si=i,i.$nodes=null,e}createDocumentFragment(t){if(null==t)return this.document.createDocumentFragment();if(this.m(t)){if(void 0!==t.content)return t.content;const e=this.document.createDocumentFragment();return e.appendChild(t),e}return this.Oi(t).content}createElement(name){return this.document.createElement(name)}fetch(t,e){return this.window.fetch(t,e)}yi(t,e){return new this.CustomEvent(t,e)}dispatchEvent(t){this.document.dispatchEvent(t)}gt(t,e,i){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>PLATFORM.wi};const s=new MutationObserver(e);return s.observe(t,i),s}Oi(t){if(null==t)return this.document.createElement("template");const template=this.document.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.document.createTextNode(t)}insertBefore(t,e){e.parentNode.insertBefore(t,e)}Ii(t){return"AU-M"===t.nodeName}m(t){return null!=t&&t.nodeType>0}Ri(t){return"au-end"===t.textContent}A(t){t.className="au"}Ci(t,e){t.Ei(INode,e),t.Ei(this.Node,e),t.Ei(this.Element,e),t.Ei(this.HTMLElement,e)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,e,i,s){(i||this.document).removeEventListener(t,e,s)}setAttribute(t,name,value){t.setAttribute(name,value)}}const $DOM=DOM;class TextNodeSequence{constructor(dom,t){this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new AuMarker(t)]}Mi(){return this.targets}insertBefore(t){t.parentNode.insertBefore(this.firstChild,t)}Li(t){t.appendChild(this.firstChild)}remove(){this.firstChild.remove()}}class FragmentNodeSequence{constructor(dom,t){this.dom=dom,this.Di=t;const e=t.querySelectorAll(".au");let i=0,s=e.length;const targets=this.targets=Array(s);for(;s>i;){const t=e[i];targets[i]="AU-M"===t.nodeName?this.dom.Ti(t):t,++i}const r=t.childNodes;i=0;const childNodes=this.childNodes=Array(s=r.length);for(;s>i;)childNodes[i]=r[i],++i;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.start=this.end=null}Mi(){return this.targets}insertBefore(t){if(t.parentNode.insertBefore(this.Di,t),isRenderLocation(t)){this.end=t;const e=this.start=t.Si;e.$nodes=null===e.$nodes?this:PLATFORM.Pi}}Li(t){t.appendChild(this.Di),this.start=this.end=null}remove(){const t=this.Di;if(null!==this.start&&this.start.$nodes===this){const e=this.end;let i,s=this.start.nextSibling;for(;s!==e;)i=s.nextSibling,t.appendChild(s),s=i;this.start.$nodes=null,this.start=this.end=null}else{let e=this.firstChild;if(e.parentNode!==t){const i=this.lastChild;let s;for(;null!==e&&(s=e.nextSibling,t.appendChild(e),e!==i);)e=s}}}}class NodeSequenceFactory{constructor(dom,t){this.dom=dom;const e=dom.createDocumentFragment(t),childNodes=e.childNodes;switch(childNodes.length){case 0:return void(this.Vi=(()=>NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.xi=0,this.Xe=t,void(this.Ni=TextNodeSequence)}default:this.xi=1,this.Xe=e,this.Ni=FragmentNodeSequence}}Vi(){return new this.Ni(this.dom,this.Xe.cloneNode(this.xi))}}class AuMarker{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(t=>{t.previousSibling=null,t.childNodes=PLATFORM.wi,t.nodeName="AU-M",t.nodeType=1})(AuMarker.prototype);class HTMLTemplateFactory{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITemplateFactory,this).register(t)}create(t,e){return new CompiledTemplate(this.dom,e,new NodeSequenceFactory(this.dom,e.template),t)}}HTMLTemplateFactory.inject=[IDOM];let TextBindingRenderer=class{constructor(t,e){this.ki=t,this.q=e}_i(t,dom,e,i,s,r){const n=s.nextSibling;let o;dom.Ii(s)&&dom.remove(s);const h=ensureExpression(this.ki,r.from,2048);o=h.ji?new MultiInterpolationBinding(this.q,h,n,"textContent",BindingMode.bt,e):new InterpolationBinding(h.Fi,h,n,"textContent",BindingMode.bt,this.q,e,1),addBinding(i,o)}};TextBindingRenderer.inject=[IExpressionParser,IObserverLocator],TextBindingRenderer=__decorate([instructionRenderer("ha")],TextBindingRenderer);let ListenerBindingRenderer=class{constructor(t,e){this.ki=t,this.M=e}_i(t,dom,e,i,s,r){const n=ensureExpression(this.ki,r.from,80|r.strategy+6),o=new Listener(dom,r.to,r.strategy,n,s,r.preventDefault,this.M,e);addBinding(i,o)}};ListenerBindingRenderer.inject=[IExpressionParser,IEventManager],ListenerBindingRenderer=__decorate([instructionRenderer("hb")],ListenerBindingRenderer);let SetAttributeRenderer=class{_i(t,dom,e,i,s,r){s.setAttribute(r.to,r.value)}};SetAttributeRenderer=__decorate([instructionRenderer("he")],SetAttributeRenderer);let StylePropertyBindingRenderer=class{constructor(t,e){this.ki=t,this.q=e}_i(t,dom,e,i,s,r){const n=ensureExpression(this.ki,r.from,48|BindingMode.bt),o=new Binding(n,s.style,r.to,BindingMode.bt,this.q,e);addBinding(i,o)}};StylePropertyBindingRenderer.inject=[IExpressionParser,IObserverLocator],StylePropertyBindingRenderer=__decorate([instructionRenderer("hd")],StylePropertyBindingRenderer);let AttributeBindingRenderer=class{constructor(t,e){this.ki=t,this.q=e}_i(t,dom,e,i,s,r){const n=ensureExpression(this.ki,r.from,48|BindingMode.bt),o=new AttributeBinding(n,s,r.Ge,r.to,BindingMode.bt,this.q,e);addBinding(i,o)}};AttributeBindingRenderer.inject=[IExpressionParser,IObserverLocator],AttributeBindingRenderer=__decorate([instructionRenderer("hc")],AttributeBindingRenderer);const defaultShadowOptions={mode:"open"};class HTMLProjectorLocator{static register(t){return Registration.singleton(IProjectorLocator,this).register(t)}Hi(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw Reporter.error(21);return new ShadowDOMProjector(dom,t,host,def)}return def.containerless?new ContainerlessProjector(dom,t,host):new HostProjector(t,host)}}const childObserverOptions$1={ee:1};class ShadowDOMProjector{constructor(dom,$customElement,host,t){let shadowOptions;this.dom=dom,this.host=host,this.shadowRoot=host.Ui(shadowOptions=null!=t.shadowOptions&&"object"==typeof t.shadowOptions&&"mode"in t.shadowOptions?t.shadowOptions:defaultShadowOptions),this.host.$customElement=$customElement,this.shadowRoot.$customElement=$customElement}get children(){return this.shadowRoot.childNodes}$i(t){this.dom.gt(this.shadowRoot,t,childObserverOptions$1)}qi(){return this.shadowRoot}zi(t){t.Li(this.shadowRoot)}Gi(t){t.remove()}}class ContainerlessProjector{constructor(dom,$customElement,host){this.childNodes=host.childNodes.length?PLATFORM.toArray(host.childNodes):PLATFORM.wi,this.host=dom.Ti(host),this.host.$customElement=$customElement}get children(){return this.childNodes}$i(t){new MutationObserver(t).observe(this.host,childObserverOptions$1)}qi(){return this.host.Xi()}zi(t){t.insertBefore(this.host)}Gi(t){t.remove()}}class HostProjector{constructor($customElement,host){this.host=host,this.host.$customElement=$customElement}get children(){return this.host.childNodes}$i(t){}qi(){return this.host.Xi()}zi(t){t.Li(this.host)}Gi(t){t.remove()}}const IProjectorLocatorRegistration=HTMLProjectorLocator,ITargetAccessorLocatorRegistration=TargetAccessorLocator,ITargetObserverLocatorRegistration=TargetObserverLocator,ITemplateFactoryRegistration=HTMLTemplateFactory,DefaultComponents=[HTMLProjectorLocator,TargetAccessorLocator,TargetObserverLocator,HTMLTemplateFactory],AttrBindingBehaviorRegistration=AttrBindingBehavior,SelfBindingBehaviorRegistration=SelfBindingBehavior,UpdateTriggerBindingBehaviorRegistration=UpdateTriggerBindingBehavior,ComposeRegistration=Compose,DefaultResources=[AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose],ListenerBindingRendererRegistration=ListenerBindingRenderer,AttributeBindingRendererRegistration=AttributeBindingRenderer,SetAttributeRendererRegistration=SetAttributeRenderer,StylePropertyBindingRendererRegistration=StylePropertyBindingRenderer,TextBindingRendererRegistration=TextBindingRenderer,DefaultRenderers=[ListenerBindingRenderer,AttributeBindingRenderer,SetAttributeRenderer,StylePropertyBindingRenderer,TextBindingRenderer],BasicConfiguration={register:t=>RuntimeBasicConfiguration.register(t).register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Zi(){return this.register(DI.Zi())}};export{AttrBindingBehavior,AttrBindingBehaviorRegistration,AttributeBinding,AttributeBindingInstruction,AttributeBindingRendererRegistration,AttributeNSAccessor,BasicConfiguration,CaptureBindingInstruction,CheckedObserver,ClassAttributeAccessor,Compose,ComposeRegistration,$DOM as DOM,DataAttributeAccessor,DefaultComponents,DefaultRenderers,DefaultResources,DelegateBindingInstruction,DelegateOrCaptureSubscription,ElementPropertyAccessor,EventSubscriber,HTMLDOM,HTMLTargetedInstructionType,IEventManager,IProjectorLocatorRegistration,ISVGAnalyzer,ITargetAccessorLocatorRegistration,ITargetObserverLocatorRegistration,ITemplateFactoryRegistration,Listener,ListenerBindingRendererRegistration,ListenerTracker,NodeType,RenderPlan,SelectValueObserver,SelfBindingBehavior,SelfBindingBehaviorRegistration,SetAttributeInstruction,SetAttributeRendererRegistration,StyleAttributeAccessor,StylePropertyBindingInstruction,StylePropertyBindingRendererRegistration,TargetAccessorLocator,TargetObserverLocator,TextBindingInstruction,TextBindingRendererRegistration,TriggerBindingInstruction,TriggerSubscription,UpdateTriggerBindingBehavior,UpdateTriggerBindingBehaviorRegistration,ValueAttributeObserver,createElement,isHTMLTargetedInstruction};
