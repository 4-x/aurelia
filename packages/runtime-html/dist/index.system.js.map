{"version":3,"file":"index.system.js","sources":["../src/binding/listener.ts","../../../node_modules/tslib/tslib.es6.js","../src/observation/element-attribute-observer.ts","../src/binding/attribute.ts","../src/observation/attribute-ns-accessor.ts","../src/observation/checked-observer.ts","../src/observation/class-attribute-accessor.ts","../src/observation/data-attribute-accessor.ts","../src/observation/element-property-accessor.ts","../src/observation/event-manager.ts","../src/observation/select-value-observer.ts","../src/observation/style-attribute-accessor.ts","../src/observation/svg-analyzer.ts","../src/observation/value-attribute-observer.ts","../src/observation/observer-locator.ts","../src/resources/binding-behaviors/attr.ts","../src/resources/binding-behaviors/self.ts","../src/resources/binding-behaviors/update-trigger.ts","../src/definitions.ts","../src/instructions.ts","../src/create-element.ts","../src/resources/custom-elements/compose.ts","../src/dom.ts","../src/html-renderer.ts","../src/projectors.ts","../src/configuration.ts"],"sourcesContent":["import { IDisposable, IIndexable, IServiceLocator, Tracer } from '@aurelia/kernel';\nimport {\n  DelegationStrategy,\n  hasBind,\n  hasUnbind,\n  IBinding,\n  IConnectableBinding,\n  IDOM,\n  IsBindingBehavior,\n  IScope,\n  LifecycleFlags,\n  State\n} from '@aurelia/runtime';\nimport { IEventManager } from '../observation/event-manager';\n\nconst slice = Array.prototype.slice;\n\nexport interface Listener extends IConnectableBinding {}\n/**\n * Listener binding. Handle event binding between view and view model\n */\nexport class Listener implements IBinding {\n  public dom: IDOM;\n\n  public $state: State;\n  public $scope!: IScope;\n\n  public delegationStrategy: DelegationStrategy;\n  public locator: IServiceLocator;\n  public preventDefault: boolean;\n  public sourceExpression: IsBindingBehavior;\n  public target: Node;\n  public targetEvent: string;\n\n  private readonly eventManager: IEventManager;\n  private handler!: IDisposable;\n\n  // tslint:disable-next-line:parameters-max-number\n  constructor(\n    dom: IDOM,\n    targetEvent: string,\n    delegationStrategy: DelegationStrategy,\n    sourceExpression: IsBindingBehavior,\n    target: Node,\n    preventDefault: boolean,\n    eventManager: IEventManager,\n    locator: IServiceLocator\n  ) {\n    this.dom = dom;\n    this.$state = State.none;\n\n    this.delegationStrategy = delegationStrategy;\n    this.locator = locator;\n    this.preventDefault = preventDefault;\n    this.sourceExpression = sourceExpression;\n    this.target = target;\n    this.targetEvent = targetEvent;\n\n    this.eventManager = eventManager;\n  }\n\n  public callSource(event: Event): ReturnType<IsBindingBehavior['evaluate']> {\n    if (Tracer.enabled) { Tracer.enter('Listener', 'callSource', slice.call(arguments)); }\n    const overrideContext = this.$scope.overrideContext;\n    overrideContext.$event = event;\n\n    const result = this.sourceExpression.evaluate(LifecycleFlags.mustEvaluate, this.$scope, this.locator);\n\n    Reflect.deleteProperty(overrideContext, '$event');\n\n    if (result !== true && this.preventDefault) {\n      event.preventDefault();\n    }\n\n    if (Tracer.enabled) { Tracer.leave(); }\n    return result;\n  }\n\n  public handleEvent(event: Event): void {\n    this.callSource(event);\n  }\n\n  public $bind(flags: LifecycleFlags, scope: IScope): void {\n    if (Tracer.enabled) { Tracer.enter('Listener', '$bind', slice.call(arguments)); }\n    if (this.$state & State.isBound) {\n      if (this.$scope === scope) {\n        if (Tracer.enabled) { Tracer.leave(); }\n        return;\n      }\n\n      this.$unbind(flags | LifecycleFlags.fromBind);\n    }\n    // add isBinding flag\n    this.$state |= State.isBinding;\n\n    this.$scope = scope;\n\n    const sourceExpression = this.sourceExpression;\n    if (hasBind(sourceExpression)) {\n      sourceExpression.bind(flags, scope, this);\n    }\n\n    this.handler = this.eventManager.addEventListener(\n      this.dom,\n      this.target,\n      this.targetEvent,\n      this,\n      this.delegationStrategy\n    );\n\n    // add isBound flag and remove isBinding flag\n    this.$state |= State.isBound;\n    this.$state &= ~State.isBinding;\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n\n  public $unbind(flags: LifecycleFlags): void {\n    if (Tracer.enabled) { Tracer.enter('Listener', '$unbind', slice.call(arguments)); }\n    if (!(this.$state & State.isBound)) {\n      if (Tracer.enabled) { Tracer.leave(); }\n      return;\n    }\n    // add isUnbinding flag\n    this.$state |= State.isUnbinding;\n\n    const sourceExpression = this.sourceExpression;\n    if (hasUnbind(sourceExpression)) {\n      sourceExpression.unbind(flags, this.$scope, this);\n    }\n\n    this.$scope = null!;\n    this.handler.dispose();\n    this.handler = null!;\n\n    // remove isBound and isUnbinding flags\n    this.$state &= ~(State.isBound | State.isUnbinding);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n\n  public observeProperty(flags: LifecycleFlags, obj: IIndexable, propertyName: string): void {\n    return;\n  }\n\n  public handleChange(newValue: unknown, previousValue: unknown, flags: LifecycleFlags): void {\n    return;\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {\n  DOM,\n  IBindingTargetObserver,\n  ILifecycle,\n  IObserverLocator,\n  ISubscriber,\n  ISubscriberCollection,\n  LifecycleFlags,\n  Priority,\n  subscriberCollection,\n} from '@aurelia/runtime';\n\nexport interface IHtmlElement extends HTMLElement {\n  $mObserver: MutationObserver;\n  $eMObservers: Set<ElementMutationSubscription>;\n}\n\nexport interface ElementMutationSubscription {\n  handleMutation(mutationRecords: MutationRecord[]): void;\n}\n\nexport interface AttributeObserver extends\n  IBindingTargetObserver<IHtmlElement, string>,\n  ISubscriber,\n  ISubscriberCollection { }\n\n/**\n * Observer for handling two-way binding with attributes\n * Has different strategy for class/style and normal attributes\n * TODO: handle SVG/attributes with namespace\n */\n@subscriberCollection()\nexport class AttributeObserver implements AttributeObserver, ElementMutationSubscription {\n  public readonly lifecycle: ILifecycle;\n  public readonly observerLocator: IObserverLocator;\n\n  public readonly obj: IHtmlElement;\n  public readonly propertyKey: string;\n  public readonly targetAttribute: string;\n  public currentValue: unknown;\n  public oldValue: unknown;\n\n  public hasChanges: boolean;\n  public priority: Priority;\n\n  constructor(\n    lifecycle: ILifecycle,\n    observerLocator: IObserverLocator,\n    element: Element,\n    propertyKey: string,\n    targetAttribute: string,\n  ) {\n    this.observerLocator = observerLocator;\n    this.lifecycle = lifecycle;\n\n    this.obj = element as IHtmlElement;\n    this.propertyKey = propertyKey;\n    this.targetAttribute = targetAttribute;\n    this.currentValue = null;\n    this.oldValue = null;\n\n    this.hasChanges = false;\n    this.priority = Priority.propagate;\n  }\n\n  public getValue(): unknown {\n    return this.currentValue;\n  }\n\n  public setValue(newValue: unknown, flags: LifecycleFlags): void {\n    this.currentValue = newValue;\n    this.hasChanges = newValue !== this.oldValue;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.flushRAF(flags);\n    }\n  }\n\n  public flushRAF(flags: LifecycleFlags): void {\n    if (this.hasChanges) {\n      this.hasChanges = false;\n      const { currentValue } = this;\n      this.oldValue = currentValue;\n      switch (this.targetAttribute) {\n        case 'class': {\n          // Why is class attribute observer setValue look different with class attribute accessor?\n          // ==============\n          // For class list\n          // newValue is simply checked if truthy or falsy\n          // and toggle the class accordingly\n          // -- the rule of this is quite different to normal attribute\n          //\n          // for class attribute, observer is different in a way that it only observe a particular class at a time\n          // this also comes from syntax, where it would typically be my-class.class=\"someProperty\"\n          //\n          // so there is no need for separating class by space and add all of them like class accessor\n          if (!!currentValue) {\n            this.obj.classList.add(this.propertyKey);\n          } else {\n            this.obj.classList.remove(this.propertyKey);\n          }\n          break;\n        }\n        case 'style': {\n          let priority = '';\n          let newValue = currentValue as string;\n          if (typeof newValue === 'string' && newValue.includes('!important')) {\n            priority = 'important';\n            newValue = newValue.replace('!important', '');\n          }\n          this.obj.style.setProperty(this.propertyKey, newValue, priority);\n        }\n      }\n    }\n  }\n\n  public handleMutation(mutationRecords: MutationRecord[]): void {\n    let shouldProcess = false;\n    for (let i = 0, ii = mutationRecords.length; ii > i; ++i) {\n      const record = mutationRecords[i];\n      if (record.type === 'attributes' && record.attributeName === this.propertyKey) {\n        shouldProcess = true;\n        break;\n      }\n    }\n\n    if (shouldProcess) {\n      let newValue;\n      switch (this.targetAttribute) {\n        case 'class':\n          newValue = this.obj.classList.contains(this.propertyKey);\n          break;\n        case 'style':\n          newValue = this.obj.style.getPropertyValue(this.propertyKey);\n          break;\n        default:\n          throw new Error(`Unsupported targetAttribute: ${this.targetAttribute}`);\n      }\n\n      if (newValue !== this.currentValue) {\n        const { currentValue } = this;\n        this.currentValue = this.oldValue = newValue;\n        this.hasChanges = false;\n        this.callSubscribers(newValue, currentValue, LifecycleFlags.fromDOMEvent);\n      }\n    }\n  }\n\n  public subscribe(subscriber: ISubscriber): void {\n    if (!this.hasSubscribers()) {\n      this.currentValue = this.oldValue = this.obj.getAttribute(this.propertyKey);\n      startObservation(this.obj, this);\n    }\n    this.addSubscriber(subscriber);\n  }\n\n  public unsubscribe(subscriber: ISubscriber): void {\n    this.removeSubscriber(subscriber);\n    if (!this.hasSubscribers()) {\n      stopObservation(this.obj, this);\n    }\n  }\n\n  public bind(flags: LifecycleFlags): void {\n    this.lifecycle.enqueueRAF(this.flushRAF, this, this.priority);\n  }\n\n  public unbind(flags: LifecycleFlags): void {\n    this.lifecycle.dequeueRAF(this.flushRAF, this);\n  }\n}\n\nconst startObservation = (element: IHtmlElement, subscription: ElementMutationSubscription): void => {\n  if (element.$eMObservers === undefined) {\n    element.$eMObservers = new Set();\n  }\n  if (element.$mObserver === undefined) {\n    element.$mObserver = DOM.createNodeObserver!(\n      element,\n      // @ts-ignore\n      handleMutation,\n      { attributes: true }\n    ) as MutationObserver;\n  }\n  element.$eMObservers.add(subscription);\n};\n\nconst stopObservation = (element: IHtmlElement, subscription: ElementMutationSubscription): boolean => {\n  const $eMObservers = element.$eMObservers;\n  if ($eMObservers.delete(subscription)) {\n    if ($eMObservers.size === 0) {\n      element.$mObserver.disconnect();\n      element.$mObserver = undefined!;\n    }\n    return true;\n  }\n  return false;\n};\n\nconst handleMutation = (mutationRecords: MutationRecord[]): void => {\n  (mutationRecords[0].target as IHtmlElement).$eMObservers.forEach(invokeHandleMutation, mutationRecords);\n};\n\nfunction invokeHandleMutation(this: MutationRecord[], s: ElementMutationSubscription): void {\n  s.handleMutation(this);\n}\n","import { IServiceLocator, Reporter, Tracer } from '@aurelia/kernel';\nimport { AccessorOrObserver, BindingMode, connectable, ExpressionKind, hasBind, hasUnbind, IBinding, IBindingTargetObserver, IConnectableBinding, IForOfStatement, ILifecycle, IObserverLocator, IPartialConnectableBinding, IsBindingBehavior, IScope, LifecycleFlags, State } from '@aurelia/runtime';\nimport { AttributeObserver } from '../observation/element-attribute-observer';\n\nconst slice = Array.prototype.slice;\n\n// BindingMode is not a const enum (and therefore not inlined), so assigning them to a variable to save a member accessor is a minor perf tweak\nconst { oneTime, toView, fromView } = BindingMode;\n\n// pre-combining flags for bitwise checks is a minor perf tweak\nconst toViewOrOneTime = toView | oneTime;\n\nexport interface AttributeBinding extends IConnectableBinding {}\n\n/**\n * Attribute binding. Handle attribute binding betwen view/view model. Understand Html special attributes\n */\n@connectable()\nexport class AttributeBinding implements IPartialConnectableBinding {\n  public id!: number;\n  public $state: State;\n  public $lifecycle: ILifecycle;\n  public $scope: IScope;\n\n  public locator: IServiceLocator;\n  public mode: BindingMode;\n  public observerLocator: IObserverLocator;\n  public sourceExpression: IsBindingBehavior | IForOfStatement;\n  public target: Element;\n  public targetAttribute: string;\n  /**\n   * Target key. In case Attr has inner structure, such as class -> classList, style -> CSSStyleDeclaration\n   */\n  public targetProperty: string;\n\n  public targetObserver!: AccessorOrObserver;\n\n  public persistentFlags: LifecycleFlags;\n\n  constructor(\n    sourceExpression: IsBindingBehavior | IForOfStatement,\n    target: Element,\n    // some attributes may have inner structure\n    // such as class -> collection of class names\n    // such as style -> collection of style rules\n    //\n    // for normal attributes, targetAttribute and targetProperty are the same and can be ignore\n    targetAttribute: string,\n    targetKey: string,\n    mode: BindingMode,\n    observerLocator: IObserverLocator,\n    locator: IServiceLocator\n  ) {\n    connectable.assignIdTo(this);\n    this.$state = State.none;\n    this.$lifecycle = locator.get(ILifecycle);\n    this.$scope = null!;\n\n    this.locator = locator;\n    this.mode = mode;\n    this.observerLocator = observerLocator;\n    this.sourceExpression = sourceExpression;\n    this.target = target;\n    this.targetAttribute = targetAttribute;\n    this.targetProperty = targetKey;\n    this.persistentFlags = LifecycleFlags.none;\n  }\n\n  public updateTarget(value: unknown, flags: LifecycleFlags): void {\n    flags |= this.persistentFlags;\n    this.targetObserver.setValue(value, flags | LifecycleFlags.updateTargetInstance);\n  }\n\n  public updateSource(value: unknown, flags: LifecycleFlags): void {\n    flags |= this.persistentFlags;\n    this.sourceExpression.assign!(flags | LifecycleFlags.updateSourceExpression, this.$scope, this.locator, value);\n  }\n\n  public handleChange(newValue: unknown, _previousValue: unknown, flags: LifecycleFlags): void {\n    if (Tracer.enabled) { Tracer.enter('Binding', 'handleChange', slice.call(arguments)); }\n    if (!(this.$state & State.isBound)) {\n      if (Tracer.enabled) { Tracer.leave(); }\n      return;\n    }\n\n    flags |= this.persistentFlags;\n\n    if (this.mode === BindingMode.fromView) {\n      flags &= ~LifecycleFlags.updateTargetInstance;\n      flags |= LifecycleFlags.updateSourceExpression;\n    }\n\n    if (flags & LifecycleFlags.updateTargetInstance) {\n      const previousValue = this.targetObserver.getValue();\n      // if the only observable is an AccessScope then we can assume the passed-in newValue is the correct and latest value\n      if (this.sourceExpression.$kind !== ExpressionKind.AccessScope || this.observerSlots > 1) {\n        newValue = this.sourceExpression.evaluate(flags, this.$scope, this.locator);\n      }\n      if (newValue !== previousValue) {\n        this.updateTarget(newValue, flags);\n      }\n      if ((this.mode & oneTime) === 0) {\n        this.version++;\n        this.sourceExpression.connect(flags, this.$scope, this);\n        this.unobserve(false);\n      }\n      if (Tracer.enabled) { Tracer.leave(); }\n      return;\n    }\n\n    if (flags & LifecycleFlags.updateSourceExpression) {\n      if (newValue !== this.sourceExpression.evaluate(flags, this.$scope, this.locator)) {\n        this.updateSource(newValue, flags);\n      }\n      if (Tracer.enabled) { Tracer.leave(); }\n      return;\n    }\n\n    throw Reporter.error(15, flags);\n  }\n\n  public $bind(flags: LifecycleFlags, scope: IScope): void {\n    if (Tracer.enabled) { Tracer.enter('Binding', '$bind', slice.call(arguments)); }\n    if (this.$state & State.isBound) {\n      if (this.$scope === scope) {\n        if (Tracer.enabled) { Tracer.leave(); }\n        return;\n      }\n      this.$unbind(flags | LifecycleFlags.fromBind);\n    }\n    // add isBinding flag\n    this.$state |= State.isBinding;\n\n    // Store flags which we can only receive during $bind and need to pass on\n    // to the AST during evaluate/connect/assign\n    this.persistentFlags = flags & LifecycleFlags.persistentBindingFlags;\n\n    this.$scope = scope;\n\n    let sourceExpression = this.sourceExpression;\n    if (hasBind(sourceExpression)) {\n      sourceExpression.bind(flags, scope, this);\n    }\n\n    let targetObserver = this.targetObserver as IBindingTargetObserver;\n    if (!targetObserver) {\n      targetObserver = this.targetObserver = new AttributeObserver(\n        this.$lifecycle,\n        this.observerLocator,\n        this.target,\n        this.targetProperty,\n        this.targetAttribute,\n      );\n    }\n    if (targetObserver.bind) {\n      targetObserver.bind(flags);\n    }\n\n    // during bind, binding behavior might have changed sourceExpression\n    sourceExpression = this.sourceExpression;\n    if (this.mode & toViewOrOneTime) {\n      this.updateTarget(sourceExpression.evaluate(flags, scope, this.locator), flags);\n    }\n    if (this.mode & toView) {\n      sourceExpression.connect(flags, scope, this);\n    }\n    if (this.mode & fromView) {\n      (targetObserver as IBindingTargetObserver & { [key: string]: number })[this.id] |= LifecycleFlags.updateSourceExpression;\n      targetObserver.subscribe(this);\n    }\n\n    // add isBound flag and remove isBinding flag\n    this.$state |= State.isBound;\n    this.$state &= ~State.isBinding;\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n\n  public $unbind(flags: LifecycleFlags): void {\n    if (Tracer.enabled) { Tracer.enter('Binding', '$unbind', slice.call(arguments)); }\n    if (!(this.$state & State.isBound)) {\n      if (Tracer.enabled) { Tracer.leave(); }\n      return;\n    }\n    // add isUnbinding flag\n    this.$state |= State.isUnbinding;\n\n    // clear persistent flags\n    this.persistentFlags = LifecycleFlags.none;\n\n    if (hasUnbind(this.sourceExpression)) {\n      this.sourceExpression.unbind(flags, this.$scope, this);\n    }\n    this.$scope = null!;\n\n    if ((this.targetObserver as IBindingTargetObserver).unbind) {\n      (this.targetObserver as IBindingTargetObserver).unbind!(flags);\n    }\n    if ((this.targetObserver as IBindingTargetObserver).unsubscribe) {\n      (this.targetObserver as IBindingTargetObserver).unsubscribe(this);\n      (this.targetObserver as IBindingTargetObserver & { [key: string]: number })[this.id] &= ~LifecycleFlags.updateSourceExpression;\n    }\n    this.unobserve(true);\n\n    // remove isBound and isUnbinding flags\n    this.$state &= ~(State.isBound | State.isUnbinding);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n\n  public connect(flags: LifecycleFlags): void {\n    if (Tracer.enabled) { Tracer.enter('Binding', 'connect', slice.call(arguments)); }\n    if (this.$state & State.isBound) {\n      flags |= this.persistentFlags;\n      this.sourceExpression.connect(flags | LifecycleFlags.mustEvaluate, this.$scope, this);\n    }\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n}\n","import {\n  IAccessor,\n  ILifecycle,\n  LifecycleFlags,\n  Priority,\n} from '@aurelia/runtime';\n\nexport class AttributeNSAccessor implements IAccessor<string | null> {\n  public readonly lifecycle: ILifecycle;\n\n  public readonly obj: HTMLElement;\n  public readonly propertyKey: string;\n  public currentValue: string | null;\n  public oldValue: string | null;\n\n  public readonly namespace: string;\n\n  public hasChanges: boolean;\n  public priority: Priority;\n\n  constructor(\n    lifecycle: ILifecycle,\n    obj: HTMLElement,\n    propertyKey: string,\n    namespace: string,\n  ) {\n    this.lifecycle = lifecycle;\n\n    this.obj = obj;\n    this.propertyKey = propertyKey;\n    this.currentValue = null;\n    this.oldValue = null;\n\n    this.namespace = namespace;\n\n    this.hasChanges = false;\n    this.priority = Priority.propagate;\n  }\n\n  public getValue(): string | null {\n    return this.currentValue;\n  }\n\n  public setValue(newValue: string | null, flags: LifecycleFlags): void {\n    this.currentValue = newValue;\n    this.hasChanges = newValue !== this.oldValue;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.flushRAF(flags);\n    }\n  }\n\n  public flushRAF(flags: LifecycleFlags): void {\n    if (this.hasChanges) {\n      this.hasChanges = false;\n      const { currentValue } = this;\n      this.oldValue = currentValue;\n      if (currentValue == void 0) {\n        this.obj.removeAttributeNS(this.namespace, this.propertyKey);\n      } else {\n        this.obj.setAttributeNS(this.namespace, this.propertyKey, currentValue);\n      }\n    }\n  }\n\n  public bind(flags: LifecycleFlags): void {\n    this.lifecycle.enqueueRAF(this.flushRAF, this, this.priority);\n    this.currentValue = this.oldValue = this.obj.getAttributeNS(this.namespace, this.propertyKey);\n  }\n\n  public unbind(flags: LifecycleFlags): void {\n    this.lifecycle.dequeueRAF(this.flushRAF, this);\n  }\n}\n","import {\n  CollectionKind,\n  collectionSubscriberCollection,\n  IAccessor,\n  ICollectionObserver,\n  ICollectionSubscriberCollection,\n  ILifecycle,\n  IndexMap,\n  IObserverLocator,\n  ISubscriber,\n  ISubscriberCollection,\n  LifecycleFlags,\n  ObserversLookup,\n  Priority,\n  SetterObserver,\n  subscriberCollection,\n} from '@aurelia/runtime';\n\nimport { IEventSubscriber } from './event-manager';\nimport { ValueAttributeObserver } from './value-attribute-observer';\n\nexport interface IInputElement extends HTMLInputElement {\n  model?: unknown;\n  $observers?: ObserversLookup & {\n    model?: SetterObserver;\n    value?: ValueAttributeObserver;\n  };\n  matcher?: typeof defaultMatcher;\n}\n\nfunction defaultMatcher(a: unknown, b: unknown): boolean {\n  return a === b;\n}\n\nexport interface CheckedObserver extends\n  ISubscriberCollection {}\n\n@subscriberCollection()\nexport class CheckedObserver implements IAccessor<unknown> {\n  public readonly lifecycle: ILifecycle;\n  public readonly observerLocator: IObserverLocator;\n  public readonly handler: IEventSubscriber;\n\n  public readonly obj: IInputElement;\n  public currentValue: unknown;\n  public oldValue: unknown;\n\n  public hasChanges: boolean;\n  public priority: Priority;\n\n  public arrayObserver?: ICollectionObserver<CollectionKind.array>;\n  public valueObserver?: ValueAttributeObserver | SetterObserver;\n\n  constructor(\n    lifecycle: ILifecycle,\n    observerLocator: IObserverLocator,\n    handler: IEventSubscriber,\n    obj: IInputElement,\n  ) {\n    this.lifecycle = lifecycle;\n    this.observerLocator = observerLocator;\n    this.handler = handler;\n\n    this.obj = obj;\n    this.currentValue = void 0;\n    this.oldValue = void 0;\n\n    this.hasChanges = false;\n    this.priority = Priority.propagate;\n\n    this.arrayObserver = void 0;\n    this.valueObserver = void 0;\n  }\n\n  public getValue(): unknown {\n    return this.currentValue;\n  }\n\n  public setValue(newValue: unknown, flags: LifecycleFlags): void {\n    this.currentValue = newValue;\n    this.hasChanges = newValue !== this.oldValue;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.flushRAF(flags);\n    }\n  }\n\n  public flushRAF(flags: LifecycleFlags): void {\n    if (this.hasChanges) {\n      this.hasChanges = false;\n      const { currentValue } = this;\n      this.oldValue = currentValue;\n\n      if (this.valueObserver === void 0) {\n        if (this.obj.$observers !== void 0) {\n          if (this.obj.$observers.model !== void 0) {\n            this.valueObserver = this.obj.$observers.model;\n          } else if (this.obj.$observers.value !== void 0) {\n            this.valueObserver = this.obj.$observers.value;\n          }\n        }\n        if (this.valueObserver !== void 0) {\n          this.valueObserver.subscribe(this);\n        }\n      }\n\n      if (this.arrayObserver !== void 0) {\n        this.arrayObserver.unsubscribeFromCollection(this);\n        this.arrayObserver = void 0;\n      }\n\n      if (this.obj.type === 'checkbox' && Array.isArray(currentValue)) {\n        this.arrayObserver = this.observerLocator.getArrayObserver(flags, currentValue);\n        this.arrayObserver.subscribeToCollection(this);\n      }\n\n      this.synchronizeElement();\n    }\n  }\n\n  public handleCollectionChange(indexMap: IndexMap, flags: LifecycleFlags): void {\n    const { currentValue, oldValue } = this;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.oldValue = currentValue;\n      this.synchronizeElement();\n    } else {\n      this.hasChanges = true;\n    }\n\n    this.callSubscribers(currentValue, oldValue, flags);\n  }\n\n  public handleChange(newValue: unknown, previousValue: unknown, flags: LifecycleFlags): void {\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.synchronizeElement();\n    } else {\n      this.hasChanges = true;\n    }\n\n    this.callSubscribers(newValue, previousValue, flags);\n  }\n\n  public synchronizeElement(): void {\n    const { currentValue, obj } = this;\n    const elementValue = obj.hasOwnProperty('model') ? obj.model : obj.value;\n    const isRadio = obj.type === 'radio';\n    const matcher = obj.matcher !== void 0 ? obj.matcher : defaultMatcher;\n\n    if (isRadio) {\n      obj.checked = !!matcher(currentValue, elementValue);\n    } else if (currentValue === true) {\n      obj.checked = true;\n    } else if (Array.isArray(currentValue)) {\n      obj.checked = currentValue.findIndex(item => !!matcher(item, elementValue)) !== -1;\n    } else {\n      obj.checked = false;\n    }\n  }\n\n  public handleEvent(): void {\n    this.oldValue = this.currentValue;\n    let { currentValue } = this;\n    const { obj } = this;\n    const elementValue = obj.hasOwnProperty('model') ? obj.model : obj.value;\n    let index: number;\n    const matcher = obj.matcher !== void 0 ? obj.matcher : defaultMatcher;\n\n    if (obj.type === 'checkbox') {\n      if (Array.isArray(currentValue)) {\n        index = currentValue.findIndex(item => !!matcher(item, elementValue));\n        if (obj.checked && index === -1) {\n          currentValue.push(elementValue);\n        } else if (!obj.checked && index !== -1) {\n          currentValue.splice(index, 1);\n        }\n        // when existing currentValue is array, do not invoke callback as only the array obj has changed\n        return;\n      }\n      currentValue = obj.checked;\n    } else if (obj.checked) {\n      currentValue = elementValue;\n    } else {\n      return;\n    }\n    this.currentValue = currentValue;\n    this.callSubscribers(this.currentValue, this.oldValue, LifecycleFlags.fromDOMEvent | LifecycleFlags.allowPublishRoundtrip);\n  }\n\n  public bind(flags: LifecycleFlags): void {\n    this.lifecycle.enqueueRAF(this.flushRAF, this, this.priority);\n    this.currentValue = this.obj.checked;\n  }\n\n  public unbind(flags: LifecycleFlags): void {\n    if (this.arrayObserver !== void 0) {\n      this.arrayObserver.unsubscribeFromCollection(this);\n      this.arrayObserver = void 0;\n    }\n\n    if (this.valueObserver !== void 0) {\n      this.valueObserver.unsubscribe(this);\n    }\n\n    this.lifecycle.dequeueRAF(this.flushRAF, this);\n  }\n\n  public subscribe(subscriber: ISubscriber): void {\n    if (!this.hasSubscribers()) {\n      this.handler.subscribe(this.obj, this);\n    }\n    this.addSubscriber(subscriber);\n  }\n\n  public unsubscribe(subscriber: ISubscriber): void {\n    this.removeSubscriber(subscriber);\n    if (!this.hasSubscribers()) {\n      this.handler.dispose();\n    }\n  }\n}\n","import {\n  IAccessor,\n  ILifecycle,\n  LifecycleFlags,\n  Priority,\n} from '@aurelia/runtime';\n\nexport class ClassAttributeAccessor implements IAccessor<string> {\n  public readonly lifecycle: ILifecycle;\n\n  public readonly obj: HTMLElement;\n  public currentValue: string;\n  public oldValue: string;\n\n  public readonly doNotCache: true;\n  public nameIndex: Record<string, number>;\n  public version: number;\n\n  public hasChanges: boolean;\n  public isActive: boolean;\n  public priority: Priority;\n\n  constructor(\n    lifecycle: ILifecycle,\n    obj: HTMLElement,\n  ) {\n    this.lifecycle = lifecycle;\n\n    this.obj = obj;\n    this.currentValue = '';\n    this.oldValue = '';\n\n    this.doNotCache = true;\n    this.nameIndex = {};\n    this.version = 0;\n\n    this.isActive = false;\n    this.hasChanges = false;\n    this.priority = Priority.propagate;\n  }\n\n  public getValue(): string {\n    return this.currentValue;\n  }\n\n  public setValue(newValue: string, flags: LifecycleFlags): void {\n    this.currentValue = newValue;\n    this.hasChanges = newValue !== this.oldValue;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.flushRAF(flags);\n    }\n  }\n\n  public flushRAF(flags: LifecycleFlags): void {\n    if (this.hasChanges) {\n      this.hasChanges = false;\n      const { currentValue, nameIndex } = this;\n      let { version } = this;\n\n      this.oldValue = currentValue;\n      let names: string[];\n      let name: string;\n\n      // Add the classes, tracking the version at which they were added.\n      if (currentValue.length) {\n        const node = this.obj;\n        names = currentValue.split(/\\s+/);\n        for (let i = 0, length = names.length; i < length; i++) {\n          name = names[i];\n          if (!name.length) {\n            continue;\n          }\n          nameIndex[name] = version;\n          node.classList.add(name);\n        }\n      }\n\n      // Update state variables.\n      this.nameIndex = nameIndex;\n      this.version += 1;\n\n      // First call to setValue?  We're done.\n      if (version === 0) {\n        return;\n      }\n\n      // Remove classes from previous version.\n      version -= 1;\n      for (name in nameIndex) {\n        if (!nameIndex.hasOwnProperty(name) || nameIndex[name] !== version) {\n          continue;\n        }\n\n        // TODO: this has the side-effect that classes already present which are added again,\n        // will be removed if they're not present in the next update.\n        // Better would be do have some configurability for this behavior, allowing the user to\n        // decide whether initial classes always need to be kept, always removed, or something in between\n        this.obj.classList.remove(name);\n      }\n    }\n  }\n\n  public bind(flags: LifecycleFlags): void {\n    this.lifecycle.enqueueRAF(this.flushRAF, this, this.priority);\n  }\n\n  public unbind(flags: LifecycleFlags): void {\n    this.lifecycle.dequeueRAF(this.flushRAF, this);\n  }\n}\n","import {\n  IAccessor,\n  ILifecycle,\n  LifecycleFlags,\n  Priority,\n} from '@aurelia/runtime';\n\nexport class DataAttributeAccessor implements IAccessor<string | null> {\n  public readonly lifecycle: ILifecycle;\n\n  public readonly obj: HTMLElement;\n  public readonly propertyKey: string;\n  public currentValue: string | null;\n  public oldValue: string | null;\n\n  public hasChanges: boolean;\n  public priority: Priority;\n\n  constructor(\n    lifecycle: ILifecycle,\n    obj: HTMLElement,\n    propertyKey: string,\n  ) {\n    this.lifecycle = lifecycle;\n\n    this.obj = obj;\n    this.propertyKey = propertyKey;\n    this.currentValue = null;\n    this.oldValue = null;\n\n    this.hasChanges = false;\n    this.priority = Priority.propagate;\n  }\n\n  public getValue(): string | null {\n    return this.currentValue;\n  }\n\n  public setValue(newValue: string | null, flags: LifecycleFlags): void {\n    this.currentValue = newValue;\n    this.hasChanges = newValue !== this.oldValue;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.flushRAF(flags);\n    }\n  }\n\n  public flushRAF(flags: LifecycleFlags): void {\n    if (this.hasChanges) {\n      this.hasChanges = false;\n      const { currentValue } = this;\n      this.oldValue = currentValue;\n      if (currentValue == void 0) {\n        this.obj.removeAttribute(this.propertyKey);\n      } else {\n        this.obj.setAttribute(this.propertyKey, currentValue);\n      }\n    }\n  }\n\n  public bind(flags: LifecycleFlags): void {\n    this.lifecycle.enqueueRAF(this.flushRAF, this, this.priority);\n    this.currentValue = this.oldValue = this.obj.getAttribute(this.propertyKey);\n  }\n\n  public unbind(flags: LifecycleFlags): void {\n    this.lifecycle.dequeueRAF(this.flushRAF, this);\n  }\n}\n","import { IIndexable } from '@aurelia/kernel';\nimport {\n  IAccessor,\n  ILifecycle,\n  LifecycleFlags,\n  Priority,\n} from '@aurelia/runtime';\n\nexport class ElementPropertyAccessor implements IAccessor<unknown> {\n  public readonly lifecycle: ILifecycle;\n\n  public readonly obj: IIndexable;\n  public readonly propertyKey: string;\n  public currentValue: unknown;\n  public oldValue: unknown;\n\n  public hasChanges: boolean;\n  public priority: Priority;\n\n  constructor(\n    lifecycle: ILifecycle,\n    obj: IIndexable,\n    propertyKey: string,\n  ) {\n    this.lifecycle = lifecycle;\n\n    this.obj = obj;\n    this.propertyKey = propertyKey;\n    this.currentValue = void 0;\n    this.oldValue = void 0;\n\n    this.hasChanges = false;\n    this.priority = Priority.propagate;\n  }\n\n  public getValue(): unknown {\n    return this.currentValue;\n  }\n\n  public setValue(newValue: string | null, flags: LifecycleFlags): void {\n    this.currentValue = newValue;\n    this.hasChanges = newValue !== this.oldValue;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.flushRAF(flags);\n    }\n  }\n\n  public flushRAF(flags: LifecycleFlags): void {\n    if (this.hasChanges) {\n      this.hasChanges = false;\n      const { currentValue } = this;\n      this.oldValue = currentValue;\n      this.obj[this.propertyKey] = currentValue;\n    }\n  }\n\n  public bind(flags: LifecycleFlags): void {\n    this.lifecycle.enqueueRAF(this.flushRAF, this, this.priority);\n    this.currentValue = this.oldValue = this.obj[this.propertyKey];\n  }\n\n  public unbind(flags: LifecycleFlags): void {\n    this.lifecycle.dequeueRAF(this.flushRAF, this);\n  }\n}\n","import { DI, IDisposable } from '@aurelia/kernel';\nimport { DelegationStrategy, IDOM } from '@aurelia/runtime';\n\nexport interface IManagedEvent extends Event {\n  propagationStopped?: boolean;\n  // legacy\n  path?: EventTarget[];\n  standardStopPropagation?(): void;\n  // old composedPath\n  deepPath?(): EventTarget[];\n}\n\n//Note: path and deepPath are designed to handle v0 and v1 shadow dom specs respectively\n/** @internal */\nexport function findOriginalEventTarget(event: IManagedEvent): EventTarget {\n  return (event.composedPath && event.composedPath()[0]) || (event.deepPath && event.deepPath()[0]) || (event.path && event.path[0]) || event.target;\n}\n\nfunction stopPropagation(this: IManagedEvent): void {\n  this.standardStopPropagation!();\n  this.propagationStopped = true;\n}\n\nfunction handleCapturedEvent(event: IManagedEvent): void {\n  event.propagationStopped = false;\n  let target: IEventTargetWithLookups = findOriginalEventTarget(event) as EventTarget & IEventTargetWithLookups;\n  const orderedCallbacks = [];\n  /**\n   * During capturing phase, event 'bubbles' down from parent. Needs to reorder callback from root down to target\n   */\n  while (target) {\n    if (target.capturedCallbacks) {\n      const callback = target.capturedCallbacks[event.type];\n      if (callback) {\n        if (event.stopPropagation !== stopPropagation) {\n          event.standardStopPropagation = event.stopPropagation;\n          event.stopPropagation = stopPropagation;\n        }\n        orderedCallbacks.push(callback);\n      }\n    }\n    target = target.parentNode!;\n  }\n\n  for (let i = orderedCallbacks.length - 1; i >= 0 && !event.propagationStopped; i--) {\n    const orderedCallback = orderedCallbacks[i];\n    if ('handleEvent' in orderedCallback) {\n      orderedCallback.handleEvent(event);\n    } else {\n      orderedCallback(event);\n    }\n  }\n}\n\nfunction handleDelegatedEvent(event: IManagedEvent): void {\n  event.propagationStopped = false;\n  let target: IEventTargetWithLookups = findOriginalEventTarget(event) as EventTarget & IEventTargetWithLookups;\n  while (target && !event.propagationStopped) {\n    if (target.delegatedCallbacks) {\n      const callback = target.delegatedCallbacks[event.type];\n      if (callback) {\n        if (event.stopPropagation !== stopPropagation) {\n          event.standardStopPropagation = event.stopPropagation;\n          event.stopPropagation = stopPropagation;\n        }\n        if ('handleEvent' in callback) {\n          callback.handleEvent(event);\n        } else {\n          callback(event);\n        }\n      }\n    }\n    target = target.parentNode!;\n  }\n}\n\nexport class ListenerTracker {\n  private readonly dom: IDOM;\n  private readonly capture: boolean;\n  private readonly eventName: string;\n  private readonly listener: EventListenerOrEventListenerObject;\n  private count: number;\n\n  constructor(dom: IDOM, eventName: string, listener: EventListenerOrEventListenerObject, capture: boolean) {\n    this.dom = dom;\n    this.capture = capture;\n    this.count = 0;\n    this.eventName = eventName;\n    this.listener = listener;\n  }\n\n  public increment(): void {\n    this.count++;\n    if (this.count === 1) {\n      this.dom.addEventListener(this.eventName, this.listener, null, this.capture);\n    }\n  }\n\n  public decrement(): void {\n    this.count--;\n    if (this.count === 0) {\n      this.dom.removeEventListener(this.eventName, this.listener, null, this.capture);\n    }\n  }\n\n  /*@internal*/\n  public dispose(): void {\n    if (this.count > 0) {\n      this.count = 0;\n      this.dom.removeEventListener(this.eventName, this.listener, null, this.capture);\n    }\n  }\n}\n\n/**\n * Enable dispose() pattern for `delegate` & `capture` commands\n */\nexport class DelegateOrCaptureSubscription implements IDisposable {\n  public entry: { decrement: () => void; };\n  public lookup: Record<string, EventListenerOrEventListenerObject>;\n  public targetEvent: string;\n\n  constructor(\n    entry: { decrement: () => void; },\n    lookup: Record<string, EventListenerOrEventListenerObject>,\n    targetEvent: string,\n    callback: EventListenerOrEventListenerObject\n  ) {\n    this.entry = entry;\n    this.lookup = lookup;\n    this.targetEvent = targetEvent;\n    lookup[targetEvent] = callback;\n  }\n\n  public dispose(): void {\n    this.entry.decrement();\n    this.lookup[this.targetEvent] = null!;\n  }\n}\n\n/**\n * Enable dispose() pattern for addEventListener for `trigger`\n */\nexport class TriggerSubscription implements IDisposable {\n  public target: Node;\n  public targetEvent: string;\n  public callback: EventListenerOrEventListenerObject;\n  private readonly dom: IDOM;\n\n  constructor(\n    dom: IDOM,\n    target: Node,\n    targetEvent: string,\n    callback: EventListenerOrEventListenerObject\n  ) {\n    this.dom = dom;\n    this.target = target;\n    this.targetEvent = targetEvent;\n    this.callback = callback;\n    dom.addEventListener(targetEvent, callback, target);\n  }\n\n  public dispose(): void {\n    this.dom.removeEventListener(this.targetEvent, this.callback, this.target);\n  }\n}\n\nexport interface  IEventTargetWithLookups extends Node {\n  delegatedCallbacks?: Record<string, EventListenerOrEventListenerObject>;\n  capturedCallbacks?: Record<string, EventListenerOrEventListenerObject>;\n}\n\nexport interface IElementConfiguration {\n  tagName: string;\n  properties: Record<string, string[]>;\n}\n\nexport interface IEventSubscriber extends IDisposable {\n  subscribe(node: Node, callbackOrListener: EventListenerOrEventListenerObject): void;\n}\n\nexport class EventSubscriber implements IEventSubscriber {\n  private readonly dom: IDOM;\n  private readonly events: string[];\n  private target: Node;\n  private handler: EventListenerOrEventListenerObject;\n\n  constructor(dom: IDOM, events: string[]) {\n    this.dom = dom;\n    this.events = events;\n    this.target = null!;\n    this.handler = null!;\n  }\n\n  public subscribe(node: Node, callbackOrListener: EventListenerOrEventListenerObject): void {\n    this.target = node;\n    this.handler = callbackOrListener;\n\n    const add = this.dom.addEventListener;\n    const events = this.events;\n\n    for (let i = 0, ii = events.length; ii > i; ++i) {\n      add(events[i], callbackOrListener, node);\n    }\n  }\n\n  public dispose(): void {\n    const node = this.target;\n    const callbackOrListener = this.handler;\n    const events = this.events;\n    const remove = this.dom.removeEventListener;\n\n    for (let i = 0, ii = events.length; ii > i; ++i) {\n      remove(events[i], callbackOrListener, node);\n    }\n\n    this.target = this.handler = null!;\n  }\n}\n\nexport type EventSubscription = DelegateOrCaptureSubscription | TriggerSubscription;\n\nexport interface IEventManager extends IDisposable {\n  addEventListener(dom: IDOM, target: Node, targetEvent: string, callbackOrListener: EventListenerOrEventListenerObject, delegate: DelegationStrategy): IDisposable;\n}\n\nexport const IEventManager = DI.createInterface<IEventManager>('IEventManager').withDefault(x => x.singleton(EventManager));\n\n/** @internal */\nexport class EventManager implements IEventManager {\n  public readonly delegatedHandlers: Record<string, ListenerTracker> = {};\n  public readonly capturedHandlers: Record<string, ListenerTracker> = {};\n\n  constructor() {\n    this.delegatedHandlers = {};\n    this.capturedHandlers = {};\n  }\n\n  public addEventListener(\n    dom: IDOM,\n    target: IEventTargetWithLookups,\n    targetEvent: string,\n    callbackOrListener: EventListenerOrEventListenerObject,\n    strategy: DelegationStrategy\n  ): EventSubscription {\n    let delegatedHandlers: Record<string, ListenerTracker> | undefined;\n    let capturedHandlers: Record<string, ListenerTracker> | undefined;\n    let handlerEntry: ListenerTracker | undefined;\n\n    if (strategy === DelegationStrategy.bubbling) {\n      delegatedHandlers = this.delegatedHandlers;\n      handlerEntry = delegatedHandlers[targetEvent] || (delegatedHandlers[targetEvent] = new ListenerTracker(dom, targetEvent, handleDelegatedEvent, false));\n      handlerEntry.increment();\n      const delegatedCallbacks = target.delegatedCallbacks || (target.delegatedCallbacks = {});\n      return new DelegateOrCaptureSubscription(handlerEntry, delegatedCallbacks, targetEvent, callbackOrListener);\n    }\n    if (strategy === DelegationStrategy.capturing) {\n      capturedHandlers = this.capturedHandlers;\n      handlerEntry = capturedHandlers[targetEvent] || (capturedHandlers[targetEvent] = new ListenerTracker(dom, targetEvent, handleCapturedEvent, true));\n      handlerEntry.increment();\n      const capturedCallbacks = target.capturedCallbacks || (target.capturedCallbacks = {});\n      return new DelegateOrCaptureSubscription(handlerEntry, capturedCallbacks, targetEvent, callbackOrListener);\n    }\n    return new TriggerSubscription(dom, target, targetEvent, callbackOrListener);\n  }\n\n  public dispose(): void {\n    let key: string;\n    const { delegatedHandlers, capturedHandlers } = this;\n    for (key in delegatedHandlers) {\n      delegatedHandlers[key].dispose();\n    }\n    for (key in capturedHandlers) {\n      capturedHandlers[key].dispose();\n    }\n  }\n}\n","import {\n  CollectionKind,\n  collectionSubscriberCollection,\n  IAccessor,\n  ICollectionObserver,\n  IDOM,\n  ILifecycle,\n  IndexMap,\n  IObserverLocator,\n  ISubscriber,\n  ISubscriberCollection,\n  LifecycleFlags,\n  Priority,\n  subscriberCollection,\n} from '@aurelia/runtime';\n\nimport { IEventSubscriber } from './event-manager';\n\nconst childObserverOptions = {\n  childList: true,\n  subtree: true,\n  characterData: true\n};\n\nfunction defaultMatcher(a: unknown, b: unknown): boolean {\n  return a === b;\n}\n\nexport interface ISelectElement extends HTMLSelectElement {\n  options: HTMLCollectionOf<IOptionElement> & Pick<HTMLOptionsCollection, 'length' | 'selectedIndex' | 'add' | 'remove'>;\n  matcher?: typeof defaultMatcher;\n}\nexport interface IOptionElement extends HTMLOptionElement {\n  model?: unknown;\n}\n\nexport interface SelectValueObserver extends\n  ISubscriberCollection {}\n\n@subscriberCollection()\nexport class SelectValueObserver implements IAccessor<unknown> {\n  public readonly lifecycle: ILifecycle;\n  public readonly observerLocator: IObserverLocator;\n  public readonly dom: IDOM;\n  public readonly handler: IEventSubscriber;\n\n  public readonly obj: ISelectElement;\n  public currentValue: unknown;\n  public oldValue: unknown;\n\n  public hasChanges: boolean;\n  public priority: Priority;\n\n  public arrayObserver?: ICollectionObserver<CollectionKind.array>;\n  public nodeObserver?: MutationObserver;\n\n  constructor(\n    lifecycle: ILifecycle,\n    observerLocator: IObserverLocator,\n    dom: IDOM,\n    handler: IEventSubscriber,\n    obj: ISelectElement,\n  ) {\n    this.lifecycle = lifecycle;\n    this.observerLocator = observerLocator;\n    this.dom = dom;\n\n    this.obj = obj;\n    this.handler = handler;\n    this.currentValue = void 0;\n    this.oldValue = void 0;\n\n    this.hasChanges = false;\n    this.priority = Priority.propagate;\n\n    this.arrayObserver = void 0;\n    this.nodeObserver = void 0;\n\n    this.handleNodeChange = this.handleNodeChange.bind(this);\n  }\n\n  public getValue(): unknown {\n    return this.currentValue;\n  }\n\n  public setValue(newValue: unknown, flags: LifecycleFlags): void {\n    this.currentValue = newValue;\n    this.hasChanges = newValue !== this.oldValue;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.flushRAF(flags);\n    }\n  }\n\n  public flushRAF(flags: LifecycleFlags): void {\n    if (this.hasChanges) {\n      this.hasChanges = false;\n      const { currentValue } = this;\n      this.oldValue = currentValue;\n\n      const isArray = Array.isArray(currentValue);\n      if (!isArray && currentValue != void 0 && this.obj.multiple) {\n        throw new Error('Only null or Array instances can be bound to a multi-select.');\n      }\n      if (this.arrayObserver) {\n        this.arrayObserver.unsubscribeFromCollection(this);\n        this.arrayObserver = void 0;\n      }\n      if (isArray) {\n        this.arrayObserver = this.observerLocator.getArrayObserver(flags, currentValue as unknown[]);\n        this.arrayObserver.subscribeToCollection(this);\n      }\n      this.synchronizeOptions();\n      this.notify(flags);\n    }\n  }\n\n  public handleCollectionChange(indexMap: IndexMap, flags: LifecycleFlags): void {\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.synchronizeOptions();\n    } else {\n      this.hasChanges = true;\n    }\n\n    this.callSubscribers(this.currentValue, this.oldValue, flags);\n  }\n\n  public handleChange(newValue: unknown, previousValue: unknown, flags: LifecycleFlags): void {\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.synchronizeOptions();\n    } else {\n      this.hasChanges = true;\n    }\n\n    this.callSubscribers(newValue, previousValue, flags);\n  }\n\n  public notify(flags: LifecycleFlags): void {\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      return;\n    }\n    const oldValue = this.oldValue;\n    const newValue = this.currentValue;\n    if (newValue === oldValue) {\n      return;\n    }\n    this.callSubscribers(newValue, oldValue, flags);\n  }\n\n  public handleEvent(): void {\n    // \"from-view\" changes are always synchronous now, so immediately sync the value and notify subscribers\n    const shouldNotify = this.synchronizeValue();\n    if (shouldNotify) {\n      this.callSubscribers(this.currentValue, this.oldValue, LifecycleFlags.fromDOMEvent | LifecycleFlags.allowPublishRoundtrip);\n    }\n  }\n\n  public synchronizeOptions(indexMap?: IndexMap): void {\n    const { currentValue, obj } = this;\n    const isArray = Array.isArray(currentValue);\n    const matcher = obj.matcher !== void 0 ? obj.matcher : defaultMatcher;\n    const options = obj.options;\n    let i = options.length;\n\n    while (i-- > 0) {\n      const option = options[i];\n      const optionValue = option.hasOwnProperty('model') ? option.model : option.value;\n      if (isArray) {\n        option.selected = (currentValue as unknown[]).findIndex(item => !!matcher(optionValue, item)) !== -1;\n        continue;\n      }\n      option.selected = !!matcher(optionValue, currentValue);\n    }\n  }\n\n  public synchronizeValue(): boolean {\n    // Spec for synchronizing value from `SelectObserver` to `<select/>`\n    // When synchronizing value to observed <select/> element, do the following steps:\n    // A. If `<select/>` is multiple\n    //    1. Check if current value, called `currentValue` is an array\n    //      a. If not an array, return true to signal value has changed\n    //      b. If is an array:\n    //        i. gather all current selected <option/>, in to array called `values`\n    //        ii. loop through the `currentValue` array and remove items that are nolonger selected based on matcher\n    //        iii. loop through the `values` array and add items that are selected based on matcher\n    //        iv. Return false to signal value hasn't changed\n    // B. If the select is single\n    //    1. Let `value` equal the first selected option, if no option selected, then `value` is `null`\n    //    2. assign `this.currentValue` to `this.oldValue`\n    //    3. assign `value` to `this.currentValue`\n    //    4. return `true` to signal value has changed\n    const obj = this.obj;\n    const options = obj.options;\n    const len = options.length;\n    const currentValue = this.currentValue;\n    let i = 0;\n\n    if (obj.multiple) {\n      // A.\n      if (!Array.isArray(currentValue)) {\n        // A.1.a\n        return true;\n      }\n      // A.1.b\n      // multi select\n      let option: IOptionElement;\n      const matcher = obj.matcher || defaultMatcher;\n      // A.1.b.i\n      const values: unknown[] = [];\n      while (i < len) {\n        option = options[i];\n        if (option.selected) {\n          values.push(option.hasOwnProperty('model')\n            ? option.model\n            : option.value\n          );\n        }\n        ++i;\n      }\n      // A.1.b.ii\n      i = 0;\n      while (i < currentValue.length) {\n        const a = currentValue[i];\n        // Todo: remove arrow fn\n        if (values.findIndex(b => !!matcher(a, b)) === -1) {\n          currentValue.splice(i, 1);\n        } else {\n          ++i;\n        }\n      }\n      // A.1.b.iii\n      i = 0;\n      while (i < values.length) {\n        const a = values[i];\n        // Todo: remove arrow fn\n        if (currentValue.findIndex(b => !!matcher(a, b)) === -1) {\n          currentValue.push(a);\n        }\n        ++i;\n      }\n      // A.1.b.iv\n      return false;\n    }\n    // B. single select\n    // B.1\n    let value: unknown = null;\n    while (i < len) {\n      const option = options[i];\n      if (option.selected) {\n        value = option.hasOwnProperty('model')\n          ? option.model\n          : option.value;\n        break;\n      }\n      ++i;\n    }\n    // B.2\n    this.oldValue = this.currentValue;\n    // B.3\n    this.currentValue = value;\n    // B.4\n    return true;\n  }\n\n  public bind(): void {\n    this.nodeObserver = this.dom.createNodeObserver!(this.obj, this.handleNodeChange, childObserverOptions) as MutationObserver;\n\n    this.lifecycle.enqueueRAF(this.flushRAF, this, this.priority);\n  }\n\n  public unbind(): void {\n    this.nodeObserver!.disconnect();\n    this.nodeObserver = null!;\n\n    this.lifecycle.dequeueRAF(this.flushRAF, this);\n\n    if (this.arrayObserver) {\n      this.arrayObserver.unsubscribeFromCollection(this);\n      this.arrayObserver = null!;\n    }\n  }\n\n  public handleNodeChange(): void {\n    this.synchronizeOptions();\n    const shouldNotify = this.synchronizeValue();\n    if (shouldNotify) {\n      this.notify(LifecycleFlags.fromDOMEvent);\n    }\n  }\n\n  public subscribe(subscriber: ISubscriber): void {\n    if (!this.hasSubscribers()) {\n      this.handler.subscribe(this.obj, this);\n    }\n    this.addSubscriber(subscriber);\n  }\n\n  public unsubscribe(subscriber: ISubscriber): void {\n    this.removeSubscriber(subscriber);\n    if (!this.hasSubscribers()) {\n      this.handler.dispose();\n    }\n  }\n}\n","import {\n  IAccessor,\n  ILifecycle,\n  LifecycleFlags,\n  Priority,\n} from '@aurelia/runtime';\n\nexport class StyleAttributeAccessor implements IAccessor<unknown> {\n  public readonly lifecycle: ILifecycle;\n\n  public readonly obj: HTMLElement;\n  public currentValue: string | Record<string, string>;\n  public oldValue: string | Record<string, string>;\n\n  public styles: Record<string, number>;\n  public version: number;\n\n  public hasChanges: boolean;\n  public priority: Priority;\n\n  constructor(\n    lifecycle: ILifecycle,\n    obj: HTMLElement,\n  ) {\n    this.lifecycle = lifecycle;\n\n    this.obj = obj;\n    this.currentValue = '';\n    this.oldValue = '';\n\n    this.styles = {};\n    this.version = 0;\n\n    this.hasChanges = false;\n    this.priority = Priority.propagate;\n  }\n\n  public getValue(): string {\n    return this.obj.style.cssText;\n  }\n\n  public setValue(newValue: string | Record<string, string>, flags: LifecycleFlags): void {\n    this.currentValue = newValue;\n    this.hasChanges = newValue !== this.oldValue;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.flushRAF(flags);\n    }\n  }\n\n  public flushRAF(flags: LifecycleFlags): void {\n    if (this.hasChanges) {\n      this.hasChanges = false;\n      const { currentValue } = this;\n      this.oldValue = currentValue;\n      const styles = this.styles;\n      let style: string;\n      let version = this.version;\n\n      if (currentValue instanceof Object) {\n        let value: string;\n        for (style in currentValue) {\n          if (currentValue.hasOwnProperty(style)) {\n            value = currentValue[style];\n            style = style.replace(/([A-Z])/g, m => `-${m.toLowerCase()}`);\n            styles[style] = version;\n            this.setProperty(style, value);\n          }\n        }\n      } else if (typeof currentValue === 'string') {\n        const rx = /\\s*([\\w\\-]+)\\s*:\\s*((?:(?:[\\w\\-]+\\(\\s*(?:\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|[\\w\\-]+\\(\\s*(?:[^\"](?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|[^\\)]*)\\),?|[^\\)]*)\\),?|\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'|[^;]*),?\\s*)+);?/g;\n        let pair: RegExpExecArray;\n        while ((pair = rx.exec(currentValue)!) != null) {\n          style = pair[1];\n          if (!style) { continue; }\n\n          styles[style] = version;\n          this.setProperty(style, pair[2]);\n        }\n      }\n\n      this.styles = styles;\n      this.version += 1;\n      if (version === 0) {\n        return;\n      }\n\n      version -= 1;\n      for (style in styles) {\n        if (!styles.hasOwnProperty(style) || styles[style] !== version) {\n          continue;\n        }\n        this.obj.style.removeProperty(style);\n      }\n    }\n  }\n\n  public setProperty(style: string, value: string): void {\n    let priority = '';\n\n    if (value != null && typeof value.indexOf === 'function' && value.indexOf('!important') !== -1) {\n      priority = 'important';\n      value = value.replace('!important', '');\n    }\n\n    this.obj.style.setProperty(style, value, priority);\n  }\n\n  public bind(flags: LifecycleFlags): void {\n    this.lifecycle.enqueueRAF(this.flushRAF, this, this.priority);\n    this.oldValue = this.currentValue = this.obj.style.cssText;\n  }\n\n  public unbind(flags: LifecycleFlags): void {\n    this.lifecycle.dequeueRAF(this.flushRAF, this);\n  }\n}\n","import { DI } from '@aurelia/kernel';\nimport { INode } from '@aurelia/runtime';\n\nexport interface ISVGAnalyzer {\n  isStandardSvgAttribute(node: INode, attributeName: string): boolean;\n}\n\nexport const ISVGAnalyzer = DI.createInterface<ISVGAnalyzer>('ISVGAnalyzer').withDefault(x => x.singleton(class {\n    public isStandardSvgAttribute(node: INode, attributeName: string): boolean {\n      return false;\n    }\n  })\n);\n","import { IIndexable } from '@aurelia/kernel';\nimport {\n  IAccessor,\n  ILifecycle,\n  ISubscriber,\n  ISubscriberCollection,\n  LifecycleFlags,\n  Priority,\n  subscriberCollection,\n} from '@aurelia/runtime';\n\nimport { IEventSubscriber } from './event-manager';\n\nexport interface ValueAttributeObserver\n  extends ISubscriberCollection {}\n\n// TODO: handle file attribute properly again, etc\n\n@subscriberCollection()\nexport class ValueAttributeObserver implements IAccessor<unknown> {\n  public readonly lifecycle: ILifecycle;\n  public readonly handler: IEventSubscriber;\n\n  public readonly obj: Node & IIndexable;\n  public readonly propertyKey: string;\n  public currentValue: unknown;\n  public oldValue: unknown;\n\n  public hasChanges: boolean;\n  public priority: Priority;\n\n  constructor(\n    lifecycle: ILifecycle,\n    handler: IEventSubscriber,\n    obj: Node,\n    propertyKey: string,\n  ) {\n    this.lifecycle = lifecycle;\n    this.handler = handler;\n\n    this.obj = obj;\n    this.propertyKey = propertyKey;\n    this.currentValue = '';\n    this.oldValue = '';\n\n    this.hasChanges = false;\n    this.priority = Priority.propagate;\n  }\n\n  public getValue(): unknown {\n    return this.currentValue;\n  }\n\n  public setValue(newValue: string | null, flags: LifecycleFlags): void {\n    this.currentValue = newValue;\n    this.hasChanges = newValue !== this.oldValue;\n    if ((flags & LifecycleFlags.fromBind) > 0) {\n      this.flushRAF(flags);\n    }\n  }\n\n  public flushRAF(flags: LifecycleFlags): void {\n    if (this.hasChanges) {\n      this.hasChanges = false;\n      const { currentValue, oldValue } = this;\n      this.oldValue = currentValue;\n      if (currentValue == void 0) {\n        this.obj[this.propertyKey] = '';\n      } else {\n        this.obj[this.propertyKey] = currentValue;\n      }\n\n      if ((flags & LifecycleFlags.fromBind) === 0) {\n        this.callSubscribers(currentValue, oldValue, flags);\n      }\n    }\n  }\n\n  public handleEvent(): void {\n    const oldValue = this.oldValue = this.currentValue;\n    const currentValue = this.currentValue = this.obj[this.propertyKey];\n    if (oldValue !== currentValue) {\n      this.oldValue = currentValue;\n      this.callSubscribers(currentValue, oldValue, LifecycleFlags.fromDOMEvent | LifecycleFlags.allowPublishRoundtrip);\n    }\n  }\n\n  public subscribe(subscriber: ISubscriber): void {\n    if (!this.hasSubscribers()) {\n      this.handler.subscribe(this.obj, this);\n      this.currentValue = this.oldValue = this.obj[this.propertyKey];\n    }\n    this.addSubscriber(subscriber);\n  }\n\n  public unsubscribe(subscriber: ISubscriber): void {\n    this.removeSubscriber(subscriber);\n    if (!this.hasSubscribers()) {\n      this.handler.dispose();\n    }\n  }\n\n  public bind(flags: LifecycleFlags): void {\n    this.lifecycle.enqueueRAF(this.flushRAF, this, this.priority);\n  }\n\n  public unbind(flags: LifecycleFlags): void {\n    this.lifecycle.dequeueRAF(this.flushRAF, this);\n  }\n}\n","\nimport { IContainer, InjectArray, InterfaceSymbol, IResolver, Registration } from '@aurelia/kernel';\nimport {\n  IBindingTargetAccessor,\n  IBindingTargetObserver,\n  IDOM,\n  ILifecycle,\n  IObserverLocator,\n  ITargetAccessorLocator,\n  ITargetObserverLocator,\n  LifecycleFlags,\n  SetterObserver\n} from '@aurelia/runtime';\nimport { AttributeNSAccessor } from './attribute-ns-accessor';\nimport { CheckedObserver, IInputElement } from './checked-observer';\nimport { ClassAttributeAccessor } from './class-attribute-accessor';\nimport { DataAttributeAccessor } from './data-attribute-accessor';\nimport { ElementPropertyAccessor } from './element-property-accessor';\nimport { EventSubscriber } from './event-manager';\nimport { ISelectElement, SelectValueObserver } from './select-value-observer';\nimport { StyleAttributeAccessor } from './style-attribute-accessor';\nimport { ISVGAnalyzer } from './svg-analyzer';\nimport { ValueAttributeObserver } from './value-attribute-observer';\n\n// https://infra.spec.whatwg.org/#namespaces\nconst htmlNS = 'http://www.w3.org/1999/xhtml';\nconst mathmlNS = 'http://www.w3.org/1998/Math/MathML';\nconst svgNS = 'http://www.w3.org/2000/svg';\nconst xlinkNS = 'http://www.w3.org/1999/xlink';\nconst xmlNS = 'http://www.w3.org/XML/1998/namespace';\nconst xmlnsNS = 'http://www.w3.org/2000/xmlns/';\n\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\nconst nsAttributes = Object.assign(\n  Object.create(null),\n  {\n    'xlink:actuate': ['actuate', xlinkNS],\n    'xlink:arcrole': ['arcrole', xlinkNS],\n    'xlink:href': ['href', xlinkNS],\n    'xlink:role': ['role', xlinkNS],\n    'xlink:show': ['show', xlinkNS],\n    'xlink:title': ['title', xlinkNS],\n    'xlink:type': ['type', xlinkNS],\n    'xml:lang': ['lang', xmlNS],\n    'xml:space': ['space', xmlNS],\n    'xmlns': ['xmlns', xmlnsNS],\n    'xmlns:xlink': ['xlink', xmlnsNS],\n  }\n) as Record<string, [string, string]>;\n\nconst inputEvents = ['change', 'input'];\nconst selectEvents = ['change'];\nconst contentEvents = ['change', 'input', 'blur', 'keyup', 'paste'];\nconst scrollEvents = ['scroll'];\n\nconst overrideProps = Object.assign(\n  Object.create(null),\n  {\n    'class': true,\n    'style': true,\n    'css': true,\n    'checked': true,\n    'value': true,\n    'model': true,\n    'xlink:actuate': true,\n    'xlink:arcrole': true,\n    'xlink:href': true,\n    'xlink:role': true,\n    'xlink:show': true,\n    'xlink:title': true,\n    'xlink:type': true,\n    'xml:lang': true,\n    'xml:space': true,\n    'xmlns': true,\n    'xmlns:xlink': true,\n  }\n) as Record<string, boolean>;\n\nexport class TargetObserverLocator implements ITargetObserverLocator {\n  public static readonly inject: InjectArray = [IDOM, ISVGAnalyzer];\n\n  private readonly dom: IDOM;\n  private readonly svgAnalyzer: ISVGAnalyzer;\n\n  constructor(dom: IDOM, svgAnalyzer: ISVGAnalyzer) {\n    this.dom = dom;\n    this.svgAnalyzer = svgAnalyzer;\n  }\n\n  public static register(container: IContainer): IResolver<ITargetObserverLocator> {\n    return Registration.singleton(ITargetObserverLocator, this).register(container);\n  }\n\n  public getObserver(flags: LifecycleFlags, lifecycle: ILifecycle, observerLocator: IObserverLocator, obj: Node, propertyName: string): IBindingTargetObserver | IBindingTargetAccessor {\n    switch (propertyName) {\n      case 'checked':\n        return new CheckedObserver(lifecycle, observerLocator, new EventSubscriber(this.dom, inputEvents), obj as IInputElement);\n      case 'value':\n        if ((obj as Element).tagName === 'SELECT') {\n          return new SelectValueObserver(lifecycle, observerLocator, this.dom, new EventSubscriber(this.dom, selectEvents), obj as ISelectElement);\n        }\n        return new ValueAttributeObserver(lifecycle, new EventSubscriber(this.dom, inputEvents), obj, propertyName);\n      case 'files':\n        return new ValueAttributeObserver(lifecycle, new EventSubscriber(this.dom, inputEvents), obj, propertyName);\n      case 'textContent':\n      case 'innerHTML':\n        return new ValueAttributeObserver(lifecycle, new EventSubscriber(this.dom, contentEvents), obj, propertyName);\n      case 'scrollTop':\n      case 'scrollLeft':\n        return new ValueAttributeObserver(lifecycle, new EventSubscriber(this.dom, scrollEvents), obj, propertyName);\n      case 'class':\n        return new ClassAttributeAccessor(lifecycle, obj as HTMLElement);\n      case 'style':\n      case 'css':\n        return new StyleAttributeAccessor(lifecycle, obj as HTMLElement);\n      case 'model':\n        return new SetterObserver(lifecycle, flags, obj, propertyName);\n      case 'role':\n        return new DataAttributeAccessor(lifecycle, obj as HTMLElement, propertyName);\n      default:\n        if (nsAttributes[propertyName] !== undefined) {\n          const nsProps = nsAttributes[propertyName];\n          return new AttributeNSAccessor(lifecycle, obj as HTMLElement, nsProps[0], nsProps[1]);\n        }\n        if (isDataAttribute(obj, propertyName, this.svgAnalyzer)) {\n          return new DataAttributeAccessor(lifecycle, obj as HTMLElement, propertyName);\n        }\n    }\n    return null!;\n  }\n\n  public overridesAccessor(flags: LifecycleFlags, obj: Node, propertyName: string): boolean {\n    return overrideProps[propertyName] === true;\n  }\n\n  public handles(flags: LifecycleFlags, obj: unknown): boolean {\n    return this.dom.isNodeInstance(obj);\n  }\n}\n\nexport class TargetAccessorLocator implements ITargetAccessorLocator {\n  public static readonly inject: InjectArray = [IDOM, ISVGAnalyzer];\n\n  private readonly dom: IDOM;\n  private readonly svgAnalyzer: ISVGAnalyzer;\n\n  constructor(dom: IDOM, svgAnalyzer: ISVGAnalyzer) {\n    this.dom = dom;\n    this.svgAnalyzer = svgAnalyzer;\n  }\n\n  public static register(container: IContainer): IResolver<ITargetAccessorLocator> {\n    return Registration.singleton(ITargetAccessorLocator, this).register(container);\n  }\n\n  public getAccessor(flags: LifecycleFlags, lifecycle: ILifecycle, obj: Node, propertyName: string): IBindingTargetAccessor {\n    switch (propertyName) {\n      case 'textContent':\n        // note: this case is just an optimization (textContent is the most often used property)\n        return new ElementPropertyAccessor(lifecycle, obj, propertyName);\n      case 'class':\n        return new ClassAttributeAccessor(lifecycle, obj as HTMLElement);\n      case 'style':\n      case 'css':\n        return new StyleAttributeAccessor(lifecycle, obj as HTMLElement);\n      // TODO: there are (many) more situation where we want to default to DataAttributeAccessor,\n      // but for now stick to what vCurrent does\n      case 'src':\n      case 'href':\n      // https://html.spec.whatwg.org/multipage/dom.html#wai-aria\n      case 'role':\n        return new DataAttributeAccessor(lifecycle, obj as HTMLElement, propertyName);\n      default:\n        if (nsAttributes[propertyName] !== undefined) {\n          const nsProps = nsAttributes[propertyName];\n          return new AttributeNSAccessor(lifecycle, obj as HTMLElement, nsProps[0], nsProps[1]);\n        }\n        if (isDataAttribute(obj, propertyName, this.svgAnalyzer)) {\n          return new DataAttributeAccessor(lifecycle, obj as HTMLElement, propertyName);\n        }\n        return new ElementPropertyAccessor(lifecycle, obj, propertyName);\n    }\n  }\n\n  public handles(flags: LifecycleFlags, obj: Node): boolean {\n    return this.dom.isNodeInstance(obj);\n  }\n}\n\nconst IsDataAttribute: Record<string, boolean> = {};\n\nfunction isDataAttribute(obj: Node, propertyName: string, svgAnalyzer: ISVGAnalyzer): boolean {\n  if (IsDataAttribute[propertyName] === true) {\n    return true;\n  }\n  const prefix = propertyName.slice(0, 5);\n  // https://html.spec.whatwg.org/multipage/dom.html#wai-aria\n  // https://html.spec.whatwg.org/multipage/dom.html#custom-data-attribute\n  return IsDataAttribute[propertyName] =\n    prefix === 'aria-' ||\n    prefix === 'data-' ||\n    svgAnalyzer.isStandardSvgAttribute(obj, propertyName);\n}\n","import { IRegistry } from '@aurelia/kernel';\nimport { Binding, BindingBehaviorResource, ILifecycle, IScope, LifecycleFlags } from '@aurelia/runtime';\nimport { DataAttributeAccessor } from '../../observation/data-attribute-accessor';\n\nexport class AttrBindingBehavior {\n  public static readonly register: IRegistry['register'];\n\n  public bind(flags: LifecycleFlags, scope: IScope, binding: Binding): void {\n    binding.targetObserver = new DataAttributeAccessor(binding.locator.get(ILifecycle), binding.target as HTMLElement, binding.targetProperty);\n  }\n\n  public unbind(flags: LifecycleFlags, scope: IScope, binding: Binding): void {\n    return;\n  }\n}\nBindingBehaviorResource.define('attr', AttrBindingBehavior);\n","import { IRegistry, Reporter } from '@aurelia/kernel';\nimport { BindingBehaviorResource, IScope, LifecycleFlags } from '@aurelia/runtime';\nimport { Listener } from '../../binding/listener';\nimport { findOriginalEventTarget } from '../../observation/event-manager';\n\n/** @internal */\nexport function handleSelfEvent(this: SelfableBinding, event: Event): ReturnType<Listener['callSource']> {\n  const target = findOriginalEventTarget(event) as unknown as Node;\n\n  if (this.target !== target) {\n    return;\n  }\n\n  return this.selfEventCallSource(event);\n}\n\nexport type SelfableBinding = Listener & {\n  selfEventCallSource: Listener['callSource'];\n};\n\nexport class SelfBindingBehavior {\n  public static register: IRegistry['register'];\n\n  public bind(flags: LifecycleFlags, scope: IScope, binding: SelfableBinding): void {\n    if (!binding.callSource || !binding.targetEvent) {\n      throw Reporter.error(8);\n    }\n\n    binding.selfEventCallSource = binding.callSource;\n    binding.callSource = handleSelfEvent;\n  }\n\n  public unbind(flags: LifecycleFlags, scope: IScope, binding: SelfableBinding): void {\n    binding.callSource = binding.selfEventCallSource;\n    binding.selfEventCallSource = null!;\n  }\n}\nBindingBehaviorResource.define('self', SelfBindingBehavior);\n","import { InjectArray, IRegistry, Reporter, Writable } from '@aurelia/kernel';\nimport { Binding, BindingBehaviorResource, BindingMode, IDOM, IObserverLocator, IScope, LifecycleFlags } from '@aurelia/runtime';\nimport { CheckedObserver } from '../../observation/checked-observer';\nimport { EventSubscriber, IEventSubscriber } from '../../observation/event-manager';\nimport { SelectValueObserver } from '../../observation/select-value-observer';\nimport { ValueAttributeObserver } from '../../observation/value-attribute-observer';\n\nexport type UpdateTriggerableObserver = (\n  (ValueAttributeObserver & Required<ValueAttributeObserver>) |\n  (CheckedObserver & Required<CheckedObserver>) |\n  (SelectValueObserver & Required<SelectValueObserver>)\n  ) & {\n  originalHandler?: IEventSubscriber;\n};\n\nexport type UpdateTriggerableBinding = Binding & {\n  targetObserver: UpdateTriggerableObserver;\n};\n\nexport class UpdateTriggerBindingBehavior {\n  public static readonly inject: InjectArray = [IObserverLocator];\n\n  public static register: IRegistry['register'];\n\n  public persistentFlags!: LifecycleFlags;\n  private readonly observerLocator: IObserverLocator;\n\n  constructor(observerLocator: IObserverLocator) {\n    this.observerLocator = observerLocator;\n  }\n\n  public bind(flags: LifecycleFlags, scope: IScope, binding: UpdateTriggerableBinding, ...events: string[]): void {\n    if (events.length === 0) {\n      throw Reporter.error(9);\n    }\n\n    if (binding.mode !== BindingMode.twoWay && binding.mode !== BindingMode.fromView) {\n      throw Reporter.error(10);\n    }\n\n    this.persistentFlags = flags & LifecycleFlags.persistentBindingFlags;\n\n    // ensure the binding's target observer has been set.\n    const targetObserver = this.observerLocator.getObserver(this.persistentFlags | flags, binding.target, binding.targetProperty) as UpdateTriggerableObserver;\n    if (!targetObserver.handler) {\n      throw Reporter.error(10);\n    }\n\n    binding.targetObserver = targetObserver;\n\n    // stash the original element subscribe function.\n    targetObserver.originalHandler = binding.targetObserver.handler;\n\n    // replace the element subscribe function with one that uses the correct events.\n    (targetObserver as Writable<typeof targetObserver>).handler = new EventSubscriber(binding.locator.get(IDOM), events);\n  }\n\n  public unbind(flags: LifecycleFlags, scope: IScope, binding: UpdateTriggerableBinding): void {\n    // restore the state of the binding.\n    binding.targetObserver.handler.dispose();\n    (binding.targetObserver as Writable<typeof binding.targetObserver>).handler = binding.targetObserver.originalHandler!;\n    binding.targetObserver.originalHandler = null!;\n  }\n}\nBindingBehaviorResource.define('updateTrigger', UpdateTriggerBindingBehavior);\n","import {\n  AttributeInstruction,\n  DelegationStrategy,\n  IInterpolationExpression,\n  IsBindingBehavior,\n  ITargetedInstruction,\n  NodeInstruction\n} from '@aurelia/runtime';\n\nexport const enum HTMLTargetedInstructionType {\n  textBinding = 'ha',\n  listenerBinding = 'hb',\n  attributeBinding = 'hc',\n  stylePropertyBinding = 'hd',\n  setAttribute = 'he',\n}\n\nexport type HTMLNodeInstruction =\n  NodeInstruction |\n  ITextBindingInstruction;\n\nexport type HTMLAttributeInstruction =\n  AttributeInstruction |\n  IListenerBindingInstruction |\n  IAttributeBindingInstruction |\n  IStylePropertyBindingInstruction |\n  ISetAttributeInstruction;\n\nexport type HTMLTargetedInstruction = HTMLNodeInstruction | HTMLAttributeInstruction;\n// TODO: further improve specificity and integrate with the definitions;\nexport type HTMLInstructionRow = [HTMLTargetedInstruction, ...HTMLAttributeInstruction[]];\n\nexport function isHTMLTargetedInstruction(value: unknown): value is HTMLTargetedInstruction {\n  const type = (value as { type?: string }).type;\n  return typeof type === 'string' && type.length === 2;\n}\n\nexport interface ITextBindingInstruction extends ITargetedInstruction {\n  type: HTMLTargetedInstructionType.textBinding;\n  from: string | IInterpolationExpression;\n}\n\nexport interface IListenerBindingInstruction extends ITargetedInstruction {\n  type: HTMLTargetedInstructionType.listenerBinding;\n  from: string | IsBindingBehavior;\n  to: string;\n  strategy: DelegationStrategy;\n  preventDefault: boolean;\n}\n\nexport interface IStylePropertyBindingInstruction extends ITargetedInstruction {\n  type: HTMLTargetedInstructionType.stylePropertyBinding;\n  from: string | IsBindingBehavior;\n  to: string;\n}\n\nexport interface ISetAttributeInstruction extends ITargetedInstruction {\n  type: HTMLTargetedInstructionType.setAttribute;\n  value: string;\n  to: string;\n}\n\nexport interface IAttributeBindingInstruction extends ITargetedInstruction {\n  type: HTMLTargetedInstructionType.attributeBinding;\n  from: string | IsBindingBehavior;\n\n  /**\n   * `attr` and `to` have the same value on a normal attribute\n   * Will be different on `class` and `style`\n   * on `class`: attr = `class` (from binding command), to = attribute name\n   * on `style`: attr = `style` (from binding command), to = attribute name\n   */\n  attr: string;\n  to: string;\n}\n","import {\n  DelegationStrategy,\n  IInterpolationExpression,\n  IsBindingBehavior,\n  ITargetedInstruction\n} from '@aurelia/runtime';\nimport {\n  HTMLTargetedInstructionType,\n  IAttributeBindingInstruction,\n  IListenerBindingInstruction,\n  IStylePropertyBindingInstruction,\n  ITextBindingInstruction\n} from './definitions';\n\nexport class TextBindingInstruction implements ITextBindingInstruction {\n  public type: HTMLTargetedInstructionType.textBinding;\n\n  public from: string | IInterpolationExpression;\n\n  constructor(from: string | IInterpolationExpression) {\n    this.type = HTMLTargetedInstructionType.textBinding;\n\n    this.from = from;\n  }\n}\n\nexport class TriggerBindingInstruction implements IListenerBindingInstruction {\n  public type: HTMLTargetedInstructionType.listenerBinding;\n\n  public from: string | IsBindingBehavior;\n  public preventDefault: true;\n  public strategy: DelegationStrategy.none;\n  public to: string;\n\n  constructor(from: string | IsBindingBehavior, to: string) {\n    this.type = HTMLTargetedInstructionType.listenerBinding;\n\n    this.from = from;\n    this.preventDefault = true;\n    this.strategy = DelegationStrategy.none;\n    this.to = to;\n  }\n}\n\nexport class DelegateBindingInstruction implements IListenerBindingInstruction {\n  public type: HTMLTargetedInstructionType.listenerBinding;\n\n  public from: string | IsBindingBehavior;\n  public preventDefault: false;\n  public strategy: DelegationStrategy.bubbling;\n  public to: string;\n\n  constructor(from: string | IsBindingBehavior, to: string) {\n    this.type = HTMLTargetedInstructionType.listenerBinding;\n\n    this.from = from;\n    this.preventDefault = false;\n    this.strategy = DelegationStrategy.bubbling;\n    this.to = to;\n  }\n}\n\nexport class CaptureBindingInstruction implements IListenerBindingInstruction {\n  public type: HTMLTargetedInstructionType.listenerBinding;\n\n  public from: string | IsBindingBehavior;\n  public preventDefault: false;\n  public strategy: DelegationStrategy.capturing;\n  public to: string;\n\n  constructor(from: string | IsBindingBehavior, to: string) {\n    this.type = HTMLTargetedInstructionType.listenerBinding;\n\n    this.from = from;\n    this.preventDefault = false;\n    this.strategy = DelegationStrategy.capturing;\n    this.to = to;\n  }\n}\n\nexport class StylePropertyBindingInstruction implements IStylePropertyBindingInstruction {\n  public type: HTMLTargetedInstructionType.stylePropertyBinding;\n\n  public from: string | IsBindingBehavior;\n  public to: string;\n\n  constructor(from: string | IsBindingBehavior, to: string) {\n    this.type = HTMLTargetedInstructionType.stylePropertyBinding;\n\n    this.from = from;\n    this.to = to;\n  }\n}\n\nexport class SetAttributeInstruction implements ITargetedInstruction {\n  public type: HTMLTargetedInstructionType.setAttribute;\n\n  public to: string;\n  public value: string;\n\n  constructor(value: string, to: string) {\n    this.type = HTMLTargetedInstructionType.setAttribute;\n\n    this.to = to;\n    this.value = value;\n  }\n}\n\nexport class AttributeBindingInstruction implements IAttributeBindingInstruction {\n  public type: HTMLTargetedInstructionType.attributeBinding;\n\n  public from: string | IsBindingBehavior;\n  /**\n   * `attr` and `to` have the same value on a normal attribute\n   * Will be different on `class` and `style`\n   * on `class`: attr = `class` (from binding command), to = attribute name\n   * on `style`: attr = `style` (from binding command), to = attribute name\n   */\n  public attr: string;\n  public to: string;\n\n  constructor(attr: string, from: string | IsBindingBehavior, to: string) {\n    this.type = HTMLTargetedInstructionType.attributeBinding;\n\n    this.from = from;\n    this.attr = attr;\n    this.to = to;\n  }\n}\n","import {\n  Constructable,\n  IContainer,\n  IRegistry,\n  Tracer\n} from '@aurelia/kernel';\n\nimport {\n  buildTemplateDefinition,\n  CustomElementResource,\n  HydrateElementInstruction,\n  IBindableDescription,\n  IController,\n  ICustomElementType,\n  IDOM,\n  INode,\n  IRenderContext,\n  IRenderingEngine,\n  ITemplate,\n  IViewFactory,\n  LifecycleFlags,\n  TargetedInstructionType,\n  TemplateDefinition\n} from '@aurelia/runtime';\n\nimport {\n  HTMLTargetedInstruction,\n  isHTMLTargetedInstruction\n} from './definitions';\nimport { SetAttributeInstruction } from './instructions';\n\nconst slice = Array.prototype.slice;\n\nexport function createElement<T extends INode = Node, C extends Constructable = Constructable>(\n  dom: IDOM<T>,\n  tagOrType: string | C,\n  props?: Record<string, string | HTMLTargetedInstruction>,\n  children?: ArrayLike<unknown>\n): RenderPlan<T> {\n  if (typeof tagOrType === 'string') {\n    return createElementForTag(dom, tagOrType, props, children);\n  } else if (CustomElementResource.isType(tagOrType)) {\n    return createElementForType(dom, tagOrType, props, children);\n  } else {\n    throw new Error(`Invalid tagOrType.`);\n  }\n}\n\n/**\n * RenderPlan. Todo: describe goal of this class\n */\nexport class RenderPlan<T extends INode = Node> {\n  private readonly dom: IDOM<T>;\n  private readonly dependencies: ReadonlyArray<IRegistry>;\n  private readonly instructions: HTMLTargetedInstruction[][];\n  private readonly node: T;\n\n  private lazyDefinition?: TemplateDefinition;\n\n  constructor(\n    dom: IDOM<T>,\n    node: T,\n    instructions: HTMLTargetedInstruction[][],\n    dependencies: ReadonlyArray<IRegistry>\n  ) {\n    this.dom = dom;\n    this.dependencies = dependencies;\n    this.instructions = instructions;\n    this.node = node;\n    this.lazyDefinition = void 0;\n  }\n\n  public get definition(): TemplateDefinition {\n    if (this.lazyDefinition === void 0) {\n      this.lazyDefinition = buildTemplateDefinition(null, null, this.node, null, typeof this.node === 'string', null, this.instructions, this.dependencies);\n    }\n    return this.lazyDefinition;\n  }\n\n  public getElementTemplate(engine: IRenderingEngine, Type?: ICustomElementType): ITemplate<T> {\n    return engine.getElementTemplate(this.dom, this.definition, void 0, Type);\n  }\n\n  public createView(flags: LifecycleFlags, engine: IRenderingEngine, parentContext?: IRenderContext<T> | IContainer): IController {\n    return this.getViewFactory(engine, parentContext).create();\n  }\n\n  public getViewFactory(engine: IRenderingEngine, parentContext?: IRenderContext<T> | IContainer): IViewFactory {\n    return engine.getViewFactory(this.dom, this.definition, parentContext);\n  }\n\n  /** @internal */\n  public mergeInto(parent: T, instructions: HTMLTargetedInstruction[][], dependencies: IRegistry[]): void {\n    this.dom.appendChild(parent, this.node);\n    instructions.push(...this.instructions);\n    dependencies.push(...this.dependencies);\n  }\n}\n\nfunction createElementForTag<T extends INode>(dom: IDOM<T>, tagName: string, props?: Record<string, string | HTMLTargetedInstruction>, children?: ArrayLike<unknown>): RenderPlan<T> {\n  if (Tracer.enabled) { Tracer.enter('createElement', 'createElementForTag', slice.call(arguments)); }\n  const instructions: HTMLTargetedInstruction[] = [];\n  const allInstructions: HTMLTargetedInstruction[][] = [];\n  const dependencies: IRegistry[] = [];\n  const element = dom.createElement(tagName);\n  let hasInstructions = false;\n\n  if (props) {\n    Object.keys(props)\n      .forEach(to => {\n        const value = props[to];\n\n        if (isHTMLTargetedInstruction(value)) {\n          hasInstructions = true;\n          instructions.push(value);\n        } else {\n          dom.setAttribute(element, to, value);\n        }\n      });\n  }\n\n  if (hasInstructions) {\n    dom.makeTarget(element);\n    allInstructions.push(instructions);\n  }\n\n  if (children) {\n    addChildren(dom, element, children, allInstructions, dependencies);\n  }\n\n  if (Tracer.enabled) { Tracer.leave(); }\n  return new RenderPlan(dom, element, allInstructions, dependencies);\n}\n\nfunction createElementForType<T extends INode>(\n  dom: IDOM<T>,\n  Type: ICustomElementType,\n  props?: Record<string, unknown>,\n  children?: ArrayLike<unknown>,\n): RenderPlan<T> {\n  if (Tracer.enabled) { Tracer.enter('createElement', 'createElementForType', slice.call(arguments)); }\n  const tagName = Type.description.name;\n  const instructions: HTMLTargetedInstruction[] = [];\n  const allInstructions = [instructions];\n  const dependencies: IRegistry[] = [];\n  const childInstructions: HTMLTargetedInstruction[] = [];\n  const bindables = Type.description.bindables as Record<string, IBindableDescription>;\n  const element = dom.createElement(tagName);\n\n  dom.makeTarget(element);\n\n  if (!dependencies.includes(Type)) {\n    dependencies.push(Type);\n  }\n\n  instructions.push(new HydrateElementInstruction(tagName, childInstructions));\n\n  if (props) {\n    Object.keys(props)\n      .forEach(to => {\n        const value = props[to] as HTMLTargetedInstruction | string;\n\n        if (isHTMLTargetedInstruction(value)) {\n          childInstructions.push(value);\n        } else {\n          const bindable = bindables[to];\n\n          if (bindable !== void 0) {\n            childInstructions.push({\n              type: TargetedInstructionType.setProperty,\n              to,\n              value\n            });\n          } else {\n            childInstructions.push(new SetAttributeInstruction(value, to));\n          }\n        }\n      });\n  }\n\n  if (children) {\n    addChildren(dom, element, children, allInstructions, dependencies);\n  }\n\n  if (Tracer.enabled) { Tracer.leave(); }\n  return new RenderPlan<T>(dom, element, allInstructions, dependencies);\n}\n\nfunction addChildren<T extends INode>(dom: IDOM<T>, parent: T, children: ArrayLike<unknown>, allInstructions: HTMLTargetedInstruction[][], dependencies: IRegistry[]): void {\n  for (let i = 0, ii = children.length; i < ii; ++i) {\n    const current = children[i];\n\n    switch (typeof current) {\n      case 'string':\n        dom.appendChild(parent, dom.createTextNode(current));\n        break;\n      case 'object':\n        if (dom.isNodeInstance(current)) {\n          dom.appendChild(parent, current);\n        } else if ('mergeInto' in (current as RenderPlan)) {\n          (current as RenderPlan<T>).mergeInto(parent, allInstructions, dependencies);\n        }\n    }\n  }\n}\n","import {\n  Constructable,\n  IContainer,\n  InjectArray,\n  IRegistry,\n  nextId,\n  PLATFORM,\n  Registration,\n} from '@aurelia/kernel';\nimport {\n  Bindable,\n  BindingMode,\n  BindingStrategy,\n  ContinuationTask,\n  CustomElementResource,\n  HooksDefinition,\n  IController,\n  ICustomElementResource,\n  IDOM,\n  IHydrateElementInstruction,\n  ILifecycleTask,\n  INode,\n  IRenderingEngine,\n  ITargetedInstruction,\n  ITemplateDefinition,\n  IViewFactory,\n  LifecycleFlags,\n  LifecycleTask,\n  PromiseTask,\n  State,\n  TargetedInstruction,\n  TemplateDefinition,\n} from '@aurelia/runtime';\n\nimport {\n  createElement,\n  RenderPlan,\n} from '../../create-element';\n\nconst bindables = ['subject', 'composing'];\n\nexport type Subject<T extends INode = Node> = IViewFactory<T> | IController<T> | RenderPlan<T> | Constructable | TemplateDefinition;\nexport type MaybeSubjectPromise<T> = Subject<T> | Promise<Subject<T>> | undefined;\n\nexport class Compose<T extends INode = Node> {\n  public static readonly inject: InjectArray = [IDOM, IController, ITargetedInstruction, IRenderingEngine];\n\n  public static readonly kind: ICustomElementResource = CustomElementResource;\n  public static readonly description: Required<ITemplateDefinition> = Object.freeze({\n    name: 'au-compose',\n    template: null,\n    cache: 0,\n    build: Object.freeze({ compiler: 'default', required: false }),\n    bindables: Object.freeze({\n      subject: Bindable.for({ bindables: ['subject'] }).get().subject,\n      composing: {\n        ...Bindable.for({ bindables: ['composing'] }).get().composing,\n        mode: BindingMode.fromView,\n      },\n    }),\n    instructions: PLATFORM.emptyArray as typeof PLATFORM.emptyArray & ITargetedInstruction[][],\n    dependencies: PLATFORM.emptyArray as typeof PLATFORM.emptyArray & IRegistry[],\n    surrogates: PLATFORM.emptyArray as typeof PLATFORM.emptyArray & ITargetedInstruction[],\n    containerless: true,\n    // tslint:disable-next-line: no-non-null-assertion\n    shadowOptions: null!,\n    hasSlots: false,\n    strategy: BindingStrategy.getterSetter,\n    hooks: Object.freeze(new HooksDefinition(Compose.prototype)),\n  });\n\n  public readonly id: number;\n\n  public subject?: MaybeSubjectPromise<T>;\n  public composing: boolean;\n\n  public view?: IController<T>;\n\n  private readonly dom: IDOM;\n  private readonly renderable: IController<T>;\n  private readonly renderingEngine: IRenderingEngine;\n  private readonly properties: Record<string, TargetedInstruction>;\n\n  private task: ILifecycleTask;\n  private lastSubject?: MaybeSubjectPromise<T>;\n  // tslint:disable-next-line: prefer-readonly // This is set by the controller after this instance is constructed\n  private $controller!: IController<T>;\n\n  constructor(\n    dom: IDOM<T>,\n    renderable: IController<T>,\n    instruction: IHydrateElementInstruction,\n    renderingEngine: IRenderingEngine,\n  ) {\n    this.id = nextId('au$component');\n\n    this.subject = void 0;\n    this.composing = false;\n\n    this.dom = dom;\n    this.renderable = renderable;\n    this.renderingEngine = renderingEngine;\n    this.properties = instruction.instructions\n      .filter((x: ITargetedInstruction & {to?: string}) => !bindables.includes(x.to!))\n      .reduce<Record<string, TargetedInstruction>>(\n        (acc, item: ITargetedInstruction & {to?: string}) => {\n          if (item.to) {\n            acc[item.to!] = item! as TargetedInstruction;\n          }\n\n          return acc;\n        },\n        {}\n      );\n\n    this.task = LifecycleTask.done;\n    this.lastSubject = void 0;\n    this.view = void 0;\n  }\n\n  public static register(container: IContainer): void {\n    container.register(Registration.transient('custom-element:au-compose', this));\n    container.register(Registration.transient(this, this));\n  }\n\n  public binding(flags: LifecycleFlags): ILifecycleTask {\n    if (this.task.done) {\n      this.task = this.compose(this.subject, flags);\n    } else {\n      this.task = new ContinuationTask(this.task, this.compose, this, this.subject, flags);\n    }\n\n    if (this.task.done) {\n      this.task = this.bindView(flags);\n    } else {\n      this.task = new ContinuationTask(this.task, this.bindView, this, flags);\n    }\n\n    return this.task;\n  }\n\n  public attaching(flags: LifecycleFlags): void {\n    if (this.task.done) {\n      this.attachView(flags);\n    } else {\n      this.task = new ContinuationTask(this.task, this.attachView, this, flags);\n    }\n  }\n\n  public detaching(flags: LifecycleFlags): void {\n    if (this.view != void 0) {\n      if (this.task.done) {\n        this.view.detach(flags);\n      } else {\n        this.task = new ContinuationTask(this.task, this.view.detach, this.view, flags);\n      }\n    }\n  }\n\n  public unbinding(flags: LifecycleFlags): ILifecycleTask {\n    this.lastSubject = void 0;\n    if (this.view != void 0) {\n      if (this.task.done) {\n        this.task = this.view.unbind(flags);\n      } else {\n        this.task = new ContinuationTask(this.task, this.view.unbind, this.view, flags);\n      }\n    }\n\n    return this.task;\n  }\n\n  public caching(flags: LifecycleFlags): void {\n    this.view = void 0;\n  }\n\n  public subjectChanged(newValue: Subject<T> | Promise<Subject<T>>, previousValue: Subject<T> | Promise<Subject<T>>, flags: LifecycleFlags): void {\n    flags |= this.$controller.flags;\n    if (this.task.done) {\n      this.task = this.compose(newValue, flags);\n    } else {\n      this.task = new ContinuationTask(this.task, this.compose, this, newValue, flags);\n    }\n  }\n\n  private compose(subject: MaybeSubjectPromise<T> | undefined, flags: LifecycleFlags): ILifecycleTask {\n    if (this.lastSubject === subject) {\n      return LifecycleTask.done;\n    }\n\n    this.lastSubject = subject;\n    this.composing = true;\n\n    let task = this.deactivate(flags);\n\n    if (subject instanceof Promise) {\n      let viewPromise: Promise<IController<T> | undefined>;\n      if (task.done) {\n        viewPromise = subject.then(s => this.resolveView(s, flags));\n      } else {\n        viewPromise = task.wait().then(() => subject.then(s => this.resolveView(s, flags)));\n      }\n      task = new PromiseTask<[LifecycleFlags], IController<T> | undefined>(viewPromise, this.activate, this, flags);\n    } else {\n      const view = this.resolveView(subject, flags);\n      if (task.done) {\n        task = this.activate(view, flags);\n      } else {\n        task = new ContinuationTask(task, this.activate, this, view, flags);\n      }\n    }\n\n    if (task.done) {\n      this.onComposed();\n    } else {\n      task = new ContinuationTask(task, this.onComposed, this);\n    }\n\n    return task;\n  }\n\n  private deactivate(flags: LifecycleFlags): ILifecycleTask {\n    const view = this.view;\n    if (view == void 0) {\n      return LifecycleTask.done;\n    }\n    view.detach(flags);\n    return view.unbind(flags);\n  }\n\n  private activate(view: IController<T> | undefined, flags: LifecycleFlags): ILifecycleTask {\n    this.view = view;\n    if (view == void 0) {\n      return LifecycleTask.done;\n    }\n    let task = this.bindView(flags);\n    if (task.done) {\n      this.attachView(flags);\n    } else {\n      task = new ContinuationTask(task, this.attachView, this, flags);\n    }\n    return task;\n  }\n\n  private bindView(flags: LifecycleFlags): ILifecycleTask {\n    if (this.view != void 0 && (this.$controller.state & (State.isBoundOrBinding)) > 0) {\n      return this.view.bind(flags, this.renderable.scope);\n    }\n    return LifecycleTask.done;\n  }\n\n  private attachView(flags: LifecycleFlags): void {\n    if (this.view != void 0 && (this.$controller.state & (State.isAttachedOrAttaching)) > 0) {\n      this.view.attach(flags);\n    }\n  }\n\n  private onComposed(): void {\n    this.composing = false;\n  }\n\n  private resolveView(subject: Subject<T> | undefined, flags: LifecycleFlags): IController<T> | undefined {\n    const view = this.provideViewFor(subject, flags);\n\n    if (view) {\n      view.hold(this.$controller.projector!.host);\n      view.lockScope(this.renderable.scope!);\n      return view;\n    }\n\n    return void 0;\n  }\n\n  private provideViewFor(subject: Subject<T> | undefined, flags: LifecycleFlags): IController<T> | undefined {\n    if (!subject) {\n      return void 0;\n    }\n\n    if ('lockScope' in subject) { // IController\n      return subject;\n    }\n\n    if ('createView' in subject) { // RenderPlan\n      return subject.createView(\n        flags,\n        this.renderingEngine,\n        this.renderable.context\n      ) as IController<T>;\n    }\n\n    if ('create' in subject) { // IViewFactory\n      return subject.create();\n    }\n\n    if ('template' in subject) { // Raw Template Definition\n      return this.renderingEngine.getViewFactory(\n        this.dom,\n        subject,\n        this.renderable.context\n      ).create() as IController<T>;\n    }\n\n    // Constructable (Custom Element Constructor)\n    return createElement(\n      this.dom,\n      subject,\n      this.properties,\n      this.$controller.projector === void 0\n        ? PLATFORM.emptyArray\n        : this.$controller.projector.children\n    ).createView(\n      flags,\n      this.renderingEngine,\n      this.renderable.context\n    ) as IController<T>;\n  }\n}\n","import {\n  Constructable,\n  IContainer,\n  InjectArray,\n  IResolver,\n  PLATFORM,\n  Registration,\n  Reporter,\n  Writable\n} from '@aurelia/kernel';\n\nimport {\n  CompiledTemplate,\n  DOM,\n  IDOM,\n  INode,\n  INodeSequence,\n  IRenderContext,\n  IRenderLocation,\n  ITemplate,\n  ITemplateFactory,\n  NodeSequence,\n  TemplateDefinition\n} from '@aurelia/runtime';\n\nexport const enum NodeType {\n  Element = 1,\n  Attr = 2,\n  Text = 3,\n  CDATASection = 4,\n  EntityReference = 5,\n  Entity = 6,\n  ProcessingInstruction = 7,\n  Comment = 8,\n  Document = 9,\n  DocumentType = 10,\n  DocumentFragment = 11,\n  Notation = 12\n}\n\nfunction isRenderLocation(node: Node): node is Node & IRenderLocation {\n  return node.textContent === 'au-end';\n}\n\n/**\n * IDOM implementation for Html.\n */\nexport class HTMLDOM implements IDOM {\n  public readonly Node: typeof Node;\n  public readonly Element: typeof Element;\n  public readonly HTMLElement: typeof HTMLElement;\n  public readonly CustomEvent: typeof CustomEvent;\n  public readonly window: Window;\n  public readonly document: Document;\n\n  constructor(\n    window: Window,\n    document: Document,\n    TNode: typeof Node,\n    TElement: typeof Element,\n    THTMLElement: typeof HTMLElement,\n    TCustomEvent: typeof CustomEvent\n  ) {\n    this.window = window;\n    this.document = document;\n    this.Node = TNode;\n    this.Element = TElement;\n    this.HTMLElement = THTMLElement;\n    this.CustomEvent = TCustomEvent;\n    if (DOM.isInitialized) {\n      Reporter.write(1001); // TODO: create reporters code // DOM already initialized (just info)\n      DOM.destroy();\n    }\n    DOM.initialize(this);\n  }\n\n  public static register(container: IContainer): IResolver<HTMLDOM> {\n    return Registration.alias(IDOM, this).register(container);\n  }\n\n  public addEventListener(eventName: string, subscriber: EventListenerOrEventListenerObject, publisher?: Node, options?: boolean | AddEventListenerOptions): void {\n    (publisher || this.document).addEventListener(eventName, subscriber, options);\n  }\n\n  public appendChild(parent: Node, child: Node): void {\n    parent.appendChild(child);\n  }\n\n  public cloneNode<T>(node: T, deep?: boolean): T {\n    return (node as unknown as Node).cloneNode(deep !== false) as unknown as T;\n  }\n\n  public convertToRenderLocation(node: Node): IRenderLocation {\n    if (this.isRenderLocation(node)) {\n      return node; // it's already a IRenderLocation (converted by FragmentNodeSequence)\n    }\n\n    if (node.parentNode == null) {\n      throw Reporter.error(52);\n    }\n\n    const locationEnd = this.document.createComment('au-end');\n    const locationStart = this.document.createComment('au-start');\n\n    node.parentNode.replaceChild(locationEnd, node);\n\n    locationEnd.parentNode!.insertBefore(locationStart, locationEnd);\n\n    (locationEnd as IRenderLocation).$start = locationStart as IRenderLocation;\n    (locationStart as IRenderLocation).$nodes = null!;\n\n    return locationEnd as IRenderLocation;\n  }\n\n  public createDocumentFragment(markupOrNode?: string | Node): DocumentFragment {\n    if (markupOrNode == null) {\n      return this.document.createDocumentFragment();\n    }\n\n    if (this.isNodeInstance(markupOrNode)) {\n      if ((markupOrNode as HTMLTemplateElement).content !== undefined) {\n        return (markupOrNode as HTMLTemplateElement).content;\n      }\n\n      const fragment = this.document.createDocumentFragment();\n      fragment.appendChild(markupOrNode);\n      return fragment;\n    }\n\n    return this.createTemplate(markupOrNode).content;\n  }\n\n  public createElement(name: string): HTMLElement {\n    return this.document.createElement(name);\n  }\n\n  public fetch(input: RequestInfo, init?: RequestInit): Promise<Response> {\n    return this.window.fetch(input, init);\n  }\n\n  // tslint:disable-next-line:no-any // this is how the DOM is typed\n  public createCustomEvent<T = any>(eventType: string, options?: CustomEventInit<T>): CustomEvent<T> {\n    return new this.CustomEvent(eventType, options);\n  }\n\n  public dispatchEvent(evt: Event): void {\n    this.document.dispatchEvent(evt);\n  }\n\n  public createNodeObserver(node: Node, cb: MutationCallback, init: MutationObserverInit): MutationObserver {\n    if (typeof MutationObserver === 'undefined') {\n      // TODO: find a proper response for this scenario\n      return {\n        disconnect(): void { /*empty*/ },\n        observe(): void { /*empty*/ },\n        takeRecords(): MutationRecord[] { return PLATFORM.emptyArray as typeof PLATFORM.emptyArray & MutationRecord[]; }\n      };\n    }\n\n    const observer = new MutationObserver(cb);\n    observer.observe(node, init);\n    return observer;\n  }\n\n  public createTemplate(markup?: unknown): HTMLTemplateElement {\n    if (markup == null) {\n      return this.document.createElement('template');\n    }\n\n    const template = this.document.createElement('template');\n    template.innerHTML = (markup as string | object).toString();\n\n    return template;\n  }\n  public createTextNode(text: string): Text {\n    return this.document.createTextNode(text);\n  }\n\n  public insertBefore(nodeToInsert: Node, referenceNode: Node): void {\n    referenceNode.parentNode!.insertBefore(nodeToInsert, referenceNode);\n  }\n\n  public isMarker(node: unknown): node is HTMLElement {\n    return (node as AuMarker).nodeName === 'AU-M';\n  }\n\n  public isNodeInstance(potentialNode: unknown): potentialNode is Node {\n    return potentialNode != null && (potentialNode as Node).nodeType > 0;\n  }\n\n  public isRenderLocation(node: unknown): node is IRenderLocation {\n    return (node as Comment).textContent === 'au-end';\n  }\n\n  public makeTarget(node: unknown): void {\n    (node as Element).className = 'au';\n  }\n\n  public registerElementResolver(container: IContainer, resolver: IResolver): void {\n    container.registerResolver(INode, resolver);\n    container.registerResolver(this.Node, resolver);\n    container.registerResolver(this.Element, resolver);\n    container.registerResolver(this.HTMLElement, resolver);\n  }\n\n  public remove(node: Node): void {\n    if ((node as ChildNode).remove) {\n      (node as ChildNode).remove();\n    } else {\n      node.parentNode!.removeChild(node);\n    }\n  }\n\n  public removeEventListener(eventName: string, subscriber: EventListenerOrEventListenerObject, publisher?: Node, options?: boolean | EventListenerOptions): void {\n    (publisher || this.document).removeEventListener(eventName, subscriber, options);\n  }\n\n  public setAttribute(node: Element, name: string, value: unknown): void {\n    node.setAttribute(name, value as string);\n  }\n}\n\nconst $DOM = DOM as unknown as HTMLDOM;\nexport { $DOM as DOM };\n\n/**\n * A specialized INodeSequence with optimizations for text (interpolation) bindings\n * The contract of this INodeSequence is:\n * - the previous element is an `au-m` node\n * - text is the actual text node\n */\n/** @internal */\nexport class TextNodeSequence implements INodeSequence {\n  public isMounted: boolean;\n  public isLinked: boolean;\n\n  public dom: HTMLDOM;\n  public firstChild: Text;\n  public lastChild: Text;\n  public childNodes: Text[];\n\n  public next?: INodeSequence<Node>;\n\n  private refNode?: Node;\n\n  private readonly targets: [Node];\n\n  constructor(dom: HTMLDOM, text: Text) {\n    this.isMounted = false;\n    this.isLinked = false;\n\n    this.dom = dom;\n    this.firstChild = text;\n    this.lastChild = text;\n    this.childNodes = [text];\n    this.targets = [new AuMarker(text) as unknown as Node];\n\n    this.next = void 0;\n\n    this.refNode = void 0;\n  }\n\n  public findTargets(): ArrayLike<Node> {\n    return this.targets;\n  }\n\n  public insertBefore(refNode: Node): void {\n    if (this.isLinked && !!this.refNode) {\n      this.addToLinked();\n    } else {\n      this.isMounted = true;\n      refNode.parentNode!.insertBefore(this.firstChild, refNode);\n    }\n  }\n\n  public appendTo(parent: Node): void {\n    if (this.isLinked && !!this.refNode) {\n      this.addToLinked();\n    } else {\n      this.isMounted = true;\n      parent.appendChild(this.firstChild);\n    }\n  }\n\n  public remove(): void {\n    this.isMounted = false;\n    this.firstChild.remove();\n  }\n\n  public addToLinked(): void {\n    const refNode = this.refNode!;\n    this.isMounted = true;\n    refNode.parentNode!.insertBefore(this.firstChild, refNode);\n  }\n\n  public unlink(): void {\n    this.isLinked = false;\n    this.next = void 0;\n    this.refNode = void 0;\n  }\n\n  public link(next: INodeSequence<Node> | (IRenderLocation & Comment) | undefined): void {\n    this.isLinked = true;\n    if (this.dom.isRenderLocation(next)) {\n      this.refNode = next;\n    } else {\n      this.next = next;\n      this.obtainRefNode();\n    }\n  }\n\n  private obtainRefNode(): void {\n    if (this.next !== void 0) {\n      this.refNode = this.next.firstChild;\n    } else {\n      this.refNode = void 0;\n    }\n  }\n}\n// tslint:enable:no-any\n\n// This is the most common form of INodeSequence.\n// Every custom element or template controller whose node sequence is based on an HTML template\n// has an instance of this under the hood. Anyone who wants to create a node sequence from\n// a string of markup would also receive an instance of this.\n// CompiledTemplates create instances of FragmentNodeSequence.\n/**\n * This is the most common form of INodeSequence.\n * @internal\n */\nexport class FragmentNodeSequence implements INodeSequence {\n  public isMounted: boolean;\n  public isLinked: boolean;\n\n  public dom: IDOM;\n  public firstChild: Node;\n  public lastChild: Node;\n  public childNodes: Node[];\n\n  public next?: INodeSequence<Node>;\n\n  private refNode?: Node;\n\n  private readonly fragment: DocumentFragment;\n  private readonly targets: ArrayLike<Node>;\n\n  constructor(dom: IDOM, fragment: DocumentFragment) {\n    this.isMounted = false;\n    this.isLinked = false;\n\n    this.dom = dom;\n    this.fragment = fragment;\n    // tslint:disable-next-line:no-any\n    const targetNodeList = fragment.querySelectorAll('.au');\n    let i = 0;\n    let ii = targetNodeList.length;\n    const targets = this.targets = Array(ii);\n\n    while (i < ii) {\n      // eagerly convert all markers to RenderLocations (otherwise the renderer\n      // will do it anyway) and store them in the target list (since the comments\n      // can't be queried)\n      const target = targetNodeList[i];\n\n      if (target.nodeName === 'AU-M') {\n        // note the renderer will still call this method, but it will just return the\n        // location if it sees it's already a location\n        targets[i] = this.dom.convertToRenderLocation(target);\n      } else {\n        // also store non-markers for consistent ordering\n        targets[i] = target;\n      }\n      ++i;\n    }\n\n    const childNodeList = fragment.childNodes;\n    i = 0;\n    ii = childNodeList.length;\n    const childNodes = this.childNodes = Array(ii);\n    while (i < ii) {\n      childNodes[i] = childNodeList[i] as Writable<Node>;\n      ++i;\n    }\n\n    this.firstChild = fragment.firstChild!;\n    this.lastChild = fragment.lastChild!;\n\n    this.next = void 0;\n\n    this.refNode = void 0;\n  }\n\n  public findTargets(): ArrayLike<Node> {\n    return this.targets;\n  }\n\n  public insertBefore(refNode: IRenderLocation & Comment): void {\n    if (this.isLinked && !!this.refNode) {\n      this.addToLinked();\n    } else {\n      const parent = refNode.parentNode!;\n      if (this.isMounted) {\n        let current = this.firstChild;\n        const end = this.lastChild;\n        let next: Node;\n\n        while (current != null) {\n          next = current.nextSibling!;\n          parent.insertBefore(current, refNode);\n\n          if (current === end) {\n            break;\n          }\n\n          current = next;\n        }\n      } else {\n        this.isMounted = true;\n        refNode.parentNode!.insertBefore(this.fragment, refNode);\n      }\n    }\n  }\n\n  public appendTo(parent: Node): void {\n    if (this.isMounted) {\n      let current = this.firstChild;\n      const end = this.lastChild;\n      let next: Node;\n\n      while (current != null) {\n        next = current.nextSibling!;\n        parent.appendChild(current);\n\n        if (current === end) {\n          break;\n        }\n\n        current = next;\n      }\n    } else {\n      this.isMounted = true;\n      parent.appendChild(this.fragment);\n    }\n  }\n\n  public remove(): void {\n    if (this.isMounted) {\n      this.isMounted = false;\n\n      const fragment = this.fragment;\n      const end = this.lastChild;\n      let next: Node;\n\n      let current = this.firstChild;\n      while (current !== null) {\n        next = current.nextSibling!;\n        fragment.appendChild(current);\n\n        if (current === end) {\n          break;\n        }\n\n        current = next;\n      }\n    }\n  }\n\n  public addToLinked(): void {\n    const refNode = this.refNode!;\n    const parent = refNode.parentNode!;\n    if (this.isMounted) {\n      let current = this.firstChild;\n      const end = this.lastChild;\n      let next: Node;\n\n      while (current != null) {\n        next = current.nextSibling!;\n        parent.insertBefore(current, refNode);\n\n        if (current === end) {\n          break;\n        }\n\n        current = next;\n      }\n    } else {\n      this.isMounted = true;\n      parent.insertBefore(this.fragment, refNode);\n    }\n  }\n\n  public unlink(): void {\n    this.isLinked = false;\n    this.next = void 0;\n    this.refNode = void 0;\n  }\n\n  public link(next: INodeSequence<Node> | IRenderLocation & Comment | undefined): void {\n    this.isLinked = true;\n    if (this.dom.isRenderLocation(next)) {\n      this.refNode = next;\n    } else {\n      this.next = next;\n      this.obtainRefNode();\n    }\n  }\n\n  private obtainRefNode(): void {\n    if (this.next !== void 0) {\n      this.refNode = this.next.firstChild;\n    } else {\n      this.refNode = void 0;\n    }\n  }\n}\n\nexport interface NodeSequenceFactory {\n  createNodeSequence(): INodeSequence;\n}\n\nexport class NodeSequenceFactory implements NodeSequenceFactory {\n  private readonly dom: IDOM;\n  private readonly deepClone!: boolean;\n  private readonly node!: Node;\n  private readonly Type!: Constructable<INodeSequence>;\n\n  constructor(dom: IDOM, markupOrNode: string | Node) {\n    this.dom = dom;\n    const fragment = dom.createDocumentFragment(markupOrNode) as DocumentFragment;\n    const childNodes = fragment.childNodes;\n    switch (childNodes.length) {\n      case 0:\n        this.createNodeSequence = () => NodeSequence.empty;\n        return;\n      case 2:\n        const target = childNodes[0];\n        if (target.nodeName === 'AU-M' || target.nodeName === '#comment') {\n          const text = childNodes[1];\n          if (text.nodeType === NodeType.Text && text.textContent!.length === 0) {\n            this.deepClone = false;\n            this.node = text;\n            this.Type = TextNodeSequence;\n            return;\n          }\n        }\n      // falls through if not returned\n      default:\n        this.deepClone = true;\n        this.node = fragment;\n        this.Type = FragmentNodeSequence;\n    }\n  }\n\n  public createNodeSequence(): INodeSequence {\n    return new this.Type(this.dom, this.node.cloneNode(this.deepClone));\n  }\n}\n\nexport interface AuMarker extends INode { }\n\n/** @internal */\nexport class AuMarker implements INode {\n  public get parentNode(): Node & ParentNode {\n    return this.nextSibling.parentNode!;\n  }\n\n  public readonly nextSibling: Node;\n  public readonly previousSibling!: Node;\n  public readonly content?: Node;\n  public readonly childNodes!: ArrayLike<ChildNode>;\n  public readonly nodeName!: 'AU-M';\n  public readonly nodeType!: NodeType.Element;\n\n  public textContent: string;\n\n  constructor(next: Node) {\n    this.nextSibling = next;\n    this.textContent = '';\n  }\n\n  public remove(): void { /* do nothing */ }\n}\n\n(proto => {\n  proto.previousSibling = null!;\n  proto.childNodes = PLATFORM.emptyArray;\n  proto.nodeName = 'AU-M';\n  proto.nodeType = NodeType.Element;\n})(AuMarker.prototype as Writable<AuMarker>);\n\n/** @internal */\nexport class HTMLTemplateFactory implements ITemplateFactory {\n  public static readonly inject: InjectArray = [IDOM];\n\n  private readonly dom: IDOM;\n\n  constructor(dom: IDOM) {\n    this.dom = dom;\n  }\n\n  public static register(container: IContainer): IResolver<ITemplateFactory> {\n    return Registration.singleton(ITemplateFactory, this).register(container);\n  }\n\n  public create(parentRenderContext: IRenderContext, definition: TemplateDefinition): ITemplate {\n    return new CompiledTemplate(this.dom, definition, new NodeSequenceFactory(this.dom, definition.template as string | Node), parentRenderContext);\n  }\n}\n","import { InjectArray, InterfaceSymbol, IRegistry, Tracer } from '@aurelia/kernel';\nimport {\n  addBinding,\n  Binding,\n  BindingMode,\n  BindingType,\n  ensureExpression,\n  IDOM,\n  IExpressionParser,\n  IInstructionRenderer,\n  instructionRenderer,\n  InterpolationBinding,\n  IObserverLocator,\n  IController,\n  IRenderContext,\n  LifecycleFlags,\n  MultiInterpolationBinding\n} from '@aurelia/runtime';\nimport { AttributeBinding } from './binding/attribute';\nimport { Listener } from './binding/listener';\nimport {\n  HTMLTargetedInstructionType,\n  IAttributeBindingInstruction,\n  IListenerBindingInstruction,\n  ISetAttributeInstruction,\n  IStylePropertyBindingInstruction,\n  ITextBindingInstruction\n} from './definitions';\nimport { IEventManager } from './observation/event-manager';\n\nconst slice = Array.prototype.slice;\n\n@instructionRenderer(HTMLTargetedInstructionType.textBinding)\n/** @internal */\nexport class TextBindingRenderer implements IInstructionRenderer {\n  public static readonly inject: InjectArray = [IExpressionParser, IObserverLocator];\n  public static readonly register: IRegistry['register'];\n\n  private readonly parser: IExpressionParser;\n  private readonly observerLocator: IObserverLocator;\n\n  constructor(parser: IExpressionParser, observerLocator: IObserverLocator) {\n    this.parser = parser;\n    this.observerLocator = observerLocator;\n  }\n\n  public render(flags: LifecycleFlags, dom: IDOM, context: IRenderContext, renderable: IController, target: ChildNode, instruction: ITextBindingInstruction): void {\n    if (Tracer.enabled) { Tracer.enter('TextBindingRenderer', 'render', slice.call(arguments)); }\n    const next = target.nextSibling;\n    if (dom.isMarker(target)) {\n      dom.remove(target);\n    }\n    let binding: MultiInterpolationBinding | InterpolationBinding;\n    const expr = ensureExpression(this.parser, instruction.from, BindingType.Interpolation);\n    if (expr.isMulti) {\n      binding = new MultiInterpolationBinding(this.observerLocator, expr, next!, 'textContent', BindingMode.toView, context);\n    } else {\n      binding = new InterpolationBinding(expr.firstExpression, expr, next!, 'textContent', BindingMode.toView, this.observerLocator, context, true);\n    }\n    addBinding(renderable, binding);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n}\n\n@instructionRenderer(HTMLTargetedInstructionType.listenerBinding)\n/** @internal */\nexport class ListenerBindingRenderer implements IInstructionRenderer {\n  public static readonly inject: InjectArray = [IExpressionParser, IEventManager];\n  public static readonly register: IRegistry['register'];\n\n  private readonly parser: IExpressionParser;\n  private readonly eventManager: IEventManager;\n\n  constructor(parser: IExpressionParser, eventManager: IEventManager) {\n    this.parser = parser;\n    this.eventManager = eventManager;\n  }\n\n  public render(flags: LifecycleFlags, dom: IDOM, context: IRenderContext, renderable: IController, target: HTMLElement, instruction: IListenerBindingInstruction): void {\n    if (Tracer.enabled) { Tracer.enter('ListenerBindingRenderer', 'render', slice.call(arguments)); }\n    const expr = ensureExpression(this.parser, instruction.from, BindingType.IsEventCommand | (instruction.strategy + BindingType.DelegationStrategyDelta));\n    const binding = new Listener(dom, instruction.to, instruction.strategy, expr, target, instruction.preventDefault, this.eventManager, context);\n    addBinding(renderable, binding);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n}\n\n@instructionRenderer(HTMLTargetedInstructionType.setAttribute)\n/** @internal */\nexport class SetAttributeRenderer implements IInstructionRenderer {\n  public static readonly register: IRegistry['register'];\n\n  public render(flags: LifecycleFlags, dom: IDOM, context: IRenderContext, renderable: IController, target: HTMLElement, instruction: ISetAttributeInstruction): void {\n    if (Tracer.enabled) { Tracer.enter('SetAttributeRenderer', 'render', slice.call(arguments)); }\n    target.setAttribute(instruction.to, instruction.value);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n}\n\n@instructionRenderer(HTMLTargetedInstructionType.stylePropertyBinding)\n/** @internal */\nexport class StylePropertyBindingRenderer implements IInstructionRenderer {\n  public static readonly inject: InjectArray = [IExpressionParser, IObserverLocator];\n  public static readonly register: IRegistry['register'];\n\n  private readonly parser: IExpressionParser;\n  private readonly observerLocator: IObserverLocator;\n\n  constructor(parser: IExpressionParser, observerLocator: IObserverLocator) {\n    this.parser = parser;\n    this.observerLocator = observerLocator;\n  }\n\n  public render(flags: LifecycleFlags, dom: IDOM, context: IRenderContext, renderable: IController, target: HTMLElement, instruction: IStylePropertyBindingInstruction): void {\n    if (Tracer.enabled) { Tracer.enter('StylePropertyBindingRenderer', 'render', slice.call(arguments)); }\n    const expr = ensureExpression(this.parser, instruction.from, BindingType.IsPropertyCommand | BindingMode.toView);\n    const binding = new Binding(expr, target.style, instruction.to, BindingMode.toView, this.observerLocator, context);\n    addBinding(renderable, binding);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n}\n\n@instructionRenderer(HTMLTargetedInstructionType.attributeBinding)\n/** @internal */\nexport class AttributeBindingRenderer implements IInstructionRenderer {\n  // @ts-ignore\n  public static readonly inject: ReadonlyArray<InterfaceSymbol> = [IExpressionParser, IObserverLocator];\n  public static readonly register: IRegistry['register'];\n\n  private readonly parser: IExpressionParser;\n  private readonly observerLocator: IObserverLocator;\n\n  constructor(parser: IExpressionParser, observerLocator: IObserverLocator) {\n    this.parser = parser;\n    this.observerLocator = observerLocator;\n  }\n\n  public render(flags: LifecycleFlags, dom: IDOM, context: IRenderContext, renderable: IController, target: HTMLElement, instruction: IAttributeBindingInstruction): void {\n    if (Tracer.enabled) { Tracer.enter('StylePropertyBindingRenderer', 'render', slice.call(arguments)); }\n    const expr = ensureExpression(this.parser, instruction.from, BindingType.IsPropertyCommand | BindingMode.toView);\n    const binding = new AttributeBinding(\n      expr,\n      target,\n      instruction.attr/*targetAttribute*/,\n      instruction.to/*targetKey*/,\n      BindingMode.toView,\n      this.observerLocator,\n      context\n    );\n    addBinding(renderable, binding);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n}\n","import {\n  IContainer,\n  IResolver,\n  PLATFORM,\n  Registration,\n  Reporter,\n  toArray,\n  Tracer\n} from '@aurelia/kernel';\n\nimport {\n  CustomElementHost,\n  IController,\n  IDOM,\n  IElementProjector,\n  INodeSequence,\n  IProjectorLocator,\n  TemplateDefinition\n} from '@aurelia/runtime';\n\nconst slice = Array.prototype.slice;\n\nconst defaultShadowOptions = {\n  mode: 'open' as 'open' | 'closed'\n};\n\nexport class HTMLProjectorLocator implements IProjectorLocator<Node> {\n  public static register(container: IContainer): IResolver<IProjectorLocator> {\n    return Registration.singleton(IProjectorLocator, this).register(container);\n  }\n\n  public getElementProjector(dom: IDOM<Node>, $component: IController<Node>, host: CustomElementHost<HTMLElement>, def: TemplateDefinition): IElementProjector<Node> {\n    if (def.shadowOptions || def.hasSlots) {\n      if (def.containerless) {\n        throw Reporter.error(21);\n      }\n\n      return new ShadowDOMProjector(dom, $component, host, def);\n    }\n\n    if (def.containerless) {\n      return new ContainerlessProjector(dom, $component, host);\n    }\n\n    return new HostProjector($component, host);\n  }\n}\n\nconst childObserverOptions = { childList: true };\n\n/** @internal */\nexport class ShadowDOMProjector implements IElementProjector<Node> {\n  public host: CustomElementHost<Node>;\n  public shadowRoot: CustomElementHost<ShadowRoot>;\n  public dom: IDOM<Node>;\n\n  constructor(dom: IDOM<Node>, $controller: IController<Node>, host: CustomElementHost<HTMLElement>, definition: TemplateDefinition) {\n    this.dom = dom;\n    this.host = host;\n\n    let shadowOptions: ShadowRootInit;\n    if (\n      definition.shadowOptions instanceof Object &&\n      'mode' in definition.shadowOptions\n    ) {\n      shadowOptions = definition.shadowOptions as unknown as ShadowRootInit;\n    } else {\n      shadowOptions = defaultShadowOptions;\n    }\n    this.shadowRoot = host.attachShadow(shadowOptions);\n    this.host.$controller = $controller;\n    this.shadowRoot.$controller = $controller as IController<ShadowRoot>;\n  }\n\n  public get children(): ArrayLike<CustomElementHost<Node>> {\n    return this.shadowRoot.childNodes;\n  }\n\n  public subscribeToChildrenChange(callback: () => void): void {\n    // TODO: add a way to dispose/disconnect\n    this.dom.createNodeObserver!(this.shadowRoot, callback, childObserverOptions);\n  }\n\n  public provideEncapsulationSource(): CustomElementHost<ShadowRoot> {\n    return this.shadowRoot;\n  }\n\n  public project(nodes: INodeSequence<Node>): void {\n    if (Tracer.enabled) { Tracer.enter('ShadowDOMProjector', 'project', slice.call(arguments)); }\n    nodes.appendTo(this.shadowRoot);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n\n  public take(nodes: INodeSequence<Node>): void {\n    if (Tracer.enabled) { Tracer.enter('ShadowDOMProjector', 'take', slice.call(arguments)); }\n    nodes.remove();\n    nodes.unlink();\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n}\n\n/** @internal */\nexport class ContainerlessProjector implements IElementProjector<Node> {\n  public host: CustomElementHost<Node>;\n\n  private readonly childNodes: ReadonlyArray<CustomElementHost<Node>>;\n\n  constructor(dom: IDOM<Node>, $controller: IController<Node>, host: Node) {\n    if (host.childNodes.length) {\n      this.childNodes = toArray(host.childNodes);\n    } else {\n      this.childNodes = PLATFORM.emptyArray;\n    }\n\n    this.host = dom.convertToRenderLocation(host) as CustomElementHost<Node>;\n    this.host.$controller = $controller;\n  }\n\n  public get children(): ArrayLike<CustomElementHost<Node>> {\n    return this.childNodes;\n  }\n\n  public subscribeToChildrenChange(callback: () => void): void {\n    // TODO: add a way to dispose/disconnect\n    const observer = new MutationObserver(callback);\n    observer.observe(this.host, childObserverOptions);\n  }\n\n  public provideEncapsulationSource(): Node {\n    return this.host.getRootNode();\n  }\n\n  public project(nodes: INodeSequence<Node>): void {\n    if (Tracer.enabled) { Tracer.enter('ContainerlessProjector', 'project', slice.call(arguments)); }\n    nodes.insertBefore(this.host);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n\n  public take(nodes: INodeSequence<Node>): void {\n    if (Tracer.enabled) { Tracer.enter('ContainerlessProjector', 'take', slice.call(arguments)); }\n    nodes.remove();\n    nodes.unlink();\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n}\n\n/** @internal */\nexport class HostProjector implements IElementProjector<Node> {\n  public host: CustomElementHost<Node>;\n\n  constructor($controller: IController<Node>, host: CustomElementHost<Node>) {\n    this.host = host;\n    this.host.$controller = $controller;\n  }\n\n  public get children(): ArrayLike<CustomElementHost<Node>> {\n    return this.host.childNodes;\n  }\n\n  public subscribeToChildrenChange(callback: () => void): void {\n    // Do nothing since this scenario will never have children.\n  }\n\n  public provideEncapsulationSource(): Node {\n    return this.host.getRootNode();\n  }\n\n  public project(nodes: INodeSequence<Node>): void {\n    if (Tracer.enabled) { Tracer.enter('HostProjector', 'project', slice.call(arguments)); }\n    nodes.appendTo(this.host);\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n\n  public take(nodes: INodeSequence<Node>): void {\n    if (Tracer.enabled) { Tracer.enter('HostProjector', 'take', slice.call(arguments)); }\n    nodes.remove();\n    nodes.unlink();\n    if (Tracer.enabled) { Tracer.leave(); }\n  }\n}\n","import { DI, IContainer, IRegistry } from '@aurelia/kernel';\nimport { RuntimeBasicConfiguration } from '@aurelia/runtime';\nimport { HTMLTemplateFactory } from './dom';\nimport {\n  AttributeBindingRenderer,\n  ListenerBindingRenderer,\n  SetAttributeRenderer,\n  StylePropertyBindingRenderer,\n  TextBindingRenderer\n} from './html-renderer';\nimport { TargetAccessorLocator, TargetObserverLocator } from './observation/observer-locator';\nimport { HTMLProjectorLocator } from './projectors';\nimport { AttrBindingBehavior } from './resources/binding-behaviors/attr';\nimport { SelfBindingBehavior } from './resources/binding-behaviors/self';\nimport { UpdateTriggerBindingBehavior } from './resources/binding-behaviors/update-trigger';\nimport { Compose } from './resources/custom-elements/compose';\n\nexport const IProjectorLocatorRegistration = HTMLProjectorLocator as IRegistry;\nexport const ITargetAccessorLocatorRegistration = TargetAccessorLocator as IRegistry;\nexport const ITargetObserverLocatorRegistration = TargetObserverLocator as IRegistry;\nexport const ITemplateFactoryRegistration = HTMLTemplateFactory as IRegistry;\n\n/**\n * Default HTML-specific (but environment-agnostic) implementations for the following interfaces:\n * - `IProjectorLocator`\n * - `ITargetAccessorLocator`\n * - `ITargetObserverLocator`\n * - `ITemplateFactory`\n */\nexport const DefaultComponents = [\n  IProjectorLocatorRegistration,\n  ITargetAccessorLocatorRegistration,\n  ITargetObserverLocatorRegistration,\n  ITemplateFactoryRegistration\n];\n\nexport const AttrBindingBehaviorRegistration = AttrBindingBehavior as IRegistry;\nexport const SelfBindingBehaviorRegistration = SelfBindingBehavior as IRegistry;\nexport const UpdateTriggerBindingBehaviorRegistration = UpdateTriggerBindingBehavior as IRegistry;\nexport const ComposeRegistration = Compose as IRegistry;\n\n/**\n * Default HTML-specific (but environment-agnostic) resources:\n * - Binding Behaviors: `attr`, `self`, `updateTrigger`\n * - Custom Elements: `au-compose`\n */\nexport const DefaultResources = [\n  AttrBindingBehaviorRegistration,\n  SelfBindingBehaviorRegistration,\n  UpdateTriggerBindingBehaviorRegistration,\n  ComposeRegistration,\n];\n\nexport const ListenerBindingRendererRegistration = ListenerBindingRenderer as IRegistry;\nexport const AttributeBindingRendererRegistration = AttributeBindingRenderer as IRegistry;\nexport const SetAttributeRendererRegistration = SetAttributeRenderer as IRegistry;\nexport const StylePropertyBindingRendererRegistration = StylePropertyBindingRenderer as IRegistry;\nexport const TextBindingRendererRegistration = TextBindingRenderer as IRegistry;\n\n/**\n * Default HTML-specfic (but environment-agnostic) renderers for:\n * - Listener Bindings: `trigger`, `capture`, `delegate`\n * - SetAttribute\n * - StyleProperty: `style`, `css`\n * - TextBinding: `${}`\n */\nexport const DefaultRenderers = [\n  ListenerBindingRendererRegistration,\n  AttributeBindingRendererRegistration,\n  SetAttributeRendererRegistration,\n  StylePropertyBindingRendererRegistration,\n  TextBindingRendererRegistration\n];\n\n/**\n * A DI configuration object containing html-specific (but environment-agnostic) registrations:\n * - `BasicConfiguration` from `@aurelia/runtime`\n * - `DefaultComponents`\n * - `DefaultResources`\n * - `DefaultRenderers`\n */\nexport const BasicConfiguration = {\n  /**\n   * Apply this configuration to the provided container.\n   */\n  register(container: IContainer): IContainer {\n    return RuntimeBasicConfiguration\n      .register(container)\n      .register(\n        ...DefaultComponents,\n        ...DefaultResources,\n        ...DefaultRenderers\n      );\n  },\n  /**\n   * Create a new container with this configuration applied to it.\n   */\n  createContainer(): IContainer {\n    return this.register(DI.createContainer());\n  }\n};\n"],"names":["slice","defaultMatcher","childObserverOptions"],"mappings":"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"}