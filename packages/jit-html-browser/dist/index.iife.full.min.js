var au=(function(t){"use strict";function i(t){return function(i){const s=function(t,i,e){DI.inject(s)(t,i,e)};return s.resolve=function(s,e){return t(i,s,e)},s}}function s(t){return DI.transient(t)}function e(t){return DI.singleton(t)}function n(t){return"function"==typeof t.register}function r(t){if(null==t||t===Object)throw Reporter.error(5)}function o(t,i,s){if(t instanceof gi&&4===t.strategy){const e=t.state;let n=e.length;const r=[];for(;n--;)r[n]=e[n].resolve(i,s);return r}return[t.resolve(i,s)]}function c(t,i,s,e){let n,r=s.length,o=[];for(;r--;){if(null==(n=s[r]))throw Reporter.error(7,`Index ${r}.`);o[r]=t.get(n)}return void 0!==e&&(o=o.concat(e)),Reflect.construct(i,o)}function l(t,value,i){let s=[];if(null==value)return s;if(Array.isArray(value))for(let e=0,n=value.length;n>e;e++)i?s.push(`${Ti(t)}=${Ci(value[e])}`):s=s.concat(l(`${t}[${"object"==typeof value[e]&&null!=value[e]?e:""}]`,value[e]));else if("object"!=typeof value||i)s.push(`${Ti(t)}=${Ci(value)}`);else for(const i in value)s=s.concat(l(`${t}[${i}]`,value[i]));return s}function u(t,value){return Array.isArray(t)?(t.push(value),t):void 0!==t?[t,value]:value}function a(t,i,value){let s=t;const e=i.length-1;let n,r;for(let t=0;e>=t;++t)s=s[n=""===i[t]?s.length:i[t]]=e>t?(r=s[n]&&"object"!=typeof s[n]?[s[n]]:s[n])||(isNaN(i[t+1])?{}:[]):value}function d(t,i,s){try{t(i,s)}catch(t){Reporter.error(0,t)}}function f(t,i){try{t.t(i)}catch(t){Reporter.error(0,t)}}function isNumeric(value){switch(typeof value){case"number":return 1;case"string":{const t=Oi[value];if(void 0!==t)return t;const{length:i}=value;if(0===i)return Oi[value]=0;let s=0;for(let t=0;i>t;++t)if(48>(s=value.charCodeAt(t))||s>57)return Oi[value]=0;return Oi[value]=1}default:return 0}}function camelCase(t){let value=Ri[t];if(void 0!==value)return value;value="";let i,s=1,e=0;for(let n=0,r=t.length;r>n;++n)"-"===(i=t.charAt(n))||"."===i||"_"===i?e=1:(value+=s?i.toLowerCase():e?i.toUpperCase():i,e=0),s=0;return Ri[t]=value}function kebabCase(t){let value=Bi[t];if(void 0!==value)return value;value="";let i,s,e=1;for(let n=0,r=t.length;r>n;++n)s=(i=t.charAt(n)).toLowerCase(),value+=e?s:i!==s?`-${s}`:s,e=0;return Bi[t]=value}function toArray(t){const{length:i}=t,s=Array(i);for(let e=0;i>e;++e)s[e]=t[e];return s}function nextId(t){return void 0===ki[t]&&(ki[t]=0),++ki[t]}function compareNumber(t,i){return t-i}function attributePattern(...t){return function(i){const s=i.prototype;return(function(t,i){for(const def of i)def.pattern in t?"function"!=typeof t[def.pattern]&&Reporter.write(402,def.pattern):Reporter.write(401,def.pattern)})(s,t),s.i=t,i.register=function(t){return Registration.singleton(IAttributePattern,i).register(t,IAttributePattern)},i}}function v(t,i,s,e){var n,r,o=arguments.length,c=3>o?i:null===e?e=Object.getOwnPropertyDescriptor(i,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,s,e);else for(r=t.length-1;r>=0;r--)(n=t[r])&&(c=(3>o?n(c):o>3?n(i,s,c):n(i,s))||c);return o>3&&c&&Object.defineProperty(i,s,c),c}function subscriberCollection(){return function(t){const i=t.prototype;i.s=0,i.o=g,i.l=m,i.u=R,i.v=C,i.g=k,void 0===i.subscribe&&(i.subscribe=g),void 0===i.unsubscribe&&(i.unsubscribe=m)}}function proxySubscriberCollection(){return function(t){const i=t.prototype;i.p=0,i.m=b,i.C=w,i.T=B,i.A=T,i.R=I,void 0===i.B&&(i.B=b),void 0===i.O&&(i.O=w)}}function collectionSubscriberCollection(){return function(t){const i=t.prototype;i.k=0,i.S=p,i.I=y,i.P=O,i.L=A,i.j=P,void 0===i.V&&(i.V=p),void 0===i.$&&(i.$=y)}}function g(t){if(this.u(t))return 0;const i=this.s;return 0==(1&i)?(this.M=t,this.s|=1):0==(2&i)?(this.D=t,this.s|=2):0==(4&i)?(this.F=t,this.s|=4):0==(8&i)?(this.N=[t],this.s|=8):this.N.push(t),1}function b(t){if(this.T(t))return 0;const i=this.p;return 0==(1&i)?(this.U=t,this.p|=1):0==(2&i)?(this.H=t,this.p|=2):0==(4&i)?(this.K=t,this.p|=4):0==(8&i)?(this.q=[t],this.p|=8):this.q.push(t),1}function p(t){if(this.P(t))return 0;const i=this.k;return 0==(1&i)?(this.W=t,this.k|=1):0==(2&i)?(this.G=t,this.k|=2):0==(4&i)?(this.Z=t,this.k|=4):0==(8&i)?(this.X=[t],this.k|=8):this.X.push(t),1}function m(t){const i=this.s;if((1&i)>0&&this.M===t)return this.M=void 0,this.s=1^(1|this.s),1;if((2&i)>0&&this.D===t)return this.D=void 0,this.s=2^(2|this.s),1;if((4&i)>0&&this.F===t)return this.F=void 0,this.s=4^(4|this.s),1;if((8&i)>0){const i=this.N;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.s=8^(8|this.s)),1}return 0}function w(t){const i=this.p;if((1&i)>0&&this.U===t)return this.U=void 0,this.p=1^(1|this.p),1;if((2&i)>0&&this.H===t)return this.H=void 0,this.p=2^(2|this.p),1;if((4&i)>0&&this.K===t)return this.K=void 0,this.p=4^(4|this.p),1;if((8&i)>0){const i=this.q;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.p=8^(8|this.p)),1}return 0}function y(t){const i=this.k;if((1&i)>0&&this.W===t)return this.W=void 0,this.k=1^(1|this.k),1;if((2&i)>0&&this.G===t)return this.G=void 0,this.k=2^(2|this.k),1;if((4&i)>0&&this.Z===t)return this.Z=void 0,this.k=4^(4|this.k),1;if((8&i)>0){const i=this.X;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.k=8^(8|this.k)),1}return 0}function C(){return 0!==this.s}function T(){return 0!==this.p}function A(){return 0!==this.k}function R(t){const i=this.s;if((1&i)>0&&this.M===t)return 1;if((2&i)>0&&this.D===t)return 1;if((4&i)>0&&this.F===t)return 1;if((8&i)>0){const i=this.N;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function B(t){const i=this.p;if((1&i)>0&&this.U===t)return 1;if((2&i)>0&&this.H===t)return 1;if((4&i)>0&&this.K===t)return 1;if((8&i)>0){const i=this.q;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function O(t){const i=this.k;if((1&i)>0&&this.W===t)return 1;if((2&i)>0&&this.G===t)return 1;if((4&i)>0&&this.Z===t)return 1;if((8&i)>0){const i=this.X;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function k(t,i,s){const e=this.M,n=this.D,r=this.F;let o=this.N;if(void 0!==o&&(o=o.slice()),void 0!==e&&S(e,t,i,s,void 0===e.id?0:this[e.id]),void 0!==n&&S(n,t,i,s,void 0===n.id?0:this[n.id]),void 0!==r&&S(r,t,i,s,void 0===r.id?0:this[r.id]),void 0!==o){const{length:e}=o;let n;for(let r=0;e>r;++r)void 0!==(n=o[r])&&S(n,t,i,s,void 0===n.id?0:this[n.id])}}function S(t,i,s,e,n){t.J(i,s,48^(48|e)|n)}function I(t,i,s,e){const n=this.U,r=this.H,o=this.K;let c=this.q;if(void 0!==c&&(c=c.slice()),void 0!==n&&n.Y(t,i,s,e),void 0!==r&&r.Y(t,i,s,e),void 0!==o&&o.Y(t,i,s,e),void 0!==c){const{length:n}=c;let r;for(let o=0;n>o;++o)void 0!==(r=c[o])&&r.Y(t,i,s,e)}}function P(t,i){const s=this.W,e=this.G,n=this.Z;let r=this.X;if(void 0!==r&&(r=r.slice()),void 0!==s&&s.tt(t,i),void 0!==e&&e.tt(t,i),void 0!==n&&n.tt(t,i),void 0!==r){const{length:s}=r;let e;for(let n=0;s>n;++n)void 0!==(e=r[n])&&e.tt(t,i)}}function E(t){const i=BindingBehaviorResource.it(this.description.name);t.register(Registration.singleton(i,this)),t.register(Registration.singleton(this,this))}function L(t){const i=this.kind.it(this.description.name);t.register(Registration.singleton(i,this)),t.register(Registration.singleton(this,this))}function hasBind(t){return 2048==(2048&t.st)}function hasUnbind(t){return 4096==(4096&t.st)}function isLiteral(t){return 16384==(16384&t.st)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let i=0;t.length>i;++i)if(!isPureLiteral(t[i]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.st){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.et);case 17925:return 1}return 0}function j(t,i,s,e){const n=e.length,r=Array(n);for(let o=0;n>o;++o)r[o]=e[o].evaluate(t,i,s);return r}function x(t,i,name){const s=null==i?null:i[name];if("function"==typeof s)return s;if(!(2097152&t)&&null==s)return null;throw Reporter.error(207,i,name,s)}function V(strategy){return 0==(strategy&Wi)?1|strategy:strategy}function $(t){if(t===os){const i=rs.length=hs.length=(os+=5)+1;for(let s=t+1;i>s;++s)rs[s]=`_observer${s}`,hs[s]=`_observerVersion${s}`}}function M(t){const i=null==this.nt?0:this.nt;let s=i;for(;s--&&this[rs[s]]!==t;);if(-1===s){for(s=0;this[rs[s]];)s++;this[rs[s]]=t,t.subscribe(this),t[this.id]|=16,s===i&&(this.nt=s+1)}null==this.version&&(this.version=0),this[hs[s]]=this.version,$(s)}function D(t,i,s){Tracer.enabled&&Tracer.rt(this.constructor.name,"observeProperty",ns.call(arguments));const e=this.ot.ht(t,i,s);this.ct(e),Tracer.enabled&&Tracer.lt()}function F(all){const t=this.nt;let i,s;if(1==all)for(let e=0;t>e;++e)null!=(s=this[i=rs[e]])&&(this[i]=void 0,s.unsubscribe(this),s[this.id]&=-17);else{const e=this.version;for(let n=0;t>n;++n)this[hs[n]]!==e&&null!=(s=this[i=rs[n]])&&(this[i]=void 0,s.unsubscribe(this),s[this.id]&=-17)}}function N(t){const i=t.prototype;return i.hasOwnProperty("observeProperty")||(i.ut=D),i.hasOwnProperty("unobserve")||(i.unobserve=F),i.hasOwnProperty("addObserver")||(i.ct=M),t}function connectable(t){return null==t?N:N(t)}function createIndexMap(t=0){const i=Array(t);let s=0;for(;t>s;)i[s]=s++;return i.at=[],i.isIndexMap=1,i}function U(t,i){return t===i?0:(i=null===i?"null":""+i)>(t=null===t?"null":""+t)?-1:1}function z(t,i){return void 0===t?void 0===i?0:1:void 0===i?-1:0}function H(t,i,from,to,s){let e,n,r,o,c,l,u;for(l=from+1;to>l;l++){for(e=t[l],n=i[l],u=l-1;u>=from&&(o=i[u],(c=s(r=t[u],e))>0);u--)t[u+1]=r,i[u+1]=o;t[u+1]=e,i[u+1]=n}}function K(t,i,from,to,s){let e,n,r,o,c,l,u,a,d,f,v,g,b,p,m,w,y,C,T,A=0,R=0;for(;;){if(10>=to-from)return void H(t,i,from,to,s);o=i[from],c=i[to-1],r=t[A=from+(to-from>>1)],l=i[A],(u=s(e=t[from],n=t[to-1]))>0&&(f=e,v=o,e=n,o=c,n=f,c=v),0>(a=s(e,r))?(d=s(n,r))>0&&(f=n,v=c,n=r,c=l,r=f,l=v):(f=e,v=o,e=r,o=l,r=n,l=c,n=f,c=v),t[from]=e,i[from]=o,t[to-1]=r,i[to-1]=l,g=n,b=c,m=to-1,t[A]=t[p=from+1],i[A]=i[p],t[p]=g,i[p]=b;t:for(R=p+1;m>R;R++)if(y=i[R],0>(C=s(w=t[R],g)))t[R]=t[p],i[R]=i[p],t[p]=w,i[p]=y,p++;else if(C>0){do{if(--m==R)break t;C=s(T=t[m],g)}while(C>0);t[R]=t[m],i[R]=i[m],t[m]=w,i[m]=y,0>C&&(w=t[R],y=i[R],t[R]=t[p],i[R]=i[p],t[p]=w,i[p]=y,p++)}p-from>to-m?(K(t,i,m,to,s),to=p):(K(t,i,from,p,s),from=m)}}function enableArrayObservation(){for(const t of ks)1!=ms[t].dt&&def(ms,t,{...Is,value:Ss[t]})}function q(t,i,s){return void 0===s.ft&&(s.ft=new ArrayObserver(t,i,s)),s.ft}function enableMapObservation(){for(const t of Ms)1!=Ls[t].dt&&Ns(Ls,t,{...Fs,value:Ds[t]})}function W(t,i,s){return void 0===s.ft&&(s.ft=new MapObserver(t,i,s)),s.ft}function enableSetObservation(){for(const t of Gs)1!=Hs[t].dt&&_s(Hs,t,{...Xs,value:Zs[t]})}function Q(t,i,s){return void 0===s.ft&&(s.ft=new SetObserver(t,i,s)),s.ft}function createComputedObserver(t,i,s,e,n,r,o){if(0==o.vt)return s.gt(n,r);if(o.get){const s=n.constructor.computed&&n.constructor.computed[r]||ie;return o.set?s.bt?new GetterObserver(t,s,n,r,o,i,e):new CustomSetterObserver(n,r,o):new GetterObserver(t,s,n,r,o,i,e)}throw Reporter.error(18,r)}function getCollectionObserver(t,i,s){const e=s instanceof Object?ProxyObserver.pt(s):s;switch(ce.call(s)){case"[object Array]":return q(t,i,e);case"[object Map]":return W(t,i,e);case"[object Set]":return Q(t,i,e)}}function G(t,i,s){const e=this.wt;PLATFORM.global.clearTimeout(e.yt),e.yt=PLATFORM.global.setTimeout(()=>{this.Ct(t,i,s)},e.Tt)}function Z(t,i,s){const e=this.wt;if(PLATFORM.global.clearTimeout(e.yt),!(s&e.At))return e.oldValue=fe,void this.Ct(t,i,s);e.oldValue===fe&&(e.oldValue=i);const n=PLATFORM.global.setTimeout(()=>{const i=e.oldValue;e.oldValue=fe,this.Ct(t,i,s)},e.Tt);e.yt=n}function X(t){const i=this.Rt,s=+new Date-i.Bt;if(s>=i.Tt)return PLATFORM.global.clearTimeout(i.yt),i.yt=-1,i.Bt=+new Date,void this.Ot(t);if(i.newValue=t,-1===i.yt){const t=PLATFORM.global.setTimeout(()=>{i.yt=-1,i.Bt=+new Date,this.Ot(i.newValue)},i.Tt-s);i.yt=t}}function J(name){return`${ge}:${name}`}function Y(t){return t.kt}function tt(name){return`${be}:${name}`}function buildTemplateDefinition(t,i,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,strategy){const def=new we,s=arguments.length;switch(s){case 13:null!=strategy&&(def.strategy=V(strategy));case 12:null!=hasSlots&&(def.hasSlots=hasSlots);case 11:null!=shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!=containerless&&(def.containerless=containerless);case 9:null!=surrogates&&(def.surrogates=toArray(surrogates));case 8:null!=dependencies&&(def.dependencies=toArray(dependencies));case 7:null!=instructions&&(def.instructions=toArray(instructions));case 6:null!=bindables&&(def.bindables={...bindables});case 5:null!=build&&(def.build=1==build?pe:0==build?me:{...build});case 4:null!=cache&&(def.cache=cache);case 3:null!=template&&(def.template=template);case 2:null!=t&&(t.bindables&&(def.bindables=Bindable.for(t).get()),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions),t.prototype&&(def.St=new HooksDefinition(t.prototype))),"string"==typeof i?i.length>0&&(def.name=i):null!=i&&(def.strategy=V(i.strategy),ye.forEach(t=>{i[t]&&(def[t]=i[t])}),Ce.forEach(t=>{i[t]&&(def[t]=toArray(i[t]))}),i.bindables&&(def.bindables===PLATFORM.It?def.bindables=Bindable.for(i).get():Object.assign(def.bindables,i.bindables)))}return 2!==s||null===t||"string"!=typeof i&&"build"in i||(def.build=pe),def}function it(t){const i=this.description,s=this.kind.it(i.name),aliases=i.aliases;t.register(Registration.transient(s,this)),t.register(Registration.transient(this,this));for(let i=0,e=aliases.length;e>i;++i){const e=this.kind.it(aliases[i]);t.register(Registration.Pt(s,e))}}function st(t){return t.Et=1,t}function et(value){return!(void 0===value||1==value.done)}function nt(t){const i=this.kind.it(this.description.name);t.register(Registration.transient(i,this)),t.register(Registration.transient(this,this))}function rt(t){return t.containerless=1,t}function createRenderContext(dom,t,dependencies,i){const s=t.Lt(),e=new InstanceProvider,n=new InstanceProvider,r=new InstanceProvider,o=new Ee,c=new InstanceProvider,l=s.get(IRenderer);return dom.jt(s,n),s.xt(IViewFactory,o),s.xt(IController,e),s.xt(ITargetedInstruction,r),s.xt(IRenderLocation,c),null!=dependencies&&s.register(...dependencies),i&&i.register(s),s.Vt=function(t,i,targets,s,host,parts){l.Vt(t,dom,this,i,targets,s,host,parts)},s.$t=function(t,i,l,u,parts,a){return e.Mt(t),n.Mt(i),r.Mt(l),u&&o.Mt(u,parts),a&&c.Mt(a),s},s.Dt=function(){o.Dt(),e.Dt(),r.Dt(),n.Dt(),c.Dt()},s}function ht(t){const i=[];for(let s=0,e=t.length;e>s;++s){const component=Y(t[s]);null!=component&&i.push(component)}return i}function instructionRenderer(t){return function(i){const s=function(...s){const e=new i(...s);return e.Ft=t,e};s.register=function(t){return Registration.singleton(IInstructionRenderer,s).register(t,IInstructionRenderer)};const e=Object.getOwnPropertyDescriptors(i);return Object.keys(e).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,e[t])}),s}}function ensureExpression(t,i,s){return"string"==typeof i?t.parse(i,s):i}function addBinding(t,i){Tracer.enabled&&Tracer.rt("Renderer","addBinding",Fe.call(arguments)),null==t.Nt?t.Nt=[i]:t.Nt.push(i),Tracer.enabled&&Tracer.lt()}function addComponent(t,component){Tracer.enabled&&Tracer.rt("Renderer","addComponent",Fe.call(arguments)),null==t.Ut?t.Ut=[component]:t.Ut.push(component),Tracer.enabled&&Tracer.lt()}function getTarget(t){return void 0!==t.zt?t.zt:t}function ot(t){const i=BindingCommandResource.it(this.description.name);t.register(Registration.singleton(i,this))}function ct(t,i){return 256&t.flags?t.bindable.Ht:i?camelCase(t.Kt.target):t.Kt.target}function getMode(t){return 256&t.flags?t.bindable.mode:Je[t.Kt.command]}function lt(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}function parseExpression(t,i){return $state.input=t,$state.length=t.length,$state.index=0,$state.qt=t.charCodeAt(0),parse($state,0,61,void 0===i?53:i)}function parse(t,i,s,e){if(Profiler.enabled&&Ye(),0===t.index){if(2048&e)return Profiler.enabled&&tn(),(function(t){const parts=[],i=[],s=t.length;let e="";for(;s>t.index;){switch(t.qt){case 36:if(123===t.input.charCodeAt(t.index+1)){parts.push(e),e="",t.index+=2,t.qt=t.input.charCodeAt(t.index),at(t);const s=parse(t,0,61,2048);i.push(s);continue}e+="$";break;case 92:e+=String.fromCharCode(lt(dt(t)));break;default:e+=String.fromCharCode(t.qt)}dt(t)}return i.length?(parts.push(e),new Interpolation(parts,i)):null})(t);if(at(t),1048576&t.Wt)throw Profiler.enabled&&tn(),Reporter.error(100,{state:t})}t.Qt=448>s;let n=void 0;if(32768&t.Wt){const s=cn[63&t.Wt];at(t),n=new Unary(s,parse(t,i,449,e)),t.Qt=0}else{t:switch(t.Wt){case 3077:t.Qt=0;do{if(at(t),i++,!bt(t,16392)){if(524288&t.Wt){const t=511&i;n=0===t?hn:1===t?on:new AccessThis(t),i=512;break t}throw Profiler.enabled&&tn(),Reporter.error(103,{state:t})}if(16392===t.Wt)throw Profiler.enabled&&tn(),Reporter.error(102,{state:t});if(1572864===t.Wt)throw Profiler.enabled&&tn(),Reporter.error(105,{state:t})}while(3077===t.Wt);case 1024:512&e?n=new BindingIdentifier(t.Gt):(n=new AccessScope(t.Gt,511&i),i=1024),t.Qt=1,at(t);break;case 3076:t.Qt=0,at(t),n=hn,i=512;break;case 671750:at(t),n=parse(t,0,62,e),pt(t,1835018),i=0;break;case 671756:n=(function(t,i,s){at(t);const e=[];for(;1835021!==t.Wt;)if(bt(t,1572875)){if(e.push(rn),1835021===t.Wt)break}else{if(e.push(parse(t,i,62,-513&s)),!bt(t,1572875))break;if(1835021===t.Wt)break}return pt(t,1835021),512&s?new ArrayBindingPattern(e):(t.Qt=0,new ArrayLiteral(e))})(t,i,e),i=0;break;case 131079:n=(function(t,i){const s=[],e=[];for(at(t);1835017!==t.Wt;){if(s.push(t.Gt),12288&t.Wt)at(t),pt(t,1572878),e.push(parse(t,0,62,-513&i));else{if(!(3072&t.Wt))throw Reporter.error(107,{state:t});{const{qt:s,Wt:n,index:r}=t;at(t),bt(t,1572878)?e.push(parse(t,0,62,-513&i)):(t.qt=s,t.Wt=n,t.index=r,e.push(parse(t,0,450,-513&i)))}}1835017!==t.Wt&&pt(t,1572875)}return pt(t,1835017),512&i?new ObjectBindingPattern(s,e):(t.Qt=0,new ObjectLiteral(s,e))})(t,e),i=0;break;case 540713:n=new Template([t.Gt]),t.Qt=0,at(t),i=0;break;case 540714:n=ut(t,i,e,n,0),i=0;break;case 4096:case 8192:n=new PrimitiveLiteral(t.Gt),t.Qt=0,at(t),i=0;break;case 2050:case 2051:case 2049:case 2048:n=cn[63&t.Wt],t.Qt=0,at(t),i=0;break;default:throw t.length>t.index?(Profiler.enabled&&tn(),Reporter.error(101,{state:t})):(Profiler.enabled&&tn(),Reporter.error(104,{state:t}))}if(512&e)return Profiler.enabled&&tn(),(function(t,i){if(0==(65536&i.st))throw Reporter.error(106,{state:t});if(1051179!==t.Wt)throw Reporter.error(106,{state:t});at(t);const s=i,e=parse(t,0,61,0);return new ForOfStatement(s,e)})(t,n);if(s>449)return Profiler.enabled&&tn(),n;let name=t.Gt;for(;(16384&t.Wt)>0;)switch(t.Wt){case 16392:if(t.Qt=1,at(t),0==(3072&t.Wt))throw Profiler.enabled&&tn(),Reporter.error(105,{state:t});if(name=t.Gt,at(t),i=(1536&i)<<1|2048&i|(4096&i)>>1,671750===t.Wt){0===i&&(i=2048);continue}n=1024&i?new AccessScope(name,n.Zt):new AccessMember(n,name);continue;case 671756:t.Qt=1,at(t),i=4096,n=new AccessKeyed(n,parse(t,0,62,e)),pt(t,1835021);break;case 671750:t.Qt=0,at(t);const s=[];for(;1835018!==t.Wt&&(s.push(parse(t,0,62,e)),bt(t,1572875)););pt(t,1835018),n=1024&i?new CallScope(name,s,n.Zt):2048&i?new CallMember(n,name,s):new CallFunction(n,s),i=0;break;case 540713:t.Qt=0;const r=[t.Gt];n=new TaggedTemplate(r,r,n),at(t);break;case 540714:n=ut(t,i,e,n,1)}}if(s>448)return Profiler.enabled&&tn(),n;for(;(65536&t.Wt)>0;){const r=t.Wt;if(s>=(448&r))break;at(t),n=new Binary(cn[63&r],n,parse(t,i,448&r,e)),t.Qt=0}if(s>63)return Profiler.enabled&&tn(),n;if(bt(t,1572879)){const s=parse(t,i,62,e);pt(t,1572878),n=new Conditional(n,s,parse(t,i,62,e)),t.Qt=0}if(s>62)return Profiler.enabled&&tn(),n;if(bt(t,1048615)){if(!t.Qt)throw Profiler.enabled&&tn(),Reporter.error(150,{state:t});n=new Assign(n,parse(t,i,62,e))}if(s>61)return Profiler.enabled&&tn(),n;for(;bt(t,1572883);){if(1572864===t.Wt)throw Profiler.enabled&&tn(),Reporter.error(112);const name=t.Gt;at(t);const s=[];for(;bt(t,1572878);)s.push(parse(t,i,62,e));n=new ValueConverter(n,name,s)}for(;bt(t,1572880);){if(1572864===t.Wt)throw Profiler.enabled&&tn(),Reporter.error(113);const name=t.Gt;at(t);const s=[];for(;bt(t,1572878);)s.push(parse(t,i,62,e));n=new BindingBehavior(n,name,s)}if(1572864!==t.Wt){if(2048&e)return Profiler.enabled&&tn(),n;if("of"===t.Xt)throw Profiler.enabled&&tn(),Reporter.error(151,{state:t});throw Profiler.enabled&&tn(),Reporter.error(101,{state:t})}return Profiler.enabled&&tn(),n}function ut(t,i,s,e,n){const r=[t.Gt];pt(t,540714);const o=[parse(t,i,62,s)];for(;540713!==(t.Wt=gt(t));)r.push(t.Gt),pt(t,540714),o.push(parse(t,i,62,s));return r.push(t.Gt),t.Qt=0,n?(at(t),new TaggedTemplate(r,r,e,o)):(at(t),new Template(r,o))}function at(t){for(;t.length>t.index;)if(t._t=t.index,null!=(t.Wt=vn[t.qt](t)))return;t.Wt=1572864}function dt(t){return t.qt=t.input.charCodeAt(++t.index)}function ft(t,i){let s=t.qt;if(0==i){do{s=dt(t)}while(57>=s&&s>=48);if(46!==s)return t.Gt=parseInt(t.Xt,10),8192;if(s=dt(t),t.index>=t.length)return t.Gt=parseInt(t.Xt.slice(0,-1),10),8192}if(s>57||48>s)t.qt=t.input.charCodeAt(--t.index);else do{s=dt(t)}while(57>=s&&s>=48);return t.Gt=parseFloat(t.Xt),8192}function vt(t){let i=1,s="";for(;96!==dt(t);)if(36===t.qt){if(t.length>t.index+1&&123===t.input.charCodeAt(t.index+1)){t.index++,i=0;break}s+="$"}else if(92===t.qt)s+=String.fromCharCode(lt(dt(t)));else{if(t.index>=t.length)throw Reporter.error(109,{state:t});s+=String.fromCharCode(t.qt)}return dt(t),t.Gt=s,i?540713:540714}function gt(t){if(t.index>=t.length)throw Reporter.error(109,{state:t});return t.index--,vt(t)}function bt(t,i){return t.Wt===i?(at(t),1):0}function pt(t,i){if(t.Wt!==i)throw Reporter.error(110,{state:t,Jt:i});at(t)}function mt(t,i,s,value){const e=s.length;for(let n=0;e>n;n+=2){const e=s[n];let r=s[n+1];if(r=r>0?r:e+1,t&&t.fill(value,e,r),i)for(let t=e;r>t;t++)i.add(t)}}function wt(t){return i=>(dt(i),t)}function yt(dom){const t=dom.createElement("au-m");return dom.Yt(t),t}function Ct(t){t.ti(this)}function Tt(t,i){return t===i}function At(t){return t.ii&&t.ii()[0]||t.si&&t.si()[0]||t.path&&t.path[0]||t.target}function Rt(){this.ei(),this.ni=1}function Bt(t){t.ni=0;let i=At(t);const s=[];for(;i;){if(i.ri){const e=i.ri[t.type];e&&(t.stopPropagation!==Rt&&(t.ei=t.stopPropagation,t.stopPropagation=Rt),s.push(e))}i=i.parentNode}for(let i=s.length-1;i>=0&&!t.ni;i--){const e=s[i];"handleEvent"in e?e.hi(t):e(t)}}function Ot(t){t.ni=0;let i=At(t);for(;i&&!t.ni;){if(i.oi){const s=i.oi[t.type];s&&(t.stopPropagation!==Rt&&(t.ei=t.stopPropagation,t.stopPropagation=Rt),"handleEvent"in s?s.hi(t):s(t))}i=i.parentNode}}function kt(t,i){return t===i}function St(t,i,s){if(1==$n[i])return 1;const e=i.slice(0,5);return $n[i]="aria-"===e||"data-"===e||s.ci(t,i)}function It(t){const i=At(t);if(this.target===i)return this.li(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,i,s){if("string"==typeof t)return(function(dom,t,i,s){Tracer.enabled&&Tracer.rt("createElement","createElementForTag",Mn.call(arguments));const instructions=[],e=[],dependencies=[],n=dom.createElement(t);let r=0;return i&&Object.keys(i).forEach(to=>{const value=i[to];isHTMLTargetedInstruction(value)?(r=1,instructions.push(value)):dom.setAttribute(n,to,value)}),r&&(dom.Yt(n),e.push(instructions)),s&&Pt(dom,n,s,e,dependencies),Tracer.enabled&&Tracer.lt(),new RenderPlan(dom,n,e,dependencies)})(dom,t,i,s);if(CustomElementResource.ui(t))return(function(dom,t,i,s){Tracer.enabled&&Tracer.rt("createElement","createElementForType",Mn.call(arguments));const e=t.description.name,instructions=[],n=[instructions],dependencies=[],r=[],bindables=t.description.bindables,o=dom.createElement(e);return dom.Yt(o),dependencies.includes(t)||dependencies.push(t),instructions.push(new HydrateElementInstruction(e,r)),i&&Object.keys(i).forEach(to=>{const value=i[to];if(isHTMLTargetedInstruction(value))r.push(value);else{r.push(void 0!==bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}}),s&&Pt(dom,o,s,n,dependencies),Tracer.enabled&&Tracer.lt(),new RenderPlan(dom,o,n,dependencies)})(dom,t,i,s);throw Error("Invalid tagOrType.")}function Pt(dom,t,i,s,dependencies){for(let e=0,n=i.length;n>e;++e){const n=i[e];switch(typeof n){case"string":dom.appendChild(t,dom.createTextNode(n));break;case"object":dom.ai(n)?dom.appendChild(t,n):"mergeInto"in n&&n.di(t,s,dependencies)}}}function Et(t){const i=t.index,{length:s,input:e}=t;for(;s>t.index&&58!==e.charCodeAt(++t.index););return e.slice(i,t.index).trim()}function Lt(t){++t.index;const{length:i,input:s}=t;let e="",n=0;for(;i>t.index;){switch(n=s.charCodeAt(t.index)){case 59:return++t.index,e.trim();case 47:n=s.charCodeAt(++t.index),e+=`\\${ur(n)}`;break;case 39:e+="'";break;default:e+=ur(n)}++t.index}return e.trim()}function stringifyDOM(t,i){let s=" ".repeat(i);if(s+=`Node: ${t.nodeName}`,3===t.nodeType&&(s+=` "${t.textContent}"`),1===t.nodeType){let i,e=0;const n=t.attributes,r=n.length;for(;r>e;++e)s+=` ${(i=n[e]).name}=${i.value}`}if(s+="\n",1===t.nodeType){let e=0,childNodes=t.childNodes,n=childNodes.length;for(;n>e;++e)s+=stringifyDOM(childNodes[e],i+1);if("TEMPLATE"===t.nodeName)for(e=0,n=(childNodes=t.content.childNodes).length;n>e;++e)s+=stringifyDOM(childNodes[e],i+1)}return s}function stringifyInstructions(t,i){let s=" ".repeat(i);switch(t.type){case"ha":s+="textBinding\n";break;case"rh":s+="callBinding\n";break;case"rk":s+="iteratorBinding\n";break;case"hb":s+="listenerBinding\n";break;case"rg":s+="propertyBinding\n";break;case"rj":s+="refBinding\n";break;case"hd":s+="stylePropertyBinding\n";break;case"re":s+="setProperty\n";break;case"he":s+="setAttribute\n";break;case"rf":s+="interpolation\n";break;case"rd":s+="hydrateLetElement\n",t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)});break;case"rb":s+=`hydrateAttribute: ${t.res}\n`,t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)});break;case"ra":s+=`hydrateElement: ${t.res}\n`,t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)});break;case"rc":s+=`hydrateTemplateController: ${t.res}\n`,s+=stringifyTemplateDefinition(t.def,i+1),t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)})}return s}function stringifyTemplateDefinition(def,t){const i=" ".repeat(t);let s=i;return s+=`TemplateDefinition: ${def.name}\n`,s+=stringifyDOM(def.template,t+1),s+=`${i} Instructions:\n`,def.instructions.forEach(e=>{s+=`${i}  Row:\n`,e.forEach(i=>{s+=stringifyInstructions(i,t+3)})}),s}var LogLevel,jt,xt,Vt,$t,Mt,BindingMode,BindingStrategy,Dt,Hooks,LifecycleFlags,ExpressionKind,ViewModelKind,Priority,BindingType,Ft,DelegationStrategy,CollectionKind,TargetedInstructionType,ViewCompileFlags,Nt,Access,Precedence,Ut,Char,zt,Ht,SymbolFlags,Kt,HTMLTargetedInstructionType,NodeType,qt,Wt,Qt,Gt,Zt;class AttrSyntax{constructor(t,i,s,e){this.fi=t,this.vi=i,this.target=s,this.command=e}}const Xt=(function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return Function("","return this")()}catch(t){return{}}})(),_t="undefined"!=typeof window&&void 0!==window.document,Jt="object"==typeof self&&null!=self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,Yt="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.gi,ti=(function(){let t,i,s,e,n;if(null!=Xt.performance&&null!=Xt.performance.now){const t=Xt.performance;return function(){return t.now()}}if(null!=Xt.process&&null!=Xt.process.bi){const r=function(){return(t()-e)/1e6};return i=Xt.process.bi,s=(t=function(){let t;return 1e9*(t=i())[0]+t[1]})(),n=1e9*Xt.process.pi(),e=s-n,r}throw Error("Unsupported runtime")})(),{mi:ii,wi:si,yi:ei,Ci:ni,Ti:ri,Ai:hi}=(function(){if(null!=Xt.performance&&null!=Xt.performance.mark&&null!=Xt.performance.measure&&null!=Xt.performance.getEntriesByName&&null!=Xt.performance.getEntriesByType&&null!=Xt.performance.clearMarks&&null!=Xt.performance.clearMeasures){const t=Xt.performance;return{mi(name){t.mark(name)},wi(name,i,s){t.measure(name,i,s)},yi:name=>t.getEntriesByName(name),Ci:type=>t.getEntriesByType(type),Ti(name){t.clearMarks(name)},Ai(name){t.clearMeasures(name)}}}if(null!=Xt.process&&null!=Xt.process.bi){const t=[],i={},s=function(i,value){let s=0;const e=t.length,n=[];for(;e>s;s++)t[s][i]===value&&n.push(t[s]);return n},e=function(type,name){let i,s=t.length;for(;s--;)(i=t[s]).entryType!==type||void 0!==name&&i.name!==name||t.splice(s,1)};return{mi(name){const s={name,entryType:"mark",startTime:ti(),duration:0};t.push(s),i[name]=s},wi(name,s,e){let n,r;if(null!=e){if(null==i[e])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${e}' does not exist.`);r=void 0!==i[e]?i[e].startTime:ti()}else r=ti();if(null!=s){if(null==i[s])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${s}' does not exist.`);n=void 0!==i[s]?i[s].startTime:0}else n=0;t.push({name,entryType:"measure",startTime:n,duration:r-n})},yi:name=>s("name",name),Ci:type=>s("entryType",type),Ti(name){e("mark",name)},Ai(name){e("measure",name)}}}throw Error("Unsupported runtime")})(),{Ri:oi,Bi:ci}=(function(){let t=Xt.requestAnimationFrame,i=Xt.cancelAnimationFrame;if(void 0===t||void 0===i){let s=0,e=0;const n=[],r=1e3/60;t=function(t){let i,o;return 0===n.length&&(i=ti(),s=(o=Math.max(0,r-(i-s)))+i,setTimeout(function(){const t=n.slice(0);n.length=0;for(let i=0;t.length>i;++i)if(!t[i].Oi)try{t[i].ki(s)}catch(t){setTimeout(function(){throw t},0)}},Math.round(o))),n.push({t:++e,ki:t,Oi:0}),e},i=function(t){for(let i=0;n.length>i;++i)n[i].t===t&&(n[i].Oi=1)}}const s=function(i){return t.call(Xt,i)};return s.cancel=function(t){i.call(Xt,t)},Xt.requestAnimationFrame=t,Xt.cancelAnimationFrame=i,{Ri:s,Bi:i}})(),li={}.hasOwnProperty,ui=Object.freeze([]),ai=Object.freeze({}),di=Object.freeze({Si:_t,Ii:Jt,Pi:Yt,global:Xt,Ei:ui,It:ai,Li(){},now:ti,mark:ii,measure:si,getEntriesByName:ei,getEntriesByType:ni,clearMarks:ri,clearMeasures:hi,hasOwnProperty:li,requestAnimationFrame:t=>oi(t),cancelAnimationFrame:t=>ci(t),clearInterval(t){Xt.clearInterval(t)},clearTimeout(t){Xt.clearTimeout(t)},setInterval:(t,i,...s)=>Xt.setInterval(t,i,...s),setTimeout:(t,i,...s)=>Xt.setTimeout(t,i,...s),restore(){Object.assign(PLATFORM,di)}}),PLATFORM={...di};(function(LogLevel){LogLevel[LogLevel.error=0]="error",LogLevel[LogLevel.warn=1]="warn",LogLevel[LogLevel.info=2]="info",LogLevel[LogLevel.debug=3]="debug"})(LogLevel||(LogLevel={}));const Reporter={level:1,write(t,...i){},error:t=>Error(`Code ${t}`)},Tracer={enabled:0,ji:0,xi:null,rt(t,i,s){},lt(){},Vi(t){},$i(t){},Mi(){},Di(){}},fi=[].slice;"getOwnMetadata"in Reflect||(Reflect.getOwnMetadata=function(t,i){return i[t]},Reflect.metadata=function(t,i){return function(s){s[t]=i}});const vi=PLATFORM.hasOwnProperty;class DI{constructor(){}static Fi(...t){return 0===t.length?new mi:(new mi).register(...t)}static Ni(t){const i=Reflect.getOwnMetadata("design:paramtypes",t);return null==i?PLATFORM.Ei:i}static Ui(t){let dependencies;if(null==t.inject)dependencies=DI.Ni(t);else{dependencies=[];let i=t;for(;"function"==typeof i;)vi.call(i,"inject")&&dependencies.push(...i.inject),i=Object.getPrototypeOf(i)}return dependencies}static zi(t){const i=function(t,s,e){if(null==t)throw Reporter.error(16,i.Hi,i);return null==t.inject&&(t.inject=[]),t.inject[e]=i,t};return i.Hi=null==t?"Interface":t,i.Ki=function(){return i},i.qi=function(t){return i.qi=function(){throw Reporter.error(17,i)},i.register=function(s,e){const n=null==e?i:e;return t({Wi:value=>s.xt(n,new gi(n,0,value)),singleton:value=>s.xt(n,new gi(n,1,value)),transient:value=>s.xt(n,new gi(n,2,value)),ki:value=>s.xt(n,new gi(n,3,value)),Qi:t=>s.xt(n,new gi(n,5,t))})},i},i}static inject(...dependencies){return function(t,i,s){if("number"==typeof s){if(!vi.call(t,"inject")){const i=DI.Ni(t);t.inject=i.slice()}1===dependencies.length&&(t.inject[s]=dependencies[0])}else if(i){const s=t.constructor;null==s.inject&&(s.inject=[]),s.inject[i]=dependencies[0]}else if(s)s.value.inject=dependencies;else if(0===dependencies.length){const i=DI.Ni(t);t.inject=i.slice()}else t.inject=dependencies}}static transient(t){return t.register=function(i){return Registration.transient(t,t).register(i,t)},t}static singleton(t){return t.register=function(i){return Registration.singleton(t,t).register(i,t)},t}}const IContainer=DI.zi("IContainer").Ki(),IServiceLocator=IContainer,inject=DI.inject,all=i((t,i,s)=>s.getAll(t)),lazy=i((t,i,s)=>{let e=null;return()=>(null==e&&(e=s.get(t)),e)}),optional=i((t,i,s)=>s.has(t,1)?s.get(t):null);(function(t){t[t.Wi=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.ki=3]="callback",t[t.Gi=4]="array",t[t.Pt=5]="alias"})(jt||(jt={}));class gi{constructor(t,strategy,i){this.key=t,this.strategy=strategy,this.state=i}register(t,i){return t.xt(i||this.key,this)}resolve(t,i){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const i=t.Zi(this.state);return this.state=i.construct(t)}case 2:return t.Zi(this.state).construct(i);case 3:return this.state(t,i,this);case 4:return this.state[0].resolve(t,i);case 5:return t.get(this.state);default:throw Reporter.error(6,this.strategy)}}Zi(t){switch(this.strategy){case 1:case 2:return t.Zi(this.state);default:return null}}}class bi{constructor(t,i,dependencies){this.Xi=t,this._i=i,this.dependencies=dependencies,this.Ji=null}static create(t){const dependencies=DI.Ui(t);return new bi(t,wi.length>dependencies.length?wi[dependencies.length]:yi,dependencies)}construct(t,i){Tracer.enabled&&Tracer.rt("Factory","construct",[this.Xi,...fi.call(arguments)]);const s=this.Ji;let e=void 0!==i?this._i.Yi(t,this.Xi,this.dependencies,i):this._i.ts(t,this.Xi,this.dependencies);if(null==s)return Tracer.enabled&&Tracer.lt(),e;for(let t=0,i=s.length;i>t;++t)e=s[t](e);return Tracer.enabled&&Tracer.lt(),e}ss(t){return null==this.Ji&&(this.Ji=[]),this.Ji.push(t),1}}const pi={resolve:(t,i)=>i};class mi{constructor(t={}){this.parent=null,this.es=0,this.ns=new Map,this.rs=t,null==t.hs&&(t.hs=new Map),this.hs=t.hs,this.os=t.os||(t.os=Object.create(null)),this.ns.set(IContainer,pi)}register(...t){if(Tracer.enabled&&Tracer.rt("Container","register",fi.call(arguments)),100==++this.es)throw Error("Unable to autoregister dependency");let i,s,value,e,r;for(let o=0,c=t.length;c>o;++o)if(n(i=t[o]))i.register(this);else if(void 0!==i.prototype)Registration.singleton(i,i).register(this);else for(e=0,r=(s=Object.keys(i)).length;r>e;++e)n(value=i[s[e]])?value.register(this):this.register(value);return--this.es,Tracer.enabled&&Tracer.lt(),this}xt(t,i){r(t);const s=this.ns,e=s.get(t);return null==e?(s.set(t,i),"string"==typeof t&&(this.os[t]=i)):e instanceof gi&&4===e.strategy?e.state.push(i):s.set(t,new gi(t,4,[e,i])),i}ss(t,i){const s=this.cs(t);if(null==s)return 0;if(s.Zi){const t=s.Zi(this);return null==t?0:t.ss(i)}return 0}cs(t,i=1){if(r(t),void 0!==t.resolve)return t;let s,e=this;for(;null!=e;){if(null!=(s=e.ns.get(t)))return s;if(null==e.parent)return i?this.ls(t,e):null;e=e.parent}return null}has(t,i=0){return this.ns.has(t)?1:i&&null!=this.parent?this.parent.has(t,1):0}get(t){if(Tracer.enabled&&Tracer.rt("Container","get",fi.call(arguments)),r(t),void 0!==t.resolve)return Tracer.enabled&&Tracer.lt(),t.resolve(this,this);let i,s=this;for(;null!=s;){if(null!=(i=s.ns.get(t)))return Tracer.enabled&&Tracer.lt(),i.resolve(s,this);if(null==s.parent)return i=this.ls(t,s),Tracer.enabled&&Tracer.lt(),i.resolve(s,this);s=s.parent}throw Error(`Unable to resolve key: ${t}`)}getAll(t){Tracer.enabled&&Tracer.rt("Container","getAll",fi.call(arguments)),r(t);let i,s=this;for(;null!=s;){if(null!=(i=s.ns.get(t)))return Tracer.enabled&&Tracer.lt(),o(i,s,this);if(null==this.parent)return Tracer.enabled&&Tracer.lt(),PLATFORM.Ei;s=s.parent}return Tracer.enabled&&Tracer.lt(),PLATFORM.Ei}Zi(t){let i=this.hs.get(t);return null==i&&(i=bi.create(t),this.hs.set(t,i)),i}Lt(){Tracer.enabled&&Tracer.rt("Container","createChild",fi.call(arguments));const t=this.rs,i={hs:t.hs,os:Object.assign(Object.create(null),t.os)},s=new mi(i);return s.parent=this,Tracer.enabled&&Tracer.lt(),s}ls(t,i){if(void 0!==t.register){const s=t.register(i,t);if(!(s instanceof Object)||null==s.resolve){const s=i.ns.get(t);if(null!=s)return s;throw Reporter.error(40)}return s}const s=new gi(t,1,t);return i.ns.set(t,s),s}}class Registration{constructor(){}static Wi(t,value){return new gi(t,0,value)}static singleton(t,value){return new gi(t,1,value)}static transient(t,value){return new gi(t,2,value)}static ki(t,i){return new gi(t,3,i)}static Pt(t,i){return new gi(i,5,t)}}class InstanceProvider{constructor(){this.Wi=null}Mt(t){this.Wi=t}resolve(t,i){if(void 0===this.Wi)throw Reporter.error(50);return this.Wi}Dt(){this.Wi=null}}const wi=[{ts:(t,i)=>new i,Yi:c},{ts:(t,i,s)=>new i(t.get(s[0])),Yi:c},{ts:(t,i,s)=>new i(t.get(s[0]),t.get(s[1])),Yi:c},{ts:(t,i,s)=>new i(t.get(s[0]),t.get(s[1]),t.get(s[2])),Yi:c},{ts:(t,i,s)=>new i(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3])),Yi:c},{ts:(t,i,s)=>new i(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3]),t.get(s[4])),Yi:c}],yi={ts:c,Yi:c},Ci=encodeURIComponent,Ti=t=>Ci(t).replace("%24","$"),Profiler=(function(){const t=PLATFORM.now,i=[];let s;const e={us(name){i.push(name);let e=0,n=0;return{rt(){1==++e&&(n=t(),++s[name].as),++s[name].ds},lt(){0==--e&&(s[name].duration+=t()-n)}}},enable(){s={};for(const t of i)s[t]={name:t,duration:0,as:0,ds:0};e.enabled=1},disable(){e.enabled=0},fs(t){Object.keys(s).map(t=>s[t]).sort((t,i)=>i.duration-t.duration).forEach(i=>{t(i.name,i.duration,i.as,i.ds)})},enabled:0};return e})();class RuntimeCompilationResources{constructor(t){this.context=t}find(t,name){const i=t.it(name),s=this.context.os;let e=s[i];if(void 0===e&&(e=s[i]=this.context.cs(i,0)),null!=e&&e.Zi){const t=e.Zi(this.context);if(null!=t){const i=t.Xi.description;return void 0===i?null:i}}return null}create(t,name){const i=t.it(name),s=this.context.os;let e=s[i];if(void 0===e&&(e=s[i]=this.context.cs(i,0)),null!=e){const t=e.resolve(this.context,this.context);return void 0===t?null:t}return null}}class Ai{constructor(t,i){this.vs=t,this.ki=i}t(t){t instanceof this.vs&&this.ki.call(null,t)}}const IEventAggregator=DI.zi("IEventAggregator").qi(t=>t.singleton(EventAggregator));class EventAggregator{constructor(){this.gs={},this.messageHandlers=[]}bs(t,i){let s,e;if(!t)throw Reporter.error(0);if("string"==typeof t){const n=t;if(null!=(s=this.gs[n]))for(e=(s=s.slice()).length;e--;)d(s[e],i,n)}else{const i=t;for(e=(s=this.messageHandlers.slice()).length;e--;)f(s[e],i)}}subscribe(t,i){let s,e;if(!t)throw Reporter.error(0);if("string"==typeof t){const n=t;s=i,void 0===this.gs[n]&&(this.gs[n]=[]),e=this.gs[n]}else s=new Ai(t,i),e=this.messageHandlers;return e.push(s),{Dt(){const t=e.indexOf(s);-1!==t&&e.splice(t,1)}}}ps(t,i){const s=this.subscribe(t,(t,e)=>(s.Dt(),i(t,e)));return s}}const Ri={},Bi={},Oi={},ki={};xt=Object.freeze({all,DI,IContainer,inject,IServiceLocator,lazy,optional,Registration,singleton:t=>null==t?e:e(t),transient:t=>null==t?s:s(t),InstanceProvider,relativeToFile(name,t){const i=t?t.split("/"):t,s=name.trim().split("/");if("."===s[0].charAt(0)&&i){const t=i.slice(0,i.length-1);s.unshift(...t)}return(function(t){const i=t.length;let s,e=0;for(;i>e;++e)if("."===(s=t[e]))t.splice(e,1),e-=1;else if(".."===s){if(0===e||1===e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}})(s),s.join("/")},join(t,i){if(!t)return i;if(!i)return t;const s=t.match(/^([^\/]*?:)\//),e=s&&s.length>0?s[1]:"";let n;n=0===(t=t.slice(e.length)).indexOf("///")&&"file:"===e?"///":0===t.indexOf("//")?"//":0===t.indexOf("/")?"/":"";const r="/"===i.slice(-1)?"/":"",o=t.split("/"),c=i.split("/"),l=[];for(let t=0,i=o.length;i>t;++t)".."===o[t]?l.pop():"."!==o[t]&&""!==o[t]&&l.push(o[t]);for(let t=0,i=c.length;i>t;++t)".."===c[t]?l.pop():"."!==c[t]&&""!==c[t]&&l.push(c[t]);return e+n+l.join("/")+r},buildQueryString(t,i){if(null==t)return"";const s=[],e=Object.keys(t).sort();let n;for(let r=0,o=e.length;o>r;++r)s.push(...l(n=e[r],t[n],i));return 0===s.length?"":s.join("&")},parseQueryString(t){const i={};if(!t||"string"!=typeof t)return i;let s=t;"?"===s.charAt(0)&&(s=s.slice(1));const e=s.replace(/\+/g," ").split("&");for(let t=0;e.length>t;t++){const s=e[t].split("="),n=decodeURIComponent(s[0]);if(!n)continue;let r=n.split("]["),o=r.length-1;if(/\[/.test(r[0])&&/\]$/.test(r[o])?(r[o]=r[o].replace(/\]$/,""),o=(r=r.shift().split("[").concat(r)).length-1):o=0,2>s.length)i[n]=1;else{const value=s[1]?decodeURIComponent(s[1]):"";o?a(i,r,value):i[n]=u(i[n],value)}}return i},PLATFORM,Reporter,Tracer,get LogLevel(){return LogLevel},Profiler,RuntimeCompilationResources,EventAggregator,IEventAggregator,isNumeric,camelCase,kebabCase,toArray,nextId,resetId(t){ki[t]=0},compareNumber});class Si{constructor(t,i,s,e){if(this.ms=t,this.repeat=i,this.ws=s,this.ys=e,e)switch(t.length){case 0:this.has=this.Cs;break;case 1:this.has=this.Ts;break;default:this.has=this.As}else switch(t.length){case 0:this.has=this.Rs;break;case 1:this.has=this.Bs;break;default:this.has=this.Os}}ks(t){return this.ms===t.ms&&this.repeat===t.repeat&&this.ws===t.ws&&this.ys===t.ys}Os(t){return-1!==this.ms.indexOf(t)}Bs(t){return this.ms===t}Rs(t){return 0}As(t){return-1===this.ms.indexOf(t)}Ts(t){return this.ms!==t}Cs(t){return 1}}class Interpretation{get pattern(){const value=this.Ss;return""===value?null:value}set pattern(value){null==value?(this.Ss="",this.parts=PLATFORM.Ei):(this.Ss=value,this.parts=this.Is[value])}constructor(){this.Ss="",this.parts=PLATFORM.Ei,this.Ps={},this.Is={}}append(t,i){const{Ps:s}=this;void 0===s[t]?s[t]=i:s[t]+=i}next(t){const{Ps:i}=this;if(void 0!==i[t]){const{Is:s}=this;void 0===s[t]?s[t]=[i[t]]:s[t].push(i[t]),i[t]=void 0}}}class State{get pattern(){return this.Es?this.Ls[0]:null}constructor(t,...i){this.js=t,this.xs=[],this.types=null,this.Ls=i,this.Es=0}Vs(t){const i=this.xs,s=i.length;let e=null;for(let n=0;s>n;++n)if(t.ks((e=i[n]).js))return e;return null}append(t,i){const{Ls:s}=this;-1===s.indexOf(i)&&s.push(i);let e=this.Vs(t);return null==e&&(e=new State(t,i),this.xs.push(e),t.repeat&&e.xs.push(e)),e}$s(t,i){const s=[],e=this.xs,n=e.length;let r=0,o=null,c=0,l=0;for(;n>c;++c)if((o=e[c]).js.has(t))if(s.push(o),r=o.Ls.length,l=0,o.js.ws)for(;r>l;++l)i.next(o.Ls[l]);else for(;r>l;++l)i.append(o.Ls[l],t);return s}}class Ii{constructor(t){this.text=t;const i=this.Ms=t.length,s=this.Ds=[];for(let e=0;i>e;++e)s.push(new Si(t[e],0,0,0))}Fs(t){const{Ms:i,Ds:s}=this;for(let e=0;i>e;++e)t(s[e])}}class Pi{constructor(t){this.text="PART",this.Ns=new Si(t,1,0,1)}Fs(t){t(this.Ns)}}class Ei{constructor(t){this.text=t,this.Ns=new Si(t,0,1,0)}Fs(t){t(this.Ns)}}class Li{constructor(){this.Us=0,this.zs=0,this.symbols=0}}const ISyntaxInterpreter=DI.zi("ISyntaxInterpreter").qi(t=>t.singleton(ji));class ji{constructor(){this.Hs=new State(null),this.Ks=[this.Hs]}add(t){let i=0;if(Array.isArray(t)){const s=t.length;for(;s>i;++i)this.add(t[i]);return}let s=this.Hs;const def=t,e=def.pattern,n=new Li,r=this.parse(def,n),o=r.length,c=t=>{s=s.append(t,e)};for(i=0;o>i;++i)r[i].Fs(c);s.types=n,s.Es=1}qs(name){const t=new Interpretation;let i=this.Ks;const s=name.length;for(let e=0;s>e&&0!==(i=this.Ws(i,name.charAt(e),t)).length;++e);if(i.sort((t,i)=>{if(!t.Es)return i.Es?1:0;if(!i.Es)return-1;const s=t.types,e=i.types;return s.Us!==e.Us?e.Us-s.Us:s.zs!==e.zs?e.zs-s.zs:s.symbols!==e.symbols?e.symbols-s.symbols:0}),i.length>0){const s=i[0];s.js.ws||t.next(s.pattern),t.pattern=s.pattern}return t}Ws(t,i,s){const e=[];let n=null;const r=t.length;for(let o=0;r>o;++o)e.push(...(n=t[o]).$s(i,s));return e}parse(def,t){const i=[],s=def.pattern,e=s.length;let n=0,r=0,o="";for(;e>n;)o=s.charAt(n),-1===def.symbols.indexOf(o)?n===r&&"P"===o&&"PART"===s.slice(n,n+4)?(r=n+=4,i.push(new Pi(def.symbols)),++t.zs):++n:n!==r?(i.push(new Ii(s.slice(r,n))),++t.Us,r=n):(i.push(new Ei(s.slice(r,n+1))),++t.symbols,r=++n);return r!==n&&(i.push(new Ii(s.slice(r,n))),++t.Us),i}}const IAttributePattern=DI.zi("IAttributePattern").Ki();class DotSeparatedAttributePattern{Qs(t,i,parts){return new AttrSyntax(t,i,parts[0],parts[1])}Gs(t,i,parts){return new AttrSyntax(t,i,parts[0],parts[2])}}attributePattern({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})(DotSeparatedAttributePattern);class RefAttributePattern{Zs(t,i,parts){return new AttrSyntax(t,i,"ref",null)}Xs(t,i,parts){return new AttrSyntax(t,i,"ref",parts[1])}}attributePattern({pattern:"ref",symbols:""},{pattern:"ref.PART",symbols:"."})(RefAttributePattern);class ColonPrefixedBindAttributePattern{_s(t,i,parts){return new AttrSyntax(t,i,parts[0],"bind")}}attributePattern({pattern:":PART",symbols:":"})(ColonPrefixedBindAttributePattern);class AtPrefixedTriggerAttributePattern{Js(t,i,parts){return new AttrSyntax(t,i,parts[0],"trigger")}}attributePattern({pattern:"@PART",symbols:"@"})(AtPrefixedTriggerAttributePattern);const IAttributeParser=DI.zi("IAttributeParser").qi(t=>t.singleton($i)),{rt:xi,lt:Vi}=Profiler.us("AttributeParser");class $i{constructor(t,i){this.Ys=t,this.cache={};const s=this.Ls={};i.forEach(i=>{const e=i.i;t.add(e),e.forEach(def=>{s[def.pattern]=i})})}parse(name,value){Profiler.enabled&&xi();let t=this.cache[name];null==t&&(t=this.cache[name]=this.Ys.qs(name));const i=t.pattern;return null==i?(Profiler.enabled&&Vi(),new AttrSyntax(name,value,name,null)):(Profiler.enabled&&Vi(),this.Ls[i][i](name,value,t.parts))}}$i.inject=[ISyntaxInterpreter,all(IAttributePattern)];const Mi=[].slice,Di=new WeakMap;let Fi=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("ProxySubscriberCollection","constructor",Mi.call(arguments)),this.te=0,this.raw=i,this.key=s,this.ie=t,this.subscribe=this.o,this.unsubscribe=this.l,i[s]instanceof Object&&(i[s]=ProxyObserver.se(i[s]).ie),Tracer.enabled&&Tracer.lt()}ee(value,t){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.g(value,i,18|t))}ne(){return this.raw[this.key]}re(t){}};Fi=v([subscriberCollection()],Fi);let ProxyObserver=Vt=class{constructor(t){Tracer.enabled&&Tracer.rt("ProxyObserver","constructor",Mi.call(arguments)),this.raw=t,this.ie=new Proxy(t,this),Di.set(t,this.ie),this.he={},Tracer.enabled&&Tracer.lt()}static oe(t){if(void 0===t.ce){const i=Di.get(t);return void 0===i?t:i}return t}static pt(t){const i=t.ce;return void 0===i?t:i}static se(t,i){let s;if(void 0===t.ce){const i=Di.get(t);s=void 0===i?new Vt(t):i.ft}else s=t.ft;if(void 0===i)return s;let e=s.he[i];if(void 0===e){const n=this.pt(t);e=s.he[i]=new Fi(s.ie,n,i)}return e}static le(t){return void 0!==t.ce}get(t,i,s){return"$observer"===i?this:"$raw"===i?t:t[i]}set(t,i,value,s){const e=t[i];return e!==value&&(t[i]=value,this.ue(value,e,i),this.R(i,value,e,18)),1}deleteProperty(t,i){const s=t[i];return Reflect.deleteProperty(t,i)?(void 0!==s&&(this.ue(void 0,s,i),this.R(i,void 0,s,18)),1):0}defineProperty(t,i,s){const e=t[i];return Reflect.defineProperty(t,i,s)?(s.value!==e&&(this.ue(s.value,e,i),this.R(i,s.value,e,18)),1):0}apply(t,i,s=PLATFORM.Ei){return Reflect.apply(t,t,s)}subscribe(t,i){if(void 0===i)this.m(t);else{let s=this.he[i];void 0===s&&(s=this.he[i]=new Fi(this.ie,this.raw,i)),s.o(t)}}unsubscribe(t,i){if(void 0===i)this.C(t);else{const s=this.he[i];void 0!==s&&s.l(t)}}ue(t,i,s){const e=this.he[s];void 0!==e&&e.g(t,i,18)}};ProxyObserver=Vt=v([proxySubscriberCollection()],ProxyObserver);let SetterObserver=class{constructor(t,i,s,e){this.ae=t,this.de=s,this.fe=e,this.ve=void 0,this.oldValue=void 0,this.te=0,this.dt=0,this.ge=536870927&i,Tracer.enabled&&Tracer.lt()}ne(){return this.ve}ee(t,i){if(this.dt){const s=this.ve;this.ve=t,0===this.ae.pe.be?0==(4096&i)&&this.g(t,s,this.ge|i):this.te||(this.te=1,this.oldValue=s,this.ae.pe.add(this))}else this.de[this.fe]=t}re(t){this.te=0;const i=this.ve,s=this.oldValue;this.oldValue=i,this.g(i,s,this.ge|t)}subscribe(t){0==this.dt&&(this.dt=1,this.ve=this.de[this.fe],Reflect.defineProperty(this.de,this.fe,{me:1,vt:1,get:()=>this.ne(),set:value=>{this.ee(value,0)}})||Reporter.write(1,this.fe,this.de)),this.o(t)}};SetterObserver=v([subscriberCollection()],SetterObserver);const Ni=[].slice;(function(t){t[t.we=250]="NilScope",t[t.ye=252]="NilOverrideContext",t[t.Ce=253]="NilParentScope"})($t||($t={}));class Ui{se(t,i,s,e){return Tracer.enabled&&Tracer.rt("InternalObserversLookup","getOrCreate",Ni.call(arguments)),void 0===this[e]&&(this[e]=new SetterObserver(t,i,s,e)),Tracer.enabled&&Tracer.lt(),this[e]}}class BindingContext{constructor(t,value){if(this.Te=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}static create(t,i,value){const s=new BindingContext(i,value);return 2&t?ProxyObserver.se(s).ie:s}static get(t,name,i,s){if(Tracer.enabled&&Tracer.rt("BindingContext","get",Ni.call(arguments)),null==t)throw Reporter.error(250);let e=t.Ae;if(i>0){for(;i>0;){if(null==e.Re)return void(Tracer.enabled&&Tracer.lt());i--,e=e.Re}return Tracer.enabled&&Tracer.lt(),name in e?e:e.zt}for(;e&&!(name in e)&&!(e.zt&&name in e.zt);)e=e.Re;if(e)return Tracer.enabled&&Tracer.lt(),name in e?e:e.zt;if((536870912&s)>0){const e=this.get(t.Be[BindingContext.Oe],name,i,-536870913&s|16777216);if(null!==e)return Tracer.enabled&&Tracer.lt(),e}return 16777216&s?(Tracer.enabled&&Tracer.lt(),null):(Tracer.enabled&&Tracer.lt(),t.zt||t.Ae)}ke(t){return Tracer.enabled&&Tracer.rt("BindingContext","getObservers",Ni.call(arguments)),null==this.Se&&(this.Se=new Ui),Tracer.enabled&&Tracer.lt(),this.Se}}BindingContext.Oe=null;class Scope{constructor(t,i){this.zt=t,this.Ae=i,this.Be=void 0}static create(t,i,s){return Tracer.enabled&&Tracer.rt("Scope","create",Ni.call(arguments)),Tracer.enabled&&Tracer.lt(),new Scope(i,null==s?OverrideContext.create(t,i,s):s)}static Ie(t,i){if(Tracer.enabled&&Tracer.rt("Scope","fromOverride",Ni.call(arguments)),null==i)throw Reporter.error(252);return Tracer.enabled&&Tracer.lt(),new Scope(i.zt,i)}static Pe(t,i,s){if(Tracer.enabled&&Tracer.rt("Scope","fromParent",Ni.call(arguments)),null==i)throw Reporter.error(253);return Tracer.enabled&&Tracer.lt(),new Scope(s,OverrideContext.create(t,s,i.Ae))}}class OverrideContext{constructor(t,i){this.Te=1,this.zt=t,this.Re=i}static create(t,i,s){return Tracer.enabled&&Tracer.rt("OverrideContext","create",Ni.call(arguments)),Tracer.enabled&&Tracer.lt(),new OverrideContext(i,void 0===s?null:s)}ke(){return Tracer.enabled&&Tracer.rt("OverrideContext","getObservers",Ni.call(arguments)),void 0===this.Se&&(this.Se=new Ui),Tracer.enabled&&Tracer.lt(),this.Se}}const ISignaler=DI.zi("ISignaler").qi(t=>t.singleton(zi));class zi{constructor(){this.Ee=Object.create(null)}Le(name,t){const i=this.Ee[name];if(void 0!==i)for(const s of i.keys())s.J(void 0,void 0,16|t)}je(name,t){const i=this.Ee,s=i[name];void 0===s?i[name]=new Set([t]):s.add(t)}xe(name,t){const i=this.Ee[name];i&&i.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",it(name){return`${this.name}:${name}`},ui(t){return t.kind===this},Ve(t,i){const s=i,e=s,n="string"==typeof t?{name:t}:t;return e.kind=BindingBehaviorResource,e.description=n,s.register=E,s}},ValueConverterResource={name:"value-converter",it(name){return`${this.name}:${name}`},ui(t){return t.kind===this},Ve(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=ValueConverterResource,s.description=e,s.register=L,s}};(function(t){t[t.$e=202]="NoLocator",t[t.Me=203]="NoBehaviorFound",t[t.De=204]="BehaviorAlreadyApplied",t[t.Fe=205]="NoConverterFound",t[t.Ne=206]="NoBinding",t[t.Ue=207]="NotAFunction",t[t.ze=208]="UnknownOperator",t[t.we=250]="NilScope"})(Mt||(Mt={}));class BindingBehavior{constructor(t,name,i){this.st=38962,this.He=t,this.name=name,this.Ke=i,this.qe=BindingBehaviorResource.it(this.name)}evaluate(t,i,s){return this.He.evaluate(t,i,s)}assign(t,i,s,value){return this.He.assign(t,i,s,value)}connect(t,i,s){this.He.connect(t,i,s)}bind(t,i,s){if(null==i)throw Reporter.error(250,this);if(!s)throw Reporter.error(206,this);const e=s.We;if(!e)throw Reporter.error(202,this);hasBind(this.He)&&this.He.bind(t,i,s);const n=this.qe,r=e.get(n);if(!r)throw Reporter.error(203,this);void 0===s[n]?(s[n]=r,r.bind.call(r,t,i,s,...j(t,i,e,this.Ke))):Reporter.write(204,this)}Qe(t,i,s){const e=this.qe;void 0!==s[e]?(s[e].Qe(t,i,s),s[e]=void 0):Reporter.write(204,this),hasUnbind(this.He)&&this.He.Qe(t,i,s)}accept(t){return t.Ge(this)}}class ValueConverter{constructor(t,name,i){this.st=36913,this.He=t,this.name=name,this.Ke=i,this.Ze=ValueConverterResource.it(this.name)}evaluate(t,i,s){if(!s)throw Reporter.error(202,this);const e=s.get(this.Ze);if(!e)throw Reporter.error(205,this);if("toView"in e){const n=this.Ke,r=n.length,o=Array(r+1);o[0]=this.He.evaluate(t,i,s);for(let e=0;r>e;++e)o[e+1]=n[e].evaluate(t,i,s);return e.Xe.call(e,...o)}return this.He.evaluate(t,i,s)}assign(t,i,s,value){if(!s)throw Reporter.error(202,this);const e=s.get(this.Ze);if(!e)throw Reporter.error(205,this);return"fromView"in e&&(value=e._e.call(e,value,...j(t,i,s,this.Ke))),this.He.assign(t,i,s,value)}connect(t,i,s){if(null==i)throw Reporter.error(250,this);if(!s)throw Reporter.error(206,this);const e=s.We;if(!e)throw Reporter.error(202,this);this.He.connect(t,i,s);const n=this.Ke;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,i,s);const r=e.get(this.Ze);if(!r)throw Reporter.error(205,this);const o=r.Ee;if(void 0===o)return;const c=e.get(ISignaler);for(let t=0,i=o.length;i>t;++t)c.je(o[t],s)}Qe(t,i,s){const e=s.We,n=e.get(this.Ze).Ee;if(void 0===n)return;const r=e.get(ISignaler);for(let t=0,i=n.length;i>t;++t)r.xe(n[t],s)}accept(t){return t.Je(this)}}class Assign{constructor(t,value){this.st=8208,this.target=t,this.value=value}evaluate(t,i,s){return this.target.assign(t,i,s,this.value.evaluate(t,i,s))}connect(t,i,s){}assign(t,i,s,value){return this.value.assign(t,i,s,value),this.target.assign(t,i,s,value)}accept(t){return t.Ye(this)}}class Conditional{constructor(t,i,s){this.st=63,this.assign=PLATFORM.Li,this.tn=t,this.in=i,this.sn=s}evaluate(t,i,s){return this.tn.evaluate(t,i,s)?this.in.evaluate(t,i,s):this.sn.evaluate(t,i,s)}connect(t,i,s){this.tn.evaluate(t,i,null)?(this.tn.connect(t,i,s),this.in.connect(t,i,s)):(this.tn.connect(t,i,s),this.sn.connect(t,i,s))}accept(t){return t.en(this)}}class AccessThis{constructor(t=0){this.st=1793,this.assign=PLATFORM.Li,this.connect=PLATFORM.Li,this.Zt=t}evaluate(t,i,s){if(null==i)throw Reporter.error(250,this);let e=i.Ae,n=this.Zt;for(;n--&&e;)e=e.Re;return 1>n&&e?e.zt:void 0}accept(t){return t.nn(this)}}AccessThis.rn=new AccessThis(0),AccessThis.hn=new AccessThis(1);class AccessScope{constructor(name,t=0){this.st=10082,this.name=name,this.Zt=t}evaluate(t,i,s){return BindingContext.get(i,this.name,this.Zt,t)[this.name]}assign(t,i,s,value){const e=BindingContext.get(i,this.name,this.Zt,t);if(e instanceof Object)return void 0!==e.Se&&void 0!==e.Se[this.name]?(e.Se[this.name].ee(value,t),value):e[this.name]=value}connect(t,i,s){const e=BindingContext.get(i,this.name,this.Zt,t);s.ut(t,e,this.name)}accept(t){return t.on(this)}}class AccessMember{constructor(t,name){this.st=9323,this.object=t,this.name=name}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);return null==e?e:e[this.name]}assign(t,i,s,value){const e=this.object.evaluate(t,i,s);return e instanceof Object?void 0!==e.Se&&void 0!==e.Se[this.name]?e.Se[this.name].ee(value,t):e[this.name]=value:this.object.assign(t,i,s,{[this.name]:value}),value}connect(t,i,s){const e=this.object.evaluate(t,i,null);this.object.connect(t,i,s),e instanceof Object&&s.ut(t,e,this.name)}accept(t){return t.cn(this)}}class AccessKeyed{constructor(t,i){this.st=9324,this.object=t,this.key=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);if(e instanceof Object)return e[this.key.evaluate(t,i,s)]}assign(t,i,s,value){return this.object.evaluate(t,i,s)[this.key.evaluate(t,i,s)]=value}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),e instanceof Object){this.key.connect(t,i,s);const n=this.key.evaluate(t,i,null);Array.isArray(e)&&isNumeric(n)?2&t&&s.ut(t,e,n):s.ut(t,e,n)}}accept(t){return t.ln(this)}}class CallScope{constructor(name,t,i=0){this.st=1448,this.assign=PLATFORM.Li,this.name=name,this.Ke=t,this.Zt=i}evaluate(t,i,s){const e=j(t,i,s,this.Ke),n=BindingContext.get(i,this.name,this.Zt,t),r=x(t,n,this.name);if(r)return r.apply(n,e)}connect(t,i,s){const e=this.Ke;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.un(this)}}class CallMember{constructor(t,name,i){this.st=1161,this.assign=PLATFORM.Li,this.object=t,this.name=name,this.Ke=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s),n=j(t,i,s,this.Ke),r=x(t,e,this.name);if(r)return r.apply(e,n)}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),x(-2097153&t,e,this.name)){const e=this.Ke;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.an(this)}}class CallFunction{constructor(t,i){this.st=1162,this.assign=PLATFORM.Li,this.dn=t,this.Ke=i}evaluate(t,i,s){const e=this.dn.evaluate(t,i,s);if("function"==typeof e)return e.apply(null,j(t,i,s,this.Ke));if(2097152&t||null!=e)throw Reporter.error(207,this)}connect(t,i,s){const e=this.dn.evaluate(t,i,null);if(this.dn.connect(t,i,s),"function"==typeof e){const e=this.Ke;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.fn(this)}}class Binary{constructor(t,i,s){this.st=46,this.assign=PLATFORM.Li,this.vn=t,this.left=i,this.right=s,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){const e=this.left.evaluate(t,i,null);this.left.connect(t,i,s),"&&"===this.vn&&!e||"||"===this.vn&&e||this.right.connect(t,i,s)}gn(t,i,s){return this.left.evaluate(t,i,s)&&this.right.evaluate(t,i,s)}bn(t,i,s){return this.left.evaluate(t,i,s)||this.right.evaluate(t,i,s)}pn(t,i,s){return this.left.evaluate(t,i,s)==this.right.evaluate(t,i,s)}mn(t,i,s){return this.left.evaluate(t,i,s)===this.right.evaluate(t,i,s)}wn(t,i,s){return this.left.evaluate(t,i,s)!=this.right.evaluate(t,i,s)}yn(t,i,s){return this.left.evaluate(t,i,s)!==this.right.evaluate(t,i,s)}Cn(t,i,s){const e=this.right.evaluate(t,i,s);return"function"==typeof e?this.left.evaluate(t,i,s)instanceof e:0}Tn(t,i,s){const e=this.right.evaluate(t,i,s);return e instanceof Object?this.left.evaluate(t,i,s)in e:0}An(t,i,s){return this.left.evaluate(t,i,s)+this.right.evaluate(t,i,s)}Rn(t,i,s){return this.left.evaluate(t,i,s)-this.right.evaluate(t,i,s)}Bn(t,i,s){return this.left.evaluate(t,i,s)*this.right.evaluate(t,i,s)}On(t,i,s){return this.left.evaluate(t,i,s)/this.right.evaluate(t,i,s)}kn(t,i,s){return this.left.evaluate(t,i,s)%this.right.evaluate(t,i,s)}Sn(t,i,s){return this.left.evaluate(t,i,s)<this.right.evaluate(t,i,s)}In(t,i,s){return this.left.evaluate(t,i,s)>this.right.evaluate(t,i,s)}Pn(t,i,s){return this.left.evaluate(t,i,s)<=this.right.evaluate(t,i,s)}En(t,i,s){return this.left.evaluate(t,i,s)>=this.right.evaluate(t,i,s)}accept(t){return t.Ln(this)}}class Unary{constructor(t,i){this.st=39,this.assign=PLATFORM.Li,this.vn=t,this.He=i,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){this.He.connect(t,i,s)}jn(t,i,s){this.He.evaluate(t,i,s)}xn(t,i,s){return typeof this.He.evaluate(t,i,s)}Vn(t,i,s){return!this.He.evaluate(t,i,s)}Rn(t,i,s){return-this.He.evaluate(t,i,s)}An(t,i,s){return+this.He.evaluate(t,i,s)}accept(t){return t.$n(this)}}class PrimitiveLiteral{constructor(value){this.st=17925,this.assign=PLATFORM.Li,this.connect=PLATFORM.Li,this.value=value}evaluate(t,i,s){return this.value}accept(t){return t.Mn(this)}}PrimitiveLiteral.Dn=new PrimitiveLiteral(void 0),PrimitiveLiteral.Fn=new PrimitiveLiteral(null),PrimitiveLiteral.Nn=new PrimitiveLiteral(1),PrimitiveLiteral.Un=new PrimitiveLiteral(0),PrimitiveLiteral.zn=new PrimitiveLiteral("");class ArrayLiteral{constructor(t){this.st=17955,this.assign=PLATFORM.Li,this.elements=t}evaluate(t,i,s){const e=this.elements,n=e.length,r=Array(n);for(let o=0;n>o;++o)r[o]=e[o].evaluate(t,i,s);return r}connect(t,i,s){const e=this.elements;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.Hn(this)}}ArrayLiteral.zn=new ArrayLiteral(PLATFORM.Ei);class ObjectLiteral{constructor(t,i){this.st=17956,this.assign=PLATFORM.Li,this.keys=t,this.values=i}evaluate(t,i,s){const e={},n=this.keys,r=this.values;for(let o=0,c=n.length;c>o;++o)e[n[o]]=r[o].evaluate(t,i,s);return e}connect(t,i,s){const e=this.values;for(let n=0,r=this.keys.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.Kn(this)}}ObjectLiteral.zn=new ObjectLiteral(PLATFORM.Ei,PLATFORM.Ei);class Template{constructor(t,i){this.st=17958,this.assign=PLATFORM.Li,this.qn=t,this.et=void 0===i?PLATFORM.Ei:i}evaluate(t,i,s){const e=this.et,n=this.qn;let r=n[0];for(let o=0,c=e.length;c>o;++o)r+=e[o].evaluate(t,i,s),r+=n[o+1];return r}connect(t,i,s){const e=this.et;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s),n++}accept(t){return t.Wn(this)}}Template.zn=new Template([""]);class TaggedTemplate{constructor(t,i,s,e){this.st=1197,this.assign=PLATFORM.Li,this.qn=t,this.qn.raw=i,this.dn=s,this.et=void 0===e?PLATFORM.Ei:e}evaluate(t,i,s){const e=this.et,n=e.length,r=Array(n);for(let o=0,c=n;c>o;++o)r[o]=e[o].evaluate(t,i,s);const o=this.dn.evaluate(t,i,s);if("function"!=typeof o)throw Reporter.error(207,this);return o.apply(null,[this.qn].concat(r))}connect(t,i,s){const e=this.et;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s);this.dn.connect(t,i,s)}accept(t){return t.Qn(this)}}class ArrayBindingPattern{constructor(t){this.st=65556,this.elements=t}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.Gn(this)}}class ObjectBindingPattern{constructor(t,i){this.st=65557,this.keys=t,this.values=i}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.Zn(this)}}class BindingIdentifier{constructor(name){this.st=65558,this.name=name}evaluate(t,i,s){return this.name}connect(t,i,s){}accept(t){return t.Xn(this)}}const Hi={}.toString;class ForOfStatement{constructor(t,i){this.st=6199,this.assign=PLATFORM.Li,this._n=t,this.Jn=i}evaluate(t,i,s){return this.Jn.evaluate(t,i,s)}count(t,i){return qi[Hi.call(i)](i)}Yn(t,i,s){Ki[Hi.call(i)](33554432|t,i,s)}connect(t,i,s){this._n.connect(t,i,s),this.Jn.connect(t,i,s)}bind(t,i,s){hasBind(this.Jn)&&this.Jn.bind(t,i,s)}Qe(t,i,s){hasUnbind(this.Jn)&&this.Jn.Qe(t,i,s)}accept(t){return t.tr(this)}}class Interpolation{constructor(parts,t){this.st=24,this.assign=PLATFORM.Li,this.parts=parts,this.et=void 0===t?PLATFORM.Ei:t,this.ir=this.et.length>1,this.sr=this.et[0]}evaluate(t,i,s){if(this.ir){const e=this.et,parts=this.parts;let n=parts[0];for(let r=0,o=e.length;o>r;++r)n+=e[r].evaluate(t,i,s),n+=parts[r+1];return n}{const parts=this.parts;return parts[0]+this.sr.evaluate(t,i,s)+parts[1]}}connect(t,i,s){}accept(t){return t.er(this)}}const Ki={nr(t,i,s){if(33554434==(33554434&t)){const t=ProxyObserver.pt(i),e=t.length;let n,r=0;for(;e>r;++r)(n=t[r])instanceof Object&&(n=t[r]=ProxyObserver.se(n).ie),s(t,r,n)}else for(let t=0,e=i.length;e>t;++t)s(i,t,i[t])},rr(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.entries())e[++n]=t;Ki["nr"](-33554433&t,e,s)},hr(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.keys())e[++n]=t;Ki["nr"](-33554433&t,e,s)},or(t,i,s){const e=Array(i);for(let t=0;i>t;++t)e[t]=t;Ki["nr"](-33554433&t,e,s)},cr(t,i,s){},lr(t,i,s){}},qi={nr:t=>t.length,rr:t=>t.size,hr:t=>t.size,or:t=>t,cr:()=>0,lr:()=>0};(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Xe=2]="toView",BindingMode[BindingMode._e=4]="fromView",BindingMode[BindingMode.ur=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode={})),(function(BindingStrategy){BindingStrategy[BindingStrategy.ar=1]="getterSetter",BindingStrategy[BindingStrategy.dr=2]="proxies"})(BindingStrategy||(BindingStrategy={}));const Wi=3;(function(State){State[State.vr=0]="none",State[State.gr=1]="isBinding",State[State.br=2]="isUnbinding",State[State.pr=4]="isBound",State[State.mr=5]="isBoundOrBinding",State[State.wr=6]="isBoundOrUnbinding",State[State.yr=8]="isAttaching",State[State.Cr=16]="isDetaching",State[State.Tr=32]="isAttached",State[State.Ar=40]="isAttachedOrAttaching",State[State.Rr=48]="isAttachedOrDetaching",State[State.Br=64]="isMounted",State[State.Or=128]="isCached",State[State.kr=256]="needsBind",State[State.Sr=512]="needsUnbind",State[State.Ir=1024]="needsAttach",State[State.Pr=2048]="needsDetach",State[State.Er=4096]="needsMount",State[State.Lr=8192]="needsUnmount",State[State.jr=16384]="hasLockedScope",State[State.xr=32768]="canBeCached",State[State.Vr=65536]="inBoundQueue",State[State.$r=131072]="inUnboundQueue",State[State.Mr=262144]="inAttachedQueue",State[State.Dr=524288]="inDetachedQueue",State[State.Fr=1048576]="inMountQueue",State[State.Nr=2097152]="inUnmountQueue"})(Dt||(Dt={})),(function(Hooks){Hooks[Hooks.vr=1]="none",Hooks[Hooks.Ur=2]="hasCreated",Hooks[Hooks.zr=4]="hasBinding",Hooks[Hooks.Hr=8]="hasBound",Hooks[Hooks.Kr=16]="hasAttaching",Hooks[Hooks.qr=32]="hasAttached",Hooks[Hooks.Wr=64]="hasDetaching",Hooks[Hooks.Qr=128]="hasDetached",Hooks[Hooks.Gr=256]="hasUnbinding",Hooks[Hooks.Zr=512]="hasUnbound",Hooks[Hooks.Xr=1024]="hasRender",Hooks[Hooks._r=2048]="hasCaching"})(Hooks||(Hooks={})),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.vr=0]="none",LifecycleFlags[LifecycleFlags.Jr=536870927]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Yr=536870912]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.th=15]="bindingStrategy",LifecycleFlags[LifecycleFlags.ih=1]="getterSetterStrategy",LifecycleFlags[LifecycleFlags.sh=2]="proxyStrategy",LifecycleFlags[LifecycleFlags.update=48]="update",LifecycleFlags[LifecycleFlags.eh=16]="updateTargetInstance",LifecycleFlags[LifecycleFlags.nh=32]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524224]="from",LifecycleFlags[LifecycleFlags.rh=960]="fromFlush",LifecycleFlags[LifecycleFlags.hh=64]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.oh=128]="fromSyncFlush",LifecycleFlags[LifecycleFlags.lh=256]="fromTick",LifecycleFlags[LifecycleFlags.uh=512]="fromBatch",LifecycleFlags[LifecycleFlags.ah=1024]="fromStartTask",LifecycleFlags[LifecycleFlags.dh=2048]="fromStopTask",LifecycleFlags[LifecycleFlags.fh=4096]="fromBind",LifecycleFlags[LifecycleFlags.vh=8192]="fromUnbind",LifecycleFlags[LifecycleFlags.gh=16384]="fromAttach",LifecycleFlags[LifecycleFlags.bh=32768]="fromDetach",LifecycleFlags[LifecycleFlags.ph=65536]="fromCache",LifecycleFlags[LifecycleFlags.mh=131072]="fromDOMEvent",LifecycleFlags[LifecycleFlags.wh=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.yh=524288]="allowPublishRoundtrip",LifecycleFlags[LifecycleFlags.Ch=1048576]="isPublishing",LifecycleFlags[LifecycleFlags.Th=2097152]="mustEvaluate",LifecycleFlags[LifecycleFlags.Ah=4194304]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.Rh=8388608]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Bh=16777216]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Oh=33554432]="isOriginalArray",LifecycleFlags[LifecycleFlags.kh=67108864]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Sh=134217728]="updateOneTimeBindings",LifecycleFlags[LifecycleFlags.Ih=268435456]="reorderNodes"})(LifecycleFlags||(LifecycleFlags={})),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Ph=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Xi=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind={})),(function(ViewModelKind){ViewModelKind[ViewModelKind.customElement=0]="customElement",ViewModelKind[ViewModelKind.customAttribute=1]="customAttribute",ViewModelKind[ViewModelKind.Eh=2]="synthetic"})(ViewModelKind||(ViewModelKind={}));const IController=DI.zi("IController").Ki(),IViewFactory=DI.zi("IViewFactory").Ki();class Qi{get Lh(){let t=this;for(;void 0!==t.jh&&t.jh.xh===this.xh;)t=t.jh;return t}get Bt(){let t=this;for(;void 0!==t.next&&t.next.xh===this.xh;)t=t.next;return t}constructor(t,i,s=16384,e=0){this.Vh=t,this.context=i,this.xh=s,this.$h=e,this.next=void 0,this.jh=void 0,this.Mh=0}ks(t,i){return this.Vh===t&&this.context===i}call(t){if(void 0!==this.Vh&&(void 0!==this.context?this.Vh.call(this.context,t):this.Vh(t)),this.$h)return this.Dh(1);if(this.Mh){const t=this.next;return this.next=void 0,t}return this.next}rotate(){if(void 0===this.jh||this.jh.xh>this.xh)return;const{Lh:t,Bt:i}=this,s=t.jh,e=i.next,n=this.jh;this.jh=s,void 0!==s&&(s.next=this),i.next=t,t.jh=i,n.next=e,void 0!==e&&(e.jh=n)}link(t){this.jh=t,void 0!==t.next&&(t.next.jh=this),this.next=t.next,t.next=this}Dh(t=0){if(this.Mh=1,this.Vh=void 0,this.context=void 0,void 0!==this.jh&&(this.jh.next=this.next),void 0!==this.next&&(this.next.jh=this.jh),this.jh=void 0,t){const{next:t}=this;return this.next=void 0,t}return this.next}}(function(Priority){Priority[Priority.Fh=32768]="preempt",Priority[Priority.high=28672]="high",Priority[Priority.bind=24576]="bind",Priority[Priority.Nh=20480]="attach",Priority[Priority.Uh=16384]="normal",Priority[Priority.zh=12288]="propagate",Priority[Priority.connect=8192]="connect",Priority[Priority.low=4096]="low"})(Priority||(Priority={}));const ILifecycle=DI.zi("ILifecycle").qi(t=>t.singleton(es)),{min:Gi,max:Zi}=Math;class Xi{constructor(t){this.ae=t,this.be=0,this.head=void 0,this.Hh=void 0}Kh(){++this.be}end(t){void 0===t&&(t=0),0==--this.be&&this.process(t)}qh(t,i){this.Kh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Wh=this.Hh,this.Hh.Qh=t),this.Hh=t,t.state|=65536}remove(t){void 0!==t.Wh&&(t.Wh.Qh=t.Qh),void 0!==t.Qh&&(t.Qh.Wh=t.Wh),t.Wh=void 0,t.Qh=void 0,this.Hh===t&&(this.Hh=t.Wh),this.head===t&&(this.head=t.Qh),t.state=65536^(65536|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Hh=void 0;do{s.state=65536^(65536|s.state),s.bound(t),i=s.Qh,s.Qh=void 0,s.Wh=void 0,s=i}while(void 0!==s)}}}class _i{constructor(t){this.ae=t,this.be=0,this.head=void 0,this.Hh=void 0}Kh(){++this.be}end(t){void 0===t&&(t=0),0==--this.be&&this.process(t)}qh(t,i){this.Kh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Gh=this.Hh,this.Hh.Zh=t),this.Hh=t,t.state|=131072}remove(t){void 0!==t.Gh&&(t.Gh.Zh=t.Zh),void 0!==t.Zh&&(t.Zh.Gh=t.Gh),t.Gh=void 0,t.Zh=void 0,this.Hh===t&&(this.Hh=t.Gh),this.head===t&&(this.head=t.Zh),t.state=131072^(131072|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Hh=void 0;do{s.state=131072^(131072|s.state),s.Xh(t),i=s.Zh,s.Zh=void 0,s.Gh=void 0,s=i}while(void 0!==s)}}}class Ji{constructor(t){this.ae=t,this.be=0,this.head=void 0,this.Hh=void 0}Kh(){++this.be}end(t){void 0===t&&(t=0),0==--this.be&&(this.ae.mount.process(t),this.process(t))}qh(t,i){this.Kh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t._h=this.Hh,this.Hh.Jh=t),this.Hh=t,t.state|=262144}remove(t){void 0!==t._h&&(t._h.Jh=t.Jh),void 0!==t.Jh&&(t.Jh._h=t._h),t._h=void 0,t.Jh=void 0,this.Hh===t&&(this.Hh=t._h),this.head===t&&(this.head=t.Jh),t.state=262144^(262144|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Hh=void 0;do{s.state=262144^(262144|s.state),s.Yh(t),i=s.Jh,s.Jh=void 0,s._h=void 0,s=i}while(void 0!==s)}}}class Yi{constructor(t){this.ae=t,this.be=0,this.head=void 0,this.Hh=void 0}Kh(){++this.be}end(t){void 0===t&&(t=0),0==--this.be&&(this.ae.unmount.process(t),this.process(t))}qh(t,i){this.Kh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.io=this.Hh,this.Hh.so=t),this.Hh=t,t.state|=524288}remove(t){void 0!==t.io&&(t.io.so=t.so),void 0!==t.so&&(t.so.io=t.io),t.io=void 0,t.so=void 0,this.Hh===t&&(this.Hh=t.io),this.head===t&&(this.head=t.so),t.state=524288^(524288|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Hh=void 0;do{s.state=524288^(524288|s.state),s.eo(t),i=s.so,s.so=void 0,s.io=void 0,s=i}while(void 0!==s)}}}class ts{constructor(t){this.ae=t,this.head=void 0,this.Hh=void 0}add(t){(2097152&t.state)>0?this.ae.unmount.remove(t):(void 0===this.head?this.head=t:(t.no=this.Hh,this.Hh.ro=t),this.Hh=t,t.state|=1048576)}remove(t){void 0!==t.no&&(t.no.ro=t.ro),void 0!==t.ro&&(t.ro.no=t.no),t.no=void 0,t.ro=void 0,this.Hh===t&&(this.Hh=t.no),this.head===t&&(this.head=t.ro),t.state=1048576^(1048576|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Hh=void 0;do{s.state=1048576^(1048576|s.state),s.mount(t),i=s.ro,s.ro=void 0,s.no=void 0,s=i}while(void 0!==s)}}}class is{constructor(t){this.ae=t,this.head=void 0,this.Hh=void 0}add(t){(1048576&t.state)>0?this.ae.mount.remove(t):(void 0===this.head?this.head=t:(t.ho=this.Hh,this.Hh.oo=t),this.Hh=t,t.state|=2097152)}remove(t){void 0!==t.ho&&(t.ho.oo=t.oo),void 0!==t.oo&&(t.oo.ho=t.ho),t.ho=void 0,t.oo=void 0,this.Hh===t&&(this.Hh=t.ho),this.head===t&&(this.head=t.oo),t.state=2097152^(2097152|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Hh=void 0;do{s.state=2097152^(2097152|s.state),s.unmount(t),i=s.oo,s.oo=void 0,s.ho=void 0,s=i}while(void 0!==s)}}}class ss{constructor(t){this.ae=t,this.co=[],this.be=0}Kh(){++this.be}end(t){void 0===t&&(t=0),0==--this.be&&this.process(t)}qh(t,i){this.Kh(),t(),this.end(i)}add(t){this.co.push(t)}remove(t){const i=this.co.indexOf(t);i>-1&&this.co.splice(i,1)}process(t){for(t|=512;this.co.length>0;){const i=this.co.slice();this.co=[];const{length:s}=i;for(let e=0;s>e;++e)i[e].re(t)}}}class es{get lo(){return 1e3/this.uo}get ao(){return 1e3/this.do}set ao(t){this.do=1e3/Gi(Zi(0,Gi(this.fo,t)),60)}get fo(){return this.vo>0?1e3/this.vo:60}set fo(t){this.vo=60>t?1e3/Gi(Zi(1,Zi(this.ao,t)),60):0}constructor(){this.bo=new Qi(void 0,void 0,1/0),this.po=void 0,this.mo=0,this.wo=0,this.yo=-1,this.Co=-1,this.To=0,this.pe=new ss(this),this.mount=new ts(this),this.unmount=new is(this),this.bound=new Xi(this),this.Xh=new _i(this),this.Yh=new Ji(this),this.eo=new Yi(this),this.vo=0,this.do=1e3/30,this.uo=0,this.Ao=new Promise(t=>{this.Ro=t}),this.Bo=(t=>{this.yo=-1,this.To&&(this.Oo(960,t),this.To&&-1===this.yo&&void 0!==this.bo.next&&(this.yo=PLATFORM.requestAnimationFrame(this.Bo)),++this.mo>1&&(this.Ro(t),this.Ao=new Promise(t=>{this.Ro=t})))}),this.ko=0,this.So=0,this.Io=0,this.Po=1}static register(t){return Registration.singleton(ILifecycle,this).register(t)}Eo(){this.To?-1===this.yo&&void 0!==this.bo.next&&(this.Co=PLATFORM.now(),this.yo=PLATFORM.requestAnimationFrame(this.Bo)):(this.To=1,-1===this.yo&&void 0!==this.bo.next&&(this.Co=PLATFORM.now(),this.yo=PLATFORM.requestAnimationFrame(this.Bo)))}Lo(){this.To?(this.To=0,-1!==this.yo&&(PLATFORM.cancelAnimationFrame(this.yo),this.yo=-1)):-1!==this.yo&&(PLATFORM.cancelAnimationFrame(this.yo),this.yo=-1)}jo(t,i,s=16384,e=0){const n=new Qi(t,i,s,e);let r=this.bo,o=r.next;if(void 0===o)n.link(r);else{do{if(s>o.xh||s===o.xh&&e&&!o.$h){n.link(r);break}r=o,o=o.next}while(void 0!==o);void 0===n.jh&&n.link(r)}void 0===n.next&&(this.po=n),this.Eo()}xo(t,i){let s=this.bo.next;for(;void 0!==s;)s=s.ks(t,i)?s.Dh():s.next}Oo(t,i=PLATFORM.now()){if(!this.wo){if(this.wo=1,i>=this.Co){const s=this.uo=i-this.Co;if(this.vo>s+1)return;let e=0;this.Po=this.Io&&this.do>0?Gi(Zi(this.Po*(this.do/s),.1),10):1;const n=i+Zi(this.do*this.Po,1),r=i+Zi(this.do*this.Po*5,5),o=i+Zi(this.do*this.Po*15,15);t|=256;do{this.ko=0;let i=this.bo.next;for(;void 0!==i;){if(10==++e&&(e=0,this.So)){const{xh:t}=i,s=PLATFORM.now();if(t>4096){if(28672>t){if(s>=r){if(i.rotate(),null==i.Bt||null==i.Bt.next)break;i=i.Bt.next}}else if(s>=o){if(i.rotate(),null==i.Bt||null==i.Bt.next)break;i=i.Bt.next}}else if(s>=n){if(i.rotate(),null==i.Bt||null==i.Bt.next)break;i=i.Bt.next}}i=i.call(t)}}while(this.ko>0);void 0===this.bo.next&&this.Lo()}this.Co=i,this.wo=0}}Vo(t=1){this.So=1,this.Io=1==t}$o(){this.So=0}}const ns=[].slice,rs=[],hs=[];let os=-1;$(-1);let value=0;connectable.Mo=(t=>{t.id=++value});const cs=[].slice,{oneTime,Xe:ls,_e:us}=BindingMode,as=ls|oneTime;let Binding=class{constructor(t,i,s,mode,e,n){connectable.Mo(this),this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$scope=void 0,this.We=n,this.mode=mode,this.ot=e,this.Do=t,this.target=i,this.Fo=s,this.No=void 0,this.ge=0}Uo(value,t){this.No.ee(value,t|=this.ge)}zo(value,t){this.Do.assign(t|=this.ge,this.$scope,this.We,value)}J(t,i,s){if(Tracer.enabled&&Tracer.rt("Binding","handleChange",cs.call(arguments)),0!=(4&this.$state)){if((16&(s|=this.ge))>0){const i=this.No.ne();return(10082!==this.Do.st||this.nt>1)&&(t=this.Do.evaluate(s,this.$scope,this.We)),t!==i&&this.Uo(t,s),0==(this.mode&oneTime)&&(this.version++,this.Do.connect(s,this.$scope,this),this.unobserve(0)),void(Tracer.enabled&&Tracer.lt())}if((32&s)>0)return t!==this.Do.evaluate(s,this.$scope,this.We)&&this.zo(t,s),void(Tracer.enabled&&Tracer.lt());throw Tracer.enabled&&Tracer.lt(),Reporter.error(15,s)}Tracer.enabled&&Tracer.lt()}Ho(t,i){if(Tracer.enabled&&Tracer.rt("Binding","$bind",cs.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Ko(4096|t)}this.$state|=1,this.ge=536870927&t,this.$scope=i;let s=this.Do;hasBind(s)&&s.bind(t,i,this);let e=this.No;e||(e=this.No=this.mode&us?this.ot.ht(t,this.target,this.Fo):this.ot.qo(t,this.target,this.Fo)),this.mode!==BindingMode.oneTime&&e.bind&&e.bind(t),s=this.Do,this.mode&as&&this.Uo(s.evaluate(t,i,this.We),t),this.mode&ls&&s.connect(t,i,this),this.mode&us&&(e.subscribe(this),e[this.id]|=32),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Ko(t){Tracer.enabled&&Tracer.rt("Binding","$unbind",cs.call(arguments)),4&this.$state?(this.$state|=2,this.ge=0,hasUnbind(this.Do)&&this.Do.Qe(t,this.$scope,this),this.$scope=void 0,this.No.Qe&&this.No.Qe(t),this.No.unsubscribe&&(this.No.unsubscribe(this),this.No[this.id]&=-33),this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.lt()):Tracer.enabled&&Tracer.lt()}};Binding=v([connectable()],Binding);const ds=[].slice;class Call{constructor(t,i,s,e,n){this.$state=0,this.We=n,this.Do=t,this.No=e.ht(0,i,s)}Wo(t){Tracer.enabled&&Tracer.rt("Call","callSource",ds.call(arguments));const i=this.$scope.Ae;Object.assign(i,t);const s=this.Do.evaluate(2097152,this.$scope,this.We);for(const s in t)Reflect.deleteProperty(i,s);return Tracer.enabled&&Tracer.lt(),s}Ho(t,i){if(Tracer.enabled&&Tracer.rt("Call","$bind",ds.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Ko(4096|t)}this.$state|=1,this.$scope=i,hasBind(this.Do)&&this.Do.bind(t,i,this),this.No.ee(t=>this.Wo(t),t),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Ko(t){Tracer.enabled&&Tracer.rt("Call","$unbind",ds.call(arguments)),4&this.$state?(this.$state|=2,hasUnbind(this.Do)&&this.Do.Qe(t,this.$scope,this),this.$scope=void 0,this.No.ee(null,t),this.$state&=-7,Tracer.enabled&&Tracer.lt()):Tracer.enabled&&Tracer.lt()}ut(t,i,s){}J(t,i,s){}}const IExpressionParser=DI.zi("IExpressionParser").qi(t=>t.singleton(fs));class fs{constructor(){this.Qo=Object.create(null),this.Go=Object.create(null),this.Zo=Object.create(null)}parse(t,i){switch(i){case 2048:{let s=this.Zo[t];return void 0===s&&(s=this.Zo[t]=this.Xo(t,i)),s}case 539:{let s=this.Go[t];return void 0===s&&(s=this.Go[t]=this.Xo(t,i)),s}default:{if(0===t.length&&55&i)return PrimitiveLiteral.zn;let s=this.Qo[t];return void 0===s&&(s=this.Qo[t]=this.Xo(t,i)),s}}}cache(t){const{Go:i,Qo:s,Zo:e}=this;for(const n in t){const r=t[n];switch(r.st){case 24:e[n]=r;break;case 6199:i[n]=r;break;default:s[n]=r}}}Xo(t,i){try{const parts=t.split("."),i=parts[0];let s;s=i.endsWith("()")?new CallScope(i.replace("()",""),PLATFORM.Ei):new AccessScope(parts[0]);let e=1;for(;parts.length>e;){const t=parts[e];s=t.endsWith("()")?new CallMember(s,t.replace("()",""),PLATFORM.Ei):new AccessMember(s,parts[e]),e++}return s}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType._o=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Jo=1280]="IsRef",BindingType[BindingType.Yo=512]="IsIterator",BindingType[BindingType.tc=256]="IsCustom",BindingType[BindingType.ic=128]="IsFunction",BindingType[BindingType.sc=64]="IsEvent",BindingType[BindingType.ec=32]="IsProperty",BindingType[BindingType.nc=16]="IsCommand",BindingType[BindingType.rc=48]="IsPropertyCommand",BindingType[BindingType.hc=80]="IsEventCommand",BindingType[BindingType.oc=6]="DelegationStrategyDelta",BindingType[BindingType.cc=15]="Command",BindingType[BindingType.lc=49]="OneTimeCommand",BindingType[BindingType.uc=50]="ToViewCommand",BindingType[BindingType.ac=51]="FromViewCommand",BindingType[BindingType.dc=52]="TwoWayCommand",BindingType[BindingType.fc=53]="BindCommand",BindingType[BindingType.vc=86]="TriggerCommand",BindingType[BindingType.gc=87]="CaptureCommand",BindingType[BindingType.bc=88]="DelegateCommand",BindingType[BindingType.pc=153]="CallCommand",BindingType[BindingType.mc=26]="OptionsCommand",BindingType[BindingType.wc=539]="ForCommand",BindingType[BindingType.yc=284]="CustomCommand"})(BindingType||(BindingType={}));const{Xe:vs,oneTime:gs}=BindingMode;class MultiInterpolationBinding{constructor(t,i,s,e,mode,n){this.$state=0,this.$scope=void 0,this.Cc=i,this.We=n,this.mode=mode,this.ot=t,this.target=s,this.Fo=e;const r=i.et,parts=this.parts=Array(r.length);for(let o=0,c=r.length;c>o;++o)parts[o]=new InterpolationBinding(r[o],i,s,e,mode,t,n,0===o)}Ho(t,i){if(4&this.$state){if(this.$scope===i)return;this.Ko(t)}this.$state|=4,this.$scope=i;const parts=this.parts;for(let s=0,e=parts.length;e>s;++s)parts[s].Ho(t,i)}Ko(t){if(!(4&this.$state))return;this.$state&=-5,this.$scope=void 0;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].Ko(t)}}let InterpolationBinding=class{constructor(t,i,s,e,mode,n,r,o){connectable.Mo(this),this.$state=0,this.Cc=i,this.Tc=o,this.mode=mode,this.We=r,this.ot=n,this.Do=t,this.target=s,this.Fo=e,this.No=n.qo(0,s,e)}Uo(value,t){this.No.ee(value,16|t)}J(t,i,s){if(!(4&this.$state))return;const e=this.No.ne(),n=this.Cc.evaluate(s,this.$scope,this.We);n!==e&&this.Uo(n,s),0==(this.mode&gs)&&(this.version++,this.Do.connect(s,this.$scope,this),this.unobserve(0))}Ho(t,i){if(4&this.$state){if(this.$scope===i)return;this.Ko(t)}this.$state|=4,this.$scope=i;const s=this.Do;s.bind&&s.bind(t,i,this),this.mode!==BindingMode.oneTime&&this.No.bind&&this.No.bind(t),this.Tc&&this.Uo(this.Cc.evaluate(t,i,this.We),t),this.mode&vs&&s.connect(t,i,this)}Ko(t){if(!(4&this.$state))return;this.$state&=-5;const i=this.Do;i.Qe&&i.Qe(t,this.$scope,this),this.No.Qe&&this.No.Qe(t),this.$scope=void 0,this.unobserve(1)}};InterpolationBinding=v([connectable()],InterpolationBinding);const bs=[].slice;let LetBinding=class{constructor(t,i,s,e,toViewModel=0){connectable.Mo(this),this.$state=0,this.$lifecycle=e.get(ILifecycle),this.$scope=void 0,this.We=e,this.ot=s,this.Do=t,this.target=null,this.Fo=i,this.toViewModel=toViewModel}J(t,i,s){if(Tracer.enabled&&Tracer.rt("LetBinding","handleChange",bs.call(arguments)),4&this.$state){if(16&s){const{target:t,Fo:i}=this,e=t[i],n=this.Do.evaluate(s,this.$scope,this.We);return n!==e&&(t[i]=n),void(Tracer.enabled&&Tracer.lt())}throw Reporter.error(15,s)}Tracer.enabled&&Tracer.lt()}Ho(t,i){if(Tracer.enabled&&Tracer.rt("LetBinding","$bind",bs.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Ko(4096|t)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.zt:i.Ae;const s=this.Do;s.bind&&s.bind(t,i,this),this.target[this.Fo]=this.Do.evaluate(4096,i,this.We),this.Do.connect(t,i,this),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Ko(t){if(Tracer.enabled&&Tracer.rt("LetBinding","$unbind",bs.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.lt());this.$state|=2;const i=this.Do;i.Qe&&i.Qe(t,this.$scope,this),this.$scope=void 0,this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.lt()}};LetBinding=v([connectable()],LetBinding);const ps=[].slice;class Ref{constructor(t,i,s){this.$state=0,this.$scope=void 0,this.We=s,this.Do=t,this.target=i}Ho(t,i){if(Tracer.enabled&&Tracer.rt("Ref","$bind",ps.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Ko(4096|t)}this.$state|=1,this.$scope=i,hasBind(this.Do)&&this.Do.bind(t,i,this),this.Do.assign(t,this.$scope,this.We,this.target),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Ko(t){if(Tracer.enabled&&Tracer.rt("Ref","$unbind",ps.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.lt());this.$state|=2,this.Do.evaluate(t,this.$scope,this.We)===this.target&&this.Do.assign(t,this.$scope,this.We,null);const i=this.Do;hasUnbind(i)&&i.Qe(t,this.$scope,this),this.$scope=void 0,this.$state&=-7,Tracer.enabled&&Tracer.lt()}ut(t,i,s){}J(t,i,s){}}(function(t){t[t._o=0]="None",t[t.Ac=1]="Subscriber0",t[t.Rc=2]="Subscriber1",t[t.Bc=4]="Subscriber2",t[t.Oc=8]="SubscribersRest",t[t.kc=15]="Any"})(Ft||(Ft={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.vr=0]="none",DelegationStrategy[DelegationStrategy.Sc=1]="capturing",DelegationStrategy[DelegationStrategy.Ic=2]="bubbling"})(DelegationStrategy||(DelegationStrategy={})),(function(CollectionKind){CollectionKind[CollectionKind.Pc=8]="indexed",CollectionKind[CollectionKind.Ec=4]="keyed",CollectionKind[CollectionKind.Gi=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind={}));let CollectionLengthObserver=class{constructor(t){this.de=t,this.ve=t.length}ne(){return this.de.length}ee(t,i){const{ve:s}=this;t!==s&&(this.ve=t,this.g(t,s,16|i))}};CollectionLengthObserver=v([subscriberCollection()],CollectionLengthObserver);const ms=Array.prototype,ws=ms.push,ys=ms.unshift,Cs=ms.pop,Ts=ms.shift,As=ms.splice,Rs=ms.reverse,Bs=ms.sort,Os={push:ws,unshift:ys,pop:Cs,shift:Ts,splice:As,reverse:Rs,sort:Bs},ks=["push","unshift","pop","shift","splice","reverse","sort"],Ss={push(){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return ws.apply(t,arguments);const s=t.length,e=arguments.length;if(0===e)return s;t.length=i.Lc.length=s+e;let n=s;for(;t.length>n;)t[n]=arguments[n-s],i.Lc[n]=-2,n++;return i.jc(),t.length},unshift(){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return ys.apply(t,arguments);const s=arguments.length,e=[];let n=0;for(;s>n;)e[n++]=-2;ys.apply(i.Lc,e);const r=ys.apply(t,arguments);return i.jc(),r},pop(){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return Cs.call(t);const s=i.Lc,e=Cs.call(t),n=s.length-1;return s[n]>-1&&s.at.push(s[n]),Cs.call(s),i.jc(),e},shift(){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return Ts.call(t);const s=i.Lc,e=Ts.call(t);return s[0]>-1&&s.at.push(s[0]),Ts.call(s),i.jc(),e},splice(t,i){let s=this;void 0!==s.ce&&(s=s.ce);const e=s.ft;if(void 0===e)return As.apply(s,arguments);const n=e.Lc;if(i>0){let s=isNaN(t)?0:t;const to=s+i;for(;to>s;)n[s]>-1&&n.at.push(n[s]),s++}const r=arguments.length;if(r>2){const s=r-2,e=[];let o=0;for(;s>o;)e[o++]=-2;As.call(n,t,i,...e)}else 2===r&&As.call(n,t,i);const o=As.apply(s,arguments);return e.jc(),o},reverse(){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return Rs.call(t),this;const s=t.length,e=s/2|0;let n=0;for(;n!==e;){const e=s-n-1,r=t[n],o=i.Lc[n],c=i.Lc[e];t[n]=t[e],i.Lc[n]=c,t[e]=r,i.Lc[e]=o,n++}return i.jc(),this},sort(t){let i=this;void 0!==i.ce&&(i=i.ce);const s=i.ft;if(void 0===s)return Bs.call(i,t),this;const e=i.length;if(2>e)return this;K(i,s.Lc,0,e,z);let n=0;for(;e>n&&void 0!==i[n];)n++;return void 0!==t&&"function"==typeof t||(t=U),K(i,s.Lc,0,n,t),s.jc(),this}},Is={xc:1,me:0,vt:1},def=Reflect.defineProperty;for(const t of ks)def(Ss[t],"observing",{value:1,xc:0,vt:0,me:0});let Ps=0;const Es=[].slice;let ArrayObserver=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("ArrayObserver","constructor",Es.call(arguments)),Ps||(Ps=1,enableArrayObservation()),this.te=0,this.Vc=s,this.ge=536870927&t,this.Lc=createIndexMap(s.length),this.ae=i,this.$c=void 0,Reflect.defineProperty(s,"$observer",{value:this,me:0,xc:1,vt:1}),Tracer.enabled&&Tracer.lt()}jc(){this.ae.pe.be>0?this.te||(this.te=1,this.ae.pe.add(this)):this.re(0)}Mc(){return void 0===this.$c&&(this.$c=new CollectionLengthObserver(this.Vc)),this.$c}re(t){this.te=0;const{Lc:i,Vc:s}=this,{length:e}=s;this.Lc=createIndexMap(e),this.j(i,16|this.ge),void 0!==this.$c&&this.$c.ee(e,16)}};ArrayObserver=v([collectionSubscriberCollection()],ArrayObserver);let CollectionSizeObserver=class{constructor(t){this.de=t,this.ve=t.size}ne(){return this.de.size}ee(t,i){const{ve:s}=this;t!==s&&(this.ve=t,this.g(t,s,16|i))}};CollectionSizeObserver=v([subscriberCollection()],CollectionSizeObserver);const Ls=Map.prototype,js=Ls.set,xs=Ls.clear,Vs=Ls.delete,$s={set:js,clear:xs,delete:Vs},Ms=["set","clear","delete"],Ds={set(t,value){let i=this;void 0!==i.ce&&(i=i.ce);const s=i.ft;if(void 0===s)return js.call(i,t,value),this;const e=i.size;if(js.call(i,t,value),i.size===e){let e=0;for(const n of i.entries()){if(n[0]===t)return n[1]!==value&&(s.Lc[e]=-2),this;e++}return this}return s.Lc[e]=-2,s.jc(),this},clear(){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return xs.call(t);if(t.size>0){const s=i.Lc;let e=0;for(const i of t.keys())s[e]>-1&&s.at.push(s[e]),e++;xs.call(t),s.length=0,i.jc()}},delete(value){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return Vs.call(t,value);if(0===t.size)return 0;let s=0;const e=i.Lc;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.at.push(e[s]),e.splice(s,1),Vs.call(t,value);s++}return i.jc(),0}},Fs={xc:1,me:0,vt:1},Ns=Reflect.defineProperty;for(const t of Ms)Ns(Ds[t],"observing",{value:1,xc:0,vt:0,me:0});let Us=0;const zs=[].slice;let MapObserver=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("MapObserver","constructor",zs.call(arguments)),Us||(Us=1,enableMapObservation()),this.te=0,this.Vc=s,this.ge=536870927&t,this.Lc=createIndexMap(s.size),this.ae=i,this.$c=void 0,s.ft=this,Tracer.enabled&&Tracer.lt()}jc(){this.ae.pe.be>0?this.te||(this.te=1,this.ae.pe.add(this)):this.re(0)}Mc(){return void 0===this.$c&&(this.$c=new CollectionSizeObserver(this.Vc)),this.$c}re(t){this.te=0;const{Lc:i,Vc:s}=this,{size:e}=s;this.Lc=createIndexMap(e),this.j(i,16|this.ge),void 0!==this.$c&&this.$c.ee(e,16)}};MapObserver=v([collectionSubscriberCollection()],MapObserver);const Hs=Set.prototype,Ks=Hs.add,qs=Hs.clear,Ws=Hs.delete,Qs={add:Ks,clear:qs,delete:Ws},Gs=["add","clear","delete"],Zs={add(value){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return Ks.call(t,value),this;const s=t.size;return Ks.call(t,value),t.size===s?this:(i.Lc[s]=-2,i.jc(),this)},clear(){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return qs.call(t);if(t.size>0){const s=i.Lc;let e=0;for(const i of t.keys())s[e]>-1&&s.at.push(s[e]),e++;qs.call(t),s.length=0,i.jc()}},delete(value){let t=this;void 0!==t.ce&&(t=t.ce);const i=t.ft;if(void 0===i)return Ws.call(t,value);if(0===t.size)return 0;let s=0;const e=i.Lc;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.at.push(e[s]),e.splice(s,1),Ws.call(t,value);s++}return i.jc(),0}},Xs={xc:1,me:0,vt:1},_s=Reflect.defineProperty;for(const t of Gs)_s(Zs[t],"observing",{value:1,xc:0,vt:0,me:0});let Js=0;const Ys=[].slice;let SetObserver=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("SetObserver","constructor",Ys.call(arguments)),Js||(Js=1,enableSetObservation()),this.te=0,this.Vc=s,this.ge=536870927&t,this.Lc=createIndexMap(s.size),this.ae=i,this.$c=void 0,s.ft=this,Tracer.enabled&&Tracer.lt()}jc(){this.ae.pe.be>0?this.te||(this.te=1,this.ae.pe.add(this)):this.re(0)}Mc(){return void 0===this.$c&&(this.$c=new CollectionSizeObserver(this.Vc)),this.$c}re(t){this.te=0;const{Lc:i,Vc:s}=this,{size:e}=s;this.Lc=createIndexMap(e),this.j(i,16|this.ge),void 0!==this.$c&&this.$c.ee(e,16)}};SetObserver=v([collectionSubscriberCollection()],SetObserver);const te=[].slice,ie={Dc:0,bt:0};let CustomSetterObserver=class{constructor(t,i,s){this.de=t,this.fe=i,this.ve=this.oldValue=void 0,this.Fc=s,this.dt=0}ee(t){Tracer.enabled&&Tracer.rt("CustomSetterObserver","setValue",te.call(arguments)),this.Fc.set.call(this.de,t),this.ve!==t&&(this.oldValue=this.ve,this.ve=t,this.g(t,this.oldValue,16)),Tracer.enabled&&Tracer.lt()}subscribe(t){this.dt||this.Nc(),this.o(t)}unsubscribe(t){this.l(t)}Nc(){Tracer.enabled&&Tracer.rt("CustomSetterObserver","convertProperty",te.call(arguments)),this.dt=1,this.ve=this.de[this.fe],Reflect.defineProperty(this.de,this.fe,{set:t=>{this.ee(t)}}),Tracer.enabled&&Tracer.lt()}};CustomSetterObserver=v([subscriberCollection()],CustomSetterObserver);let GetterObserver=class{constructor(t,i,s,e,n,r,o){this.de=s,this.fe=e,this.Uc=0,this.ve=this.oldValue=void 0,this.zc=[],this.Hc=[],this.Kc=i,this.qc=0,this.Fc=n,this.ie=new Proxy(s,(function t(i,s,e){Tracer.enabled&&Tracer.rt("computed","createGetterTraps",te.call(arguments));const n={get(n,r,o){if(Tracer.enabled&&Tracer.rt("computed","get",te.call(arguments)),e.Wc(r))return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,o);switch(se.call(n)){case"[object Array]":if(e.Qc(s.Gc(i,n)),"length"===r)return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,n);case"[object Map]":if(e.Qc(s.Zc(i,n)),"size"===r)return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,n);case"[object Set]":if(e.Qc(s.Xc(i,n)),"size"===r)return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,n);default:e._c(s.ht(i,n,r))}return Tracer.enabled&&Tracer.lt(),(function(i,s,e,n,r){const value=Reflect.get(s,e,s);return"function"==typeof value?s[e].bind(s):"object"!=typeof value||null===value?value:new Proxy(value,t(i,n,r))})(i,n,r,s,e)}};return Tracer.enabled&&Tracer.lt(),n})(t,r,this)),Reflect.defineProperty(s,e,{get:()=>this.ne()})}_c(t){-1===this.zc.indexOf(t)&&this.zc.push(t)}Qc(t){-1===this.Hc.indexOf(t)&&this.Hc.push(t)}ne(){return Tracer.enabled&&Tracer.rt("GetterObserver","getValue",te.call(arguments)),this.ve=0===this.qc||this.Uc?Reflect.apply(this.Fc.get,this.ie,PLATFORM.Ei):Reflect.apply(this.Fc.get,this.de,PLATFORM.Ei),Tracer.enabled&&Tracer.lt(),this.ve}subscribe(t){this.o(t),1==++this.qc&&this.Jc(1)}unsubscribe(t){this.l(t),0==--this.qc&&this.Yc()}J(){const t=this.ve,i=this.Jc(0);t!==i&&this.g(i,t,16)}tt(){const t=this.ve,i=this.Jc(0);t!==i&&this.g(i,t,16)}Jc(t){Tracer.enabled&&Tracer.rt("GetterObserver","getValueAndCollectDependencies",te.call(arguments));const i=!this.Kc.Dc||t;return i&&(this.Yc(),this.Uc=1),this.ve=this.ne(),i&&(this.zc.forEach(t=>{t.subscribe(this)}),this.Hc.forEach(t=>{t.V(this)}),this.Uc=0),Tracer.enabled&&Tracer.lt(),this.ve}Wc(t){return!this.Uc||"$observers"===t}Yc(){this.zc.forEach(t=>{t.unsubscribe(this)}),this.zc.length=0,this.Hc.forEach(t=>{t.$(this)}),this.Hc.length=0}};GetterObserver=v([subscriberCollection()],GetterObserver);const se={}.toString,IDirtyChecker=DI.zi("IDirtyChecker").qi(t=>t.singleton(ee)),DirtyCheckSettings={tl:6,disabled:0,warn:1,il:0,sl(){this.tl=6,this.disabled=0,this.warn=1,this.il=0}};class ee{constructor(t){this.el=0,this.nl=[],this.ae=t}gt(t,i){if(DirtyCheckSettings.il)throw Reporter.error(800,i);return DirtyCheckSettings.warn&&Reporter.write(801,i),new DirtyCheckProperty(this,t,i)}rl(t){this.nl.push(t),1===this.nl.length&&this.ae.jo(this.hl,this,4096)}removeProperty(t){this.nl.splice(this.nl.indexOf(t),1),0===this.nl.length&&this.ae.xo(this.hl,this)}hl(t){if(DirtyCheckSettings.disabled)return;if(++this.el<DirtyCheckSettings.tl)return;this.el=0;const i=this.nl,s=i.length;let e,n=0;for(;s>n;++n)(e=i[n]).ol()&&e.flush(256)}}ee.inject=[ILifecycle];const ne=[].slice;let DirtyCheckProperty=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("DirtyCheckProperty","constructor",ne.call(arguments)),this.de=i,this.fe=s,this.cl=t,Tracer.enabled&&Tracer.lt()}ol(){return this.oldValue!==this.de[this.fe]}flush(t){const i=this.de[this.fe];this.g(i,this.oldValue,16|t),this.oldValue=i}subscribe(t){this.v()||(this.oldValue=this.de[this.fe],this.cl.rl(this)),this.o(t)}unsubscribe(t){this.l(t)&&!this.v()&&this.cl.removeProperty(this)}};DirtyCheckProperty=v([subscriberCollection()],DirtyCheckProperty);const re=[].slice,he=PLATFORM.Li;class PrimitiveObserver{constructor(t,i){this.ll=1,Tracer.enabled&&Tracer.rt("PrimitiveObserver","constructor",re.call(arguments)),"length"===i?(this.de=t,this.ne=this.ul):this.ne=this.al,Tracer.enabled&&Tracer.lt()}ul(){return this.de.length}al(){}}PrimitiveObserver.prototype.ee=he,PrimitiveObserver.prototype.subscribe=he,PrimitiveObserver.prototype.unsubscribe=he,PrimitiveObserver.prototype.Dt=he;const oe=[].slice;class PropertyAccessor{constructor(t,i){Tracer.enabled&&Tracer.rt("PropertyAccessor","constructor",oe.call(arguments)),this.de=t,this.fe=i,Tracer.enabled&&Tracer.lt()}ne(){return this.de[this.fe]}ee(value){this.de[this.fe]=value}}const ce={}.toString,IObserverLocator=DI.zi("IObserverLocator").Ki(),ITargetObserverLocator=DI.zi("ITargetObserverLocator").Ki(),ITargetAccessorLocator=DI.zi("ITargetAccessorLocator").Ki();class ObserverLocator{constructor(t,i,s,e){this.dl=[],this.cl=i,this.ae=t,this.fl=s,this.vl=e}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}ht(t,i,s){if(2&t&&"object"==typeof i)return ProxyObserver.se(i,s);if((function(t){return 1==t.Te})(i))return i.ke(t).se(this.ae,t,i,s);let e,n=i.Se;return n&&s in n?n[s]:((e=this.gl(t,i,s)).ll||(void 0===n&&(n=this.bl(i)),n[s]=e),e)}pl(t){this.dl.push(t)}qo(t,i,s){return this.vl.ml(t,i)?this.fl.wl(t,i,s)?this.ht(t,i,s):this.vl.qo(t,this.ae,i,s):2&t?ProxyObserver.se(i,s):new PropertyAccessor(i,s)}Gc(t,i){return q(t,this.ae,i)}Zc(t,i){return W(t,this.ae,i)}Xc(t,i){return Q(t,this.ae,i)}bl(t){return t.Se||this.yl(t)}yl(t){const value={};return Reflect.defineProperty(t,"$observers",{me:0,vt:0,xc:0,value})||Reporter.write(0,t),value}Cl(t,i,s,e){for(let n=0,r=this.dl.length;r>n;n++){const r=this.dl[n].ht(t,i,s,e);if(null!=r)return r}return null}gl(t,i,s){if(!(i instanceof Object))return new PrimitiveObserver(i,s);let e=0;if(this.fl.ml(t,i)){const n=this.fl.ht(t,this.ae,this,i,s);if(null!=n)return n;e=1}switch(ce.call(i)){case"[object Array]":return"length"===s?this.Gc(t,i).Mc():this.cl.gt(i,s);case"[object Map]":return"size"===s?this.Zc(t,i).Mc():this.cl.gt(i,s);case"[object Set]":return"size"===s?this.Xc(t,i).Mc():this.cl.gt(i,s)}const n=(function(t,name){let i=Object.getOwnPropertyDescriptor(t,name),s=Object.getPrototypeOf(t);for(;null==i&&null!=s;)i=Object.getOwnPropertyDescriptor(s,name),s=Object.getPrototypeOf(s);return i})(i,s);if(n&&(n.get||n.set)){if(n.get&&n.get.ht)return n.get.ht(i);return this.Cl(t,i,s,n)||(e?this.cl.gt(i,s):createComputedObserver(t,this,this.cl,this.ae,i,s,n))}return new SetterObserver(this.ae,t,i,s)}}ObserverLocator.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];let SelfObserver=class{constructor(t,i,s,e,n){this.ae=t;let r=0;ProxyObserver.le(s)?(r=1,s.ft.subscribe(this,e),this.de=s.ce):this.de=s,this.fe=e,this.ve=void 0,this.oldValue=void 0,this.te=0,this.ki=this.de[n],void 0===this.ki?this.dt=0:(this.dt=1,this.ve=this.de[this.fe],r||this.Tl()),this.ge=536870927&i}J(t,i,s){this.ee(t,s)}ne(){return this.ve}ee(t,i){if(this.dt){const s=this.ve;this.ve=t,0===this.ae.pe.be?0==(4096&i)&&(this.g(t,s,this.ge|i),void 0!==this.ki&&this.ki.call(this.de,t,s,this.ge|i)):this.te||(this.te=1,this.oldValue=s,this.ae.pe.add(this))}else this.de[this.fe]=t}subscribe(t){0==this.dt&&(this.dt=1,this.ve=this.de[this.fe],this.Tl()),this.o(t)}Tl(){Reflect.defineProperty(this.de,this.fe,{me:1,vt:1,get:()=>this.ve,set:value=>{this.ee(value,0)}})||Reporter.write(1,this.fe,this.de)}};SelfObserver=v([subscriberCollection()],SelfObserver);const{oneTime:le,Xe:ue,_e:ae,ur:de}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,i,s){s.Al=s.mode,s.mode=this.mode}Qe(t,i,s){s.mode=s.Al,s.Al=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(le)}}BindingBehaviorResource.Ve("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(ue)}}BindingBehaviorResource.Ve("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(ae)}}BindingBehaviorResource.Ve("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(de)}}BindingBehaviorResource.Ve("twoWay",TwoWayBindingBehavior);const fe={},ve=BindingMode._e;class DebounceBindingBehavior{bind(t,i,s,e=200){let n,r,o;s instanceof Binding?(n="handleChange",o=Z,r=s.mode&ve?32:16):(n="callSource",o=G,r=16),s.Ct=s[n],s.Ct.Rl=n,s[n]=o,s.wt={At:r,Tt:e,yt:0,oldValue:fe}}Qe(t,i,s){s[s.Ct.Rl]=s.Ct,s.Ct=null,PLATFORM.global.clearTimeout(s.wt.yt),s.wt=null}}BindingBehaviorResource.Ve("debounce",DebounceBindingBehavior);class PriorityBindingBehavior{static register(t){t.register(Registration.singleton("binding-behavior:priority",this)),t.register(Registration.singleton(this,this))}bind(t,i=4096){const{No:s}=t;if(null!=s)if(this[t.id]=s.xh,"number"==typeof i)s.xh=i;else switch(i){case"preempt":s.xh=32768;break;case"high":s.xh=28672;break;case"bind":s.xh=24576;break;case"attach":s.xh=20480;break;case"normal":s.xh=16384;break;case"propagate":s.xh=12288;break;case"connect":s.xh=8192;break;case"low":s.xh=4096}}Qe(t){null!=t.No&&(t.No.xh=this[t.id])}}PriorityBindingBehavior.kind=BindingBehaviorResource,PriorityBindingBehavior.description=Object.freeze({name:"priority"});class SignalBindingBehavior{constructor(t){this.Bl=t}bind(t,i,s,...e){if(!s.Uo)throw Reporter.error(11);if(4===arguments.length){const name=e[0];this.Bl.je(name,s),s.Ol=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let i=t.length;for(;i--;)this.Bl.je(t[i],s);s.Ol=t}}}Qe(t,i,s){const name=s.Ol;if(s.Ol=null,Array.isArray(name)){const t=name;let i=t.length;for(;i--;)this.Bl.xe(t[i],s)}else this.Bl.xe(name,s)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.Ve("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,i,s,e=200){let n;s.Ot=s[n=s instanceof Binding?s.mode===BindingMode.ur?"updateSource":"updateTarget":"callSource"],s.Ot.Rl=n,s[n]=X,s.Rt={Tt:e,Bt:0,yt:-1}}Qe(t,i,s){s[s.Ot.Rl]=s.Ot,s.Ot=null,PLATFORM.global.clearTimeout(s.Rt.yt),s.Rt=null}}BindingBehaviorResource.Ve("throttle",ThrottleBindingBehavior);const Bindable={for(t){const i={add(i){let s=void 0;i instanceof Object?s=i:"string"==typeof i&&(s={kl:i});const e=s.kl;if(!e)throw Reporter.error(0);return s.Sl||(s.Sl=kebabCase(e)),s.ki||(s.ki=`${e}Changed`),void 0===s.mode&&(s.mode=BindingMode.Xe),t.bindables[e]=s,this},get:()=>t.bindables};if(void 0===t.bindables)t.bindables={};else if(Array.isArray(t.bindables)){const s=t.bindables;t.bindables={},s.forEach(i.add)}return i}},ge="custom-element",be="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.Il="ra",TargetedInstructionType.Pl="rb",TargetedInstructionType.El="rc",TargetedInstructionType.Ll="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.Cc="rf",TargetedInstructionType.jl="rg",TargetedInstructionType.xl="rh",TargetedInstructionType.Vl="ri",TargetedInstructionType.$l="rj",TargetedInstructionType.Ml="rk"})(TargetedInstructionType||(TargetedInstructionType={}));const ITargetedInstruction=DI.zi("createInterface").Ki(),pe=Object.freeze({required:1,compiler:"default"}),me=Object.freeze({required:0,compiler:"default"});class HooksDefinition{constructor(t){this.Xr="render"in t,this.Ur="created"in t,this.zr="binding"in t,this.Hr="bound"in t,this.Gr="unbinding"in t,this.Zr="unbound"in t,this.Kr="attaching"in t,this.qr="attached"in t,this.Wr="detaching"in t,this.Qr="detached"in t,this._r="caching"in t}}HooksDefinition.vr=Object.freeze(new HooksDefinition({}));class we{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=me,this.bindables=PLATFORM.It,this.instructions=PLATFORM.Ei,this.dependencies=PLATFORM.Ei,this.surrogates=PLATFORM.Ei,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.strategy=1,this.St=HooksDefinition.vr}}const ye=["name","template","cache","build","containerless","shadowOptions","hasSlots"],Ce=["instructions","dependencies","surrogates"],CustomAttributeResource={name:be,it:tt,ui(t){return t.kind===this},Ve(t,i){const s=i,e=s,n=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.Ei:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.Xe:defaultBindingMode,Et:void 0===def.Et?0:def.Et,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:{...Bindable.for(t).get(),...Bindable.for(def).get()},strategy:V(def.strategy),St:new HooksDefinition(t.prototype)}})("string"==typeof t?{name:t}:t,s);return e.kind=CustomAttributeResource,e.description=n,s.register=it,s}},INode=DI.zi("INode").Ki(),IRenderLocation=DI.zi("IRenderLocation").Ki(),IDOM=DI.zi("IDOM").Ki(),Te=function(){throw Reporter.error(1e3)},Ae={addEventListener:Te,appendChild:Te,cloneNode:Te,Dl:Te,createDocumentFragment:Te,createElement:Te,Fl:Te,dispatchEvent:Te,Nl:Te,Ul:Te,createTextNode:Te,insertBefore:Te,zl:Te,ai:Te,Hl:Te,Yt:Te,jt:Te,remove:Te,removeEventListener:Te,setAttribute:Te},DOM={...Ae,get Kl(){return 1==Reflect.get(this,"$initialized")},initialize(dom){if(this.Kl)throw Reporter.error(1001);const t={},i=[dom];let s=Object.getPrototypeOf(dom);for(;s&&s!==Object.prototype;)i.unshift(s),s=Object.getPrototypeOf(s);for(s of i)Object.assign(t,Object.getOwnPropertyDescriptors(s));const e=[];let n,r;for(n in t)(r=t[n]).vt&&r.xc&&(Reflect.defineProperty(this,n,r),e.push(n));Reflect.set(this,"$domKeys",e),Reflect.set(this,"$initialized",1)},ql(){if(!this.Kl)throw Reporter.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,Ae),Reflect.set(this,"$domKeys",PLATFORM.Ei),Reflect.set(this,"$initialized",0)}},NodeSequence={empty:{Br:0,Wl:0,next:void 0,childNodes:PLATFORM.Ei,firstChild:null,lastChild:null,Ql:()=>PLATFORM.Ei,insertBefore(t){},Gl(t){},remove(){},Zl(){},Dh(){},link(t){}}},LifecycleTask={done:{done:1,Xl:()=>0,cancel(){},_l:()=>Promise.resolve()}};class PromiseTask{constructor(t,i,s,...e){this.done=0,this.Jl=0,this.Yl=0,this.tu=t.then(value=>{if(1!=this.Jl&&(this.Yl=1,null!==i)){const t=i.call(s,value,...e);if(void 0!==t)return(t.then instanceof Function?t:t._l()).then(()=>{this.done=1});this.done=1}})}Xl(){return!this.Yl}cancel(){this.Xl()&&(this.Jl=1)}_l(){return this.tu}}class ContinuationTask{constructor(t,i,s,...e){this.done=0,this.Yl=0,this.Jl=0;const n=t.then instanceof Function?t:t._l();this.tu=n.then(()=>{if(1==this.Jl)return;this.Yl=1;const t=i.call(s,...e);if(void 0!==t)return(t.then instanceof Function?t:t._l()).then(()=>{this.done=1});this.done=1})}Xl(){return!this.Yl}cancel(){this.Xl()&&(this.Jl=1)}_l(){return this.tu}}class AggregateContinuationTask{constructor(t,i,s,...e){this.done=0,this.Yl=0,this.Jl=0,this.tu=Promise.all(t.map(t=>t._l())).then(()=>{if(1==this.Jl)return;this.Yl=1;const t=i.call(s,...e);if(void 0!==t)return t._l().then(()=>{this.done=1});this.done=1})}Xl(){return!this.Yl}cancel(){this.Xl()&&(this.Jl=1)}_l(){return this.tu}}class If{constructor(t,i){this.Se=Object.freeze({value:this}),this.id=nextId("au$component"),this.iu=void 0,this.su=void 0,this.eu=t,this.nu=void 0,this.location=i,this.ru=1,this.hu=LifecycleTask.done,this.view=void 0,this.ou=0}get value(){return this.ou}set value(t){const i=this.ou;i!==t&&(this.ou=t,this.cu(t,i,this.kt.flags))}static register(t){t.register(Registration.transient("custom-attribute:if",this)),t.register(Registration.transient(this,this))}ne(){return this.ou}ee(t,i){const s=this.ou;s!==t&&(this.ou=t,this.cu(t,s,i|this.kt.flags))}lu(t){return this.hu=this.hu.done?this.uu(this.value,t):new ContinuationTask(this.hu,this.uu,this,this.value,t),this.hu}du(t){this.hu.done?this.fu(t):this.hu=new ContinuationTask(this.hu,this.fu,this,t)}vu(t){return void 0!==this.view&&(this.hu.done?this.view.detach(t):this.hu=new ContinuationTask(this.hu,this.view.detach,this.view,t)),this.hu}gu(t){return void 0!==this.view&&(this.hu=this.hu.done?this.view.Qe(t):new ContinuationTask(this.hu,this.view.Qe,this.view,t)),this.hu}bu(t){void 0!==this.nu&&this.nu.release(t)&&(this.nu=void 0),void 0!==this.su&&this.su.release(t)&&(this.su=void 0),this.view=void 0}cu(t,i,s){0!=(4&this.kt.state)&&(this.hu=this.hu.done?this.uu(this.value,s):new ContinuationTask(this.hu,this.uu,this,this.value,s))}pu(value,t){return value?this.nu=this.mu(this.nu,this.eu,t):null!=this.iu?this.su=this.mu(this.su,this.iu,t):void 0}mu(t,i,s){return void 0===t&&(t=i.create(s)),t.wu(this.location),t}uu(value,t){let i=LifecycleTask.done;if((1==value&&void 0!==this.su||1!=value&&void 0!==this.nu)&&(i=this.yu(t)),i.done){const s=this.pu(value,t);i=this.Cu(s,t)}else i=new PromiseTask(i._l().then(()=>this.pu(value,t)),this.Cu,this,t);return i}yu(t){const i=this.view;return void 0===i?LifecycleTask.done:(i.detach(t),i.Qe(t))}Cu(t,i){if(this.view=t,void 0===t)return LifecycleTask.done;let s=this.Tu(i);return 0==(32&this.kt.state)?s:(s.done?this.fu(i):s=new ContinuationTask(s,this.fu,this,i),s)}Tu(t){return void 0!==this.view&&(5&this.kt.state)>0?this.view.bind(t,this.kt.scope):LifecycleTask.done}fu(t){void 0!==this.view&&(40&this.kt.state)>0&&this.view.Nh(t)}}If.inject=[IViewFactory,IRenderLocation],If.kind=CustomAttributeResource,If.description=Object.freeze({name:"if",aliases:PLATFORM.Ei,defaultBindingMode:BindingMode.Xe,Et:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,St:Object.freeze(new HooksDefinition(If.prototype))});class Else{constructor(t){this.Au=t}static register(t){t.register(Registration.transient("custom-attribute:else",this))}link(t){if(t instanceof If)t.iu=this.Au;else{if(!(t.Ru instanceof If))throw Error("Unsupported IfBehavior");t.Ru.iu=this.Au}}}Else.inject=[IViewFactory],Else.kind=CustomAttributeResource,Else.description={name:"else",aliases:PLATFORM.Ei,defaultBindingMode:BindingMode.Xe,Et:0,isTemplateController:1,bindables:PLATFORM.It,strategy:1,St:HooksDefinition.vr};class Repeat{constructor(t,i,s){this.Se=Object.freeze({Bu:this}),this.id=nextId("au$component"),this.Au=s,this.Ou=0,this.location=t,this.ku=void 0,this.Su=i,this.Iu=[],this.key=void 0,this.ru=1,this.hu=LifecycleTask.done}get Bu(){return this.Pu}set Bu(t){this.Pu!==t&&(this.Pu=t,this.Eu(this.kt.flags))}static register(t){t.register(Registration.transient("custom-attribute:repeat",this)),t.register(Registration.transient(this,this))}lu(t){this.Lu(t);const i=this.Su.Nt,{length:s}=i;let e;for(let t=0;s>t;++t)if((e=i[t]).target===this&&"items"===e.Fo){this.ju=e.Do;break}return this.xu=this.ju._n.evaluate(t,this.kt.scope,null),this.Vu(void 0,t),this.hu}du(t){this.hu.done?this.$u(void 0,t):this.hu=new ContinuationTask(this.hu,this.$u,this,void 0,t)}vu(t){this.hu.done?this.Mu(0,this.Iu.length,t):this.hu=new ContinuationTask(this.hu,this.Mu,this,0,this.Iu.length,t)}gu(t){return this.Lu(t),this.hu=this.hu.done?this.Du(0,this.Iu.length,t,0):new ContinuationTask(this.hu,this.Du,this,0,this.Iu.length,t,0),this.hu}Eu(t){this.Lu(t|=this.kt.flags),this.Vu(void 0,t|=16)}tt(t,i){i|=this.kt.flags,this.Vu(t,i|=976)}Vu(t,i){if(void 0===t){if((5&this.kt.state)>0){const t=this.Iu.length;this.Mu(0,t,i),this.hu=this.hu.done?this.Du(0,t,i,0):new ContinuationTask(this.hu,this.Du,this,0,t,i,0),this.hu=this.hu.done?this.Fu(i):new ContinuationTask(this.hu,this.Fu,this,i)}(40&this.kt.state)>0&&(this.hu.done?this.Nu(i):this.hu=new ContinuationTask(this.hu,this.Nu,this,i))}else(function(t){let i=0,s=0;const e=t.length;for(let n=0;e>n;++n){for(;n-i>=t.at[s];)++s,--i;-2===t[n]?++i:t[n]+=i}})(t),(5&this.kt.state)>0&&(t.at.length>0&&(t.at.sort(compareNumber),this.hu.done?this.Uu(t,i):this.hu=new ContinuationTask(this.hu,this.Uu,this,t,i),this.hu=this.hu.done?this.zu(t,i):new ContinuationTask(this.hu,this.zu,this,t,i)),this.hu=this.hu.done?this.Hu(t,i):new ContinuationTask(this.hu,this.Hu,this,t,i)),(40&this.kt.state)>0&&(this.hu.done?this.Ku(t,i):this.hu=new ContinuationTask(this.hu,this.Ku,this,t,i))}Lu(t){const i=this.ku;if((5&this.kt.state)>0){const s=this.ku=getCollectionObserver(t,this.kt.ae,this.Bu);i!==s&&i&&i.$(this),s&&s.V(this)}else i&&i.$(this)}Mu(t,i,s){const e=this.Iu;let n;this.kt.ae.eo.Kh();for(let r=t;i>r;++r)(n=e[r]).release(s),n.detach(s);this.kt.ae.eo.end(s)}Du(t,i,s,e){const n=this.Iu;let r,o,c=void 0;this.kt.ae.Xh.Kh();for(let e=t;i>e;++e)(r=(o=n[e]).Qe(s)).done||(void 0===c&&(c=[]),c.push(r));return e&&(this.Iu.length=t),void 0===c?(this.kt.ae.Xh.end(s),LifecycleTask.done):new AggregateContinuationTask(c,this.kt.ae.Xh.end,this.kt.ae.Xh,s)}Uu(t,i){const s=this.Iu;this.kt.ae.eo.Kh();const e=t.at,n=e.length;let r;for(let t=0;n>t;++t)(r=s[e[t]]).release(i),r.detach(i);this.kt.ae.eo.end(i)}zu(t,i){const s=this.Iu;let e,n=void 0;this.kt.ae.Xh.Kh();const r=t.at,o=r.length;let c,l=0;for(;o>l;++l)(e=(c=s[r[l]]).Qe(i)).done||(void 0===n&&(n=[]),n.push(e));l=0;let u=0;for(;o>l;++l)this.Iu.splice(u=r[l]-l,1);return void 0===n?(this.kt.ae.Xh.end(i),LifecycleTask.done):new AggregateContinuationTask(n,this.kt.ae.Xh.end,this.kt.ae.Xh,i)}Fu(t){let i,s,e=void 0;this.kt.ae.bound.Kh();const n=this.Au,r=this.xu,o=this.Bu,c=this.ju.count(t,o),l=this.Iu=Array(c);return this.ju.Yn(t,o,(o,c,u)=>{s=l[c]=n.create(t),(i=s.bind(t,this.qu(t,r,u,s))).done||(void 0===e&&(e=[]),e.push(i))}),void 0===e?(this.kt.ae.bound.end(t),LifecycleTask.done):new AggregateContinuationTask(e,this.kt.ae.bound.end,this.kt.ae.bound,t)}Hu(t,i){let s,e,n=void 0;const r=this.Au,o=this.Iu,c=this.xu,l=this.Bu;this.kt.ae.bound.Kh();const u=t.length;for(let a=0;u>a;++a)-2===t[a]&&(s=(e=r.create(i)).bind(i,this.qu(i,c,l[a],e)),o.splice(a,0,e),s.done||(void 0===n&&(n=[]),n.push(s)));if(o.length!==u)throw Error(`viewsLen=${o.length}, mapLen=${u}`);return void 0===n?(this.kt.ae.bound.end(i),LifecycleTask.done):new AggregateContinuationTask(n,this.kt.ae.bound.end,this.kt.ae.bound,i)}qu(t,i,s,e){const n=this.kt,r=n.scope,o=BindingContext.create(t,i,s);o.Wu=e;const c=Scope.Pe(t,r,o);if(n.Qu!==PLATFORM.Ei){c.Be=void 0!==r.Be&&r.Be!==PLATFORM.It?{...r.Be}:{};for(const t of n.Qu)c.Be[t]=c}return c}$u(t,i){let s;const{Iu:e,location:n}=this;if(this.kt.ae.Yh.Kh(),void 0===t)for(let t=0,r=e.length;r>t;++t)(s=e[t]).wu(n),s.Gu.Dh(),s.Nh(i);else for(let r=0,o=e.length;o>r;++r)t[r]!==r&&((s=e[r]).wu(n),s.Gu.Dh(),s.Nh(i));this.kt.ae.Yh.end(i)}Nu(t){let i;const{Iu:s,location:e}=this;this.kt.ae.Yh.Kh();for(let n=0,r=s.length;r>n;++n)(i=s[n]).wu(e),i.Gu.Dh(),i.Nh(t);this.kt.ae.Yh.end(t)}Ku(t,i){const s=this.location,e=this.Iu;(function(t,i){const s=t.slice(),e=i.length;let to=0,from=0;for(;e>to;)-2!==(from=i[to])&&(t[to]=s[from]),++to})(e,t);const n=(function(t){const i=t.length;i>Oe&&(Oe=i,Re=new Int32Array(i),Be=new Int32Array(i));let s=0,e=0,n=0,r=0,o=0,c=0,l=0,u=0;for(;i>r;r++)if(-2!==(e=t[r])){if(-2!==(n=t[o=Re[s]])&&e>n){Be[r]=o,Re[++s]=r;continue}for(c=0,l=s;l>c;)-2!==(n=t[Re[u=c+l>>1]])&&e>n?c=u+1:l=u;((n=t[Re[c]])>e||-2===n)&&(c>0&&(Be[r]=Re[c-1]),Re[c]=r)}r=++s;const a=new Int32Array(r);for(e=Re[s-1];s-- >0;)a[s]=e,e=Be[e];for(;r-- >0;)Re[r]=0;return a})(t),r=n.length;let o;this.kt.ae.Yh.Kh(),i|=268435456;let c=r-1,l=t.length-1;for(;l>=0;--l)-2===t[l]?(e[l].wu(s),e[l].Nh(i)):0>c||1===r||l!==n[c]?e[l].Nh(i):--c,e[l].Gu.link(void 0!==(o=e[l+1])?o.Gu:s);this.kt.ae.Yh.end(i)}}let Re,Be;Repeat.inject=[IRenderLocation,IController,IViewFactory],Repeat.kind=CustomAttributeResource,Repeat.description=Object.freeze({name:"repeat",aliases:PLATFORM.Ei,defaultBindingMode:BindingMode.Xe,Et:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["items"]}).get()),strategy:1,St:Object.freeze(new HooksDefinition(Repeat.prototype))});let Oe=0;class Replaceable{constructor(t,i){this.id=nextId("au$component"),this.Au=t,this.view=this.Au.create(),this.view.wu(i)}static register(t){t.register(Registration.transient("custom-attribute:replaceable",this)),t.register(Registration.transient(this,this))}lu(t){const i=BindingContext.Oe;BindingContext.Oe=this.Au.name;const s=this.view.bind(536870912|t,this.kt.scope);return s.done?BindingContext.Oe=i:s._l().then(()=>{BindingContext.Oe=i}),s}du(t){this.view.Nh(t)}vu(t){this.view.detach(t)}gu(t){return this.view.Qe(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],Replaceable.kind=CustomAttributeResource,Replaceable.description=Object.freeze({name:"replaceable",aliases:PLATFORM.Ei,defaultBindingMode:BindingMode.Xe,Et:0,isTemplateController:1,bindables:PLATFORM.It,strategy:1,St:Object.freeze(new HooksDefinition(Replaceable.prototype))});class With{constructor(t,i){this.Se=Object.freeze({value:this}),this.id=nextId("au$component"),this.Au=t,this.view=this.Au.create(),this.view.wu(i),this.ou=void 0}get value(){return this.ou}set value(t){const i=this.ou;i!==t&&(this.ou=t,this.cu(t,i,0))}static register(t){t.register(Registration.transient("custom-attribute:with",this)),t.register(Registration.transient(this,this))}cu(t,i,s){(5&this.kt.state)>0&&this.Zu(4096)}lu(t){this.Zu(t)}du(t){this.view.Nh(t)}vu(t){this.view.detach(t)}gu(t){this.view.Qe(t)}Zu(t){const i=Scope.Pe(t,this.kt.scope,void 0===this.value?{}:this.value);this.view.bind(t,i)}}With.inject=[IViewFactory,IRenderLocation],With.kind=CustomAttributeResource,With.description=Object.freeze({name:"with",aliases:PLATFORM.Ei,defaultBindingMode:BindingMode.Xe,Et:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,St:Object.freeze(new HooksDefinition(With.prototype))});const IProjectorLocator=DI.zi("IProjectorLocator").Ki(),CustomElementResource={name:ge,it:J,ui(t){return t.kind===this},Xu:Y,Ve(t,i=null){if(!t)throw Reporter.error(70);const s=null==i?class{}:i,e=s,n=buildTemplateDefinition(s,t);return e.kind=CustomElementResource,s.description=n,s.register=nt,s}},ke={mode:"open"},ISanitizer=DI.zi("ISanitizer").qi(t=>t.singleton(class{_u(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.Ju=t}Xe(t){return null==t?null:this.Ju._u(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.Ve("sanitize",SanitizeValueConverter);class ViewFactory{constructor(name,template,t){this.Yu=0,this.ta=-1,this.cache=null,this.ae=t,this.name=name,this.template=template,this.parts=PLATFORM.It}ia(t,i){t&&("*"===t?t=ViewFactory.sa:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.ta&&i||(this.ta=t)),this.cache=this.ta>0?[]:null,this.Yu=this.ta>0}ea(t){return null!=this.cache&&this.ta>this.cache.length}na(t){return this.ea(t)?(t.cache(0),this.cache.push(t),1):0}create(t){const cache=this.cache;let i;if(null!=cache&&cache.length>0)return(i=cache.pop()).state=128^(128|i.state),i;if(i=Controller.ra(this,this.ae,t),this.template.Vt(i,null,this.parts,t),!i.Gu)throw Reporter.error(90);return i}ha(parts){this.parts===PLATFORM.It?this.parts={...parts}:Object.assign(this.parts,parts)}}ViewFactory.sa=65535;const ITemplateCompiler=DI.zi("ITemplateCompiler").Ki();(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.vr=1]="none",ViewCompileFlags[ViewCompileFlags.oa=2]="surrogate",ViewCompileFlags[ViewCompileFlags.ca=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags={}));const ITemplateFactory=DI.zi("ITemplateFactory").Ki();class CompiledTemplate{constructor(dom,t,i,s){this.dom=dom,this.la=t,this.Au=i,this.ua=s}Vt(t,host,parts,i=0){const s=t instanceof Controller?t:t.kt;if(null==s)throw Error("Controller is missing from the view model");const e=s.Gu=this.Au.aa();s.context=this.ua,this.ua.Vt(i|=this.la.strategy,s,e.Ql(),this.la,host,parts)}}const Se={ua:void 0,dom:void 0,la:void 0,Vt(t){const i=t instanceof Controller?t:t.kt;i.Gu=NodeSequence.empty,i.context=void 0}},Ie="default",IInstructionRenderer=DI.zi("IInstructionRenderer").Ki(),IRenderer=DI.zi("IRenderer").Ki(),IRenderingEngine=DI.zi("IRenderingEngine").qi(t=>t.singleton(Pe));class Pe{constructor(t,i,s,e){this.da=t,this.fa=i,this.va=new Map,this.ae=s,this.ga=new Map,this.ba=e.reduce((t,i)=>(t[i.name]=i,t),Object.create(null))}pa(dom,t,i,s){if(null==t)return;let e=this.ga.get(t);return e||(e=this.ma(dom,t,i,s),this.ga.set(t,e)),e}wa(dom,t,i){if(null==t)throw Error("No definition provided");let s=this.va.get(t);if(!s){const e=buildTemplateDefinition(null,t),template=this.ma(dom,e,i,void 0);(s=new ViewFactory(e.name,template,this.ae)).ia(e.cache,1),this.va.set(t,s)}return s}ma(dom,t,i,s){if(null==i&&(i=this.da),null!=t.template){const e=createRenderContext(dom,i,t.dependencies,s);if(t.build.required){const i=t.build.compiler||Ie,compiler=this.ba[i];if(void 0===compiler)throw Reporter.error(20,i);t=compiler.compile(dom,t,new RuntimeCompilationResources(e),ViewCompileFlags.oa)}return this.fa.create(e,t)}return Se}}Pe.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class Ee{Mt(t,parts){this.Au=t,t.ha(parts)}resolve(t,i){const s=this.Au;if(null==s)throw Reporter.error(50);if(!s.name||!s.name.length)throw Reporter.error(51);const e=s.parts[s.name];if(e){const s=t.get(IRenderingEngine),dom=t.get(IDOM);return s.wa(dom,e,i)}return s}Dt(){this.Au=null}}let Le=class{constructor(t,i){this.ya=0,this.children=void 0,this.controller=i,this.ae=t,this.controller=Controller.Ca(i,void 0,void 0),this.Ta=this.controller.Ta,this.dt=0,this.Aa=0}ne(){return this.dt||(this.dt=1,this.Ta.Ra(()=>{this.Ba()}),this.children=ht(this.Ta.children)),this.children}ee(t){}Oa(t){this.ya&&(this.g(this.children,void 0,16|t),this.ya=0)}subscribe(t){this.Aa||(this.Aa=1,this.ae.jo(this.Oa,this,24576)),this.o(t)}unsubscribe(t){this.l(t),this.Aa&&!this.v()&&(this.Aa=0,this.ae.xo(this.Oa,this))}Ba(){var t;this.children=ht(this.Ta.children),null!=(t=this.controller.Ru)&&"$childrenChanged"in t&&this.controller.Ru.ka(),this.ya=1}};Le=v([subscriberCollection()],Le);class Controller{constructor(t,i,s,e,n,host,r,o){if(this.id=nextId("au$component"),this.Qh=void 0,this.Zh=void 0,this.Wh=void 0,this.Gh=void 0,this.Jh=void 0,this.so=void 0,this._h=void 0,this.io=void 0,this.ro=void 0,this.oo=void 0,this.no=void 0,this.ho=void 0,this.flags=t,this.Sa=i,this.Nt=void 0,this.Ut=void 0,this.state=0,this.Qu=o,null==e){if(null==i)throw Error("No IViewCache was provided when rendering a synthetic view.");if(null==s)throw Error("No ILifecycle was provided when rendering a synthetic view.");this.ae=s,this.St=HooksDefinition.vr,this.Ru=void 0,this.zt=void 0,this.host=void 0,this.Ia=2,this.scope=void 0,this.Ta=void 0,this.Gu=void 0,this.context=void 0,this.location=void 0}else{if(null==n)throw Error("No parentContext was provided when rendering a custom element or attribute.");this.ae=n.get(ILifecycle),e.kt=this;const i=e.constructor;if(null==i.description)throw Error("The provided viewModel does not have a (valid) description.");const{description:s}=i;switch((function(t,i,s,e){const n=null!=e.Se?e.Se:{},bindables=i.bindables,r=Object.getOwnPropertyNames(bindables),o=(2&s)>0,{length:c}=r;let name;for(let i=0;c>i;++i)null==n[name=r[i]]&&(n[name]=new SelfObserver(t,s,o?ProxyObserver.se(e).ie:e,name,bindables[name].ki));o||Reflect.defineProperty(e,"$observers",{me:0,value:n})})(this.ae,s,t|=s.strategy,e),this.St=s.St,this.Ru=e,this.zt=(function(t){return 1==e.ru||0==(2&t)?e:ProxyObserver.se(e).ie})(t),this.host=host,i.kind.name){case"custom-element":if(null==host)throw Error("No host element was provided when rendering a custom element.");this.Ia=0;const c=n.get(IRenderingEngine);let template=void 0;if(this.St.Xr){const s=this.zt.Vt(t,host,null==r.parts?PLATFORM.It:r.parts,n);null!=s&&"getElementTemplate"in s&&(template=s.pa(c,i,n))}else{const dom=n.get(IDOM);template=c.pa(dom,s,n,i)}if(void 0!==template){let parts;if(null==template.la||0===template.la.instructions.length||0===template.la.instructions[0].length||null==template.la.instructions[0][0].parts)parts=null==r.parts?PLATFORM.It:r.parts;else{const t=template.la.instructions[0][0];parts=null==r.parts?t.parts:{...r.parts,...t.parts},o===PLATFORM.Ei&&(this.Qu=Object.keys(t.parts))}template.Vt(this,host,parts)}this.scope=Scope.create(t,this.zt,null),this.Ta=n.get(IProjectorLocator).Pa(n.get(IDOM),this,host,s),this.location=void 0;break;case"custom-attribute":this.Ia=1,this.scope=void 0,this.Ta=void 0,this.Gu=void 0,this.context=void 0,this.location=void 0;break;default:throw Error(`Invalid resource kind: '${i.kind.name}'`)}this.St.Ur&&this.zt.Ea(t)}}static Ca(t,i,host,s=0,e=PLATFORM.It){let n=Controller.La.get(t);return void 0===n&&(n=new Controller(s,void 0,void 0,t,i,host,e,PLATFORM.Ei),this.La.set(t,n)),n}static ja(t,i,s=0,e=PLATFORM.Ei){let n=Controller.La.get(t);return void 0===n&&(n=new Controller(s,void 0,void 0,t,i,void 0,PLATFORM.It,e),this.La.set(t,n)),n}static ra(t,i,s=0){return new Controller(s,t,i,void 0,void 0,void 0,PLATFORM.It,PLATFORM.Ei)}xa(t){this.scope=t,this.state|=16384}wu(t){this.state=32768^(32768|this.state),this.location=t}release(t){return this.state|=32768,(32&this.state)>0?this.Sa.ea(this):this.Va(t)}bind(t,i){switch(t|=4096,this.Ia){case 0:return this.$a(t,i);case 1:return this.Ma(t,i);case 2:return this.Da(t,i)}}Qe(t){switch(t|=8192,this.Ia){case 0:return this.Fa(t);case 1:return this.Na(t);case 2:return this.Ua(t)}}bound(t){this.zt.bound(t)}Xh(t){this.zt.Xh(t)}Nh(t){if(0>=(40&this.state)||0!=(268435456&t))switch(t|=16384,this.Ia){case 0:this.za(t);break;case 1:this.Ha(t);break;case 2:this.Ka(t)}}detach(t){if(0!=(40&this.state))switch(t|=32768,this.Ia){case 0:this.qa(t);break;case 1:this.Wa(t);break;case 2:this.Qa(t)}}Yh(t){this.zt.Yh(t)}eo(t){this.zt.eo(t)}mount(t){switch(this.Ia){case 0:this.Ga(t);break;case 2:this.Za(t)}}unmount(t){switch(this.Ia){case 0:this.Xa(t);break;case 2:this.Va(t)}}cache(t){switch(this.Ia){case 0:this._a(t);break;case 1:this.Ja(t);break;case 2:this.Ya(t)}}td(t){const{Nt:i}=this;if(void 0!==i){const s=i.find(i=>i.Fo===t);if(void 0!==s)return s.No}}$a(t,i){const $scope=this.scope;if(null==$scope.Be)if(null!=i&&null!=i.Be&&i.Be!==PLATFORM.It?$scope.Be={...i.Be}:this.Qu!==PLATFORM.Ei&&($scope.Be={}),null==$scope.Be)$scope.Be=PLATFORM.It;else for(const t of this.Qu)$scope.Be[t]=$scope;if((134217728&t)>0)return this.sd(t,$scope),LifecycleTask.done;if((4&this.state)>0)return LifecycleTask.done;if(t|=4096,this.state|=1,this.ae.bound.Kh(),this.sd(t,$scope),this.St.zr){const i=this.zt.lu(t);if(et(i))return new ContinuationTask(i,this.ed,this,t,$scope)}return this.ed(t,$scope)}Ma(t,i){if((4&this.state)>0){if(this.scope===i)return LifecycleTask.done;const s=this.Qe(t|=4096);if(!s.done)return new ContinuationTask(s,this.bind,this,t,i)}else t|=4096;if(this.state|=1,this.scope=i,this.ae.bound.Kh(),this.St.zr){const i=this.zt.lu(t);if(et(i))return new ContinuationTask(i,this.nd,this,t)}return this.nd(t),LifecycleTask.done}Da(t,i){if(null==i)throw Error("Scope is null or undefined");if((134217728&t)>0)return this.sd(t,i),LifecycleTask.done;if((4&this.state)>0){if(this.scope===i||(16384&this.state)>0)return LifecycleTask.done;const s=this.Qe(t|=4096);if(!s.done)return new ContinuationTask(s,this.bind,this,t,i)}else t|=4096;return 0==(16384&this.state)&&(this.scope=i),this.state|=1,this.ae.bound.Kh(),this.sd(t,i),this.ed(t,i)}sd(t,i){const{Nt:s}=this;if(void 0!==s){const{length:e}=s;for(let n=0;e>n;++n)s[n].Ho(t,i)}}ed(t,i){let s,e=void 0;const{Ut:n}=this;if(void 0!==n){const{length:r}=n;for(let o=0;r>o;++o)(s=n[o].bind(t,i)).done||(void 0===e&&(e=[]),e.push(s))}return void 0===e?(this.nd(t),LifecycleTask.done):new AggregateContinuationTask(e,this.nd,this,t)}nd(t){this.St.Hr&&this.ae.bound.add(this),this.state=1^this.state|4,this.ae.bound.end(t)}Fa(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.ae.Xh.Kh(),this.St.Gr){const i=this.zt.gu(t);if(et(i))return new ContinuationTask(i,this.rd,this,t)}return this.rd(t)}Na(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.ae.Xh.Kh(),this.St.Gr){const i=this.zt.gu(t);if(et(i))return new ContinuationTask(i,this.hd,this,t)}return this.hd(t),LifecycleTask.done}Ua(t){return 0==(4&this.state)?LifecycleTask.done:(this.state|=2,t|=8192,this.ae.Xh.Kh(),this.rd(t))}od(t){const{Nt:i}=this;if(void 0!==i)for(let s=i.length-1;s>=0;--s)i[s].Ko(t);this.hd(t)}rd(t){let i,s=void 0;const{Ut:e}=this;if(void 0!==e)for(let n=e.length-1;n>=0;--n)(i=e[n].Qe(t)).done||(void 0===s&&(s=[]),s.push(i));return void 0===s?(this.od(t),LifecycleTask.done):new AggregateContinuationTask(s,this.od,this,t)}hd(t){switch(this.Ia){case 1:this.scope=void 0;break;case 2:0==(16384&this.state)&&(this.scope=void 0)}this.St.Zr&&this.ae.Xh.add(this),this.state=6^(6|this.state),this.ae.Xh.end(t)}za(t){t|=16384,this.state|=8,this.ae.mount.add(this),this.ae.Yh.Kh(),this.St.Kr&&this.zt.du(t),this.ld(t),this.St.qr&&this.ae.Yh.add(this),this.state=8^this.state|32,this.ae.Yh.end(t)}Ha(t){t|=16384,this.state|=8,this.ae.Yh.Kh(),this.St.Kr&&this.zt.du(t),this.St.qr&&this.ae.Yh.add(this),this.state=8^this.state|32,this.ae.Yh.end(t)}Ka(t){((32&this.state)>0&&268435456&t)>0?this.ae.mount.add(this):(t|=16384,this.state|=8,this.ae.mount.add(this),this.ae.Yh.Kh(),this.ld(t),this.state=8^this.state|32,this.ae.Yh.end(t))}qa(t){t|=32768,this.state|=16,this.ae.eo.Kh(),this.ae.unmount.add(this),this.St.Wr&&this.zt.vu(t),this.ud(t),this.St.Qr&&this.ae.eo.add(this),this.state=48^(48|this.state),this.ae.eo.end(t)}Wa(t){t|=32768,this.state|=16,this.ae.eo.Kh(),this.St.Wr&&this.zt.vu(t),this.St.Qr&&this.ae.eo.add(this),this.state=48^(48|this.state),this.ae.eo.end(t)}Qa(t){t|=32768,this.state|=16,this.ae.eo.Kh(),this.ae.unmount.add(this),this.ud(t),this.state=48^(48|this.state),this.ae.eo.end(t)}ld(t){const{Ut:i}=this;if(void 0!==i){const{length:s}=i;for(let e=0;s>e;++e)i[e].Nh(t)}}ud(t){const{Ut:i}=this;if(void 0!==i)for(let s=i.length-1;s>=0;--s)i[s].detach(t)}Ga(t){(64&this.state)>0||(this.state|=64,this.Ta.ad(this.Gu))}Za(t){this.state|=64,this.Gu.insertBefore(this.location)}Xa(t){0!=(64&this.state)&&(this.state=64^(64|this.state),this.Ta.dd(this.Gu))}Va(t){return 0==(64&this.state)?0:(this.state=64^(64|this.state),this.Gu.remove(),this.Gu.Dh(),(32768&this.state)>0&&(this.state=32768^(32768|this.state),this.Sa.na(this))?(this.state|=128,1):0)}_a(t){this.St._r&&this.zt.bu(t|=65536)}Ja(t){t|=65536,this.St._r&&this.zt.bu(t);const{Ut:i}=this;if(void 0!==i){const{length:s}=i;for(let e=s-1;e>=0;--e)i[e].cache(t)}}Ya(t){const{Ut:i}=this;if(void 0!==i){const{length:s}=i;for(let e=s-1;e>=0;--e)i[e].cache(t)}}}Controller.La=new WeakMap;const je=DI.zi("IActivator").qi(t=>t.singleton(xe));class xe{static register(t){return Registration.singleton(je,this).register(t)}Cu(host,component,t,i=1024,s){const e=Controller.Ca(component,t,host,i=void 0===i?0:i);let n=e.bind(4096|i,s);return n.done?e.Nh(16384|i):n=new ContinuationTask(n,e.Nh,e,16384|i),n}yu(component,t=2048){const i=Controller.Ca(component,void 0,void 0);return i.detach(32768|t),i.Qe(8192|t)}}const{rt:Ve,lt:$e}=Profiler.us("Aurelia.start"),{rt:Me,lt:De}=Profiler.us("Aurelia.stop");class CompositionRoot{constructor(t,i){if(this.fd=t,null!=t.host)this.da=i.has(INode,0)?i.Lt():i,Registration.Wi(INode,t.host).register(this.da),this.host=t.host;else{if(!i.has(INode,1))throw Error("No host element found.");this.da=i,this.host=i.get(INode)}this.strategy=null!=t.strategy?t.strategy:1;const s=this.da.get(IDOMInitializer);this.dom=s.initialize(t),this.Ru=CustomElementResource.ui(t.component)?this.da.get(t.component):t.component,this.controller=Controller.Ca(this.Ru,this.da,this.host,this.strategy),this.ae=this.da.get(ILifecycle),this.vd=this.da.get(je),1==t.gd?this.ae.Vo(t.bd):this.ae.$o(),this.hu=LifecycleTask.done,this.pd=1,this.md=1}Cu(t){const{hu:i,host,Ru:s,da:e,vd:n,strategy}=this,r=1024|strategy;if(i.done)this.hu=null==t||t.done?n.Cu(host,s,e,r,void 0):new ContinuationTask(t,n.Cu,n,host,s,e,r,void 0);else if(null==t||t.done)this.hu=new ContinuationTask(i,n.Cu,n,host,s,e,r,void 0);else{const o=new ContinuationTask(i,t._l,t);this.hu=new ContinuationTask(o,n.Cu,n,host,s,e,r,void 0)}return this.hu}yu(t){const{hu:i,Ru:s,vd:e,strategy}=this,n=2048|strategy;if(i.done)this.hu=null==t||t.done?e.yu(s,n):new ContinuationTask(t,e.yu,e,s,n);else if(null==t||t.done)this.hu=new ContinuationTask(i,e.yu,e,s,n);else{const r=new ContinuationTask(i,t._l,t);this.hu=new ContinuationTask(r,e.yu,e,s,n)}return this.hu}}class Aurelia{constructor(t=DI.Fi()){this.da=t,this.hu=LifecycleTask.done,this.wd=0,this.yd=0,this.Cd=0,this.Td=void 0,this.next=void 0,Registration.Wi(Aurelia,this).register(t)}get Ad(){return this.wd}get Rd(){return this.yd}get Bd(){return this.Cd}get root(){if(null==this.Td){if(null==this.next)throw Error("root is not defined");return this.next}return this.Td}register(...t){return this.da.register(...t),this}app(t){return this.next=new CompositionRoot(t,this.da),this.Ad&&this.start(),this}start(t=this.next){if(null==t)throw Error("There is no composition root");return this.stop(t),this.hu.done?this.Od(t):this.hu=new ContinuationTask(this.hu,this.Od,this,t),this.hu=this.root.Cu(this.hu),this.hu=this.hu.done?this.kd(t):new ContinuationTask(this.hu,this.kd,this,t),this.hu}stop(t=this.Td){return this.wd&&null!=t&&(this.hu.done?this.Sd(t):this.hu=new ContinuationTask(this.hu,this.Sd,this,t),this.hu=t.yu(this.hu),this.hu=this.hu.done?this.Id(t):new ContinuationTask(this.hu,this.Id,this,t)),this.hu}_l(){return this.hu._l()}Od(t){Reflect.set(t.host,"$au",this),this.Td=t,this.yd=1,Profiler.enabled&&Ve()}kd(t){return this.wd=1,this.yd=0,this.dispatchEvent(t,"aurelia-composed",t.dom),this.dispatchEvent(t,"au-started",t.host),Profiler.enabled&&$e(),LifecycleTask.done}Sd(t){this.wd=0,this.Cd=1,Profiler.enabled&&Me()}Id(t){return Reflect.deleteProperty(t.host,"$au"),this.Td=void 0,this.Cd=0,this.dispatchEvent(t,"au-stopped",t.host),Profiler.enabled&&De(),LifecycleTask.done}dispatchEvent(t,name,i){(i="dispatchEvent"in i?i:t.dom).dispatchEvent(t.dom.Fl(name,{detail:this,bubbles:1,cancelable:1}))}}PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=DI.zi("IDOMInitializer").Ki(),Fe=[].slice;class Ne{constructor(t){const i=this.Pd={};t.forEach(t=>{i[t.Ft]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Vt(t,dom,i,s,targets,e,host,parts){Tracer.enabled&&Tracer.rt("Renderer","render",Fe.call(arguments));const n=e.instructions,r=this.Pd;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);let instructions,o,c;for(let e=0,l=targets.length;l>e;++e){o=targets[e];for(let l=0,u=(instructions=n[e]).length;u>l;++l)r[(c=instructions[l]).type].Vt(t,dom,i,s,o,c,parts)}if(host){const n=e.surrogates;for(let e=0,o=n.length;o>e;++e)r[(c=n[e]).type].Vt(t,dom,i,s,host,c,parts)}Tracer.enabled&&Tracer.lt()}}Ne.inject=[all(IInstructionRenderer)];let Ue=class{Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("SetPropertyRenderer","render",Fe.call(arguments)),getTarget(e)[n.to]=n.value,Tracer.enabled&&Tracer.lt()}};Ue=v([instructionRenderer("re")],Ue);let ze=class{Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("CustomElementRenderer","render",Fe.call(arguments));const r=i.$t(s,e,n,null,null,e,1),component=i.get(J(n.res)),o=i.get(IRenderer).Pd,c=n.instructions,l=Controller.Ca(component,i,e,t,n);let u;for(let e=0,n=c.length;n>e;++e)o[(u=c[e]).type].Vt(t,dom,i,s,l,u);addComponent(s,l),r.Dt(),Tracer.enabled&&Tracer.lt()}};ze=v([instructionRenderer("ra")],ze);let He=class{Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("CustomAttributeRenderer","render",Fe.call(arguments));const r=i.$t(s,e,n),component=i.get(tt(n.res)),o=i.get(IRenderer).Pd,c=n.instructions,l=Controller.ja(component,i,t);let u;for(let e=0,n=c.length;n>e;++e)o[(u=c[e]).type].Vt(t,dom,i,s,l,u);addComponent(s,l),r.Dt(),Tracer.enabled&&Tracer.lt()}};He=v([instructionRenderer("rb")],He);let Ke=class{constructor(t){this.Ed=t}Vt(t,dom,i,s,e,n,parts){Tracer.enabled&&Tracer.rt("TemplateControllerRenderer","render",Fe.call(arguments));const r=this.Ed.wa(dom,n.def,i),o=i.$t(s,e,n,r,parts,dom.Dl(e),0),component=i.get(tt(n.res)),c=i.get(IRenderer).Pd,l=n.instructions,u=Controller.ja(component,i,t,null==n.parts?PLATFORM.Ei:Object.keys(n.parts));if(n.link){const t=s.Ut;component.link(t[t.length-1])}let a;for(let e=0,n=l.length;n>e;++e)c[(a=l[e]).type].Vt(t,dom,i,s,u,a);addComponent(s,u),o.Dt(),Tracer.enabled&&Tracer.lt()}};Ke.inject=[IRenderingEngine],Ke=v([instructionRenderer("rc")],Ke);let qe=class{constructor(t,i){this.Ld=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("LetElementRenderer","render",Fe.call(arguments)),dom.remove(e);const r=n.instructions,toViewModel=n.toViewModel;let o,c,l;for(let t=0,e=r.length;e>t;++t)c=ensureExpression(this.Ld,(o=r[t]).from,48),addBinding(s,l=new LetBinding(c,o.to,this.ot,i,toViewModel));Tracer.enabled&&Tracer.lt()}};qe.inject=[IExpressionParser,IObserverLocator],qe=v([instructionRenderer("rd")],qe);let We=class{constructor(t,i){this.Ld=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("CallBindingRenderer","render",Fe.call(arguments));const r=ensureExpression(this.Ld,n.from,153);addBinding(s,new Call(r,getTarget(e),n.to,this.ot,i)),Tracer.enabled&&Tracer.lt()}};We.inject=[IExpressionParser,IObserverLocator],We=v([instructionRenderer("rh")],We);let Qe=class{constructor(t){this.Ld=t}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("RefBindingRenderer","render",Fe.call(arguments));const r=ensureExpression(this.Ld,n.from,1280);addBinding(s,new Ref(r,getTarget(e),i)),Tracer.enabled&&Tracer.lt()}};Qe.inject=[IExpressionParser],Qe=v([instructionRenderer("rj")],Qe);let Ge=class{constructor(t,i){this.Ld=t,this.ot=i}Vt(t,dom,i,s,e,n){let r;Tracer.enabled&&Tracer.rt("InterpolationBindingRenderer","render",Fe.call(arguments));const o=ensureExpression(this.Ld,n.from,2048);addBinding(s,r=o.ir?new MultiInterpolationBinding(this.ot,o,getTarget(e),n.to,BindingMode.Xe,i):new InterpolationBinding(o.sr,o,getTarget(e),n.to,BindingMode.Xe,this.ot,i,1)),Tracer.enabled&&Tracer.lt()}};Ge.inject=[IExpressionParser,IObserverLocator],Ge=v([instructionRenderer("rf")],Ge);let Ze=class{constructor(t,i){this.Ld=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("PropertyBindingRenderer","render",Fe.call(arguments));const r=ensureExpression(this.Ld,n.from,48|n.mode);addBinding(s,new Binding(r,getTarget(e),n.to,n.mode,this.ot,i)),Tracer.enabled&&Tracer.lt()}};Ze.inject=[IExpressionParser,IObserverLocator],Ze=v([instructionRenderer("rg")],Ze);let Xe=class{constructor(t,i){this.Ld=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("IteratorBindingRenderer","render",Fe.call(arguments));const r=ensureExpression(this.Ld,n.from,539);addBinding(s,new Binding(r,getTarget(e),n.to,BindingMode.Xe,this.ot,i)),Tracer.enabled&&Tracer.lt()}};Xe.inject=[IExpressionParser,IObserverLocator],Xe=v([instructionRenderer("rk")],Xe);const DefaultComponents=[ObserverLocator,es,Ne],DefaultResources=[If,Else,Repeat,Replaceable,With,SanitizeValueConverter,DebounceBindingBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,SignalBindingBehavior,PriorityBindingBehavior,ThrottleBindingBehavior,TwoWayBindingBehavior],DefaultRenderers=[Ze,Xe,We,Qe,Ge,Ue,ze,He,Ke,qe],RuntimeBasicConfiguration={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Fi(){return this.register(DI.Fi())}};class InterpolationInstruction{constructor(from,to){this.type="rf",this.from=from,this.to=to}}class OneTimeBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}class ToViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Xe,this.oneTime=0,this.to=to}}class FromViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode._e,this.oneTime=0,this.to=to}}class TwoWayBindingInstruction{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.ur,this.oneTime=0,this.to=to}}class IteratorBindingInstruction{constructor(from,to){this.type="rk",this.from=from,this.to=to}}class CallBindingInstruction{constructor(from,to){this.type="rh",this.from=from,this.to=to}}class RefBindingInstruction{constructor(from){this.type="rj",this.from=from}}class SetPropertyInstruction{constructor(value,to){this.type="re",this.to=to,this.value=value}}class HydrateElementInstruction{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}class HydrateAttributeInstruction{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}class HydrateTemplateController{constructor(def,res,instructions,link,parts){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.parts=parts,this.res=res}}class LetElementInstruction{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}class LetBindingInstruction{constructor(from,to){this.type="ri",this.from=from,this.to=to}}Nt=Object.freeze({CallFunction,connects:t=>32==(32&t.st),observes:t=>64==(64&t.st),callsFunction:t=>128==(128&t.st),hasAncestor:t=>256==(256&t.st),isAssignable:t=>8192==(8192&t.st),isLeftHandSide:t=>1024==(1024&t.st),isPrimary:t=>512==(512&t.st),isResource:t=>32768==(32768&t.st),hasBind,hasUnbind,isLiteral,arePureLiterals,isPureLiteral,BindingBehavior,ValueConverter,Assign,Conditional,AccessThis,AccessScope,AccessMember,AccessKeyed,CallScope,CallMember,Binary,Unary,PrimitiveLiteral,HtmlLiteral:class{constructor(parts){this.st=51,this.assign=PLATFORM.Li,this.parts=parts}evaluate(t,i,s){const e=this.parts;let value,n="";for(let r=0,o=e.length;o>r;++r)null!=(value=e[r].evaluate(t,i,s))&&(n+=value);return n}connect(t,i,s){for(let e=0,n=this.parts.length;n>e;++e)this.parts[e].connect(t,i,s)}accept(t){return t.jd(this)}},ArrayLiteral,ObjectLiteral,Template,TaggedTemplate,ArrayBindingPattern,ObjectBindingPattern,BindingIdentifier,ForOfStatement,Interpolation,get Binding(){return Binding},Call,connectable,IExpressionParser,get BindingType(){return BindingType},MultiInterpolationBinding,get InterpolationBinding(){return InterpolationBinding},get LetBinding(){return LetBinding},Ref,get ArrayObserver(){return ArrayObserver},enableArrayObservation,disableArrayObservation(){for(const t of ks)1==ms[t].dt&&def(ms,t,{...Is,value:Os[t]})},get MapObserver(){return MapObserver},enableMapObservation,disableMapObservation(){for(const t of Ms)1==Ls[t].dt&&Ns(Ls,t,{...Fs,value:$s[t]})},get SetObserver(){return SetObserver},enableSetObservation,disableSetObservation(){for(const t of Gs)1==Hs[t].dt&&_s(Hs,t,{...Xs,value:Qs[t]})},BindingContext,Scope,OverrideContext,get CollectionLengthObserver(){return CollectionLengthObserver},get CollectionSizeObserver(){return CollectionSizeObserver},computed:t=>(function(i,s){(i.computed||(i.computed={}))[s]=t}),createComputedObserver,get CustomSetterObserver(){return CustomSetterObserver},get GetterObserver(){return GetterObserver},IDirtyChecker,get DirtyCheckProperty(){return DirtyCheckProperty},DirtyCheckSettings,IObserverLocator,ITargetObserverLocator,ITargetAccessorLocator,getCollectionObserver,ObserverLocator,PrimitiveObserver,PropertyAccessor,get ProxyObserver(){return ProxyObserver},get SelfObserver(){return SelfObserver},get SetterObserver(){return SetterObserver},ISignaler,subscriberCollection,collectionSubscriberCollection,proxySubscriberCollection,bindingBehavior:t=>i=>BindingBehaviorResource.Ve(t,i),BindingBehaviorResource,BindingModeBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,TwoWayBindingBehavior,DebounceBindingBehavior,PriorityBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,customAttribute:t=>i=>CustomAttributeResource.Ve(t,i),CustomAttributeResource,dynamicOptions:t=>void 0===t?st:st(t),templateController:t=>i=>CustomAttributeResource.Ve("string"==typeof t?{isTemplateController:1,name:t}:{isTemplateController:1,...t},i),If,Else,Repeat,Replaceable,With,containerless:t=>void 0===t?rt:rt(t),customElement:t=>i=>CustomElementResource.Ve(t,i),CustomElementResource,IProjectorLocator,useShadowDOM(t){function i(t){return t.shadowOptions=s,t}const s="function"!=typeof t&&t?t:ke;return"function"==typeof t?i(t):i},valueConverter:t=>i=>ValueConverterResource.Ve(t,i),ValueConverterResource,ISanitizer,SanitizeValueConverter,bindable(t,i){let s;const e=function(t,i){arguments.length>1&&(s.kl=i),Bindable.for(t.constructor).add(s)};return arguments.length>1?(s={},void e(t,i)):"string"==typeof t?(s={},e):(s=t||{},e)},Bindable,Controller,ViewFactory,Aurelia,IDOMInitializer,CompositionRoot,IfRegistration:If,ElseRegistration:Else,RepeatRegistration:Repeat,ReplaceableRegistration:Replaceable,WithRegistration:With,SanitizeValueConverterRegistration:SanitizeValueConverter,DebounceBindingBehaviorRegistration:DebounceBindingBehavior,OneTimeBindingBehaviorRegistration:OneTimeBindingBehavior,ToViewBindingBehaviorRegistration:ToViewBindingBehavior,FromViewBindingBehaviorRegistration:FromViewBindingBehavior,PriorityBindingBehaviorRegistration:PriorityBindingBehavior,SignalBindingBehaviorRegistration:SignalBindingBehavior,ThrottleBindingBehaviorRegistration:ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration:TwoWayBindingBehavior,RefBindingRendererRegistration:Qe,CallBindingRendererRegistration:We,CustomAttributeRendererRegistration:He,CustomElementRendererRegistration:ze,InterpolationBindingRendererRegistration:Ge,IteratorBindingRendererRegistration:Xe,LetElementRendererRegistration:qe,PropertyBindingRendererRegistration:Ze,SetPropertyRendererRegistration:Ue,TemplateControllerRendererRegistration:Ke,DefaultResources,IObserverLocatorRegistration:ObserverLocator,ILifecycleRegistration:es,IRendererRegistration:Ne,RuntimeBasicConfiguration,buildTemplateDefinition,HooksDefinition,isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},ITargetedInstruction,get TargetedInstructionType(){return TargetedInstructionType},DOM,INode,IRenderLocation,IDOM,NodeSequence,get BindingMode(){return BindingMode},get BindingStrategy(){return BindingStrategy},get ExpressionKind(){return ExpressionKind},get Hooks(){return Hooks},get LifecycleFlags(){return LifecycleFlags},get State(){return Dt},CallBindingInstruction,FromViewBindingInstruction,HydrateAttributeInstruction,HydrateElementInstruction,HydrateTemplateController,InterpolationInstruction,IteratorBindingInstruction,LetBindingInstruction,LetElementInstruction,OneTimeBindingInstruction,RefBindingInstruction,SetPropertyInstruction,ToViewBindingInstruction,TwoWayBindingInstruction,get ViewModelKind(){return ViewModelKind},ILifecycle,IController,IViewFactory,get Priority(){return Priority},AggregateContinuationTask,TerminalTask:class{constructor(t){this.done=0,this.tu=t.then instanceof Function?t:t._l(),this.tu.then(()=>{this.done=1}).catch(t=>{throw t})}Xl(){return 0}cancel(){}_l(){return this.tu}},AggregateTerminalTask:class{constructor(t){this.done=0,this.tu=Promise.all(t.map(t=>t._l())).then(()=>{this.done=1})}Xl(){return 0}cancel(){}_l(){return this.tu}},ContinuationTask,LifecycleTask,PromiseTask,get CollectionKind(){return CollectionKind},get DelegationStrategy(){return DelegationStrategy},isIndexMap:value=>value instanceof Array&&1==value.isIndexMap,copyIndexMap(t,i){const{length:s}=t,e=Array(s);let n=0;for(;s>n;)e[n]=t[n],++n;return e.at=void 0!==i?i.slice(0):void 0!==t.at?t.at.slice(0):[],e.isIndexMap=1,e},cloneIndexMap(t){const i=t.slice();return i.at=t.at.slice(),i.isIndexMap=1,i},createIndexMap,instructionRenderer,ensureExpression,addComponent,addBinding,CompiledTemplate,createRenderContext,IInstructionRenderer,IRenderer,IRenderingEngine,ITemplateCompiler,ITemplateFactory,get ViewCompileFlags(){return ViewCompileFlags}});const BindingCommandResource={name:"binding-command",it(name){return`${this.name}:${name}`},ui(t){return t.kind===this},Ve(t,i){const s=i,e=s,n="string"==typeof t?{name:t,target:null}:t;return e.kind=BindingCommandResource,e.description=n,s.register=ot,s}};class OneTimeBindingCommand{constructor(){this.xd=49}compile(t){return new OneTimeBindingInstruction(t.He,ct(t,0))}}BindingCommandResource.Ve("one-time",OneTimeBindingCommand);class ToViewBindingCommand{constructor(){this.xd=50}compile(t){return new ToViewBindingInstruction(t.He,ct(t,0))}}BindingCommandResource.Ve("to-view",ToViewBindingCommand);class FromViewBindingCommand{constructor(){this.xd=51}compile(t){return new FromViewBindingInstruction(t.He,ct(t,0))}}BindingCommandResource.Ve("from-view",FromViewBindingCommand);class TwoWayBindingCommand{constructor(){this.xd=52}compile(t){return new TwoWayBindingInstruction(t.He,ct(t,0))}}BindingCommandResource.Ve("two-way",TwoWayBindingCommand);const _e=["","$1","$2","","$4","","$6"],Je={bind:BindingMode.Xe,Vd:BindingMode.oneTime,$d:BindingMode.Xe,Md:BindingMode._e,Dd:BindingMode.ur};class DefaultBindingCommand{constructor(){this.xd=53,this.$1=OneTimeBindingCommand.prototype.compile,this.$2=ToViewBindingCommand.prototype.compile,this.$4=FromViewBindingCommand.prototype.compile,this.$6=TwoWayBindingCommand.prototype.compile}compile(t){return this[_e[getMode(t)]](t)}}BindingCommandResource.Ve("bind",DefaultBindingCommand);class CallBindingCommand{constructor(){this.xd=153}compile(t){return new CallBindingInstruction(t.He,ct(t,1))}}BindingCommandResource.Ve("call",CallBindingCommand);class ForBindingCommand{constructor(){this.xd=539}compile(t){return new IteratorBindingInstruction(t.He,ct(t,0))}}BindingCommandResource.Ve("for",ForBindingCommand),(function(Access){Access[Access.Fd=0]="Reset",Access[Access.Nd=511]="Ancestor",Access[Access.Ud=512]="This",Access[Access.Scope=1024]="Scope",Access[Access.zd=2048]="Member",Access[Access.Hd=4096]="Keyed"})(Access||(Access={})),(function(Precedence){Precedence[Precedence.Kd=61]="Variadic",Precedence[Precedence.Assign=62]="Assign",Precedence[Precedence.Conditional=63]="Conditional",Precedence[Precedence.qd=64]="LogicalOR",Precedence[Precedence.Wd=128]="LogicalAND",Precedence[Precedence.Qd=192]="Equality",Precedence[Precedence.Gd=256]="Relational",Precedence[Precedence.Zd=320]="Additive",Precedence[Precedence.Xd=384]="Multiplicative",Precedence[Precedence.Binary=448]="Binary",Precedence[Precedence._d=449]="LeftHandSide",Precedence[Precedence.Jd=450]="Primary",Precedence[Precedence.Unary=451]="Unary"})(Precedence||(Precedence={})),(function(t){t[t.Yd=1572864]="EOF",t[t.tf=1048576]="ExpressionTerminal",t[t.if=524288]="AccessScopeTerminal",t[t.sf=262144]="ClosingToken",t[t.ef=131072]="OpeningToken",t[t.nf=65536]="BinaryOp",t[t.rf=32768]="UnaryOp",t[t._d=16384]="LeftHandSide",t[t.hf=12288]="StringOrNumericLiteral",t[t.cf=8192]="NumericLiteral",t[t.lf=4096]="StringLiteral",t[t.uf=3072]="IdentifierName",t[t.af=2048]="Keyword",t[t.df=1024]="Identifier",t[t.ff=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Xi=63]="Type",t[t.vf=2048]="FalseKeyword",t[t.gf=2049]="TrueKeyword",t[t.bf=2050]="NullKeyword",t[t.pf=2051]="UndefinedKeyword",t[t.mf=3076]="ThisScope",t[t.wf=3077]="ParentScope",t[t.yf=671750]="OpenParen",t[t.Cf=131079]="OpenBrace",t[t.Tf=16392]="Dot",t[t.Af=1835017]="CloseBrace",t[t.Rf=1835018]="CloseParen",t[t.Bf=1572875]="Comma",t[t.Of=671756]="OpenBracket",t[t.kf=1835021]="CloseBracket",t[t.Sf=1572878]="Colon",t[t.Pf=1572879]="Question",t[t.Ef=1572880]="Ampersand",t[t.Lf=1572883]="Bar",t[t.jf=1638548]="BarBar",t[t.xf=1638613]="AmpersandAmpersand",t[t.Vf=1638678]="EqualsEquals",t[t.$f=1638679]="ExclamationEquals",t[t.Mf=1638680]="EqualsEqualsEquals",t[t.Df=1638681]="ExclamationEqualsEquals",t[t.Ff=1638746]="LessThan",t[t.Nf=1638747]="GreaterThan",t[t.Uf=1638748]="LessThanEquals",t[t.zf=1638749]="GreaterThanEquals",t[t.Hf=1640798]="InKeyword",t[t.Kf=1640799]="InstanceOfKeyword",t[t.qf=623008]="Plus",t[t.Wf=623009]="Minus",t[t.Qf=34850]="TypeofKeyword",t[t.Gf=34851]="VoidKeyword",t[t.Zf=1638884]="Asterisk",t[t.Xf=1638885]="Percent",t[t._f=1638886]="Slash",t[t.Jf=1048615]="Equals",t[t.Yf=32808]="Exclamation",t[t.tv=540713]="TemplateTail",t[t.iv=540714]="TemplateContinuation",t[t.sv=1051179]="OfKeyword"})(Ut||(Ut={})),(function(Char){Char[Char.ev=0]="Null",Char[Char.nv=8]="Backspace",Char[Char.rv=9]="Tab",Char[Char.hv=10]="LineFeed",Char[Char.ov=11]="VerticalTab",Char[Char.cv=12]="FormFeed",Char[Char.lv=13]="CarriageReturn",Char[Char.uv=32]="Space",Char[Char.Yf=33]="Exclamation",Char[Char.av=34]="DoubleQuote",Char[Char.dv=36]="Dollar",Char[Char.Xf=37]="Percent",Char[Char.Ef=38]="Ampersand",Char[Char.fv=39]="SingleQuote",Char[Char.yf=40]="OpenParen",Char[Char.Rf=41]="CloseParen",Char[Char.Zf=42]="Asterisk",Char[Char.qf=43]="Plus",Char[Char.Bf=44]="Comma",Char[Char.Wf=45]="Minus",Char[Char.Tf=46]="Dot",Char[Char._f=47]="Slash",Char[Char.vv=59]="Semicolon",Char[Char.gv=96]="Backtick",Char[Char.Of=91]="OpenBracket",Char[Char.bv=92]="Backslash",Char[Char.kf=93]="CloseBracket",Char[Char.pv=94]="Caret",Char[Char.mv=95]="Underscore",Char[Char.Cf=123]="OpenBrace",Char[Char.Lf=124]="Bar",Char[Char.Af=125]="CloseBrace",Char[Char.Sf=58]="Colon",Char[Char.Ff=60]="LessThan",Char[Char.Jf=61]="Equals",Char[Char.Nf=62]="GreaterThan",Char[Char.Pf=63]="Question",Char[Char.wv=48]="Zero",Char[Char.yv=49]="One",Char[Char.Cv=50]="Two",Char[Char.Tv=51]="Three",Char[Char.Av=52]="Four",Char[Char.Rv=53]="Five",Char[Char.Bv=54]="Six",Char[Char.Ov=55]="Seven",Char[Char.kv=56]="Eight",Char[Char.Sv=57]="Nine",Char[Char.Iv=65]="UpperA",Char[Char.Pv=66]="UpperB",Char[Char.Ev=67]="UpperC",Char[Char.Lv=68]="UpperD",Char[Char.jv=69]="UpperE",Char[Char.xv=70]="UpperF",Char[Char.Vv=71]="UpperG",Char[Char.$v=72]="UpperH",Char[Char.Mv=73]="UpperI",Char[Char.Dv=74]="UpperJ",Char[Char.Fv=75]="UpperK",Char[Char.Nv=76]="UpperL",Char[Char.Uv=77]="UpperM",Char[Char.zv=78]="UpperN",Char[Char.Hv=79]="UpperO",Char[Char.Kv=80]="UpperP",Char[Char.qv=81]="UpperQ",Char[Char.Wv=82]="UpperR",Char[Char.Qv=83]="UpperS",Char[Char.Gv=84]="UpperT",Char[Char.Zv=85]="UpperU",Char[Char.Xv=86]="UpperV",Char[Char._v=87]="UpperW",Char[Char.Jv=88]="UpperX",Char[Char.Yv=89]="UpperY",Char[Char.tg=90]="UpperZ",Char[Char.ig=97]="LowerA",Char[Char.sg=98]="LowerB",Char[Char.eg=99]="LowerC",Char[Char.ng=100]="LowerD",Char[Char.rg=101]="LowerE",Char[Char.hg=102]="LowerF",Char[Char.og=103]="LowerG",Char[Char.cg=104]="LowerH",Char[Char.lg=105]="LowerI",Char[Char.ug=106]="LowerJ",Char[Char.ag=107]="LowerK",Char[Char.dg=108]="LowerL",Char[Char.fg=109]="LowerM",Char[Char.vg=110]="LowerN",Char[Char.gg=111]="LowerO",Char[Char.bg=112]="LowerP",Char[Char.pg=113]="LowerQ",Char[Char.mg=114]="LowerR",Char[Char.wg=115]="LowerS",Char[Char.yg=116]="LowerT",Char[Char.Cg=117]="LowerU",Char[Char.Tg=118]="LowerV",Char[Char.Ag=119]="LowerW",Char[Char.Rg=120]="LowerX",Char[Char.Bg=121]="LowerY",Char[Char.Og=122]="LowerZ"})(Char||(Char={}));const{rt:Ye,lt:tn}=Profiler.us("ExpressionParser"),sn=PrimitiveLiteral.Un,en=PrimitiveLiteral.Nn,nn=PrimitiveLiteral.Fn,rn=PrimitiveLiteral.Dn,hn=AccessThis.rn,on=AccessThis.hn;class ParserState{get Xt(){return this.input.slice(this._t,this.index)}constructor(t){this.index=0,this._t=0,this.lastIndex=0,this.input=t,this.length=t.length,this.Wt=1572864,this.Gt="",this.qt=t.charCodeAt(0),this.Qt=1}}const $state=new ParserState("");(function(t){t[t.kg=100]="InvalidExpressionStart",t[t.Sg=101]="UnconsumedToken",t[t.Ig=102]="DoubleDot",t[t.Pg=103]="InvalidMemberExpression",t[t.Eg=104]="UnexpectedEndOfExpression",t[t.Lg=105]="ExpectedIdentifier",t[t.jg=106]="InvalidForDeclaration",t[t.xg=107]="InvalidObjectLiteralPropertyDefinition",t[t.Vg=108]="UnterminatedQuote",t[t.$g=109]="UnterminatedTemplate",t[t.Mg=110]="MissingExpectedToken",t[t.Dg=111]="UnexpectedCharacter",t[t.Fg=112]="MissingValueConverter",t[t.Ng=113]="MissingBindingBehavior"})(zt||(zt={})),(function(t){t[t.Ug=150]="NotAssignable",t[t.zg=151]="UnexpectedForOf"})(Ht||(Ht={}));const cn=[sn,en,nn,rn,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540713,540714,"of"],ln=Object.create(null);ln.true=2049,ln.null=2050,ln.false=2048,ln.undefined=2051,ln.rn=3076,ln.hn=3077,ln.Tn=1640798,ln.Cn=1640799,ln.xn=34850,ln.jn=34851,ln.of=1051179;const un=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],an=[48,58],dn=t=>{throw Reporter.error(111,{state:t})};dn.Hg=1,mt(null,new Set,[36,0,48,58,65,91,95,0,97,123],1);const fn=new Uint8Array(65535);mt(fn,null,un,1),mt(fn,null,an,1);const vn=Array(65535);vn.fill(dn,0,65535),mt(vn,null,[0,33,127,161],t=>(dt(t),null)),mt(vn,null,un,function(t){for(;fn[dt(t)];);const i=ln[t.Gt=t.Xt];return void 0===i?1024:i}),mt(vn,null,an,t=>ft(t,0)),vn[34]=vn[39]=(t=>(function(t){const i=t.qt;dt(t);let s=0;const e=[];let n=t.index;for(;t.qt!==i;)if(92===t.qt)e.push(t.input.slice(n,t.index)),dt(t),s=lt(t.qt),dt(t),e.push(String.fromCharCode(s)),n=t.index;else{if(t.index>=t.length)throw Reporter.error(108,{state:t});dt(t)}const r=t.input.slice(n,t.index);dt(t),e.push(r);const o=e.join("");return t.Gt=o,4096})(t)),vn[96]=(t=>vt(t)),vn[33]=(t=>61!==dt(t)?32808:61!==dt(t)?1638679:(dt(t),1638681)),vn[61]=(t=>61!==dt(t)?1048615:61!==dt(t)?1638678:(dt(t),1638680)),vn[38]=(t=>38!==dt(t)?1572880:(dt(t),1638613)),vn[124]=(t=>124!==dt(t)?1572883:(dt(t),1638548)),vn[46]=(t=>dt(t)>57||48>t.qt?16392:ft(t,1)),vn[60]=(t=>61!==dt(t)?1638746:(dt(t),1638748)),vn[62]=(t=>61!==dt(t)?1638747:(dt(t),1638749)),vn[37]=wt(1638885),vn[40]=wt(671750),vn[41]=wt(1835018),vn[42]=wt(1638884),vn[43]=wt(623008),vn[44]=wt(1572875),vn[45]=wt(623009),vn[47]=wt(1638886),vn[58]=wt(1572878),vn[63]=wt(1572879),vn[91]=wt(671756),vn[93]=wt(1835021),vn[123]=wt(131079),vn[125]=wt(1835017);const IExpressionParserRegistration={register(t){t.ss(IExpressionParser,t=>(Reflect.set(t,"parseCore",parseExpression),t))}},gn=[IExpressionParserRegistration],AtPrefixedTriggerAttributePatternRegistration=AtPrefixedTriggerAttributePattern,ColonPrefixedBindAttributePatternRegistration=ColonPrefixedBindAttributePattern,RefAttributePatternRegistration=RefAttributePattern,DotSeparatedAttributePatternRegistration=DotSeparatedAttributePattern,DefaultBindingSyntax=[RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration],ShortHandBindingSyntax=[AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration],CallBindingCommandRegistration=CallBindingCommand,DefaultBindingCommandRegistration=DefaultBindingCommand,ForBindingCommandRegistration=ForBindingCommand,FromViewBindingCommandRegistration=FromViewBindingCommand,OneTimeBindingCommandRegistration=OneTimeBindingCommand,ToViewBindingCommandRegistration=ToViewBindingCommand,TwoWayBindingCommandRegistration=TwoWayBindingCommand,DefaultBindingLanguage=[DefaultBindingCommandRegistration,OneTimeBindingCommandRegistration,FromViewBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,CallBindingCommandRegistration,ForBindingCommandRegistration],BasicConfiguration={register:t=>RuntimeBasicConfiguration.register(t).register(...gn,...DefaultBindingSyntax,...DefaultBindingLanguage),Fi(){return this.register(DI.Fi())}};class ResourceModel{constructor(t){this.Kg=t,this.qg={},this.Wg={},this.Qg={}}Gg(name){let t=this.qg[name];if(void 0===t){const def=this.Kg.find(CustomElementResource,name);t=null==def?null:(function(def){const t=new ElementInfo(def.name,def.containerless),bindables=def.bindables,defaultBindingMode=BindingMode.Xe;let bindable,i,s,mode;for(i in bindables)void 0!==(bindable=bindables[i]).kl&&(i=bindable.kl),s=void 0!==bindable.Sl?bindable.Sl:kebabCase(i),t.bindables[s]=new BindableInfo(i,mode=void 0!==bindable.mode&&bindable.mode!==BindingMode.default?bindable.mode:defaultBindingMode);return t})(def),this.qg[name]=t}return t}Zg(t){const name=camelCase(t.target);let i=this.Wg[name];if(void 0===i){const def=this.Kg.find(CustomAttributeResource,name);i=null==def?null:(function(def){const t=new AttrInfo(def.name,def.isTemplateController),bindables=def.bindables,defaultBindingMode=void 0!==def.defaultBindingMode&&def.defaultBindingMode!==BindingMode.default?def.defaultBindingMode:BindingMode.Xe;let bindable,i,mode,s=0;for(i in bindables)++s,void 0!==(bindable=bindables[i]).kl&&(i=bindable.kl),t.bindables[i]=new BindableInfo(i,mode=void 0!==bindable.mode&&bindable.mode!==BindingMode.default?bindable.mode:defaultBindingMode),null===t.bindable&&(t.bindable=t.bindables[i]);return null===t.bindable&&(t.bindable=new BindableInfo("value",defaultBindingMode)),(def.Et||s>1)&&(t.Et=1),t})(def),this.Wg[name]=i}return i}Xg(t){const name=t.command;if(null===name)return null;let i=this.Qg[name];if(void 0===i){if(null==(i=this.Kg.create(BindingCommandResource,name)))throw Reporter.error(0);this.Qg[name]=i}return i}}class BindableInfo{constructor(t,mode){this.Ht=t,this.mode=mode}}class ElementInfo{constructor(name,containerless){this.name=name,this.containerless=containerless,this.bindables={}}}class AttrInfo{constructor(name,isTemplateController){this.name=name,this.bindables={},this.bindable=null,this.isTemplateController=isTemplateController,this.Et=0}}(function(SymbolFlags){SymbolFlags[SymbolFlags.type=511]="type",SymbolFlags[SymbolFlags.isTemplateController=1]="isTemplateController",SymbolFlags[SymbolFlags._g=2]="isReplacePart",SymbolFlags[SymbolFlags.Jg=4]="isCustomAttribute",SymbolFlags[SymbolFlags.Yg=8]="isPlainAttribute",SymbolFlags[SymbolFlags.tb=16]="isCustomElement",SymbolFlags[SymbolFlags.ib=32]="isLetElement",SymbolFlags[SymbolFlags.sb=64]="isPlainElement",SymbolFlags[SymbolFlags.eb=128]="isText",SymbolFlags[SymbolFlags.gr=256]="isBinding",SymbolFlags[SymbolFlags.nb=512]="hasMarker",SymbolFlags[SymbolFlags.rb=1024]="hasTemplate",SymbolFlags[SymbolFlags.hasAttributes=2048]="hasAttributes",SymbolFlags[SymbolFlags.hb=4096]="hasBindings",SymbolFlags[SymbolFlags.hasChildNodes=8192]="hasChildNodes",SymbolFlags[SymbolFlags.ob=16384]="hasParts"})(SymbolFlags||(SymbolFlags={}));class TemplateControllerSymbol{get Nt(){return null==this.cb&&(this.cb=[],this.flags|=4096),this.cb}get parts(){return null==this.lb&&(this.lb=[],this.flags|=16384),this.lb}constructor(dom,t,i,s){this.flags=513,this.res=i.name,this.Oe=s,this.ub=null,this.Kt=t,this.template=null,this.templateController=null,this.marker=yt(dom),this.cb=null,this.lb=null}}class ReplacePartSymbol{constructor(name){this.flags=2,this.name=name,this.ub=null,this.parent=null,this.template=null}}class CustomAttributeSymbol{get Nt(){return null==this.cb&&(this.cb=[],this.flags|=4096),this.cb}constructor(t,i){this.flags=4,this.res=i.name,this.Kt=t,this.cb=null}}class PlainAttributeSymbol{constructor(t,i,s){this.flags=8,this.Kt=t,this.command=i,this.He=s}}class BindingSymbol{constructor(t,bindable,i,s,e){this.flags=256,this.command=t,this.bindable=bindable,this.He=i,this.vi=s,this.target=e}}class CustomElementSymbol{get attributes(){return null==this.ab&&(this.ab=[],this.flags|=2048),this.ab}get Nt(){return null==this.cb&&(this.cb=[],this.flags|=4096),this.cb}get childNodes(){return null==this.fb&&(this.fb=[],this.flags|=8192),this.fb}get parts(){return null==this.lb&&(this.lb=[],this.flags|=16384),this.lb}constructor(dom,t,i){this.flags=16,this.res=i.name,this.ub=t,this.bindables=i.bindables,this.vb=1,this.templateController=null,i.containerless?(this.gb=1,this.marker=yt(dom),this.flags|=512):(this.gb=0,this.marker=null),this.ab=null,this.cb=null,this.fb=null,this.lb=null}}class LetElementSymbol{get Nt(){return null==this.cb&&(this.cb=[],this.flags|=4096),this.cb}constructor(dom,t){this.flags=544,this.ub=t,this.toViewModel=0,this.marker=yt(dom),this.cb=null}}class PlainElementSymbol{get attributes(){return null==this.ab&&(this.ab=[],this.flags|=2048),this.ab}get childNodes(){return null==this.fb&&(this.fb=[],this.flags|=8192),this.fb}constructor(t){this.flags=64,this.ub=t,this.vb=0,this.templateController=null,this.ab=null,this.fb=null}}class TextSymbol{constructor(dom,t,i){this.flags=640,this.ub=t,this.Cc=i,this.marker=yt(dom)}}Kt=Object.freeze({AttrSyntax,IAttributeParser,AtPrefixedTriggerAttributePattern,attributePattern,ColonPrefixedBindAttributePattern,DotSeparatedAttributePattern,IAttributePattern,Interpretation,ISyntaxInterpreter,RefAttributePattern,bindingCommand:t=>i=>BindingCommandResource.Ve(t,i),BindingCommandResource,CallBindingCommand,DefaultBindingCommand,ForBindingCommand,FromViewBindingCommand,getMode,getTarget:ct,OneTimeBindingCommand,ToViewBindingCommand,TwoWayBindingCommand,IExpressionParserRegistration,DefaultComponents:gn,RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration,DefaultBindingSyntax,AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration,ShortHandBindingSyntax,CallBindingCommandRegistration,DefaultBindingCommandRegistration,ForBindingCommandRegistration,FromViewBindingCommandRegistration,OneTimeBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,DefaultBindingLanguage,BasicConfiguration,get Access(){return Access},get Precedence(){return Precedence},get Char(){return Char},parseExpression,parse,ParserState,ResourceModel,BindableInfo,ElementInfo,AttrInfo,BindingSymbol,CustomAttributeSymbol,CustomElementSymbol,LetElementSymbol,PlainAttributeSymbol,PlainElementSymbol,ReplacePartSymbol,get SymbolFlags(){return SymbolFlags},TemplateControllerSymbol,TextSymbol});const bn=[].slice;class Listener{constructor(dom,t,i,s,e,preventDefault,n,r){this.dom=dom,this.$state=0,this.bb=i,this.We=r,this.preventDefault=preventDefault,this.Do=s,this.target=e,this.pb=t,this.mb=n}Wo(t){Tracer.enabled&&Tracer.rt("Listener","callSource",bn.call(arguments));const i=this.$scope.Ae;i.wb=t;const s=this.Do.evaluate(2097152,this.$scope,this.We);return Reflect.deleteProperty(i,"$event"),1!=s&&this.preventDefault&&t.preventDefault(),Tracer.enabled&&Tracer.lt(),s}hi(t){this.Wo(t)}Ho(t,i){if(Tracer.enabled&&Tracer.rt("Listener","$bind",bn.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Ko(4096|t)}this.$state|=1,this.$scope=i;const s=this.Do;hasBind(s)&&s.bind(t,i,this),this.yb=this.mb.addEventListener(this.dom,this.target,this.pb,this,this.bb),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Ko(t){if(Tracer.enabled&&Tracer.rt("Listener","$unbind",bn.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.lt());this.$state|=2;const i=this.Do;hasUnbind(i)&&i.Qe(t,this.$scope,this),this.$scope=null,this.yb.Dt(),this.yb=null,this.$state&=-7,Tracer.enabled&&Tracer.lt()}ut(t,i,s){}J(t,i,s){}}let pn=class{constructor(t,i,s,e,n){this.ot=i,this.ae=t,this.de=s,this.fe=e,this.Cb=n,this.ve=null,this.oldValue=null,this.ya=0,this.xh=12288}ne(){return this.ve}ee(t,i){this.ve=t,this.ya=t!==this.oldValue,(4096&i)>0&&this.Oa(i)}Oa(t){if(this.ya){this.ya=0;const{ve:t}=this;switch(this.oldValue=t,this.Cb){case"class":t?this.de.classList.add(this.fe):this.de.classList.remove(this.fe);break;case"style":{let i="",s=t;"string"==typeof s&&s.includes("!important")&&(i="important",s=s.replace("!important","")),this.de.style.setProperty(this.fe,s,i)}}}}ti(t){let i=0;for(let s=0,e=t.length;e>s;++s){const e=t[s];if("attributes"===e.type&&e.attributeName===this.fe){i=1;break}}if(i){let t;switch(this.Cb){case"class":t=this.de.classList.contains(this.fe);break;case"style":t=this.de.style.getPropertyValue(this.fe);break;default:throw Error(`Unsupported targetAttribute: ${this.Cb}`)}if(t!==this.ve){const{ve:i}=this;this.ve=this.oldValue=t,this.ya=0,this.g(t,i,131072)}}}subscribe(t){this.v()||(this.ve=this.oldValue=this.de.getAttribute(this.fe),mn(this.de,this)),this.o(t)}unsubscribe(t){this.l(t),this.v()||wn(this.de,this)}bind(t){this.ae.jo(this.Oa,this,this.xh)}Qe(t){this.ae.xo(this.Oa,this)}};pn=v([subscriberCollection()],pn);const mn=(t,i)=>{void 0===t.Tb&&(t.Tb=new Set),void 0===t.Ab&&(t.Ab=DOM.Nl(t,yn,{attributes:1})),t.Tb.add(i)},wn=(t,i)=>{const s=t.Tb;return s.delete(i)?(0===s.size&&(t.Ab.disconnect(),t.Ab=void 0),1):0},yn=t=>{t[0].target.Tb.forEach(Ct,t)},Cn=[].slice,{oneTime:Tn,Xe:An,_e:Rn}=BindingMode,Bn=An|Tn;let AttributeBinding=class{constructor(t,i,s,e,mode,n,r){connectable.Mo(this),this.$state=0,this.$lifecycle=r.get(ILifecycle),this.$scope=null,this.We=r,this.mode=mode,this.ot=n,this.Do=t,this.target=i,this.Cb=s,this.Fo=e,this.ge=0}Uo(value,t){this.No.ee(value,16|(t|=this.ge))}zo(value,t){this.Do.assign(32|(t|=this.ge),this.$scope,this.We,value)}J(t,i,s){if(Tracer.enabled&&Tracer.rt("Binding","handleChange",Cn.call(arguments)),4&this.$state){if(s|=this.ge,this.mode===BindingMode._e&&(s&=-17,s|=32),16&s){const i=this.No.ne();return(10082!==this.Do.st||this.nt>1)&&(t=this.Do.evaluate(s,this.$scope,this.We)),t!==i&&this.Uo(t,s),0==(this.mode&Tn)&&(this.version++,this.Do.connect(s,this.$scope,this),this.unobserve(0)),void(Tracer.enabled&&Tracer.lt())}if(32&s)return t!==this.Do.evaluate(s,this.$scope,this.We)&&this.zo(t,s),void(Tracer.enabled&&Tracer.lt());throw Reporter.error(15,s)}Tracer.enabled&&Tracer.lt()}Ho(t,i){if(Tracer.enabled&&Tracer.rt("Binding","$bind",Cn.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.Ko(4096|t)}this.$state|=1,this.ge=536870927&t,this.$scope=i;let s=this.Do;hasBind(s)&&s.bind(t,i,this);let e=this.No;e||(e=this.No=new pn(this.$lifecycle,this.ot,this.target,this.Fo,this.Cb)),e.bind&&e.bind(t),s=this.Do,this.mode&Bn&&this.Uo(s.evaluate(t,i,this.We),t),this.mode&An&&s.connect(t,i,this),this.mode&Rn&&(e[this.id]|=32,e.subscribe(this)),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}Ko(t){Tracer.enabled&&Tracer.rt("Binding","$unbind",Cn.call(arguments)),4&this.$state?(this.$state|=2,this.ge=0,hasUnbind(this.Do)&&this.Do.Qe(t,this.$scope,this),this.$scope=null,this.No.Qe&&this.No.Qe(t),this.No.unsubscribe&&(this.No.unsubscribe(this),this.No[this.id]&=-33),this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.lt()):Tracer.enabled&&Tracer.lt()}connect(t){Tracer.enabled&&Tracer.rt("Binding","connect",Cn.call(arguments)),4&this.$state&&this.Do.connect(2097152|(t|=this.ge),this.$scope,this),Tracer.enabled&&Tracer.lt()}};AttributeBinding=v([connectable()],AttributeBinding);class AttributeNSAccessor{constructor(t,i,s,e){this.ae=t,this.de=i,this.fe=s,this.ve=null,this.oldValue=null,this.Rb=e,this.ya=0,this.xh=12288}ne(){return this.ve}ee(t,i){this.ve=t,this.ya=t!==this.oldValue,(4096&i)>0&&this.Oa(i)}Oa(t){if(this.ya){this.ya=0;const{ve:t}=this;this.oldValue=t,null==t?this.de.removeAttributeNS(this.Rb,this.fe):this.de.setAttributeNS(this.Rb,this.fe,t)}}bind(t){this.ae.jo(this.Oa,this,this.xh),this.ve=this.oldValue=this.de.getAttributeNS(this.Rb,this.fe)}Qe(t){this.ae.xo(this.Oa,this)}}let CheckedObserver=class{constructor(t,i,s,e){this.ae=t,this.ot=i,this.yb=s,this.de=e,this.ve=void 0,this.oldValue=void 0,this.ya=0,this.xh=12288,this.Bb=void 0,this.Ob=void 0}ne(){return this.ve}ee(t,i){this.ve=t,this.ya=t!==this.oldValue,(4096&i)>0&&this.Oa(i)}Oa(t){if(this.ya){this.ya=0;const{ve:i}=this;this.oldValue=i,void 0===this.Ob&&(void 0!==this.de.Se&&(void 0!==this.de.Se.kb?this.Ob=this.de.Se.kb:void 0!==this.de.Se.value&&(this.Ob=this.de.Se.value)),void 0!==this.Ob&&this.Ob.subscribe(this)),void 0!==this.Bb&&(this.Bb.$(this),this.Bb=void 0),"checkbox"===this.de.type&&Array.isArray(i)&&(this.Bb=this.ot.Gc(t,i),this.Bb.V(this)),this.Sb()}}tt(t,i){const{ve:s,oldValue:e}=this;(4096&i)>0?(this.oldValue=s,this.Sb()):this.ya=1,this.g(s,e,i)}J(t,i,s){(4096&s)>0?this.Sb():this.ya=1,this.g(t,i,s)}Sb(){const{ve:t,de:i}=this,s=i.hasOwnProperty("model")?i.kb:i.value,e=void 0!==i.Ib?i.Ib:Tt;i.checked="radio"===i.type?!!e(t,s):1==t?1:Array.isArray(t)?-1!==t.findIndex(t=>!!e(t,s)):0}hi(){this.oldValue=this.ve;let{ve:t}=this;const{de:i}=this,s=i.hasOwnProperty("model")?i.kb:i.value;let e;const n=void 0!==i.Ib?i.Ib:Tt;if("checkbox"===i.type){if(Array.isArray(t))return e=t.findIndex(t=>!!n(t,s)),void(i.checked&&-1===e?t.push(s):i.checked||-1===e||t.splice(e,1));t=i.checked}else{if(!i.checked)return;t=s}this.ve=t,this.g(this.ve,this.oldValue,655360)}bind(t){this.ae.jo(this.Oa,this,this.xh),this.ve=this.de.checked}Qe(t){void 0!==this.Bb&&(this.Bb.$(this),this.Bb=void 0),void 0!==this.Ob&&this.Ob.unsubscribe(this),this.ae.xo(this.Oa,this)}subscribe(t){this.v()||this.yb.subscribe(this.de,this),this.o(t)}unsubscribe(t){this.l(t),this.v()||this.yb.Dt()}};CheckedObserver=v([subscriberCollection()],CheckedObserver);class ClassAttributeAccessor{constructor(t,i){this.ae=t,this.de=i,this.ve="",this.oldValue="",this.ll=1,this.Pb={},this.version=0,this.Eb=0,this.ya=0,this.xh=12288}ne(){return this.ve}ee(t,i){this.ve=t,this.ya=t!==this.oldValue,(4096&i)>0&&this.Oa(i)}Oa(t){if(this.ya){this.ya=0;const{ve:t,Pb:i}=this;let s,name,{version:e}=this;if(this.oldValue=t,t.length){const n=this.de;for(let r=0,o=(s=t.split(/\s+/)).length;o>r;r++)(name=s[r]).length&&(i[name]=e,n.classList.add(name))}if(this.Pb=i,this.version+=1,0===e)return;for(name in e-=1,i)i.hasOwnProperty(name)&&i[name]===e&&this.de.classList.remove(name)}}bind(t){this.ae.jo(this.Oa,this,this.xh)}Qe(t){this.ae.xo(this.Oa,this)}}class DataAttributeAccessor{constructor(t,i,s){this.ae=t,this.de=i,this.fe=s,this.ve=null,this.oldValue=null,this.ya=0,this.xh=12288}ne(){return this.ve}ee(t,i){this.ve=t,this.ya=t!==this.oldValue,(4096&i)>0&&this.Oa(i)}Oa(t){if(this.ya){this.ya=0;const{ve:t}=this;this.oldValue=t,null==t?this.de.removeAttribute(this.fe):this.de.setAttribute(this.fe,t)}}bind(t){this.ae.jo(this.Oa,this,this.xh),this.ve=this.oldValue=this.de.getAttribute(this.fe)}Qe(t){this.ae.xo(this.Oa,this)}}class ElementPropertyAccessor{constructor(t,i,s){this.ae=t,this.de=i,this.fe=s,this.ve=void 0,this.oldValue=void 0,this.ya=0,this.xh=12288}ne(){return this.ve}ee(t,i){this.ve=t,this.ya=t!==this.oldValue,(4096&i)>0&&this.Oa(i)}Oa(t){if(this.ya){this.ya=0;const{ve:t}=this;this.oldValue=t,this.de[this.fe]=t}}bind(t){this.ae.jo(this.Oa,this,this.xh),this.ve=this.oldValue=this.de[this.fe]}Qe(t){this.ae.xo(this.Oa,this)}}class ListenerTracker{constructor(dom,t,i,s){this.dom=dom,this.Lb=s,this.count=0,this.jb=t,this.listener=i}xb(){this.count++,1===this.count&&this.dom.addEventListener(this.jb,this.listener,null,this.Lb)}Vb(){this.count--,0===this.count&&this.dom.removeEventListener(this.jb,this.listener,null,this.Lb)}Dt(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.jb,this.listener,null,this.Lb))}}class DelegateOrCaptureSubscription{constructor(t,i,s,e){this.$b=t,this.La=i,this.pb=s,i[s]=e}Dt(){this.$b.Vb(),this.La[this.pb]=null}}class TriggerSubscription{constructor(dom,t,i,s){this.dom=dom,this.target=t,this.pb=i,this.ki=s,dom.addEventListener(i,s,t)}Dt(){this.dom.removeEventListener(this.pb,this.ki,this.target)}}class EventSubscriber{constructor(dom,t){this.dom=dom,this.Mb=t,this.target=null,this.yb=null}subscribe(t,i){this.target=t,this.yb=i;const s=this.dom.addEventListener,e=this.Mb;for(let n=0,r=e.length;r>n;++n)s(e[n],i,t)}Dt(){const t=this.target,i=this.yb,s=this.Mb,e=this.dom.removeEventListener;for(let n=0,r=s.length;r>n;++n)e(s[n],i,t);this.target=this.yb=null}}const IEventManager=DI.zi("IEventManager").qi(t=>t.singleton(EventManager));class EventManager{constructor(){this.Db={},this.Fb={},this.Db={},this.Fb={}}addEventListener(dom,t,i,s,strategy){let e,n,r;if(strategy===DelegationStrategy.Ic){(r=(e=this.Db)[i]||(e[i]=new ListenerTracker(dom,i,Ot,0))).xb();const n=t.oi||(t.oi={});return new DelegateOrCaptureSubscription(r,n,i,s)}if(strategy===DelegationStrategy.Sc){(r=(n=this.Fb)[i]||(n[i]=new ListenerTracker(dom,i,Bt,1))).xb();const e=t.ri||(t.ri={});return new DelegateOrCaptureSubscription(r,e,i,s)}return new TriggerSubscription(dom,t,i,s)}Dt(){let t;const{Db:i,Fb:s}=this;for(t in i)i[t].Dt();for(t in s)s[t].Dt()}}const On={Nb:1,Ub:1,zb:1};let SelectValueObserver=class{constructor(t,i,dom,s,e){this.ae=t,this.ot=i,this.dom=dom,this.de=e,this.yb=s,this.ve=void 0,this.oldValue=void 0,this.ya=0,this.xh=12288,this.Bb=void 0,this.Hb=void 0,this.Kb=this.Kb.bind(this)}ne(){return this.ve}ee(t,i){this.ve=t,this.ya=t!==this.oldValue,(4096&i)>0&&this.Oa(i)}Oa(t){if(this.ya){this.ya=0;const{ve:i}=this;this.oldValue=i;const s=Array.isArray(i);if(!s&&null!=i&&this.de.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.Bb&&(this.Bb.$(this),this.Bb=void 0),s&&(this.Bb=this.ot.Gc(t,i),this.Bb.V(this)),this.qb(),this.jc(t)}}tt(t,i){(4096&i)>0?this.qb():this.ya=1,this.g(this.ve,this.oldValue,i)}J(t,i,s){(4096&s)>0?this.qb():this.ya=1,this.g(t,i,s)}jc(t){if((4096&t)>0)return;const i=this.oldValue,s=this.ve;s!==i&&this.g(s,i,t)}hi(){this.Wb()&&this.g(this.ve,this.oldValue,655360)}qb(t){const{ve:i,de:s}=this,e=Array.isArray(i),n=void 0!==s.Ib?s.Ib:kt,r=s.options;let o=r.length;for(;o-- >0;){const t=r[o],s=t.hasOwnProperty("model")?t.kb:t.value;t.selected=e?-1!==i.findIndex(t=>!!n(s,t)):!!n(s,i)}}Wb(){const t=this.de,i=t.options,s=i.length,e=this.ve;let n=0;if(t.multiple){if(!Array.isArray(e))return 1;let r;const o=t.Ib||kt,c=[];for(;s>n;)(r=i[n]).selected&&c.push(r.hasOwnProperty("model")?r.kb:r.value),++n;for(n=0;e.length>n;){const t=e[n];-1===c.findIndex(i=>!!o(t,i))?e.splice(n,1):++n}for(n=0;c.length>n;){const t=c[n];-1===e.findIndex(i=>!!o(t,i))&&e.push(t),++n}return 0}let value=null;for(;s>n;){const t=i[n];if(t.selected){value=t.hasOwnProperty("model")?t.kb:t.value;break}++n}return this.oldValue=this.ve,this.ve=value,1}bind(){this.Hb=this.dom.Nl(this.de,this.Kb,On),this.ae.jo(this.Oa,this,this.xh)}Qe(){this.Hb.disconnect(),this.Hb=null,this.ae.xo(this.Oa,this),this.Bb&&(this.Bb.$(this),this.Bb=null)}Kb(){this.qb(),this.Wb()&&this.jc(131072)}subscribe(t){this.v()||this.yb.subscribe(this.de,this),this.o(t)}unsubscribe(t){this.l(t),this.v()||this.yb.Dt()}};SelectValueObserver=v([subscriberCollection()],SelectValueObserver);class StyleAttributeAccessor{constructor(t,i){this.ae=t,this.de=i,this.ve="",this.oldValue="",this.Qb={},this.version=0,this.ya=0,this.xh=12288}ne(){return this.de.style.cssText}ee(t,i){this.ve=t,this.ya=t!==this.oldValue,(4096&i)>0&&this.Oa(i)}Oa(t){if(this.ya){this.ya=0;const{ve:t}=this;this.oldValue=t;const i=this.Qb;let s,e=this.version;if(t instanceof Object){let value;for(s in t)t.hasOwnProperty(s)&&(value=t[s],i[s=s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=e,this.setProperty(s,value))}else if("string"==typeof t){const n=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let r;for(;null!=(r=n.exec(t));)(s=r[1])&&(i[s]=e,this.setProperty(s,r[2]))}if(this.Qb=i,this.version+=1,0===e)return;for(s in e-=1,i)i.hasOwnProperty(s)&&i[s]===e&&this.de.style.removeProperty(s)}}setProperty(t,value){let i="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(i="important",value=value.replace("!important","")),this.de.style.setProperty(t,value,i)}bind(t){this.ae.jo(this.Oa,this,this.xh),this.oldValue=this.ve=this.de.style.cssText}Qe(t){this.ae.xo(this.Oa,this)}}const ISVGAnalyzer=DI.zi("ISVGAnalyzer").qi(t=>t.singleton(class{ci(t,i){return 0}}));let ValueAttributeObserver=class{constructor(t,i,s,e){this.ae=t,this.yb=i,this.de=s,this.fe=e,this.ve="",this.oldValue="",this.ya=0,this.xh=12288}ne(){return this.ve}ee(t,i){this.ve=t,this.ya=t!==this.oldValue,(4096&i)>0&&this.Oa(i)}Oa(t){if(this.ya){this.ya=0;const{ve:i,oldValue:s}=this;this.oldValue=i,this.de[this.fe]=null==i?"":i,0==(4096&t)&&this.g(i,s,t)}}hi(){const t=this.oldValue=this.ve,i=this.ve=this.de[this.fe];t!==i&&(this.oldValue=i,this.g(i,t,655360))}subscribe(t){this.v()||(this.yb.subscribe(this.de,this),this.ve=this.oldValue=this.de[this.fe]),this.o(t)}unsubscribe(t){this.l(t),this.v()||this.yb.Dt()}bind(t){this.ae.jo(this.Oa,this,this.xh)}Qe(t){this.ae.xo(this.Oa,this)}};ValueAttributeObserver=v([subscriberCollection()],ValueAttributeObserver);const kn="http://www.w3.org/1999/xlink",Sn="http://www.w3.org/XML/1998/namespace",In="http://www.w3.org/2000/xmlns/",Pn=Object.assign(Object.create(null),{Gb:["actuate",kn],Zb:["arcrole",kn],Xb:["href",kn],_b:["role",kn],Jb:["show",kn],Yb:["title",kn],tp:["type",kn],ip:["lang",Sn],sp:["space",Sn],ep:["xmlns",In],np:["xlink",In]}),En=["change","input"],Ln=["change"],jn=["change","input","blur","keyup","paste"],xn=["scroll"],Vn=Object.assign(Object.create(null),{rp:1,style:1,hp:1,checked:1,value:1,kb:1,Gb:1,Zb:1,Xb:1,_b:1,Jb:1,Yb:1,tp:1,ip:1,sp:1,ep:1,np:1});class TargetObserverLocator{constructor(dom,t){this.dom=dom,this.op=t}static register(t){return Registration.singleton(ITargetObserverLocator,this).register(t)}ht(t,i,s,e,n){switch(n){case"checked":return new CheckedObserver(i,s,new EventSubscriber(this.dom,En),e);case"value":return"SELECT"===e.tagName?new SelectValueObserver(i,s,this.dom,new EventSubscriber(this.dom,Ln),e):new ValueAttributeObserver(i,new EventSubscriber(this.dom,En),e,n);case"files":return new ValueAttributeObserver(i,new EventSubscriber(this.dom,En),e,n);case"textContent":case"innerHTML":return new ValueAttributeObserver(i,new EventSubscriber(this.dom,jn),e,n);case"scrollTop":case"scrollLeft":return new ValueAttributeObserver(i,new EventSubscriber(this.dom,xn),e,n);case"class":return new ClassAttributeAccessor(i,e);case"style":case"css":return new StyleAttributeAccessor(i,e);case"model":return new SetterObserver(i,t,e,n);case"role":return new DataAttributeAccessor(i,e,n);default:if(void 0!==Pn[n]){const t=Pn[n];return new AttributeNSAccessor(i,e,t[0],t[1])}if(St(e,n,this.op))return new DataAttributeAccessor(i,e,n)}return null}wl(t,i,s){return 1==Vn[s]}ml(t,i){return this.dom.ai(i)}}TargetObserverLocator.inject=[IDOM,ISVGAnalyzer];class TargetAccessorLocator{constructor(dom,t){this.dom=dom,this.op=t}static register(t){return Registration.singleton(ITargetAccessorLocator,this).register(t)}qo(t,i,s,e){switch(e){case"textContent":return new ElementPropertyAccessor(i,s,e);case"class":return new ClassAttributeAccessor(i,s);case"style":case"css":return new StyleAttributeAccessor(i,s);case"src":case"href":case"role":return new DataAttributeAccessor(i,s,e);default:if(void 0!==Pn[e]){const t=Pn[e];return new AttributeNSAccessor(i,s,t[0],t[1])}return St(s,e,this.op)?new DataAttributeAccessor(i,s,e):new ElementPropertyAccessor(i,s,e)}}ml(t,i){return this.dom.ai(i)}}TargetAccessorLocator.inject=[IDOM,ISVGAnalyzer];const $n={};class AttrBindingBehavior{bind(t,i,s){s.No=new DataAttributeAccessor(s.We.get(ILifecycle),s.target,s.Fo)}Qe(t,i,s){}}BindingBehaviorResource.Ve("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,i,s){if(!s.Wo||!s.pb)throw Reporter.error(8);s.li=s.Wo,s.Wo=It}Qe(t,i,s){s.Wo=s.li,s.li=null}}BindingBehaviorResource.Ve("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.ot=t}bind(t,i,s,...e){if(0===e.length)throw Reporter.error(9);if(s.mode!==BindingMode.ur&&s.mode!==BindingMode._e)throw Reporter.error(10);this.ge=536870927&t;const n=this.ot.ht(this.ge|t,s.target,s.Fo);if(!n.yb)throw Reporter.error(10);s.No=n,n.cp=s.No.yb,n.yb=new EventSubscriber(s.We.get(IDOM),e)}Qe(t,i,s){s.No.yb.Dt(),s.No.yb=s.No.cp,s.No.cp=null}}UpdateTriggerBindingBehavior.inject=[IObserverLocator],BindingBehaviorResource.Ve("updateTrigger",UpdateTriggerBindingBehavior),(function(HTMLTargetedInstructionType){HTMLTargetedInstructionType.lp="ha",HTMLTargetedInstructionType.up="hb",HTMLTargetedInstructionType.ap="hc",HTMLTargetedInstructionType.dp="hd",HTMLTargetedInstructionType.setAttribute="he"})(HTMLTargetedInstructionType||(HTMLTargetedInstructionType={}));class TextBindingInstruction{constructor(from){this.type="ha",this.from=from}}class TriggerBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=DelegationStrategy.vr,this.to=to}}class DelegateBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Ic,this.to=to}}class CaptureBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Sc,this.to=to}}class SetAttributeInstruction{constructor(value,to){this.type="he",this.to=to,this.value=value}}class AttributeBindingInstruction{constructor(t,from,to){this.type="hc",this.from=from,this.fp=t,this.to=to}}const Mn=[].slice;class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.gi=t,this.vp=void 0}get la(){return void 0===this.vp&&(this.vp=buildTemplateDefinition(null,null,this.gi,null,"string"==typeof this.gi,null,this.instructions,this.dependencies)),this.vp}pa(t,i){return t.pa(this.dom,this.la,void 0,i)}gp(t,i,s){return this.wa(i,s).create()}wa(t,i){return t.wa(this.dom,this.la,i)}di(t,instructions,dependencies){this.dom.appendChild(t,this.gi),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}const bindables=["subject","composing"];class Compose{constructor(dom,t,i,s){this.id=nextId("au$component"),this.subject=void 0,this.bp=0,this.dom=dom,this.Su=t,this.Ed=s,this.properties=i.instructions.filter(t=>!bindables.includes(t.to)).reduce((t,i)=>(i.to&&(t[i.to]=i),t),{}),this.hu=LifecycleTask.done,this.pp=void 0,this.view=void 0}static register(t){t.register(Registration.transient("custom-element:au-compose",this)),t.register(Registration.transient(this,this))}lu(t){return this.hu=this.hu.done?this.mp(this.subject,t):new ContinuationTask(this.hu,this.mp,this,this.subject,t),this.hu=this.hu.done?this.Tu(t):new ContinuationTask(this.hu,this.Tu,this,t),this.hu}du(t){this.hu.done?this.fu(t):this.hu=new ContinuationTask(this.hu,this.fu,this,t)}vu(t){null!=this.view&&(this.hu.done?this.view.detach(t):this.hu=new ContinuationTask(this.hu,this.view.detach,this.view,t))}gu(t){return this.pp=void 0,null!=this.view&&(this.hu=this.hu.done?this.view.Qe(t):new ContinuationTask(this.hu,this.view.Qe,this.view,t)),this.hu}bu(t){this.view=void 0}wp(t,i,s){s|=this.kt.flags,this.hu=this.hu.done?this.mp(t,s):new ContinuationTask(this.hu,this.mp,this,t,s)}mp(t,i){if(this.pp===t)return LifecycleTask.done;this.pp=t,this.bp=1;let s=this.yu(i);if(t instanceof Promise){let e;e=s.done?t.then(t=>this.yp(t,i)):s._l().then(()=>t.then(t=>this.yp(t,i))),s=new PromiseTask(e,this.Cu,this,i)}else{const e=this.yp(t,i);s=s.done?this.Cu(e,i):new ContinuationTask(s,this.Cu,this,e,i)}return s.done?this.Cp():s=new ContinuationTask(s,this.Cp,this),s}yu(t){const i=this.view;return null==i?LifecycleTask.done:(i.detach(t),i.Qe(t))}Cu(t,i){if(this.view=t,null==t)return LifecycleTask.done;let s=this.Tu(i);return s.done?this.fu(i):s=new ContinuationTask(s,this.fu,this,i),s}Tu(t){return null!=this.view&&(5&this.kt.state)>0?this.view.bind(t,this.Su.scope):LifecycleTask.done}fu(t){null!=this.view&&(40&this.kt.state)>0&&this.view.Nh(t)}Cp(){this.bp=0}yp(t,i){const s=this.Tp(t,i);if(s)return s.wu(this.kt.Ta.host),s.xa(this.Su.scope),s}Tp(t,i){if(t)return"lockScope"in t?t:"createView"in t?t.gp(i,this.Ed,this.Su.context):"create"in t?t.create():"template"in t?this.Ed.wa(this.dom,t,this.Su.context).create():createElement(this.dom,t,this.properties,void 0===this.kt.Ta?PLATFORM.Ei:this.kt.Ta.children).gp(i,this.Ed,this.Su.context)}}Compose.inject=[IDOM,IController,ITargetedInstruction,IRenderingEngine],Compose.kind=CustomElementResource,Compose.description=Object.freeze({name:"au-compose",template:null,cache:0,build:Object.freeze({compiler:"default",required:0}),bindables:Object.freeze({subject:Bindable.for({bindables:["subject"]}).get().subject,bp:{...Bindable.for({bindables:["composing"]}).get().bp,mode:BindingMode._e}}),instructions:PLATFORM.Ei,dependencies:PLATFORM.Ei,surrogates:PLATFORM.Ei,containerless:1,shadowOptions:null,hasSlots:0,strategy:1,St:Object.freeze(new HooksDefinition(Compose.prototype))}),(function(NodeType){NodeType[NodeType.Element=1]="Element",NodeType[NodeType.Attr=2]="Attr",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATASection=4]="CDATASection",NodeType[NodeType.EntityReference=5]="EntityReference",NodeType[NodeType.Entity=6]="Entity",NodeType[NodeType.ProcessingInstruction=7]="ProcessingInstruction",NodeType[NodeType.Comment=8]="Comment",NodeType[NodeType.Document=9]="Document",NodeType[NodeType.DocumentType=10]="DocumentType",NodeType[NodeType.DocumentFragment=11]="DocumentFragment",NodeType[NodeType.Notation=12]="Notation"})(NodeType||(NodeType={}));class HTMLDOM{constructor(t,i,s,e,n,r){this.window=t,this.document=i,this.Node=s,this.Element=e,this.HTMLElement=n,this.CustomEvent=r,DOM.Kl&&(Reporter.write(1001),DOM.ql()),DOM.initialize(this)}static register(t){return Registration.Pt(IDOM,this).register(t)}addEventListener(t,i,s,e){(s||this.document).addEventListener(t,i,e)}appendChild(t,i){t.appendChild(i)}cloneNode(t,i){return t.cloneNode(0!=i)}Dl(t){if(this.Hl(t))return t;if(null==t.parentNode)throw Reporter.error(52);const i=this.document.createComment("au-end"),s=this.document.createComment("au-start");return t.parentNode.replaceChild(i,t),i.parentNode.insertBefore(s,i),i.Ap=s,s.$nodes=null,i}createDocumentFragment(t){if(null==t)return this.document.createDocumentFragment();if(this.ai(t)){if(void 0!==t.content)return t.content;const i=this.document.createDocumentFragment();return i.appendChild(t),i}return this.Ul(t).content}createElement(name){return this.document.createElement(name)}fetch(t,i){return this.window.fetch(t,i)}Fl(t,i){return new this.CustomEvent(t,i)}dispatchEvent(t){this.document.dispatchEvent(t)}Nl(t,i,s){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>PLATFORM.Ei};const e=new MutationObserver(i);return e.observe(t,s),e}Ul(t){if(null==t)return this.document.createElement("template");const template=this.document.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.document.createTextNode(t)}insertBefore(t,i){i.parentNode.insertBefore(t,i)}zl(t){return"AU-M"===t.nodeName}ai(t){return null!=t&&t.nodeType>0}Hl(t){return"au-end"===t.textContent}Yt(t){t.className="au"}jt(t,i){t.xt(INode,i),t.xt(this.Node,i),t.xt(this.Element,i),t.xt(this.HTMLElement,i)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,i,s,e){(s||this.document).removeEventListener(t,i,e)}setAttribute(t,name,value){t.setAttribute(name,value)}}const Dn=DOM;class Fn{constructor(dom,t){this.Br=0,this.Wl=0,this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new Nn(t)],this.next=void 0,this.Rp=void 0}Ql(){return this.targets}insertBefore(t){this.Wl&&this.Rp?this.Zl():(this.Br=1,t.parentNode.insertBefore(this.firstChild,t))}Gl(t){this.Wl&&this.Rp?this.Zl():(this.Br=1,t.appendChild(this.firstChild))}remove(){this.Br=0,this.firstChild.remove()}Zl(){const t=this.Rp;this.Br=1,t.parentNode.insertBefore(this.firstChild,t)}Dh(){this.Wl=0,this.next=void 0,this.Rp=void 0}link(t){this.Wl=1,this.dom.Hl(t)?this.Rp=t:(this.next=t,this.Bp())}Bp(){this.Rp=void 0!==this.next?this.next.firstChild:void 0}}class FragmentNodeSequence{constructor(dom,t){this.Br=0,this.Wl=0,this.dom=dom,this.Op=t;const i=t.querySelectorAll(".au");let s=0,e=i.length;const targets=this.targets=Array(e);for(;e>s;){const t=i[s];targets[s]="AU-M"===t.nodeName?this.dom.Dl(t):t,++s}const n=t.childNodes;s=0;const childNodes=this.childNodes=Array(e=n.length);for(;e>s;)childNodes[s]=n[s],++s;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.next=void 0,this.Rp=void 0}Ql(){return this.targets}insertBefore(t){if(this.Wl&&this.Rp)this.Zl();else{const i=t.parentNode;if(this.Br){let s=this.firstChild;const e=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,i.insertBefore(s,t),s!==e);)s=n}else this.Br=1,t.parentNode.insertBefore(this.Op,t)}}Gl(t){if(this.Br){let i=this.firstChild;const s=this.lastChild;let e;for(;null!=i&&(e=i.nextSibling,t.appendChild(i),i!==s);)i=e}else this.Br=1,t.appendChild(this.Op)}remove(){if(this.Br){this.Br=0;const t=this.Op,i=this.lastChild;let s,e=this.firstChild;for(;null!==e&&(s=e.nextSibling,t.appendChild(e),e!==i);)e=s}}Zl(){const t=this.Rp,i=t.parentNode;if(this.Br){let s=this.firstChild;const e=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,i.insertBefore(s,t),s!==e);)s=n}else this.Br=1,i.insertBefore(this.Op,t)}Dh(){this.Wl=0,this.next=void 0,this.Rp=void 0}link(t){this.Wl=1,this.dom.Hl(t)?this.Rp=t:(this.next=t,this.Bp())}Bp(){this.Rp=void 0!==this.next?this.next.firstChild:void 0}}class NodeSequenceFactory{constructor(dom,t){this.dom=dom;const i=dom.createDocumentFragment(t),childNodes=i.childNodes;switch(childNodes.length){case 0:return void(this.aa=(()=>NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.kp=0,this.gi=t,void(this.Xi=Fn)}default:this.kp=1,this.gi=i,this.Xi=FragmentNodeSequence}}aa(){return new this.Xi(this.dom,this.gi.cloneNode(this.kp))}}class Nn{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(t=>{t.previousSibling=null,t.childNodes=PLATFORM.Ei,t.nodeName="AU-M",t.nodeType=1})(Nn.prototype);class Un{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITemplateFactory,this).register(t)}create(t,i){return new CompiledTemplate(this.dom,i,new NodeSequenceFactory(this.dom,i.template),t)}}Un.inject=[IDOM];const zn=[].slice;let Hn=class{constructor(t,i){this.Ld=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("TextBindingRenderer","render",zn.call(arguments));const r=e.nextSibling;let o;dom.zl(e)&&dom.remove(e);const c=ensureExpression(this.Ld,n.from,2048);addBinding(s,o=c.ir?new MultiInterpolationBinding(this.ot,c,r,"textContent",BindingMode.Xe,i):new InterpolationBinding(c.sr,c,r,"textContent",BindingMode.Xe,this.ot,i,1)),Tracer.enabled&&Tracer.lt()}};Hn.inject=[IExpressionParser,IObserverLocator],Hn=v([instructionRenderer("ha")],Hn);let Kn=class{constructor(t,i){this.Ld=t,this.mb=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("ListenerBindingRenderer","render",zn.call(arguments));const r=ensureExpression(this.Ld,n.from,80|n.strategy+6);addBinding(s,new Listener(dom,n.to,n.strategy,r,e,n.preventDefault,this.mb,i)),Tracer.enabled&&Tracer.lt()}};Kn.inject=[IExpressionParser,IEventManager],Kn=v([instructionRenderer("hb")],Kn);let qn=class{Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("SetAttributeRenderer","render",zn.call(arguments)),e.setAttribute(n.to,n.value),Tracer.enabled&&Tracer.lt()}};qn=v([instructionRenderer("he")],qn);let Wn=class{constructor(t,i){this.Ld=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("StylePropertyBindingRenderer","render",zn.call(arguments));const r=ensureExpression(this.Ld,n.from,48|BindingMode.Xe);addBinding(s,new Binding(r,e.style,n.to,BindingMode.Xe,this.ot,i)),Tracer.enabled&&Tracer.lt()}};Wn.inject=[IExpressionParser,IObserverLocator],Wn=v([instructionRenderer("hd")],Wn);let Qn=class{constructor(t,i){this.Ld=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("StylePropertyBindingRenderer","render",zn.call(arguments));const r=ensureExpression(this.Ld,n.from,48|BindingMode.Xe);addBinding(s,new AttributeBinding(r,e,n.fp,n.to,BindingMode.Xe,this.ot,i)),Tracer.enabled&&Tracer.lt()}};Qn.inject=[IExpressionParser,IObserverLocator],Qn=v([instructionRenderer("hc")],Qn);const Gn=[].slice,Zn={mode:"open"};class HTMLProjectorLocator{static register(t){return Registration.singleton(IProjectorLocator,this).register(t)}Pa(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw Reporter.error(21);return new ShadowDOMProjector(dom,t,host,def)}return def.containerless?new ContainerlessProjector(dom,t,host):new HostProjector(t,host)}}const Xn={Nb:1};class ShadowDOMProjector{constructor(dom,t,host,i){let shadowOptions;this.dom=dom,this.host=host,this.shadowRoot=host.Sp(shadowOptions=i.shadowOptions instanceof Object&&"mode"in i.shadowOptions?i.shadowOptions:Zn),this.host.kt=t,this.shadowRoot.kt=t}get children(){return this.shadowRoot.childNodes}Ra(t){this.dom.Nl(this.shadowRoot,t,Xn)}Ip(){return this.shadowRoot}ad(t){Tracer.enabled&&Tracer.rt("ShadowDOMProjector","project",Gn.call(arguments)),t.Gl(this.shadowRoot),Tracer.enabled&&Tracer.lt()}dd(t){Tracer.enabled&&Tracer.rt("ShadowDOMProjector","take",Gn.call(arguments)),t.remove(),t.Dh(),Tracer.enabled&&Tracer.lt()}}class ContainerlessProjector{constructor(dom,t,host){this.childNodes=host.childNodes.length?toArray(host.childNodes):PLATFORM.Ei,this.host=dom.Dl(host),this.host.kt=t}get children(){return this.childNodes}Ra(t){new MutationObserver(t).observe(this.host,Xn)}Ip(){return this.host.Pp()}ad(t){Tracer.enabled&&Tracer.rt("ContainerlessProjector","project",Gn.call(arguments)),t.insertBefore(this.host),Tracer.enabled&&Tracer.lt()}dd(t){Tracer.enabled&&Tracer.rt("ContainerlessProjector","take",Gn.call(arguments)),t.remove(),t.Dh(),Tracer.enabled&&Tracer.lt()}}class HostProjector{constructor(t,host){this.host=host,this.host.kt=t}get children(){return this.host.childNodes}Ra(t){}Ip(){return this.host.Pp()}ad(t){Tracer.enabled&&Tracer.rt("HostProjector","project",Gn.call(arguments)),t.Gl(this.host),Tracer.enabled&&Tracer.lt()}dd(t){Tracer.enabled&&Tracer.rt("HostProjector","take",Gn.call(arguments)),t.remove(),t.Dh(),Tracer.enabled&&Tracer.lt()}}const _n=[HTMLProjectorLocator,TargetAccessorLocator,TargetObserverLocator,Un],Jn=[AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose],Yn=[Kn,Qn,qn,Wn,Hn],tr={register:t=>RuntimeBasicConfiguration.register(t).register(..._n,...Jn,...Yn),Fi(){return this.register(DI.Fi())}};qt=Object.freeze({Listener,get AttributeBinding(){return AttributeBinding},AttributeNSAccessor,get CheckedObserver(){return CheckedObserver},ClassAttributeAccessor,DataAttributeAccessor,ElementPropertyAccessor,ListenerTracker,DelegateOrCaptureSubscription,TriggerSubscription,IEventManager,EventSubscriber,EventManager,TargetAccessorLocator,TargetObserverLocator,get SelectValueObserver(){return SelectValueObserver},StyleAttributeAccessor,ISVGAnalyzer,get ValueAttributeObserver(){return ValueAttributeObserver},AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose,IProjectorLocatorRegistration:HTMLProjectorLocator,ITargetAccessorLocatorRegistration:TargetAccessorLocator,ITargetObserverLocatorRegistration:TargetObserverLocator,ITemplateFactoryRegistration:Un,DefaultComponents:_n,AttrBindingBehaviorRegistration:AttrBindingBehavior,SelfBindingBehaviorRegistration:SelfBindingBehavior,UpdateTriggerBindingBehaviorRegistration:UpdateTriggerBindingBehavior,ComposeRegistration:Compose,DefaultResources:Jn,AttributeBindingRendererRegistration:Qn,ListenerBindingRendererRegistration:Kn,SetAttributeRendererRegistration:qn,StylePropertyBindingRendererRegistration:Wn,TextBindingRendererRegistration:Hn,DefaultRenderers:Yn,BasicConfiguration:tr,createElement,RenderPlan,get HTMLTargetedInstructionType(){return HTMLTargetedInstructionType},isHTMLTargetedInstruction,get NodeType(){return NodeType},HTMLDOM,DOM:Dn,NodeSequenceFactory,FragmentNodeSequence,AttributeBindingInstruction,CaptureBindingInstruction,DelegateBindingInstruction,SetAttributeInstruction,StylePropertyBindingInstruction:class{constructor(from,to){this.type="hd",this.from=from,this.to=to}},TextBindingInstruction,TriggerBindingInstruction,ContainerlessProjector,HostProjector,HTMLProjectorLocator,ShadowDOMProjector});class TriggerBindingCommand{constructor(){this.xd=86}compile(t){return new TriggerBindingInstruction(t.He,ct(t,0))}}BindingCommandResource.Ve("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.xd=88}compile(t){return new DelegateBindingInstruction(t.He,ct(t,0))}}BindingCommandResource.Ve("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.xd=87}compile(t){return new CaptureBindingInstruction(t.He,ct(t,0))}}BindingCommandResource.Ve("capture",CaptureBindingCommand);class AttrBindingCommand{constructor(){this.xd=32}compile(t){const i=ct(t,0);return new AttributeBindingInstruction(i,t.He,i)}}BindingCommandResource.Ve("attr",AttrBindingCommand);class StyleBindingCommand{constructor(){this.xd=32}compile(t){return new AttributeBindingInstruction("style",t.He,ct(t,0))}}BindingCommandResource.Ve("style",StyleBindingCommand);class ClassBindingCommand{constructor(){this.xd=32}compile(t){return new AttributeBindingInstruction("class",t.He,ct(t,0))}}BindingCommandResource.Ve("class",ClassBindingCommand);class ir{Ep(t,i,parts){return new AttrSyntax(t,i,parts[1],"attr")}Lp(t,i,parts){return new AttrSyntax(t,i,parts[0],"attr")}}attributePattern({pattern:"attr.PART",symbols:"."},{pattern:"PART.attr",symbols:"."})(ir);class sr{jp(t,i,parts){return new AttrSyntax(t,i,parts[1],"style")}xp(t,i,parts){return new AttrSyntax(t,i,parts[0],"style")}}attributePattern({pattern:"style.PART",symbols:"."},{pattern:"PART.style",symbols:"."})(sr);class er{Vp(t,i,parts){return new AttrSyntax(t,i,parts[1],"class")}$p(t,i,parts){return new AttrSyntax(t,i,parts[0],"class")}}attributePattern({pattern:"class.PART",symbols:"."},{pattern:"PART.class",symbols:"."})(er);const nr=[].slice,{rt:rr,lt:hr}=Profiler.us("TemplateBinder"),or={id:1,Mp:1,Dp:1},cr={Fp:1,Mp:1,Dp:1};class TemplateBinder{constructor(dom,t,i,s){this.dom=dom,this.Kg=t,this.Np=i,this.Up=s,this.oa=null,this.manifest=null,this.zp=null,this.Hp=null,this.Oe=null}bind(t){Tracer.enabled&&Tracer.rt("TemplateBinder","bind",nr.call(arguments)),Profiler.enabled&&rr();const i=this.oa,s=this.Hp,e=this.zp,n=this.manifest,r=this.oa=this.manifest=new PlainElementSymbol(t),o=t.attributes;let c=0;for(;o.length>c;){const t=o[c],i=this.Np.parse(t.name,t.value);if(1==or[i.target])throw Profiler.enabled&&hr(),Error(`Invalid surrogate attribute: ${i.target}`);const s=this.Kg.Zg(i);if(null==s)this.Kp(i,t);else{if(s.isTemplateController)throw Profiler.enabled&&hr(),Error("Cannot have template controller on surrogate element.");this.Ma(i,s)}++c}return this.qp(t),this.oa=i,this.Hp=s,this.zp=e,this.manifest=n,Profiler.enabled&&hr(),Tracer.enabled&&Tracer.lt(),r}Wp(t,i){switch(Tracer.enabled&&Tracer.rt("TemplateBinder","bindManifest",nr.call(arguments)),i.nodeName){case"LET":return this.Qp(t,i),void(Tracer.enabled&&Tracer.lt());case"SLOT":this.oa.hasSlots=1}const s=this.Hp,e=this.zp,n=this.manifest;this.Oe=i.getAttribute("part");let r=void 0,name=i.getAttribute("as-element");null==name&&(name=i.nodeName.toLowerCase());const o=this.Kg.Gg(name);null==o?this.manifest=new PlainElementSymbol(i):(this.Hp=this.zp,r=this.zp=this.manifest=new CustomElementSymbol(this.dom,i,o)),this.qp(i),this.Gp(i,t),null!=r&&r.gb?i.parentNode.replaceChild(r.marker,i):this.manifest.vb&&i.classList.add("au"),this.Hp=s,this.zp=e,this.manifest=n,Tracer.enabled&&Tracer.lt()}Qp(t,i){const s=new LetElementSymbol(this.dom,i);t.childNodes.push(s);const e=i.attributes;let n=0;for(;e.length>n;){const t=e[n];if("to-view-model"===t.name){i.removeAttribute("to-view-model"),s.toViewModel=1;continue}const r=this.Np.parse(t.name,t.value),o=this.Kg.Xg(r),c=this.Up.parse(r.vi,null==o?2048:o.xd),to=camelCase(r.target),l=new BindableInfo(to,BindingMode.Xe);s.Nt.push(new BindingSymbol(o,l,c,r.vi,to)),++n}i.parentNode.replaceChild(s.marker,i)}Gp(t,i){Tracer.enabled&&Tracer.rt("TemplateBinder","bindAttributes",nr.call(arguments));const{Hp:s,zp:e,manifest:n}=this;let r=n;const o=this.Zp(t);let c=void 0,l=void 0;const u=t.attributes;let a=0;for(;u.length>a;){const t=u[a];if(++a,1==cr[t.name])continue;const i=this.Np.parse(t.name,t.value),s=this.Kg.Zg(i);null==s?this.Kp(i,t):s.isTemplateController?(l=n.templateController=this.Xp(i,s),r===n?(l.template=n,r=l):(l.templateController=c,l.template=c.template,c.template=l),c=l):this.Ma(i,s)}(function(dom,t,i){const s=i.ub;let e,n=t;for(;n!==i;)n.template===i?(s.parentNode.replaceChild(n.marker,s),"TEMPLATE"===s.nodeName?(n.ub=s,s.remove()):(e=n.ub=dom.Ul()).content.appendChild(s)):(e=n.ub=dom.Ul()).content.appendChild(n.marker),s.removeAttribute(n.Kt.fi),n=n.template})(this.dom,r,n),null==o?i.childNodes.push(r):(o.parent=i,o.template=r,(n===e?s:e).parts.push(o),null!=i.templateController&&i.templateController.parts.push(o),(function(dom,t,i){let s,e;"TEMPLATE"===(s=512&i.flags?i.marker:i.ub).nodeName?t.ub=s:(e=t.ub=dom.Ul()).content.appendChild(s)})(this.dom,o,r)),Tracer.enabled&&Tracer.lt()}qp(t){let i,s;for(Tracer.enabled&&Tracer.rt("TemplateBinder","bindChildNodes",nr.call(arguments)),i="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!=i;)switch(i.nodeType){case 1:s=i.nextSibling,this.Wp(this.manifest,i),i=s;break;case 3:i=this._p(i).nextSibling;break;case 4:case 7:case 8:case 10:i=i.nextSibling;break;case 9:case 11:i=i.firstChild}Tracer.enabled&&Tracer.lt()}_p(t){Tracer.enabled&&Tracer.rt("TemplateBinder","bindText",nr.call(arguments));const i=this.Up.parse(t.wholeText,2048);if(null!=i){const s=new TextSymbol(this.dom,t,i);this.manifest.childNodes.push(s),(function(t){const i=t.ub,s=i.parentNode;for(;null!=i.nextSibling&&3===i.nextSibling.nodeType;)s.removeChild(i.nextSibling);i.textContent="",s.insertBefore(t.marker,i)})(s)}for(;null!=t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return Tracer.enabled&&Tracer.lt(),t}Xp(t,i){let s;Tracer.enabled&&Tracer.rt("TemplateBinder","declareTemplateController",nr.call(arguments));const e=this.Kg.Xg(t);if(null==e&&i.Et)s=new TemplateControllerSymbol(this.dom,t,i,this.Oe),this.Oe=null,this.Jp(s,i,t.vi);else{s=new TemplateControllerSymbol(this.dom,t,i,this.Oe);const n=this.Up.parse(t.vi,null==e?2048:e.xd);s.Nt.push(new BindingSymbol(e,i.bindable,n,t.vi,t.target)),this.Oe=null}return Tracer.enabled&&Tracer.lt(),s}Ma(t,i){Tracer.enabled&&Tracer.rt("TemplateBinder","bindCustomAttribute",nr.call(arguments));const s=this.Kg.Xg(t);let e;if(null==s&&i.Et)e=new CustomAttributeSymbol(t,i),this.Jp(e,i,t.vi);else{e=new CustomAttributeSymbol(t,i);const n=this.Up.parse(t.vi,null==s?2048:s.xd);e.Nt.push(new BindingSymbol(s,i.bindable,n,t.vi,t.target))}this.manifest.attributes.push(e),this.manifest.vb=1,Tracer.enabled&&Tracer.lt()}Jp(t,i,value){Tracer.enabled&&Tracer.rt("TemplateBinder","bindMultiAttribute",nr.call(arguments));const s=(function(t){const i=[],s=new lr(t),e=s.length;let name,value;for(;e>s.index;){if(0===(name=Et(s)).length)return i;value=Lt(s),i.push({name,value})}return i})(value);let e;for(let n=0,r=s.length;r>n;++n){const r=this.Np.parse((e=s[n]).name,e.value),o=this.Kg.Xg(r),c=this.Up.parse(r.vi,null==o?2048:o.xd);let bindable=i.bindables[r.target];void 0===bindable&&(bindable=i.bindables[r.target]=new BindableInfo(r.target,BindingMode.Xe)),t.Nt.push(new BindingSymbol(o,bindable,c,r.vi,r.target))}Tracer.enabled&&Tracer.lt()}Kp(t,i){if(Tracer.enabled&&Tracer.rt("TemplateBinder","bindPlainAttribute",nr.call(arguments)),0===t.vi.length)return void(Tracer.enabled&&Tracer.lt());const s=this.Kg.Xg(t),e=this.manifest,n=this.Up.parse(t.vi,null==s?2048:s.xd);if(16&e.flags){const bindable=e.bindables[t.target];null!=bindable?(e.Nt.push(new BindingSymbol(s,bindable,n,t.vi,t.target)),e.vb=1):null==n&&"ref"!==t.target||(e.attributes.push(new PlainAttributeSymbol(t,s,n)),e.vb=1)}else null!=n||"ref"===t.target?(e.attributes.push(new PlainAttributeSymbol(t,s,n)),e.vb=1):e===this.oa&&e.attributes.push(new PlainAttributeSymbol(t,s,n));null==s&&null!=n&&(i.value=""),Tracer.enabled&&Tracer.lt()}Zp(t){Tracer.enabled&&Tracer.rt("TemplateBinder","declareReplacePart",nr.call(arguments));const name=t.getAttribute("replace-part");if(null==name)return Tracer.enabled&&Tracer.lt(),null;t.removeAttribute("replace-part");const i=new ReplacePartSymbol(name);return this.qp(t),Tracer.enabled&&Tracer.lt(),i}}class lr{constructor(t){this.input=t,this.index=0,this.length=t.length}}const ur=String.fromCharCode;(function(Char){Char[Char.av=34]="DoubleQuote",Char[Char.fv=39]="SingleQuote",Char[Char._f=47]="Slash",Char[Char.vv=59]="Semicolon",Char[Char.Sf=58]="Colon"})(Wt||(Wt={}));const ITemplateElementFactory=DI.zi("ITemplateElementFactory").Ki(),{rt:ar,lt:dr}=Profiler.us("TemplateElementFactory"),fr={};class vr{constructor(dom){this.dom=dom,this.template=dom.Ul()}static register(t){return Registration.singleton(ITemplateElementFactory,this).register(t)}Ul(t){if(Profiler.enabled&&ar(),"string"==typeof t){let i=fr[t];if(void 0===i){const template=this.template;template.innerHTML=t;const s=template.content.firstElementChild;null==s||"TEMPLATE"!==s.nodeName||null!=s.nextElementSibling?(this.template=this.dom.Ul(),i=template):(template.content.removeChild(s),i=s),fr[t]=i}return Profiler.enabled&&dr(),i.cloneNode(1)}if("TEMPLATE"!==t.nodeName){const template=this.dom.Ul();return template.content.appendChild(t),Profiler.enabled&&dr(),template}return null!=t.parentNode&&t.parentNode.removeChild(t),Profiler.enabled&&dr(),t}}vr.inject=[IDOM];const gr=Object.freeze({required:0,compiler:"default"}),{rt:br,lt:pr}=Profiler.us("TemplateCompiler");class mr{constructor(t,i,s){this.Au=t,this.Np=i,this.Up=s,this.Yp=null,this.parts=null}get name(){return"default"}static register(t){return Registration.singleton(ITemplateCompiler,this).register(t)}compile(dom,t,i){Profiler.enabled&&br();const s=new TemplateBinder(dom,new ResourceModel(i),this.Np,this.Up),template=t.template=this.Au.Ul(t.template),e=s.bind(template);void 0!==t.instructions&&t.instructions!==PLATFORM.Ei||(t.instructions=[]),1==e.hasSlots&&(t.hasSlots=1),this.Yp=t.instructions,this.parts={};const n=e.attributes,r=n.length;if(r>0){let surrogates;void 0!==t.surrogates&&t.surrogates!==PLATFORM.Ei||(t.surrogates=Array(r)),surrogates=t.surrogates;for(let t=0;r>t;++t)surrogates[t]=this.tm(n[t])}return this.im(e),this.Yp=null,this.parts=null,t.build=gr,Profiler.enabled&&pr(),t}im(t){if(8192&t.flags){const{childNodes}=t;let i;const s=childNodes.length;for(let t=0;s>t;++t)if(128&(i=childNodes[t]).flags)this.Yp.push([new TextBindingInstruction(i.Cc)]);else if(32&i.flags){const t=i.Nt,instructions=[];let s;const e=t.length;for(let i=0;e>i;++i)instructions[i]=new LetBindingInstruction((s=t[i]).He,s.target);this.Yp.push([new LetElementInstruction(instructions,i.toViewModel)])}else this.sm(i)}}em(t){const i=this.nm(t,1);i[0]=new HydrateElementInstruction(t.res,this.rm(t),this.hm(t)),this.Yp.push(i),this.im(t)}om(t){const i=this.nm(t,0);i.length>0&&this.Yp.push(i),this.im(t)}sm(t){switch(511&t.flags){case 16:this.em(t);break;case 64:this.om(t);break;case 1:this.cm(t)}}cm(t){const i=this.rm(t),s=this.Yp,e=this.Yp=[];this.sm(t.template),this.Yp=s;const def={name:null==t.Oe?t.res:t.Oe,template:t.ub,instructions:e,build:gr};let parts=void 0;if((16384&t.flags)>0){parts={};for(const i of t.parts)parts[i.name]=this.parts[i.name]}this.Yp.push([new HydrateTemplateController(def,t.res,i,"else"===t.res,parts)])}rm(t){let i;if(4096&t.flags){const{Nt:s}=t,e=s.length;i=Array(e);let n=0;for(;e>n;++n)i[n]=this.lm(s[n])}else i=PLATFORM.Ei;return i}lm(t){return null==t.command?null==t.He?new SetPropertyInstruction(t.vi,t.bindable.Ht):new InterpolationInstruction(t.He,t.bindable.Ht):t.command.compile(t)}nm(t,i){let s;if(2048&t.flags){const{attributes:e}=t,n=e.length;s=Array(i+n);for(let t=0;n>t;++t)s[t+i]=this.tm(e[t])}else s=i>0?Array(i):PLATFORM.Ei;return s}um(t){const i=this.rm(t);return new HydrateAttributeInstruction(t.res,i)}am(t){return null==t.command?null==t.He?new SetAttributeInstruction(t.Kt.vi,t.Kt.target):new InterpolationInstruction(t.He,t.Kt.target):t.command.compile(t)}tm(t){return"ref"===t.Kt.target?new RefBindingInstruction(t.Kt.vi):4&t.flags?this.um(t):this.am(t)}hm(t){let parts;if(16384&t.flags){parts={};const i=t.parts,s=i.length;let e,n,r;for(let t=0;s>t;++t)r=i[t],e=this.Yp,n=this.Yp=[],this.sm(r.template),this.parts[r.name]=parts[r.name]={name:r.name,template:r.ub,instructions:n,build:gr},this.Yp=e}else parts=PLATFORM.It;return parts}}mr.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const wr=[mr,vr],yr=[sr,er,ir],Cr=[TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand,ClassBindingCommand,StyleBindingCommand,AttrBindingCommand];Qt=Object.freeze({TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand,AttrBindingCommand,ClassBindingCommand,StyleBindingCommand,ITemplateCompilerRegistration:mr,ITemplateElementFactoryRegistration:vr,DefaultComponents:wr,TriggerBindingCommandRegistration:TriggerBindingCommand,DelegateBindingCommandRegistration:DelegateBindingCommand,CaptureBindingCommandRegistration:CaptureBindingCommand,AttrBindingCommandRegistration:AttrBindingCommand,ClassBindingCommandRegistration:ClassBindingCommand,StyleBindingCommandRegistration:StyleBindingCommand,DefaultBindingLanguage:Cr,BasicConfiguration:{register:t=>tr.register(t).register(...gn,...DefaultBindingSyntax,...yr,...DefaultBindingLanguage,...wr,...Cr),Fi(){return this.register(DI.Fi())}},stringifyDOM,stringifyInstructions,stringifyTemplateDefinition,TemplateBinder,ITemplateElementFactory});class Tr{constructor(t){this.da=t}static register(t){return Registration.singleton(IDOMInitializer,this).register(t)}initialize(t){if(this.da.has(IDOM,0))return this.da.get(IDOM);let dom;return dom=void 0!==t?void 0!==t.dom?t.dom:new HTMLDOM(window,null!==t.host.ownerDocument?t.host.ownerDocument:document,Node,Element,HTMLElement,CustomEvent):new HTMLDOM(window,document,Node,Element,HTMLElement,CustomEvent),Registration.Wi(IDOM,dom).register(this.da),dom}}Tr.inject=[IContainer];const Ar=[Tr],Rr={register:t=>tr.register(t).register(...Ar),Fi(){return this.register(DI.Fi())}};Gt=Object.freeze({dm:Tr,DefaultComponents:Ar,BasicConfiguration:Rr});const{rt:Br,lt:Or}=Profiler.us("BasicConfiguration");return Zt=Object.freeze({BasicConfiguration:{register:t=>(Profiler.enabled&&Br(),Rr.register(t).register(...DefaultBindingLanguage,...DefaultBindingSyntax,...gn,...Cr,...wr),Profiler.enabled&&Or(),t),Fi(){Profiler.enabled&&Br();const t=this.register(DI.Fi());return Profiler.enabled&&Or(),t}}}),t.jit=Kt,t.jitHtml=Qt,t.jitHtmlBrowser=Zt,t.kernel=xt,t.runtime=Nt,t.runtimeHtml=qt,t.runtimeHtmlBrowser=Gt,t})({});
