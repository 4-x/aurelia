var au=(function(t){"use strict";function i(t){return function(i){const s=function(t,i,e){DI.inject(s)(t,i,e)};return s.resolve=function(s,e){return t(i,s,e)},s}}function s(t){return DI.transient(t)}function e(t){return DI.singleton(t)}function n(t){return"function"==typeof t.register}function r(t){if(null==t||t===Object)throw Reporter.error(5)}function o(t,i,s){if(t instanceof ai&&4===t.strategy){const e=t.state;let n=e.length;const r=[];for(;n--;)r[n]=e[n].resolve(i,s);return r}return[t.resolve(i,s)]}function c(t,i,s,e){let n,r=s.length,o=[];for(;r--;){if(null==(n=s[r]))throw Reporter.error(7,`Index ${r}.`);o[r]=t.get(n)}return void 0!==e&&(o=o.concat(e)),Reflect.construct(i,o)}function l(t,value,i){let s=[];if(null==value)return s;if(Array.isArray(value))for(let e=0,n=value.length;n>e;e++)i?s.push(`${mi(t)}=${pi(value[e])}`):s=s.concat(l(`${t}[${"object"==typeof value[e]&&null!=value[e]?e:""}]`,value[e]));else if("object"!=typeof value||i)s.push(`${mi(t)}=${pi(value)}`);else for(const i in value)s=s.concat(l(`${t}[${i}]`,value[i]));return s}function u(t,value){return Array.isArray(t)?(t.push(value),t):void 0!==t?[t,value]:value}function a(t,i,value){let s=t;const e=i.length-1;let n,r;for(let t=0;e>=t;++t)s=s[n=""===i[t]?s.length:i[t]]=e>t?(r=s[n]&&"object"!=typeof s[n]?[s[n]]:s[n])||(isNaN(i[t+1])?{}:[]):value}function d(t,i,s){try{t(i,s)}catch(t){Reporter.error(0,t)}}function f(t,i){try{t.t(i)}catch(t){Reporter.error(0,t)}}function isNumeric(value){switch(typeof value){case"number":return 1;case"string":{const t=Ti[value];if(void 0!==t)return t;const{length:i}=value;if(0===i)return Ti[value]=0;let s=0;for(let t=0;i>t;++t)if(48>(s=value.charCodeAt(t))||s>57)return Ti[value]=0;return Ti[value]=1}default:return 0}}function camelCase(t){let value=yi[t];if(void 0!==value)return value;value="";let i,s=1,e=0;for(let n=0,r=t.length;r>n;++n)"-"===(i=t.charAt(n))||"."===i||"_"===i?e=1:(value+=s?i.toLowerCase():e?i.toUpperCase():i,e=0),s=0;return yi[t]=value}function kebabCase(t){let value=Ci[t];if(void 0!==value)return value;value="";let i,s,e=1;for(let n=0,r=t.length;r>n;++n)s=(i=t.charAt(n)).toLowerCase(),value+=e?s:i!==s?`-${s}`:s,e=0;return Ci[t]=value}function toArray(t){const{length:i}=t,s=Array(i);for(let e=0;i>e;++e)s[e]=t[e];return s}function nextId(t){return void 0===Ai[t]&&(Ai[t]=0),++Ai[t]}function compareNumber(t,i){return t-i}function attributePattern(...t){return function(i){const s=i.prototype;return(function(t,i){for(const def of i)def.pattern in t?"function"!=typeof t[def.pattern]&&Reporter.write(402,def.pattern):Reporter.write(401,def.pattern)})(s,t),s.i=t,i.register=function(t){return Registration.singleton(IAttributePattern,i).register(t,IAttributePattern)},i}}function v(t,i,s,e){var n,r,o=arguments.length,c=3>o?i:null===e?e=Object.getOwnPropertyDescriptor(i,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,i,s,e);else for(r=t.length-1;r>=0;r--)(n=t[r])&&(c=(3>o?n(c):o>3?n(i,s,c):n(i,s))||c);return o>3&&c&&Object.defineProperty(i,s,c),c}function subscriberCollection(){return function(t){const i=t.prototype;i.s=0,i.o=g,i.l=m,i.u=R,i.v=C,i.g=k,void 0===i.subscribe&&(i.subscribe=g),void 0===i.unsubscribe&&(i.unsubscribe=m)}}function proxySubscriberCollection(){return function(t){const i=t.prototype;i.p=0,i.m=b,i.C=w,i.T=B,i.A=T,i.R=I,void 0===i.B&&(i.B=b),void 0===i.O&&(i.O=w)}}function collectionSubscriberCollection(){return function(t){const i=t.prototype;i.k=0,i.S=p,i.I=y,i.P=O,i.L=A,i.j=P,void 0===i.V&&(i.V=p),void 0===i.$&&(i.$=y)}}function g(t){if(this.u(t))return 0;const i=this.s;return 0==(1&i)?(this.M=t,this.s|=1):0==(2&i)?(this.D=t,this.s|=2):0==(4&i)?(this.F=t,this.s|=4):0==(8&i)?(this.N=[t],this.s|=8):this.N.push(t),1}function b(t){if(this.T(t))return 0;const i=this.p;return 0==(1&i)?(this.U=t,this.p|=1):0==(2&i)?(this.H=t,this.p|=2):0==(4&i)?(this.K=t,this.p|=4):0==(8&i)?(this.q=[t],this.p|=8):this.q.push(t),1}function p(t){if(this.P(t))return 0;const i=this.k;return 0==(1&i)?(this.W=t,this.k|=1):0==(2&i)?(this.G=t,this.k|=2):0==(4&i)?(this.Z=t,this.k|=4):0==(8&i)?(this.X=[t],this.k|=8):this.X.push(t),1}function m(t){const i=this.s;if((1&i)>0&&this.M===t)return this.M=void 0,this.s=1^(1|this.s),1;if((2&i)>0&&this.D===t)return this.D=void 0,this.s=2^(2|this.s),1;if((4&i)>0&&this.F===t)return this.F=void 0,this.s=4^(4|this.s),1;if((8&i)>0){const i=this.N;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.s=8^(8|this.s)),1}return 0}function w(t){const i=this.p;if((1&i)>0&&this.U===t)return this.U=void 0,this.p=1^(1|this.p),1;if((2&i)>0&&this.H===t)return this.H=void 0,this.p=2^(2|this.p),1;if((4&i)>0&&this.K===t)return this.K=void 0,this.p=4^(4|this.p),1;if((8&i)>0){const i=this.q;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.p=8^(8|this.p)),1}return 0}function y(t){const i=this.k;if((1&i)>0&&this.W===t)return this.W=void 0,this.k=1^(1|this.k),1;if((2&i)>0&&this.G===t)return this.G=void 0,this.k=2^(2|this.k),1;if((4&i)>0&&this.Z===t)return this.Z=void 0,this.k=4^(4|this.k),1;if((8&i)>0){const i=this.X;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.k=8^(8|this.k)),1}return 0}function C(){return 0!==this.s}function T(){return 0!==this.p}function A(){return 0!==this.k}function R(t){const i=this.s;if((1&i)>0&&this.M===t)return 1;if((2&i)>0&&this.D===t)return 1;if((4&i)>0&&this.F===t)return 1;if((8&i)>0){const i=this.N;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function B(t){const i=this.p;if((1&i)>0&&this.U===t)return 1;if((2&i)>0&&this.H===t)return 1;if((4&i)>0&&this.K===t)return 1;if((8&i)>0){const i=this.q;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function O(t){const i=this.k;if((1&i)>0&&this.W===t)return 1;if((2&i)>0&&this.G===t)return 1;if((4&i)>0&&this.Z===t)return 1;if((8&i)>0){const i=this.X;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function k(t,i,s){const e=this.M,n=this.D,r=this.F;let o=this.N;if(void 0!==o&&(o=o.slice()),void 0!==e&&S(e,t,i,s,void 0===e.id?0:this[e.id]),void 0!==n&&S(n,t,i,s,void 0===n.id?0:this[n.id]),void 0!==r&&S(r,t,i,s,void 0===r.id?0:this[r.id]),void 0!==o){const{length:e}=o;let n;for(let r=0;e>r;++r)void 0!==(n=o[r])&&S(n,t,i,s,void 0===n.id?0:this[n.id])}}function S(t,i,s,e,n){t.J(i,s,48^(48|e)|n)}function I(t,i,s,e){const n=this.U,r=this.H,o=this.K;let c=this.q;if(void 0!==c&&(c=c.slice()),void 0!==n&&n.Y(t,i,s,e),void 0!==r&&r.Y(t,i,s,e),void 0!==o&&o.Y(t,i,s,e),void 0!==c){const{length:n}=c;let r;for(let o=0;n>o;++o)void 0!==(r=c[o])&&r.Y(t,i,s,e)}}function P(t,i){const s=this.W,e=this.G,n=this.Z;let r=this.X;if(void 0!==r&&(r=r.slice()),void 0!==s&&s.tt(t,i),void 0!==e&&e.tt(t,i),void 0!==n&&n.tt(t,i),void 0!==r){const{length:s}=r;let e;for(let n=0;s>n;++n)void 0!==(e=r[n])&&e.tt(t,i)}}function E(t){const i=BindingBehaviorResource.it(this.description.name);t.register(Registration.singleton(i,this)),t.register(Registration.singleton(this,this))}function L(t){const i=this.kind.it(this.description.name);t.register(Registration.singleton(i,this)),t.register(Registration.singleton(this,this))}function hasBind(t){return 2048==(2048&t.st)}function hasUnbind(t){return 4096==(4096&t.st)}function isLiteral(t){return 16384==(16384&t.st)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let i=0;t.length>i;++i)if(!isPureLiteral(t[i]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.st){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.et);case 17925:return 1}return 0}function j(t,i,s,e){const n=e.length,r=Array(n);for(let o=0;n>o;++o)r[o]=e[o].evaluate(t,i,s);return r}function x(t,i,name){const s=null==i?null:i[name];if("function"==typeof s)return s;if(!(2097152&t)&&null==s)return null;throw Reporter.error(207,i,name,s)}function V(strategy){return 0==(strategy&zi)?1|strategy:strategy}function $(t){if(t===es){const i=is.length=ss.length=(es+=5)+1;for(let s=t+1;i>s;++s)is[s]=`_observer${s}`,ss[s]=`_observerVersion${s}`}}function M(t){const i=null==this.nt?0:this.nt;let s=i;for(;s--&&this[is[s]]!==t;);if(-1===s){for(s=0;this[is[s]];)s++;this[is[s]]=t,t.subscribe(this),t[this.id]|=16,s===i&&(this.nt=s+1)}null==this.version&&(this.version=0),this[ss[s]]=this.version,$(s)}function D(t,i,s){Tracer.enabled&&Tracer.rt(this.constructor.name,"observeProperty",ts.call(arguments));const e=this.ot.ht(t,i,s);this.ct(e),Tracer.enabled&&Tracer.lt()}function F(all){const t=this.nt;let i,s;if(1==all)for(let e=0;t>e;++e)null!=(s=this[i=is[e]])&&(this[i]=void 0,s.unsubscribe(this),s[this.id]&=-17);else{const e=this.version;for(let n=0;t>n;++n)this[ss[n]]!==e&&null!=(s=this[i=is[n]])&&(this[i]=void 0,s.unsubscribe(this),s[this.id]&=-17)}}function N(t){const i=t.prototype;return i.hasOwnProperty("observeProperty")||(i.ut=D),i.hasOwnProperty("unobserve")||(i.unobserve=F),i.hasOwnProperty("addObserver")||(i.ct=M),t}function connectable(t){return null==t?N:N(t)}function createIndexMap(t=0){const i=Array(t);let s=0;for(;t>s;)i[s]=s++;return i.at=[],i.isIndexMap=1,i}function U(t,i){return t===i?0:(i=null===i?"null":""+i)>(t=null===t?"null":""+t)?-1:1}function z(t,i){return void 0===t?void 0===i?0:1:void 0===i?-1:0}function H(t,i,from,to,s){let e,n,r,o,c,l,u;for(l=from+1;to>l;l++){for(e=t[l],n=i[l],u=l-1;u>=from&&(o=i[u],(c=s(r=t[u],e))>0);u--)t[u+1]=r,i[u+1]=o;t[u+1]=e,i[u+1]=n}}function K(t,i,from,to,s){let e,n,r,o,c,l,u,a,d,f,v,g,b,p,m,w,y,C,T,A=0,R=0;for(;;){if(10>=to-from)return void H(t,i,from,to,s);o=i[from],c=i[to-1],r=t[A=from+(to-from>>1)],l=i[A],(u=s(e=t[from],n=t[to-1]))>0&&(f=e,v=o,e=n,o=c,n=f,c=v),0>(a=s(e,r))?(d=s(n,r))>0&&(f=n,v=c,n=r,c=l,r=f,l=v):(f=e,v=o,e=r,o=l,r=n,l=c,n=f,c=v),t[from]=e,i[from]=o,t[to-1]=r,i[to-1]=l,g=n,b=c,m=to-1,t[A]=t[p=from+1],i[A]=i[p],t[p]=g,i[p]=b;t:for(R=p+1;m>R;R++)if(y=i[R],0>(C=s(w=t[R],g)))t[R]=t[p],i[R]=i[p],t[p]=w,i[p]=y,p++;else if(C>0){do{if(--m==R)break t;C=s(T=t[m],g)}while(C>0);t[R]=t[m],i[R]=i[m],t[m]=w,i[m]=y,0>C&&(w=t[R],y=i[R],t[R]=t[p],i[R]=i[p],t[p]=w,i[p]=y,p++)}p-from>to-m?(K(t,i,m,to,s),to=p):(K(t,i,from,p,s),from=m)}}function enableArrayObservation(){for(const t of As)1!=vs[t].dt&&def(vs,t,{...Bs,value:Rs[t]})}function q(t,i,s){return void 0===s.ft&&(s.ft=new ArrayObserver(t,i,s)),s.ft}function enableMapObservation(){for(const t of js)1!=Ss[t].dt&&$s(Ss,t,{...Vs,value:xs[t]})}function W(t,i,s){return void 0===s.ft&&(s.ft=new MapObserver(t,i,s)),s.ft}function enableSetObservation(){for(const t of Ks)1!=Fs[t].dt&&Qs(Fs,t,{...Ws,value:qs[t]})}function Q(t,i,s){return void 0===s.ft&&(s.ft=new SetObserver(t,i,s)),s.ft}function createComputedObserver(t,i,s,e,n,r,o){if(0==o.vt)return s.gt(n,r);if(o.get){const s=n.constructor.computed&&n.constructor.computed[r]||_s;return o.set?s.bt?new GetterObserver(t,s,n,r,o,i,e):new CustomSetterObserver(n,r,o):new GetterObserver(t,s,n,r,o,i,e)}throw Reporter.error(18,r)}function getCollectionObserver(t,i,s){const e=s instanceof Object?ProxyObserver.pt(s):s;switch(ne.call(s)){case"[object Array]":return q(t,i,e);case"[object Map]":return W(t,i,e);case"[object Set]":return Q(t,i,e)}}function G(t,i,s){const e=this.wt;PLATFORM.global.clearTimeout(e.yt),e.yt=PLATFORM.global.setTimeout(()=>{this.Ct(t,i,s)},e.Tt)}function Z(t,i,s){const e=this.wt;if(PLATFORM.global.clearTimeout(e.yt),!(s&e.At))return e.oldValue=le,void this.Ct(t,i,s);e.oldValue===le&&(e.oldValue=i);const n=PLATFORM.global.setTimeout(()=>{const i=e.oldValue;e.oldValue=le,this.Ct(t,i,s)},e.Tt);e.yt=n}function X(t){const i=this.Rt,s=+new Date-i.Bt;if(s>=i.Tt)return PLATFORM.global.clearTimeout(i.yt),i.yt=-1,i.Bt=+new Date,void this.Ot(t);if(i.newValue=t,-1===i.yt){const t=PLATFORM.global.setTimeout(()=>{i.yt=-1,i.Bt=+new Date,this.Ot(i.newValue)},i.Tt-s);i.yt=t}}function J(name){return`${ae}:${name}`}function Y(t){return t.kt}function tt(name){return`${de}:${name}`}function buildTemplateDefinition(t,i,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,strategy){const def=new ge,s=arguments.length;switch(s){case 13:null!=strategy&&(def.strategy=V(strategy));case 12:null!=hasSlots&&(def.hasSlots=hasSlots);case 11:null!=shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!=containerless&&(def.containerless=containerless);case 9:null!=surrogates&&(def.surrogates=toArray(surrogates));case 8:null!=dependencies&&(def.dependencies=toArray(dependencies));case 7:null!=instructions&&(def.instructions=toArray(instructions));case 6:null!=bindables&&(def.bindables={...bindables});case 5:null!=build&&(def.build=1==build?fe:0==build?ve:{...build});case 4:null!=cache&&(def.cache=cache);case 3:null!=template&&(def.template=template);case 2:null!=t&&(t.bindables&&(def.bindables=Bindable.for(t).get()),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions),t.prototype&&(def.St=new HooksDefinition(t.prototype))),"string"==typeof i?i.length>0&&(def.name=i):null!=i&&(def.strategy=V(i.strategy),be.forEach(t=>{i[t]&&(def[t]=i[t])}),pe.forEach(t=>{i[t]&&(def[t]=toArray(i[t]))}),i.bindables&&(def.bindables===PLATFORM.It?def.bindables=Bindable.for(i).get():Object.assign(def.bindables,i.bindables)))}return 2!==s||null===t||"string"!=typeof i&&"build"in i||(def.build=fe),def}function it(t){const i=this.description,s=this.kind.it(i.name),aliases=i.aliases;t.register(Registration.transient(s,this)),t.register(Registration.transient(this,this));for(let i=0,e=aliases.length;e>i;++i){const e=this.kind.it(aliases[i]);t.register(Registration.Pt(s,e))}}function st(t){return t.Et=1,t}function et(value){return!(void 0===value||1==value.done)}function nt(t){const i=this.kind.it(this.description.name);t.register(Registration.transient(i,this)),t.register(Registration.transient(this,this))}function rt(t){return t.containerless=1,t}function createRenderContext(dom,t,dependencies,i){const s=t.Lt(),e=new InstanceProvider,n=new InstanceProvider,r=new InstanceProvider,o=new ke,c=new InstanceProvider,l=s.get(IRenderer);return dom.jt(s,n),s.xt(IViewFactory,o),s.xt(IController,e),s.xt(ITargetedInstruction,r),s.xt(IRenderLocation,c),null!=dependencies&&s.register(...dependencies),i&&i.register(s),s.Vt=function(t,i,targets,s,host,parts){l.Vt(t,dom,this,i,targets,s,host,parts)},s.$t=function(t,i,l,u,parts,a){return e.Mt(t),n.Mt(i),r.Mt(l),u&&o.Mt(u,parts),a&&c.Mt(a),s},s.Dt=function(){o.Dt(),e.Dt(),r.Dt(),n.Dt(),c.Dt()},s}function ht(t){const i=[];for(let s=0,e=t.length;e>s;++s){const component=Y(t[s]);null!=component&&i.push(component)}return i}function instructionRenderer(t){return function(i){const s=function(...s){const e=new i(...s);return e.Ft=t,e};s.register=function(t){return Registration.singleton(IInstructionRenderer,s).register(t,IInstructionRenderer)};const e=Object.getOwnPropertyDescriptors(i);return Object.keys(e).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,e[t])}),s}}function ensureExpression(t,i,s){return"string"==typeof i?t.parse(i,s):i}function addBinding(t,i){Tracer.enabled&&Tracer.rt("Renderer","addBinding",Ve.call(arguments)),null==t.Nt?t.Nt=[i]:t.Nt.push(i),Tracer.enabled&&Tracer.lt()}function addComponent(t,component){Tracer.enabled&&Tracer.rt("Renderer","addComponent",Ve.call(arguments)),null==t.Ut?t.Ut=[component]:t.Ut.push(component),Tracer.enabled&&Tracer.lt()}function getTarget(t){return void 0!==t.zt?t.zt:t}function ot(t){const i=BindingCommandResource.it(this.description.name);t.register(Registration.singleton(i,this))}function ct(t,i){return 256&t.flags?t.bindable.Ht:i?camelCase(t.Kt.target):t.Kt.target}function getMode(t){return 256&t.flags?t.bindable.mode:Ge[t.Kt.command]}function lt(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}function parseExpression(t,i){return $state.input=t,$state.length=t.length,$state.index=0,$state.qt=t.charCodeAt(0),parse($state,0,61,void 0===i?53:i)}function parse(t,i,s,e){if(Profiler.enabled&&Ze(),0===t.index){if(2048&e)return Profiler.enabled&&Xe(),(function(t){const parts=[],i=[],s=t.length;let e="";for(;s>t.index;){switch(t.qt){case 36:if(123===t.input.charCodeAt(t.index+1)){parts.push(e),e="",t.index+=2,t.qt=t.input.charCodeAt(t.index),at(t);const s=parse(t,0,61,2048);i.push(s);continue}e+="$";break;case 92:e+=String.fromCharCode(lt(dt(t)));break;default:e+=String.fromCharCode(t.qt)}dt(t)}return i.length?(parts.push(e),new Interpolation(parts,i)):null})(t);if(at(t),1048576&t.Wt)throw Profiler.enabled&&Xe(),Reporter.error(100,{state:t})}t.Qt=448>s;let n=void 0;if(32768&t.Wt){const s=nn[63&t.Wt];at(t),n=new Unary(s,parse(t,i,449,e)),t.Qt=0}else{t:switch(t.Wt){case 3077:t.Qt=0;do{if(at(t),i++,!bt(t,16392)){if(524288&t.Wt){const t=511&i;n=0===t?sn:1===t?en:new AccessThis(t),i=512;break t}throw Profiler.enabled&&Xe(),Reporter.error(103,{state:t})}if(16392===t.Wt)throw Profiler.enabled&&Xe(),Reporter.error(102,{state:t});if(1572864===t.Wt)throw Profiler.enabled&&Xe(),Reporter.error(105,{state:t})}while(3077===t.Wt);case 1024:512&e?n=new BindingIdentifier(t.Gt):(n=new AccessScope(t.Gt,511&i),i=1024),t.Qt=1,at(t);break;case 3076:t.Qt=0,at(t),n=sn,i=512;break;case 671750:at(t),n=parse(t,0,62,e),pt(t,1835018),i=0;break;case 671756:n=(function(t,i,s){at(t);const e=[];for(;1835021!==t.Wt;)if(bt(t,1572875)){if(e.push(tn),1835021===t.Wt)break}else{if(e.push(parse(t,i,62,-513&s)),!bt(t,1572875))break;if(1835021===t.Wt)break}return pt(t,1835021),512&s?new ArrayBindingPattern(e):(t.Qt=0,new ArrayLiteral(e))})(t,i,e),i=0;break;case 131079:n=(function(t,i){const s=[],e=[];for(at(t);1835017!==t.Wt;){if(s.push(t.Gt),12288&t.Wt)at(t),pt(t,1572878),e.push(parse(t,0,62,-513&i));else{if(!(3072&t.Wt))throw Reporter.error(107,{state:t});{const{qt:s,Wt:n,index:r}=t;at(t),bt(t,1572878)?e.push(parse(t,0,62,-513&i)):(t.qt=s,t.Wt=n,t.index=r,e.push(parse(t,0,450,-513&i)))}}1835017!==t.Wt&&pt(t,1572875)}return pt(t,1835017),512&i?new ObjectBindingPattern(s,e):(t.Qt=0,new ObjectLiteral(s,e))})(t,e),i=0;break;case 540713:n=new Template([t.Gt]),t.Qt=0,at(t),i=0;break;case 540714:n=ut(t,i,e,n,0),i=0;break;case 4096:case 8192:n=new PrimitiveLiteral(t.Gt),t.Qt=0,at(t),i=0;break;case 2050:case 2051:case 2049:case 2048:n=nn[63&t.Wt],t.Qt=0,at(t),i=0;break;default:throw t.length>t.index?(Profiler.enabled&&Xe(),Reporter.error(101,{state:t})):(Profiler.enabled&&Xe(),Reporter.error(104,{state:t}))}if(512&e)return Profiler.enabled&&Xe(),(function(t,i){if(0==(65536&i.st))throw Reporter.error(106,{state:t});if(1051179!==t.Wt)throw Reporter.error(106,{state:t});at(t);const s=i,e=parse(t,0,61,0);return new ForOfStatement(s,e)})(t,n);if(s>449)return Profiler.enabled&&Xe(),n;let name=t.Gt;for(;(16384&t.Wt)>0;)switch(t.Wt){case 16392:if(t.Qt=1,at(t),0==(3072&t.Wt))throw Profiler.enabled&&Xe(),Reporter.error(105,{state:t});if(name=t.Gt,at(t),i=(1536&i)<<1|2048&i|(4096&i)>>1,671750===t.Wt){0===i&&(i=2048);continue}n=1024&i?new AccessScope(name,n.Zt):new AccessMember(n,name);continue;case 671756:t.Qt=1,at(t),i=4096,n=new AccessKeyed(n,parse(t,0,62,e)),pt(t,1835021);break;case 671750:t.Qt=0,at(t);const s=[];for(;1835018!==t.Wt&&(s.push(parse(t,0,62,e)),bt(t,1572875)););pt(t,1835018),n=1024&i?new CallScope(name,s,n.Zt):2048&i?new CallMember(n,name,s):new CallFunction(n,s),i=0;break;case 540713:t.Qt=0;const r=[t.Gt];n=new TaggedTemplate(r,r,n),at(t);break;case 540714:n=ut(t,i,e,n,1)}}if(s>448)return Profiler.enabled&&Xe(),n;for(;(65536&t.Wt)>0;){const r=t.Wt;if(s>=(448&r))break;at(t),n=new Binary(nn[63&r],n,parse(t,i,448&r,e)),t.Qt=0}if(s>63)return Profiler.enabled&&Xe(),n;if(bt(t,1572879)){const s=parse(t,i,62,e);pt(t,1572878),n=new Conditional(n,s,parse(t,i,62,e)),t.Qt=0}if(s>62)return Profiler.enabled&&Xe(),n;if(bt(t,1048615)){if(!t.Qt)throw Profiler.enabled&&Xe(),Reporter.error(150,{state:t});n=new Assign(n,parse(t,i,62,e))}if(s>61)return Profiler.enabled&&Xe(),n;for(;bt(t,1572883);){if(1572864===t.Wt)throw Profiler.enabled&&Xe(),Reporter.error(112);const name=t.Gt;at(t);const s=[];for(;bt(t,1572878);)s.push(parse(t,i,62,e));n=new ValueConverter(n,name,s)}for(;bt(t,1572880);){if(1572864===t.Wt)throw Profiler.enabled&&Xe(),Reporter.error(113);const name=t.Gt;at(t);const s=[];for(;bt(t,1572878);)s.push(parse(t,i,62,e));n=new BindingBehavior(n,name,s)}if(1572864!==t.Wt){if(2048&e)return Profiler.enabled&&Xe(),n;if("of"===t.Xt)throw Profiler.enabled&&Xe(),Reporter.error(151,{state:t});throw Profiler.enabled&&Xe(),Reporter.error(101,{state:t})}return Profiler.enabled&&Xe(),n}function ut(t,i,s,e,n){const r=[t.Gt];pt(t,540714);const o=[parse(t,i,62,s)];for(;540713!==(t.Wt=gt(t));)r.push(t.Gt),pt(t,540714),o.push(parse(t,i,62,s));return r.push(t.Gt),t.Qt=0,n?(at(t),new TaggedTemplate(r,r,e,o)):(at(t),new Template(r,o))}function at(t){for(;t.length>t.index;)if(t._t=t.index,null!=(t.Wt=un[t.qt](t)))return;t.Wt=1572864}function dt(t){return t.qt=t.input.charCodeAt(++t.index)}function ft(t,i){let s=t.qt;if(0==i){do{s=dt(t)}while(57>=s&&s>=48);if(46!==s)return t.Gt=parseInt(t.Xt,10),8192;if(s=dt(t),t.index>=t.length)return t.Gt=parseInt(t.Xt.slice(0,-1),10),8192}if(s>57||48>s)t.qt=t.input.charCodeAt(--t.index);else do{s=dt(t)}while(57>=s&&s>=48);return t.Gt=parseFloat(t.Xt),8192}function vt(t){let i=1,s="";for(;96!==dt(t);)if(36===t.qt){if(t.length>t.index+1&&123===t.input.charCodeAt(t.index+1)){t.index++,i=0;break}s+="$"}else if(92===t.qt)s+=String.fromCharCode(lt(dt(t)));else{if(t.index>=t.length)throw Reporter.error(109,{state:t});s+=String.fromCharCode(t.qt)}return dt(t),t.Gt=s,i?540713:540714}function gt(t){if(t.index>=t.length)throw Reporter.error(109,{state:t});return t.index--,vt(t)}function bt(t,i){return t.Wt===i?(at(t),1):0}function pt(t,i){if(t.Wt!==i)throw Reporter.error(110,{state:t,Jt:i});at(t)}function mt(t,i,s,value){const e=s.length;for(let n=0;e>n;n+=2){const e=s[n];let r=s[n+1];if(r=r>0?r:e+1,t&&t.fill(value,e,r),i)for(let t=e;r>t;t++)i.add(t)}}function wt(t){return i=>(dt(i),t)}function yt(dom){const t=dom.createElement("au-m");return dom.Yt(t),t}function Ct(t){t.ti(this)}function Tt(t,i){return t===i}function At(t){return t.ii&&t.ii()[0]||t.si&&t.si()[0]||t.path&&t.path[0]||t.target}function Rt(){this.ei(),this.ni=1}function Bt(t){t.ni=0;let i=At(t);const s=[];for(;i;){if(i.ri){const e=i.ri[t.type];e&&(t.stopPropagation!==Rt&&(t.ei=t.stopPropagation,t.stopPropagation=Rt),s.push(e))}i=i.parentNode}for(let i=s.length-1;i>=0&&!t.ni;i--){const e=s[i];"handleEvent"in e?e.hi(t):e(t)}}function Ot(t){t.ni=0;let i=At(t);for(;i&&!t.ni;){if(i.oi){const s=i.oi[t.type];s&&(t.stopPropagation!==Rt&&(t.ei=t.stopPropagation,t.stopPropagation=Rt),"handleEvent"in s?s.hi(t):s(t))}i=i.parentNode}}function kt(t,i){return t===i}function St(t,i,s){if(1==Ln[i])return 1;const e=i.slice(0,5);return Ln[i]="aria-"===e||"data-"===e||s.ci(t,i)}function It(t){const i=At(t);if(this.target===i)return this.li(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,i,s){if("string"==typeof t)return(function(dom,t,i,s){Tracer.enabled&&Tracer.rt("createElement","createElementForTag",jn.call(arguments));const instructions=[],e=[],dependencies=[],n=dom.createElement(t);let r=0;return i&&Object.keys(i).forEach(to=>{const value=i[to];isHTMLTargetedInstruction(value)?(r=1,instructions.push(value)):dom.setAttribute(n,to,value)}),r&&(dom.Yt(n),e.push(instructions)),s&&Pt(dom,n,s,e,dependencies),Tracer.enabled&&Tracer.lt(),new RenderPlan(dom,n,e,dependencies)})(dom,t,i,s);if(CustomElementResource.ui(t))return(function(dom,t,i,s){Tracer.enabled&&Tracer.rt("createElement","createElementForType",jn.call(arguments));const e=t.description.name,instructions=[],n=[instructions],dependencies=[],r=[],bindables=t.description.bindables,o=dom.createElement(e);return dom.Yt(o),dependencies.includes(t)||dependencies.push(t),instructions.push(new HydrateElementInstruction(e,r)),i&&Object.keys(i).forEach(to=>{const value=i[to];if(isHTMLTargetedInstruction(value))r.push(value);else{r.push(void 0!==bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}}),s&&Pt(dom,o,s,n,dependencies),Tracer.enabled&&Tracer.lt(),new RenderPlan(dom,o,n,dependencies)})(dom,t,i,s);throw Error("Invalid tagOrType.")}function Pt(dom,t,i,s,dependencies){for(let e=0,n=i.length;n>e;++e){const n=i[e];switch(typeof n){case"string":dom.appendChild(t,dom.createTextNode(n));break;case"object":dom.ai(n)?dom.appendChild(t,n):"mergeInto"in n&&n.di(t,s,dependencies)}}}function Et(t){const i=t.index,{length:s,input:e}=t;for(;s>t.index&&58!==e.charCodeAt(++t.index););return e.slice(i,t.index).trim()}function Lt(t){++t.index;const{length:i,input:s}=t;let e="",n=0;for(;i>t.index;){switch(n=s.charCodeAt(t.index)){case 59:return++t.index,e.trim();case 47:n=s.charCodeAt(++t.index),e+=`\\${hr(n)}`;break;case 39:e+="'";break;default:e+=hr(n)}++t.index}return e.trim()}function stringifyDOM(t,i){let s=" ".repeat(i);if(s+=`Node: ${t.nodeName}`,3===t.nodeType&&(s+=` "${t.textContent}"`),1===t.nodeType){let i,e=0;const n=t.attributes,r=n.length;for(;r>e;++e)s+=` ${(i=n[e]).name}=${i.value}`}if(s+="\n",1===t.nodeType){let e=0,childNodes=t.childNodes,n=childNodes.length;for(;n>e;++e)s+=stringifyDOM(childNodes[e],i+1);if("TEMPLATE"===t.nodeName)for(e=0,n=(childNodes=t.content.childNodes).length;n>e;++e)s+=stringifyDOM(childNodes[e],i+1)}return s}function stringifyInstructions(t,i){let s=" ".repeat(i);switch(t.type){case"ha":s+="textBinding\n";break;case"rh":s+="callBinding\n";break;case"rk":s+="iteratorBinding\n";break;case"hb":s+="listenerBinding\n";break;case"rg":s+="propertyBinding\n";break;case"rj":s+="refBinding\n";break;case"hd":s+="stylePropertyBinding\n";break;case"re":s+="setProperty\n";break;case"he":s+="setAttribute\n";break;case"rf":s+="interpolation\n";break;case"rd":s+="hydrateLetElement\n",t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)});break;case"rb":s+=`hydrateAttribute: ${t.res}\n`,t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)});break;case"ra":s+=`hydrateElement: ${t.res}\n`,t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)});break;case"rc":s+=`hydrateTemplateController: ${t.res}\n`,s+=stringifyTemplateDefinition(t.def,i+1),t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)})}return s}function stringifyTemplateDefinition(def,t){const i=" ".repeat(t);let s=i;return s+=`TemplateDefinition: ${def.name}\n`,s+=stringifyDOM(def.template,t+1),s+=`${i} Instructions:\n`,def.instructions.forEach(e=>{s+=`${i}  Row:\n`,e.forEach(i=>{s+=stringifyInstructions(i,t+3)})}),s}var LogLevel,jt,xt,Vt,$t,Mt,BindingMode,BindingStrategy,Dt,Hooks,LifecycleFlags,ExpressionKind,ViewModelKind,Priority,BindingType,Ft,DelegationStrategy,CollectionKind,TargetedInstructionType,ViewCompileFlags,Nt,Access,Precedence,Ut,Char,zt,Ht,SymbolFlags,Kt,HTMLTargetedInstructionType,NodeType,qt,Wt,Qt,Gt,Zt;class AttrSyntax{constructor(t,i,s,e){this.fi=t,this.vi=i,this.target=s,this.command=e}}const Xt=(function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return Function("","return this")()}catch(t){return{}}})(),_t=(function(){let t,i,s,e,n;if(null!=Xt.performance&&null!=Xt.performance.now){const t=Xt.performance;return function(){return t.now()}}if(null!=Xt.process&&null!=Xt.process.gi){const r=function(){return(t()-e)/1e6};return i=Xt.process.gi,s=(t=function(){let t;return 1e9*(t=i())[0]+t[1]})(),n=1e9*Xt.process.bi(),e=s-n,r}throw Error("Unsupported runtime")})(),{pi:Jt,mi:Yt,wi:ti,yi:ii,Ci:si,Ti:ei}=(function(){if(null!=Xt.performance&&null!=Xt.performance.mark&&null!=Xt.performance.measure&&null!=Xt.performance.getEntriesByName&&null!=Xt.performance.getEntriesByType&&null!=Xt.performance.clearMarks&&null!=Xt.performance.clearMeasures){const t=Xt.performance;return{pi(name){t.mark(name)},mi(name,i,s){t.measure(name,i,s)},wi:name=>t.getEntriesByName(name),yi:type=>t.getEntriesByType(type),Ci(name){t.clearMarks(name)},Ti(name){t.clearMeasures(name)}}}if(null!=Xt.process&&null!=Xt.process.gi){const t=[],i={},s=function(i,value){let s=0;const e=t.length,n=[];for(;e>s;s++)t[s][i]===value&&n.push(t[s]);return n},e=function(type,name){let i,s=t.length;for(;s--;)(i=t[s]).entryType!==type||void 0!==name&&i.name!==name||t.splice(s,1)};return{pi(name){const s={name,entryType:"mark",startTime:_t(),duration:0};t.push(s),i[name]=s},mi(name,s,e){let n,r;if(null!=e){if(null==i[e])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${e}' does not exist.`);r=void 0!==i[e]?i[e].startTime:_t()}else r=_t();if(null!=s){if(null==i[s])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${s}' does not exist.`);n=void 0!==i[s]?i[s].startTime:0}else n=0;t.push({name,entryType:"measure",startTime:n,duration:r-n})},wi:name=>s("name",name),yi:type=>s("entryType",type),Ci(name){e("mark",name)},Ti(name){e("measure",name)}}}throw Error("Unsupported runtime")})(),{Ai:ni,Ri:ri}=(function(){let t=Xt.requestAnimationFrame,i=Xt.cancelAnimationFrame;if(void 0===t||void 0===i){let s=0,e=0;const n=[],r=1e3/60;t=function(t){let i,o;return 0===n.length&&(i=_t(),s=(o=Math.max(0,r-(i-s)))+i,setTimeout(function(){const t=n.slice(0);n.length=0;for(let i=0;t.length>i;++i)if(!t[i].Bi)try{t[i].Oi(s)}catch(t){setTimeout(function(){throw t},0)}},Math.round(o))),n.push({t:++e,Oi:t,Bi:0}),e},i=function(t){for(let i=0;n.length>i;++i)n[i].t===t&&(n[i].Bi=1)}}const s=function(i){return t.call(Xt,i)};return s.cancel=function(t){i.call(Xt,t)},Xt.requestAnimationFrame=t,Xt.cancelAnimationFrame=i,{Ai:s,Ri:i}})(),hi={}.hasOwnProperty,oi=Object.freeze([]),ci=Object.freeze({}),PLATFORM={global:Xt,ki:oi,It:ci,Si(){},now:_t,mark:Jt,measure:Yt,getEntriesByName:ti,getEntriesByType:ii,clearMarks:si,clearMeasures:ei,hasOwnProperty:hi,requestAnimationFrame:t=>ni(t),cancelAnimationFrame:t=>ri(t),clearInterval(t){Xt.clearInterval(t)},clearTimeout(t){Xt.clearTimeout(t)},setInterval:(t,i,...s)=>Xt.setInterval(t,i,...s),setTimeout:(t,i,...s)=>Xt.setTimeout(t,i,...s)};(function(LogLevel){LogLevel[LogLevel.error=0]="error",LogLevel[LogLevel.warn=1]="warn",LogLevel[LogLevel.info=2]="info",LogLevel[LogLevel.debug=3]="debug"})(LogLevel||(LogLevel={}));const Reporter={level:1,write(t,...i){},error:t=>Error(`Code ${t}`)},Tracer={enabled:0,Ii:0,Pi:null,rt(t,i,s){},lt(){},Ei(t){},Li(t){},ji(){},xi(){}},li=[].slice;"getOwnMetadata"in Reflect||(Reflect.getOwnMetadata=function(t,i){return i[t]},Reflect.metadata=function(t,i){return function(s){s[t]=i}});const ui=PLATFORM.hasOwnProperty,DI={Vi(...t){return 0===arguments.length?new vi:(new vi).register(...t)},$i(t){const i=Reflect.getOwnMetadata("design:paramtypes",t);return null==i?PLATFORM.ki:i},Mi(t){let dependencies;if(null==t.inject)dependencies=DI.$i(t);else{dependencies=[];let i=t;for(;"function"==typeof i;)ui.call(i,"inject")&&dependencies.push(...i.inject),i=Object.getPrototypeOf(i)}return dependencies},Di(t){const i=function(t,s,e){if(null==t)throw Reporter.error(16,i.Fi,i);return null==t.inject&&(t.inject=[]),t.inject[e]=i,t};return i.Fi=null==t?"Interface":t,i.Ni=function(){return i},i.Ui=function(t){return i.Ui=function(){throw Reporter.error(17,i)},i.register=function(s,e){const n=null==e?i:e;return t({zi:value=>s.xt(n,new ai(n,0,value)),singleton:value=>s.xt(n,new ai(n,1,value)),transient:value=>s.xt(n,new ai(n,2,value)),Oi:value=>s.xt(n,new ai(n,3,value)),Hi:t=>s.xt(n,new ai(n,5,t))})},i},i},inject:(...dependencies)=>(function(t,i,s){if("number"==typeof s){if(!ui.call(t,"inject")){const i=DI.$i(t);t.inject=i.slice()}1===dependencies.length&&(t.inject[s]=dependencies[0])}else if(i){const s=t.constructor;null==s.inject&&(s.inject={}),s.inject[i]=dependencies[0]}else if(s)s.value.inject=dependencies;else if(0===dependencies.length){const i=DI.$i(t);t.inject=i.slice()}else t.inject=dependencies}),transient:t=>(t.register=function(i){return Registration.transient(t,t).register(i,t)},t),singleton:t=>(t.register=function(i){return Registration.singleton(t,t).register(i,t)},t)},IContainer=DI.Di("IContainer").Ni(),IServiceLocator=IContainer,inject=DI.inject,all=i((t,i,s)=>s.getAll(t)),lazy=i((t,i,s)=>{let e=null;return()=>(null==e&&(e=s.get(t)),e)}),optional=i((t,i,s)=>s.has(t,1)?s.get(t):null);(function(t){t[t.zi=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.Oi=3]="callback",t[t.Ki=4]="array",t[t.Pt=5]="alias"})(jt||(jt={}));class ai{constructor(t,strategy,i){this.key=t,this.strategy=strategy,this.state=i}register(t,i){return t.xt(i||this.key,this)}resolve(t,i){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const i=t.qi(this.state);return this.state=i.construct(t)}case 2:return t.qi(this.state).construct(i);case 3:return this.state(t,i,this);case 4:return this.state[0].resolve(t,i);case 5:return t.get(this.state);default:throw Reporter.error(6,this.strategy)}}qi(t){switch(this.strategy){case 1:case 2:return t.qi(this.state);default:return null}}}class di{constructor(t,i,dependencies){this.Wi=t,this.Qi=i,this.dependencies=dependencies,this.Gi=null}static create(t){const dependencies=DI.Mi(t);return new di(t,gi.length>dependencies.length?gi[dependencies.length]:bi,dependencies)}construct(t,i){Tracer.enabled&&Tracer.rt("Factory","construct",[this.Wi,...li.call(arguments)]);const s=this.Gi;let e=void 0!==i?this.Qi.Zi(t,this.Wi,this.dependencies,i):this.Qi.Xi(t,this.Wi,this.dependencies);if(null==s)return Tracer.enabled&&Tracer.lt(),e;for(let t=0,i=s.length;i>t;++t)e=s[t](e);return Tracer.enabled&&Tracer.lt(),e}_i(t){return null==this.Gi&&(this.Gi=[]),this.Gi.push(t),1}}const fi={resolve:(t,i)=>i};class vi{constructor(t={}){this.parent=null,this.Ji=0,this.Yi=new Map,this.ts=t,null==t.ss&&(t.ss=new Map),this.ss=t.ss,this.es=t.es||(t.es=Object.create(null)),this.Yi.set(IContainer,fi)}register(...t){if(Tracer.enabled&&Tracer.rt("Container","register",li.call(arguments)),100==++this.Ji)throw Error("Unable to autoregister dependency");let i,s,value,e,r;for(let o=0,c=t.length;c>o;++o)if(n(i=t[o]))i.register(this);else if(void 0!==i.prototype)Registration.singleton(i,i).register(this);else for(e=0,r=(s=Object.keys(i)).length;r>e;++e)n(value=i[s[e]])?value.register(this):this.register(value);return--this.Ji,Tracer.enabled&&Tracer.lt(),this}xt(t,i){r(t);const s=this.Yi,e=s.get(t);return null==e?(s.set(t,i),"string"==typeof t&&(this.es[t]=i)):e instanceof ai&&4===e.strategy?e.state.push(i):s.set(t,new ai(t,4,[e,i])),i}_i(t,i){const s=this.ns(t);if(null==s)return 0;if(s.qi){const t=s.qi(this);return null==t?0:t._i(i)}return 0}ns(t,i=1){if(r(t),void 0!==t.resolve)return t;let s,e=this;for(;null!=e;){if(null!=(s=e.Yi.get(t)))return s;if(null==e.parent)return i?this.rs(t,e):null;e=e.parent}return null}has(t,i=0){return this.Yi.has(t)?1:i&&null!=this.parent?this.parent.has(t,1):0}get(t){if(Tracer.enabled&&Tracer.rt("Container","get",li.call(arguments)),r(t),void 0!==t.resolve)return Tracer.enabled&&Tracer.lt(),t.resolve(this,this);let i,s=this;for(;null!=s;){if(null!=(i=s.Yi.get(t)))return Tracer.enabled&&Tracer.lt(),i.resolve(s,this);if(null==s.parent)return i=this.rs(t,s),Tracer.enabled&&Tracer.lt(),i.resolve(s,this);s=s.parent}}getAll(t){Tracer.enabled&&Tracer.rt("Container","getAll",li.call(arguments)),r(t);let i,s=this;for(;null!=s;){if(null!=(i=s.Yi.get(t)))return Tracer.enabled&&Tracer.lt(),o(i,s,this);if(null==this.parent)return Tracer.enabled&&Tracer.lt(),PLATFORM.ki;s=s.parent}return Tracer.enabled&&Tracer.lt(),PLATFORM.ki}qi(t){let i=this.ss.get(t);return null==i&&(i=di.create(t),this.ss.set(t,i)),i}Lt(){Tracer.enabled&&Tracer.rt("Container","createChild",li.call(arguments));const t=this.ts,i={ss:t.ss,es:Object.assign(Object.create(null),t.es)},s=new vi(i);return s.parent=this,Tracer.enabled&&Tracer.lt(),s}rs(t,i){if(void 0!==t.register){const s=t.register(i,t);if(!(s instanceof Object)||null==s.resolve){const s=i.Yi.get(t);if(null!=s)return s;throw Reporter.error(40)}return s}const s=new ai(t,1,t);return i.Yi.set(t,s),s}}const Registration={zi:(t,value)=>new ai(t,0,value),singleton:(t,value)=>new ai(t,1,value),transient:(t,value)=>new ai(t,2,value),Oi:(t,i)=>new ai(t,3,i),Pt:(t,i)=>new ai(i,5,t),hs:(t,...i)=>({register(s){const e=s.ns(t);if(null!=e){let t=null;if(e.qi){const n=e.qi(s);null!=n&&(t=n.construct(s,i))}else t=e.resolve(s,s);null!=t&&t.register(s)}}})};class InstanceProvider{constructor(){this.zi=null}Mt(t){this.zi=t}resolve(t,i){if(void 0===this.zi)throw Reporter.error(50);return this.zi}Dt(){this.zi=null}}const gi=[{Xi:(t,i)=>new i,Zi:c},{Xi:(t,i,s)=>new i(t.get(s[0])),Zi:c},{Xi:(t,i,s)=>new i(t.get(s[0]),t.get(s[1])),Zi:c},{Xi:(t,i,s)=>new i(t.get(s[0]),t.get(s[1]),t.get(s[2])),Zi:c},{Xi:(t,i,s)=>new i(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3])),Zi:c},{Xi:(t,i,s)=>new i(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3]),t.get(s[4])),Zi:c}],bi={Xi:c,Zi:c},pi=encodeURIComponent,mi=t=>pi(t).replace("%24","$"),Profiler=(function(){const t=PLATFORM.now,i=[];let s;const e={os(name){i.push(name);let e=0,n=0;return{rt(){1==++e&&(n=t(),++s[name].cs),++s[name].ls},lt(){0==--e&&(s[name].duration+=t()-n)}}},enable(){s={};for(const t of i)s[t]={name:t,duration:0,cs:0,ls:0};e.enabled=1},disable(){e.enabled=0},us(t){Object.keys(s).map(t=>s[t]).sort((t,i)=>i.duration-t.duration).forEach(i=>{t(i.name,i.duration,i.cs,i.ls)})},enabled:0};return e})();class RuntimeCompilationResources{constructor(t){this.context=t}find(t,name){const i=t.it(name),s=this.context.es;let e=s[i];if(void 0===e&&(e=s[i]=this.context.ns(i,0)),null!=e&&e.qi){const t=e.qi(this.context);if(null!=t){const i=t.Wi.description;return void 0===i?null:i}}return null}create(t,name){const i=t.it(name),s=this.context.es;let e=s[i];if(void 0===e&&(e=s[i]=this.context.ns(i,0)),null!=e){const t=e.resolve(this.context,this.context);return void 0===t?null:t}return null}}class wi{constructor(t,i){this.as=t,this.Oi=i}t(t){t instanceof this.as&&this.Oi.call(null,t)}}const yi={},Ci={},Ti={},Ai={};xt=Object.freeze({all,DI,IContainer,inject,IServiceLocator,lazy,optional,Registration,singleton:t=>null==t?e:e(t),transient:t=>null==t?s:s(t),InstanceProvider,relativeToFile(name,t){const i=t?t.split("/"):t,s=name.trim().split("/");if("."===s[0].charAt(0)&&i){const t=i.slice(0,i.length-1);s.unshift(...t)}return(function(t){const i=t.length;let s,e=0;for(;i>e;++e)if("."===(s=t[e]))t.splice(e,1),e-=1;else if(".."===s){if(0===e||1===e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}})(s),s.join("/")},join(t,i){if(!t)return i;if(!i)return t;const s=t.match(/^([^\/]*?:)\//),e=s&&s.length>0?s[1]:"";let n;n=0===(t=t.slice(e.length)).indexOf("///")&&"file:"===e?"///":0===t.indexOf("//")?"//":0===t.indexOf("/")?"/":"";const r="/"===i.slice(-1)?"/":"",o=t.split("/"),c=i.split("/"),l=[];for(let t=0,i=o.length;i>t;++t)".."===o[t]?l.pop():"."!==o[t]&&""!==o[t]&&l.push(o[t]);for(let t=0,i=c.length;i>t;++t)".."===c[t]?l.pop():"."!==c[t]&&""!==c[t]&&l.push(c[t]);return e+n+l.join("/")+r},buildQueryString(t,i){if(null==t)return"";const s=[],e=Object.keys(t).sort();let n;for(let r=0,o=e.length;o>r;++r)s.push(...l(n=e[r],t[n],i));return 0===s.length?"":s.join("&")},parseQueryString(t){const i={};if(!t||"string"!=typeof t)return i;let s=t;"?"===s.charAt(0)&&(s=s.slice(1));const e=s.replace(/\+/g," ").split("&");for(let t=0;e.length>t;t++){const s=e[t].split("="),n=decodeURIComponent(s[0]);if(!n)continue;let r=n.split("]["),o=r.length-1;if(/\[/.test(r[0])&&/\]$/.test(r[o])?(r[o]=r[o].replace(/\]$/,""),o=(r=r.shift().split("[").concat(r)).length-1):o=0,2>s.length)i[n]=1;else{const value=s[1]?decodeURIComponent(s[1]):"";o?a(i,r,value):i[n]=u(i[n],value)}}return i},PLATFORM,Reporter,Tracer,get LogLevel(){return LogLevel},Profiler,RuntimeCompilationResources,EventAggregator:class{constructor(){this.ds={},this.messageHandlers=[]}fs(t,i){let s,e;if(!t)throw Reporter.error(0);if("string"==typeof t){const n=t;if(null!=(s=this.ds[n]))for(e=(s=s.slice()).length;e--;)d(s[e],i,n)}else{const i=t;for(e=(s=this.messageHandlers.slice()).length;e--;)f(s[e],i)}}subscribe(t,i){let s,e;if(!t)throw Reporter.error(0);if("string"==typeof t){const n=t;s=i,void 0===this.ds[n]&&(this.ds[n]=[]),e=this.ds[n]}else s=new wi(t,i),e=this.messageHandlers;return e.push(s),{Dt(){const t=e.indexOf(s);-1!==t&&e.splice(t,1)}}}vs(t,i){const s=this.subscribe(t,(t,e)=>(s.Dt(),i(t,e)));return s}},isNumeric,camelCase,kebabCase,toArray,nextId,resetId(t){Ai[t]=0},compareNumber});class Ri{constructor(t,i,s,e){if(this.gs=t,this.repeat=i,this.bs=s,this.ps=e,e)switch(t.length){case 0:this.has=this.ms;break;case 1:this.has=this.ws;break;default:this.has=this.ys}else switch(t.length){case 0:this.has=this.Cs;break;case 1:this.has=this.Ts;break;default:this.has=this.As}}Rs(t){return this.gs===t.gs&&this.repeat===t.repeat&&this.bs===t.bs&&this.ps===t.ps}As(t){return-1!==this.gs.indexOf(t)}Ts(t){return this.gs===t}Cs(t){return 0}ys(t){return-1===this.gs.indexOf(t)}ws(t){return this.gs!==t}ms(t){return 1}}class Interpretation{get pattern(){const value=this.Bs;return""===value?null:value}set pattern(value){null==value?(this.Bs="",this.parts=PLATFORM.ki):(this.Bs=value,this.parts=this.Os[value])}constructor(){this.Bs="",this.parts=PLATFORM.ki,this.ks={},this.Os={}}append(t,i){const{ks:s}=this;void 0===s[t]?s[t]=i:s[t]+=i}next(t){const{ks:i}=this;if(void 0!==i[t]){const{Os:s}=this;void 0===s[t]?s[t]=[i[t]]:s[t].push(i[t]),i[t]=void 0}}}class State{get pattern(){return this.Ss?this.Is[0]:null}constructor(t,...i){this.Ps=t,this.Es=[],this.types=null,this.Is=i,this.Ss=0}Ls(t){const i=this.Es,s=i.length;let e=null;for(let n=0;s>n;++n)if(t.Rs((e=i[n]).Ps))return e;return null}append(t,i){const{Is:s}=this;-1===s.indexOf(i)&&s.push(i);let e=this.Ls(t);return null==e&&(e=new State(t,i),this.Es.push(e),t.repeat&&e.Es.push(e)),e}js(t,i){const s=[],e=this.Es,n=e.length;let r=0,o=null,c=0,l=0;for(;n>c;++c)if((o=e[c]).Ps.has(t))if(s.push(o),r=o.Is.length,l=0,o.Ps.bs)for(;r>l;++l)i.next(o.Is[l]);else for(;r>l;++l)i.append(o.Is[l],t);return s}}class Bi{constructor(t){this.text=t;const i=this.xs=t.length,s=this.Vs=[];for(let e=0;i>e;++e)s.push(new Ri(t[e],0,0,0))}$s(t){const{xs:i,Vs:s}=this;for(let e=0;i>e;++e)t(s[e])}}class Oi{constructor(t){this.text="PART",this.Ms=new Ri(t,1,0,1)}$s(t){t(this.Ms)}}class ki{constructor(t){this.text=t,this.Ms=new Ri(t,0,1,0)}$s(t){t(this.Ms)}}class Si{constructor(){this.Ds=0,this.Fs=0,this.symbols=0}}const ISyntaxInterpreter=DI.Di("ISyntaxInterpreter").Ui(t=>t.singleton(Ii));class Ii{constructor(){this.Ns=new State(null),this.Us=[this.Ns]}add(t){let i=0;if(Array.isArray(t)){const s=t.length;for(;s>i;++i)this.add(t[i]);return}let s=this.Ns;const def=t,e=def.pattern,n=new Si,r=this.parse(def,n),o=r.length,c=t=>{s=s.append(t,e)};for(i=0;o>i;++i)r[i].$s(c);s.types=n,s.Ss=1}hs(name){const t=new Interpretation;let i=this.Us;const s=name.length;for(let e=0;s>e&&0!==(i=this.zs(i,name.charAt(e),t)).length;++e);if(i.sort((t,i)=>{if(!t.Ss)return i.Ss?1:0;if(!i.Ss)return-1;const s=t.types,e=i.types;return s.Ds!==e.Ds?e.Ds-s.Ds:s.Fs!==e.Fs?e.Fs-s.Fs:s.symbols!==e.symbols?e.symbols-s.symbols:0}),i.length>0){const s=i[0];s.Ps.bs||t.next(s.pattern),t.pattern=s.pattern}return t}zs(t,i,s){const e=[];let n=null;const r=t.length;for(let o=0;r>o;++o)e.push(...(n=t[o]).js(i,s));return e}parse(def,t){const i=[],s=def.pattern,e=s.length;let n=0,r=0,o="";for(;e>n;)o=s.charAt(n),-1===def.symbols.indexOf(o)?n===r&&"P"===o&&"PART"===s.slice(n,n+4)?(r=n+=4,i.push(new Oi(def.symbols)),++t.Fs):++n:n!==r?(i.push(new Bi(s.slice(r,n))),++t.Ds,r=n):(i.push(new ki(s.slice(r,n+1))),++t.symbols,r=++n);return r!==n&&(i.push(new Bi(s.slice(r,n))),++t.Ds),i}}const IAttributePattern=DI.Di("IAttributePattern").Ni();class DotSeparatedAttributePattern{Hs(t,i,parts){return new AttrSyntax(t,i,parts[0],parts[1])}Ks(t,i,parts){return new AttrSyntax(t,i,parts[0],parts[2])}}attributePattern({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})(DotSeparatedAttributePattern);class RefAttributePattern{qs(t,i,parts){return new AttrSyntax(t,i,"ref",null)}Ws(t,i,parts){return new AttrSyntax(t,i,"ref",parts[1])}}attributePattern({pattern:"ref",symbols:""},{pattern:"ref.PART",symbols:"."})(RefAttributePattern);class ColonPrefixedBindAttributePattern{Qs(t,i,parts){return new AttrSyntax(t,i,parts[0],"bind")}}attributePattern({pattern:":PART",symbols:":"})(ColonPrefixedBindAttributePattern);class AtPrefixedTriggerAttributePattern{Gs(t,i,parts){return new AttrSyntax(t,i,parts[0],"trigger")}}attributePattern({pattern:"@PART",symbols:"@"})(AtPrefixedTriggerAttributePattern);const IAttributeParser=DI.Di("IAttributeParser").Ui(t=>t.singleton(Li)),{rt:Pi,lt:Ei}=Profiler.os("AttributeParser");class Li{constructor(t,i){this.Zs=t,this.cache={};const s=this.Is={};i.forEach(i=>{const e=i.i;t.add(e),e.forEach(def=>{s[def.pattern]=i})})}parse(name,value){Profiler.enabled&&Pi();let t=this.cache[name];null==t&&(t=this.cache[name]=this.Zs.hs(name));const i=t.pattern;return null==i?(Profiler.enabled&&Ei(),new AttrSyntax(name,value,name,null)):(Profiler.enabled&&Ei(),this.Is[i][i](name,value,t.parts))}}Li.inject=[ISyntaxInterpreter,all(IAttributePattern)];const ji=[].slice,xi=new WeakMap;let Vi=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("ProxySubscriberCollection","constructor",ji.call(arguments)),this.Xs=0,this.raw=i,this.key=s,this._s=t,this.subscribe=this.o,this.unsubscribe=this.l,i[s]instanceof Object&&(i[s]=ProxyObserver.Js(i[s])._s),Tracer.enabled&&Tracer.lt()}Ys(value,t){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.g(value,i,18|t))}te(){return this.raw[this.key]}ie(t){}};Vi=v([subscriberCollection()],Vi);let ProxyObserver=Vt=class{constructor(t){Tracer.enabled&&Tracer.rt("ProxyObserver","constructor",ji.call(arguments)),this.raw=t,this._s=new Proxy(t,this),xi.set(t,this._s),this.se={},Tracer.enabled&&Tracer.lt()}static ee(t){if(void 0===t.ne){const i=xi.get(t);return void 0===i?t:i}return t}static pt(t){const i=t.ne;return void 0===i?t:i}static Js(t,i){let s;if(void 0===t.ne){const i=xi.get(t);s=void 0===i?new Vt(t):i.ft}else s=t.ft;if(void 0===i)return s;let e=s.se[i];if(void 0===e){const n=this.pt(t);e=s.se[i]=new Vi(s._s,n,i)}return e}static re(t){return void 0!==t.ne}get(t,i,s){return"$observer"===i?this:"$raw"===i?t:t[i]}set(t,i,value,s){const e=t[i];return e!==value&&(t[i]=value,this.he(value,e,i),this.R(i,value,e,18)),1}deleteProperty(t,i){const s=t[i];return Reflect.deleteProperty(t,i)?(void 0!==s&&(this.he(void 0,s,i),this.R(i,void 0,s,18)),1):0}defineProperty(t,i,s){const e=t[i];return Reflect.defineProperty(t,i,s)?(s.value!==e&&(this.he(s.value,e,i),this.R(i,s.value,e,18)),1):0}apply(t,i,s=PLATFORM.ki){return Reflect.apply(t,t,s)}subscribe(t,i){if(void 0===i)this.m(t);else{let s=this.se[i];void 0===s&&(s=this.se[i]=new Vi(this._s,this.raw,i)),s.o(t)}}unsubscribe(t,i){if(void 0===i)this.C(t);else{const s=this.se[i];void 0!==s&&s.l(t)}}he(t,i,s){const e=this.se[s];void 0!==e&&e.g(t,i,18)}};ProxyObserver=Vt=v([proxySubscriberCollection()],ProxyObserver);let SetterObserver=class{constructor(t,i,s,e){this.oe=t,this.ce=s,this.le=e,this.ue=void 0,this.oldValue=void 0,this.Xs=0,this.dt=0,this.ae=536870927&i,Tracer.enabled&&Tracer.lt()}te(){return this.ue}Ys(t,i){if(this.dt){const s=this.ue;this.ue=t,0===this.oe.fe.de?0==(4096&i)&&this.g(t,s,this.ae|i):this.Xs||(this.Xs=1,this.oldValue=s,this.oe.fe.add(this))}else this.ce[this.le]=t}ie(t){this.Xs=0;const i=this.ue,s=this.oldValue;this.oldValue=i,this.g(i,s,this.ae|t)}subscribe(t){0==this.dt&&(this.dt=1,this.ue=this.ce[this.le],Reflect.defineProperty(this.ce,this.le,{ve:1,vt:1,get:()=>this.te(),set:value=>{this.Ys(value,0)}})||Reporter.write(1,this.le,this.ce)),this.o(t)}};SetterObserver=v([subscriberCollection()],SetterObserver);const $i=[].slice;(function(t){t[t.ge=250]="NilScope",t[t.be=252]="NilOverrideContext",t[t.pe=253]="NilParentScope"})($t||($t={}));class Mi{Js(t,i,s,e){return Tracer.enabled&&Tracer.rt("InternalObserversLookup","getOrCreate",$i.call(arguments)),void 0===this[e]&&(this[e]=new SetterObserver(t,i,s,e)),Tracer.enabled&&Tracer.lt(),this[e]}}class BindingContext{constructor(t,value){if(this.me=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}static create(t,i,value){const s=new BindingContext(i,value);return 2&t?ProxyObserver.Js(s)._s:s}static get(t,name,i,s){if(Tracer.enabled&&Tracer.rt("BindingContext","get",$i.call(arguments)),null==t)throw Reporter.error(250);let e=t.we;if(i>0){for(;i>0;){if(null==e.ye)return void(Tracer.enabled&&Tracer.lt());i--,e=e.ye}return Tracer.enabled&&Tracer.lt(),name in e?e:e.zt}for(;e&&!(name in e)&&!(e.zt&&name in e.zt);)e=e.ye;if(e)return Tracer.enabled&&Tracer.lt(),name in e?e:e.zt;if((536870912&s)>0){const e=this.get(t.Ce[BindingContext.Te],name,i,-536870913&s|16777216);if(null!==e)return Tracer.enabled&&Tracer.lt(),e}return 16777216&s?(Tracer.enabled&&Tracer.lt(),null):(Tracer.enabled&&Tracer.lt(),t.zt||t.we)}Ae(t){return Tracer.enabled&&Tracer.rt("BindingContext","getObservers",$i.call(arguments)),null==this.Re&&(this.Re=new Mi),Tracer.enabled&&Tracer.lt(),this.Re}}BindingContext.Te=null;class Scope{constructor(t,i){this.zt=t,this.we=i,this.Ce=void 0}static create(t,i,s){return Tracer.enabled&&Tracer.rt("Scope","create",$i.call(arguments)),Tracer.enabled&&Tracer.lt(),new Scope(i,null==s?OverrideContext.create(t,i,s):s)}static Be(t,i){if(Tracer.enabled&&Tracer.rt("Scope","fromOverride",$i.call(arguments)),null==i)throw Reporter.error(252);return Tracer.enabled&&Tracer.lt(),new Scope(i.zt,i)}static Oe(t,i,s){if(Tracer.enabled&&Tracer.rt("Scope","fromParent",$i.call(arguments)),null==i)throw Reporter.error(253);return Tracer.enabled&&Tracer.lt(),new Scope(s,OverrideContext.create(t,s,i.we))}}class OverrideContext{constructor(t,i){this.me=1,this.zt=t,this.ye=i}static create(t,i,s){return Tracer.enabled&&Tracer.rt("OverrideContext","create",$i.call(arguments)),Tracer.enabled&&Tracer.lt(),new OverrideContext(i,void 0===s?null:s)}Ae(){return Tracer.enabled&&Tracer.rt("OverrideContext","getObservers",$i.call(arguments)),void 0===this.Re&&(this.Re=new Mi),Tracer.enabled&&Tracer.lt(),this.Re}}const ISignaler=DI.Di("ISignaler").Ui(t=>t.singleton(Di));class Di{constructor(){this.ke=Object.create(null)}Se(name,t){const i=this.ke[name];if(void 0!==i)for(const s of i.keys())s.J(void 0,void 0,16|t)}Ie(name,t){const i=this.ke,s=i[name];void 0===s?i[name]=new Set([t]):s.add(t)}Pe(name,t){const i=this.ke[name];i&&i.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",it(name){return`${this.name}:${name}`},ui(t){return t.kind===this},Ee(t,i){const s=i,e=s,n="string"==typeof t?{name:t}:t;return e.kind=BindingBehaviorResource,e.description=n,s.register=E,s}},ValueConverterResource={name:"value-converter",it(name){return`${this.name}:${name}`},ui(t){return t.kind===this},Ee(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=ValueConverterResource,s.description=e,s.register=L,s}};(function(t){t[t.Le=202]="NoLocator",t[t.je=203]="NoBehaviorFound",t[t.xe=204]="BehaviorAlreadyApplied",t[t.Ve=205]="NoConverterFound",t[t.$e=206]="NoBinding",t[t.Me=207]="NotAFunction",t[t.De=208]="UnknownOperator",t[t.ge=250]="NilScope"})(Mt||(Mt={}));class BindingBehavior{constructor(t,name,i){this.st=38962,this.Fe=t,this.name=name,this.Ne=i,this.Ue=BindingBehaviorResource.it(this.name)}evaluate(t,i,s){return this.Fe.evaluate(t,i,s)}assign(t,i,s,value){return this.Fe.assign(t,i,s,value)}connect(t,i,s){this.Fe.connect(t,i,s)}bind(t,i,s){if(null==i)throw Reporter.error(250,this);if(!s)throw Reporter.error(206,this);const e=s.ze;if(!e)throw Reporter.error(202,this);hasBind(this.Fe)&&this.Fe.bind(t,i,s);const n=this.Ue,r=e.get(n);if(!r)throw Reporter.error(203,this);void 0===s[n]?(s[n]=r,r.bind.call(r,t,i,s,...j(t,i,e,this.Ne))):Reporter.write(204,this)}He(t,i,s){const e=this.Ue;void 0!==s[e]?(s[e].He(t,i,s),s[e]=void 0):Reporter.write(204,this),hasUnbind(this.Fe)&&this.Fe.He(t,i,s)}accept(t){return t.Ke(this)}}class ValueConverter{constructor(t,name,i){this.st=36913,this.Fe=t,this.name=name,this.Ne=i,this.qe=ValueConverterResource.it(this.name)}evaluate(t,i,s){if(!s)throw Reporter.error(202,this);const e=s.get(this.qe);if(!e)throw Reporter.error(205,this);if("toView"in e){const n=this.Ne,r=n.length,o=Array(r+1);o[0]=this.Fe.evaluate(t,i,s);for(let e=0;r>e;++e)o[e+1]=n[e].evaluate(t,i,s);return e.We.call(e,...o)}return this.Fe.evaluate(t,i,s)}assign(t,i,s,value){if(!s)throw Reporter.error(202,this);const e=s.get(this.qe);if(!e)throw Reporter.error(205,this);return"fromView"in e&&(value=e.Qe.call(e,value,...j(t,i,s,this.Ne))),this.Fe.assign(t,i,s,value)}connect(t,i,s){if(null==i)throw Reporter.error(250,this);if(!s)throw Reporter.error(206,this);const e=s.ze;if(!e)throw Reporter.error(202,this);this.Fe.connect(t,i,s);const n=this.Ne;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,i,s);const r=e.get(this.qe);if(!r)throw Reporter.error(205,this);const o=r.ke;if(void 0===o)return;const c=e.get(ISignaler);for(let t=0,i=o.length;i>t;++t)c.Ie(o[t],s)}He(t,i,s){const e=s.ze,n=e.get(this.qe).ke;if(void 0===n)return;const r=e.get(ISignaler);for(let t=0,i=n.length;i>t;++t)r.Pe(n[t],s)}accept(t){return t.Ge(this)}}class Assign{constructor(t,value){this.st=8208,this.target=t,this.value=value}evaluate(t,i,s){return this.target.assign(t,i,s,this.value.evaluate(t,i,s))}connect(t,i,s){}assign(t,i,s,value){return this.value.assign(t,i,s,value),this.target.assign(t,i,s,value)}accept(t){return t.Ze(this)}}class Conditional{constructor(t,i,s){this.st=63,this.assign=PLATFORM.Si,this.Xe=t,this._e=i,this.Je=s}evaluate(t,i,s){return this.Xe.evaluate(t,i,s)?this._e.evaluate(t,i,s):this.Je.evaluate(t,i,s)}connect(t,i,s){this.Xe.evaluate(t,i,null)?(this.Xe.connect(t,i,s),this._e.connect(t,i,s)):(this.Xe.connect(t,i,s),this.Je.connect(t,i,s))}accept(t){return t.Ye(this)}}class AccessThis{constructor(t=0){this.st=1793,this.assign=PLATFORM.Si,this.connect=PLATFORM.Si,this.Zt=t}evaluate(t,i,s){if(null==i)throw Reporter.error(250,this);let e=i.we,n=this.Zt;for(;n--&&e;)e=e.ye;return 1>n&&e?e.zt:void 0}accept(t){return t.tn(this)}}AccessThis.in=new AccessThis(0),AccessThis.sn=new AccessThis(1);class AccessScope{constructor(name,t=0){this.st=10082,this.name=name,this.Zt=t}evaluate(t,i,s){return BindingContext.get(i,this.name,this.Zt,t)[this.name]}assign(t,i,s,value){const e=BindingContext.get(i,this.name,this.Zt,t);if(e instanceof Object)return void 0!==e.Re&&void 0!==e.Re[this.name]?(e.Re[this.name].Ys(value,t),value):e[this.name]=value}connect(t,i,s){const e=BindingContext.get(i,this.name,this.Zt,t);s.ut(t,e,this.name)}accept(t){return t.en(this)}}class AccessMember{constructor(t,name){this.st=9323,this.object=t,this.name=name}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);return null==e?e:e[this.name]}assign(t,i,s,value){const e=this.object.evaluate(t,i,s);return e instanceof Object?void 0!==e.Re&&void 0!==e.Re[this.name]?e.Re[this.name].Ys(value,t):e[this.name]=value:this.object.assign(t,i,s,{[this.name]:value}),value}connect(t,i,s){const e=this.object.evaluate(t,i,null);this.object.connect(t,i,s),e instanceof Object&&s.ut(t,e,this.name)}accept(t){return t.nn(this)}}class AccessKeyed{constructor(t,i){this.st=9324,this.object=t,this.key=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);if(e instanceof Object)return e[this.key.evaluate(t,i,s)]}assign(t,i,s,value){return this.object.evaluate(t,i,s)[this.key.evaluate(t,i,s)]=value}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),e instanceof Object){this.key.connect(t,i,s);const n=this.key.evaluate(t,i,null);Array.isArray(e)&&isNumeric(n)?2&t&&s.ut(t,e,n):s.ut(t,e,n)}}accept(t){return t.rn(this)}}class CallScope{constructor(name,t,i=0){this.st=1448,this.assign=PLATFORM.Si,this.name=name,this.Ne=t,this.Zt=i}evaluate(t,i,s){const e=j(t,i,s,this.Ne),n=BindingContext.get(i,this.name,this.Zt,t),r=x(t,n,this.name);if(r)return r.apply(n,e)}connect(t,i,s){const e=this.Ne;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.hn(this)}}class CallMember{constructor(t,name,i){this.st=1161,this.assign=PLATFORM.Si,this.object=t,this.name=name,this.Ne=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s),n=j(t,i,s,this.Ne),r=x(t,e,this.name);if(r)return r.apply(e,n)}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),x(-2097153&t,e,this.name)){const e=this.Ne;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.on(this)}}class CallFunction{constructor(t,i){this.st=1162,this.assign=PLATFORM.Si,this.cn=t,this.Ne=i}evaluate(t,i,s){const e=this.cn.evaluate(t,i,s);if("function"==typeof e)return e.apply(null,j(t,i,s,this.Ne));if(2097152&t||null!=e)throw Reporter.error(207,this)}connect(t,i,s){const e=this.cn.evaluate(t,i,null);if(this.cn.connect(t,i,s),"function"==typeof e){const e=this.Ne;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.ln(this)}}class Binary{constructor(t,i,s){this.st=46,this.assign=PLATFORM.Si,this.un=t,this.left=i,this.right=s,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){const e=this.left.evaluate(t,i,null);this.left.connect(t,i,s),"&&"===this.un&&!e||"||"===this.un&&e||this.right.connect(t,i,s)}an(t,i,s){return this.left.evaluate(t,i,s)&&this.right.evaluate(t,i,s)}dn(t,i,s){return this.left.evaluate(t,i,s)||this.right.evaluate(t,i,s)}fn(t,i,s){return this.left.evaluate(t,i,s)==this.right.evaluate(t,i,s)}vn(t,i,s){return this.left.evaluate(t,i,s)===this.right.evaluate(t,i,s)}gn(t,i,s){return this.left.evaluate(t,i,s)!=this.right.evaluate(t,i,s)}bn(t,i,s){return this.left.evaluate(t,i,s)!==this.right.evaluate(t,i,s)}pn(t,i,s){const e=this.right.evaluate(t,i,s);return"function"==typeof e?this.left.evaluate(t,i,s)instanceof e:0}mn(t,i,s){const e=this.right.evaluate(t,i,s);return e instanceof Object?this.left.evaluate(t,i,s)in e:0}wn(t,i,s){return this.left.evaluate(t,i,s)+this.right.evaluate(t,i,s)}yn(t,i,s){return this.left.evaluate(t,i,s)-this.right.evaluate(t,i,s)}Cn(t,i,s){return this.left.evaluate(t,i,s)*this.right.evaluate(t,i,s)}Tn(t,i,s){return this.left.evaluate(t,i,s)/this.right.evaluate(t,i,s)}An(t,i,s){return this.left.evaluate(t,i,s)%this.right.evaluate(t,i,s)}Rn(t,i,s){return this.left.evaluate(t,i,s)<this.right.evaluate(t,i,s)}Bn(t,i,s){return this.left.evaluate(t,i,s)>this.right.evaluate(t,i,s)}On(t,i,s){return this.left.evaluate(t,i,s)<=this.right.evaluate(t,i,s)}kn(t,i,s){return this.left.evaluate(t,i,s)>=this.right.evaluate(t,i,s)}accept(t){return t.Sn(this)}}class Unary{constructor(t,i){this.st=39,this.assign=PLATFORM.Si,this.un=t,this.Fe=i,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){this.Fe.connect(t,i,s)}In(t,i,s){this.Fe.evaluate(t,i,s)}Pn(t,i,s){return typeof this.Fe.evaluate(t,i,s)}En(t,i,s){return!this.Fe.evaluate(t,i,s)}yn(t,i,s){return-this.Fe.evaluate(t,i,s)}wn(t,i,s){return+this.Fe.evaluate(t,i,s)}accept(t){return t.Ln(this)}}class PrimitiveLiteral{constructor(value){this.st=17925,this.assign=PLATFORM.Si,this.connect=PLATFORM.Si,this.value=value}evaluate(t,i,s){return this.value}accept(t){return t.jn(this)}}PrimitiveLiteral.xn=new PrimitiveLiteral(void 0),PrimitiveLiteral.Vn=new PrimitiveLiteral(null),PrimitiveLiteral.$n=new PrimitiveLiteral(1),PrimitiveLiteral.Mn=new PrimitiveLiteral(0),PrimitiveLiteral.Dn=new PrimitiveLiteral("");class ArrayLiteral{constructor(t){this.st=17955,this.assign=PLATFORM.Si,this.elements=t}evaluate(t,i,s){const e=this.elements,n=e.length,r=Array(n);for(let o=0;n>o;++o)r[o]=e[o].evaluate(t,i,s);return r}connect(t,i,s){const e=this.elements;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.Fn(this)}}ArrayLiteral.Dn=new ArrayLiteral(PLATFORM.ki);class ObjectLiteral{constructor(t,i){this.st=17956,this.assign=PLATFORM.Si,this.keys=t,this.values=i}evaluate(t,i,s){const e={},n=this.keys,r=this.values;for(let o=0,c=n.length;c>o;++o)e[n[o]]=r[o].evaluate(t,i,s);return e}connect(t,i,s){const e=this.values;for(let n=0,r=this.keys.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.Nn(this)}}ObjectLiteral.Dn=new ObjectLiteral(PLATFORM.ki,PLATFORM.ki);class Template{constructor(t,i){this.st=17958,this.assign=PLATFORM.Si,this.Un=t,this.et=void 0===i?PLATFORM.ki:i}evaluate(t,i,s){const e=this.et,n=this.Un;let r=n[0];for(let o=0,c=e.length;c>o;++o)r+=e[o].evaluate(t,i,s),r+=n[o+1];return r}connect(t,i,s){const e=this.et;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s),n++}accept(t){return t.zn(this)}}Template.Dn=new Template([""]);class TaggedTemplate{constructor(t,i,s,e){this.st=1197,this.assign=PLATFORM.Si,this.Un=t,this.Un.raw=i,this.cn=s,this.et=void 0===e?PLATFORM.ki:e}evaluate(t,i,s){const e=this.et,n=e.length,r=Array(n);for(let o=0,c=n;c>o;++o)r[o]=e[o].evaluate(t,i,s);const o=this.cn.evaluate(t,i,s);if("function"!=typeof o)throw Reporter.error(207,this);return o.apply(null,[this.Un].concat(r))}connect(t,i,s){const e=this.et;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s);this.cn.connect(t,i,s)}accept(t){return t.Hn(this)}}class ArrayBindingPattern{constructor(t){this.st=65556,this.elements=t}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.Kn(this)}}class ObjectBindingPattern{constructor(t,i){this.st=65557,this.keys=t,this.values=i}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.qn(this)}}class BindingIdentifier{constructor(name){this.st=65558,this.name=name}evaluate(t,i,s){return this.name}connect(t,i,s){}accept(t){return t.Wn(this)}}const Fi={}.toString;class ForOfStatement{constructor(t,i){this.st=6199,this.assign=PLATFORM.Si,this.Qn=t,this.Gn=i}evaluate(t,i,s){return this.Gn.evaluate(t,i,s)}count(t,i){return Ui[Fi.call(i)](i)}Zn(t,i,s){Ni[Fi.call(i)](33554432|t,i,s)}connect(t,i,s){this.Qn.connect(t,i,s),this.Gn.connect(t,i,s)}bind(t,i,s){hasBind(this.Gn)&&this.Gn.bind(t,i,s)}He(t,i,s){hasUnbind(this.Gn)&&this.Gn.He(t,i,s)}accept(t){return t.Xn(this)}}class Interpolation{constructor(parts,t){this.st=24,this.assign=PLATFORM.Si,this.parts=parts,this.et=void 0===t?PLATFORM.ki:t,this._n=this.et.length>1,this.Jn=this.et[0]}evaluate(t,i,s){if(this._n){const e=this.et,parts=this.parts;let n=parts[0];for(let r=0,o=e.length;o>r;++r)n+=e[r].evaluate(t,i,s),n+=parts[r+1];return n}{const parts=this.parts;return parts[0]+this.Jn.evaluate(t,i,s)+parts[1]}}connect(t,i,s){}accept(t){return t.Yn(this)}}const Ni={tr(t,i,s){if(33554434==(33554434&t)){const t=ProxyObserver.pt(i),e=t.length;let n,r=0;for(;e>r;++r)(n=t[r])instanceof Object&&(n=t[r]=ProxyObserver.Js(n)._s),s(t,r,n)}else for(let t=0,e=i.length;e>t;++t)s(i,t,i[t])},ir(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.entries())e[++n]=t;Ni["tr"](-33554433&t,e,s)},sr(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.keys())e[++n]=t;Ni["tr"](-33554433&t,e,s)},er(t,i,s){const e=Array(i);for(let t=0;i>t;++t)e[t]=t;Ni["tr"](-33554433&t,e,s)},nr(t,i,s){},rr(t,i,s){}},Ui={tr:t=>t.length,ir:t=>t.size,sr:t=>t.size,er:t=>t,nr:()=>0,rr:()=>0};(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.We=2]="toView",BindingMode[BindingMode.Qe=4]="fromView",BindingMode[BindingMode.hr=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode={})),(function(BindingStrategy){BindingStrategy[BindingStrategy.or=1]="getterSetter",BindingStrategy[BindingStrategy.cr=2]="proxies"})(BindingStrategy||(BindingStrategy={}));const zi=3;(function(State){State[State.lr=0]="none",State[State.ur=1]="isBinding",State[State.ar=2]="isUnbinding",State[State.dr=4]="isBound",State[State.vr=5]="isBoundOrBinding",State[State.gr=6]="isBoundOrUnbinding",State[State.br=8]="isAttaching",State[State.pr=16]="isDetaching",State[State.mr=32]="isAttached",State[State.wr=40]="isAttachedOrAttaching",State[State.yr=48]="isAttachedOrDetaching",State[State.Cr=64]="isMounted",State[State.Tr=128]="isCached",State[State.Ar=256]="needsBind",State[State.Rr=512]="needsUnbind",State[State.Br=1024]="needsAttach",State[State.Or=2048]="needsDetach",State[State.kr=4096]="needsMount",State[State.Sr=8192]="needsUnmount",State[State.Ir=16384]="hasLockedScope",State[State.Pr=32768]="canBeCached",State[State.Er=65536]="inBoundQueue",State[State.Lr=131072]="inUnboundQueue",State[State.jr=262144]="inAttachedQueue",State[State.xr=524288]="inDetachedQueue",State[State.Vr=1048576]="inMountQueue",State[State.$r=2097152]="inUnmountQueue"})(Dt||(Dt={})),(function(Hooks){Hooks[Hooks.lr=1]="none",Hooks[Hooks.Mr=2]="hasCreated",Hooks[Hooks.Dr=4]="hasBinding",Hooks[Hooks.Fr=8]="hasBound",Hooks[Hooks.Nr=16]="hasAttaching",Hooks[Hooks.Ur=32]="hasAttached",Hooks[Hooks.zr=64]="hasDetaching",Hooks[Hooks.Hr=128]="hasDetached",Hooks[Hooks.Kr=256]="hasUnbinding",Hooks[Hooks.qr=512]="hasUnbound",Hooks[Hooks.Wr=1024]="hasRender",Hooks[Hooks.Qr=2048]="hasCaching"})(Hooks||(Hooks={})),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.lr=0]="none",LifecycleFlags[LifecycleFlags.Gr=536870927]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Zr=536870912]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.Xr=15]="bindingStrategy",LifecycleFlags[LifecycleFlags._r=1]="getterSetterStrategy",LifecycleFlags[LifecycleFlags.Jr=2]="proxyStrategy",LifecycleFlags[LifecycleFlags.update=48]="update",LifecycleFlags[LifecycleFlags.Yr=16]="updateTargetInstance",LifecycleFlags[LifecycleFlags.th=32]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524224]="from",LifecycleFlags[LifecycleFlags.ih=960]="fromFlush",LifecycleFlags[LifecycleFlags.sh=64]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.eh=128]="fromSyncFlush",LifecycleFlags[LifecycleFlags.nh=256]="fromTick",LifecycleFlags[LifecycleFlags.rh=512]="fromBatch",LifecycleFlags[LifecycleFlags.hh=1024]="fromStartTask",LifecycleFlags[LifecycleFlags.oh=2048]="fromStopTask",LifecycleFlags[LifecycleFlags.lh=4096]="fromBind",LifecycleFlags[LifecycleFlags.uh=8192]="fromUnbind",LifecycleFlags[LifecycleFlags.ah=16384]="fromAttach",LifecycleFlags[LifecycleFlags.dh=32768]="fromDetach",LifecycleFlags[LifecycleFlags.fh=65536]="fromCache",LifecycleFlags[LifecycleFlags.vh=131072]="fromDOMEvent",LifecycleFlags[LifecycleFlags.gh=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.bh=524288]="allowPublishRoundtrip",LifecycleFlags[LifecycleFlags.ph=1048576]="isPublishing",LifecycleFlags[LifecycleFlags.mh=2097152]="mustEvaluate",LifecycleFlags[LifecycleFlags.wh=4194304]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.yh=8388608]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Ch=16777216]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Th=33554432]="isOriginalArray",LifecycleFlags[LifecycleFlags.Ah=67108864]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Rh=134217728]="updateOneTimeBindings",LifecycleFlags[LifecycleFlags.Bh=268435456]="reorderNodes"})(LifecycleFlags||(LifecycleFlags={})),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Oh=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Wi=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind={})),(function(ViewModelKind){ViewModelKind[ViewModelKind.customElement=0]="customElement",ViewModelKind[ViewModelKind.customAttribute=1]="customAttribute",ViewModelKind[ViewModelKind.kh=2]="synthetic"})(ViewModelKind||(ViewModelKind={}));const IController=DI.Di("IController").Ni(),IViewFactory=DI.Di("IViewFactory").Ni();class Hi{get Sh(){let t=this;for(;void 0!==t.Ih&&t.Ih.Ph===this.Ph;)t=t.Ih;return t}get Bt(){let t=this;for(;void 0!==t.next&&t.next.Ph===this.Ph;)t=t.next;return t}constructor(t,i,s=16384,e=0){this.Eh=t,this.context=i,this.Ph=s,this.Lh=e,this.next=void 0,this.Ih=void 0,this.jh=0}Rs(t,i){return this.Eh===t&&this.context===i}call(t){if(void 0!==this.Eh&&(void 0!==this.context?this.Eh.call(this.context,t):this.Eh(t)),this.Lh)return this.xh(1);if(this.jh){const t=this.next;return this.next=void 0,t}return this.next}rotate(){if(void 0===this.Ih||this.Ih.Ph>this.Ph)return;const{Sh:t,Bt:i}=this,s=t.Ih,e=i.next,n=this.Ih;this.Ih=s,void 0!==s&&(s.next=this),i.next=t,t.Ih=i,n.next=e,void 0!==e&&(e.Ih=n)}link(t){this.Ih=t,void 0!==t.next&&(t.next.Ih=this),this.next=t.next,t.next=this}xh(t=0){if(this.jh=1,this.Eh=void 0,this.context=void 0,void 0!==this.Ih&&(this.Ih.next=this.next),void 0!==this.next&&(this.next.Ih=this.Ih),this.Ih=void 0,t){const{next:t}=this;return this.next=void 0,t}return this.next}}(function(Priority){Priority[Priority.Vh=32768]="preempt",Priority[Priority.high=28672]="high",Priority[Priority.bind=24576]="bind",Priority[Priority.$h=20480]="attach",Priority[Priority.Mh=16384]="normal",Priority[Priority.Dh=12288]="propagate",Priority[Priority.connect=8192]="connect",Priority[Priority.low=4096]="low"})(Priority||(Priority={}));const ILifecycle=DI.Di("ILifecycle").Ui(t=>t.singleton(Yi)),{min:Ki,max:qi}=Math;class Wi{constructor(t){this.oe=t,this.de=0,this.head=void 0,this.Fh=void 0}Nh(){++this.de}end(t){void 0===t&&(t=0),0==--this.de&&this.process(t)}Uh(t,i){this.Nh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.zh=this.Fh,this.Fh.Hh=t),this.Fh=t,t.state|=65536}remove(t){void 0!==t.zh&&(t.zh.Hh=t.Hh),void 0!==t.Hh&&(t.Hh.zh=t.zh),t.zh=void 0,t.Hh=void 0,this.Fh===t&&(this.Fh=t.zh),this.head===t&&(this.head=t.Hh),t.state=65536^(65536|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Fh=void 0;do{s.state=65536^(65536|s.state),s.bound(t),i=s.Hh,s.Hh=void 0,s.zh=void 0,s=i}while(void 0!==s)}}}class Qi{constructor(t){this.oe=t,this.de=0,this.head=void 0,this.Fh=void 0}Nh(){++this.de}end(t){void 0===t&&(t=0),0==--this.de&&this.process(t)}Uh(t,i){this.Nh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Kh=this.Fh,this.Fh.qh=t),this.Fh=t,t.state|=131072}remove(t){void 0!==t.Kh&&(t.Kh.qh=t.qh),void 0!==t.qh&&(t.qh.Kh=t.Kh),t.Kh=void 0,t.qh=void 0,this.Fh===t&&(this.Fh=t.Kh),this.head===t&&(this.head=t.qh),t.state=131072^(131072|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Fh=void 0;do{s.state=131072^(131072|s.state),s.Wh(t),i=s.qh,s.qh=void 0,s.Kh=void 0,s=i}while(void 0!==s)}}}class Gi{constructor(t){this.oe=t,this.de=0,this.head=void 0,this.Fh=void 0}Nh(){++this.de}end(t){void 0===t&&(t=0),0==--this.de&&(this.oe.mount.process(t),this.process(t))}Uh(t,i){this.Nh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Qh=this.Fh,this.Fh.Gh=t),this.Fh=t,t.state|=262144}remove(t){void 0!==t.Qh&&(t.Qh.Gh=t.Gh),void 0!==t.Gh&&(t.Gh.Qh=t.Qh),t.Qh=void 0,t.Gh=void 0,this.Fh===t&&(this.Fh=t.Qh),this.head===t&&(this.head=t.Gh),t.state=262144^(262144|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Fh=void 0;do{s.state=262144^(262144|s.state),s.Zh(t),i=s.Gh,s.Gh=void 0,s.Qh=void 0,s=i}while(void 0!==s)}}}class Zi{constructor(t){this.oe=t,this.de=0,this.head=void 0,this.Fh=void 0}Nh(){++this.de}end(t){void 0===t&&(t=0),0==--this.de&&(this.oe.unmount.process(t),this.process(t))}Uh(t,i){this.Nh(),t(),this.end(i)}add(t){void 0===this.head?this.head=t:(t.Xh=this.Fh,this.Fh._h=t),this.Fh=t,t.state|=524288}remove(t){void 0!==t.Xh&&(t.Xh._h=t._h),void 0!==t._h&&(t._h.Xh=t.Xh),t.Xh=void 0,t._h=void 0,this.Fh===t&&(this.Fh=t.Xh),this.head===t&&(this.head=t._h),t.state=524288^(524288|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Fh=void 0;do{s.state=524288^(524288|s.state),s.Jh(t),i=s._h,s._h=void 0,s.Xh=void 0,s=i}while(void 0!==s)}}}class Xi{constructor(t){this.oe=t,this.head=void 0,this.Fh=void 0}add(t){(2097152&t.state)>0?this.oe.unmount.remove(t):(void 0===this.head?this.head=t:(t.Yh=this.Fh,this.Fh.io=t),this.Fh=t,t.state|=1048576)}remove(t){void 0!==t.Yh&&(t.Yh.io=t.io),void 0!==t.io&&(t.io.Yh=t.Yh),t.Yh=void 0,t.io=void 0,this.Fh===t&&(this.Fh=t.Yh),this.head===t&&(this.head=t.io),t.state=1048576^(1048576|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Fh=void 0;do{s.state=1048576^(1048576|s.state),s.mount(t),i=s.io,s.io=void 0,s.Yh=void 0,s=i}while(void 0!==s)}}}class _i{constructor(t){this.oe=t,this.head=void 0,this.Fh=void 0}add(t){(1048576&t.state)>0?this.oe.mount.remove(t):(void 0===this.head?this.head=t:(t.so=this.Fh,this.Fh.eo=t),this.Fh=t,t.state|=2097152)}remove(t){void 0!==t.so&&(t.so.eo=t.eo),void 0!==t.eo&&(t.eo.so=t.so),t.so=void 0,t.eo=void 0,this.Fh===t&&(this.Fh=t.so),this.head===t&&(this.head=t.eo),t.state=2097152^(2097152|t.state)}process(t){for(;void 0!==this.head;){let i,s=this.head;this.head=this.Fh=void 0;do{s.state=2097152^(2097152|s.state),s.unmount(t),i=s.eo,s.eo=void 0,s.so=void 0,s=i}while(void 0!==s)}}}class Ji{constructor(t){this.oe=t,this.no=[],this.de=0}Nh(){++this.de}end(t){void 0===t&&(t=0),0==--this.de&&this.process(t)}Uh(t,i){this.Nh(),t(),this.end(i)}add(t){this.no.push(t)}remove(t){const i=this.no.indexOf(t);i>-1&&this.no.splice(i,1)}process(t){for(t|=512;this.no.length>0;){const i=this.no.slice();this.no=[];const{length:s}=i;for(let e=0;s>e;++e)i[e].ie(t)}}}class Yi{get ro(){return 1e3/this.ho}get oo(){return 1e3/this.co}set oo(t){this.co=1e3/Ki(qi(0,Ki(this.lo,t)),60)}get lo(){return this.uo>0?1e3/this.uo:60}set lo(t){this.uo=60>t?1e3/Ki(qi(1,qi(this.oo,t)),60):0}constructor(){this.ao=new Hi(void 0,void 0,1/0),this.do=void 0,this.fo=0,this.vo=0,this.bo=-1,this.po=-1,this.mo=0,this.fe=new Ji(this),this.mount=new Xi(this),this.unmount=new _i(this),this.bound=new Wi(this),this.Wh=new Qi(this),this.Zh=new Gi(this),this.Jh=new Zi(this),this.uo=0,this.co=1e3/30,this.ho=0,this.wo=new Promise(t=>{this.yo=t}),this.Co=(t=>{this.bo=-1,this.mo&&(this.To(960,t),this.mo&&-1===this.bo&&void 0!==this.ao.next&&(this.bo=PLATFORM.requestAnimationFrame(this.Co)),++this.fo>1&&(this.yo(t),this.wo=new Promise(t=>{this.yo=t})))}),this.Ao=0,this.Ro=0,this.Bo=0,this.Oo=1}static register(t){return Registration.singleton(ILifecycle,this).register(t)}ko(){this.mo?-1===this.bo&&void 0!==this.ao.next&&(this.po=PLATFORM.now(),this.bo=PLATFORM.requestAnimationFrame(this.Co)):(this.mo=1,-1===this.bo&&void 0!==this.ao.next&&(this.po=PLATFORM.now(),this.bo=PLATFORM.requestAnimationFrame(this.Co)))}So(){this.mo?(this.mo=0,-1!==this.bo&&(PLATFORM.cancelAnimationFrame(this.bo),this.bo=-1)):-1!==this.bo&&(PLATFORM.cancelAnimationFrame(this.bo),this.bo=-1)}Io(t,i,s=16384,e=0){const n=new Hi(t,i,s,e);let r=this.ao,o=r.next;if(void 0===o)n.link(r);else{do{if(s>o.Ph||s===o.Ph&&e&&!o.Lh){n.link(r);break}r=o,o=o.next}while(void 0!==o);void 0===n.Ih&&n.link(r)}void 0===n.next&&(this.do=n),this.ko()}Po(t,i){let s=this.ao.next;for(;void 0!==s;)s=s.Rs(t,i)?s.xh():s.next}To(t,i=PLATFORM.now()){if(!this.vo){if(this.vo=1,i>this.po){const s=this.ho=i-this.po;if(this.uo>s+1)return;let e=0;this.Oo=this.Bo&&this.co>0?Ki(qi(this.Oo*(this.co/s),.1),10):1;const n=i+qi(this.co*this.Oo,1),r=i+qi(this.co*this.Oo*5,5),o=i+qi(this.co*this.Oo*15,15);t|=256;do{this.Ao=0;let i=this.ao.next;for(;void 0!==i;){if(10==++e&&(e=0,this.Ro)){const{Ph:t}=i,s=PLATFORM.now();if(t>4096){if(28672>t){if(s>=r){if(i.rotate(),null==i.Bt||null==i.Bt.next)break;i=i.Bt.next}}else if(s>=o){if(i.rotate(),null==i.Bt||null==i.Bt.next)break;i=i.Bt.next}}else if(s>=n){if(i.rotate(),null==i.Bt||null==i.Bt.next)break;i=i.Bt.next}}i=i.call(t)}}while(this.Ao>0);void 0===this.ao.next&&this.So()}this.po=i,this.vo=0}}Eo(t=1){this.Ro=1,this.Bo=1==t}Lo(){this.Ro=0}}const ts=[].slice,is=[],ss=[];let es=-1;$(-1);let value=0;connectable.jo=(t=>{t.id=++value});const ns=[].slice,{oneTime,We:rs,Qe:hs}=BindingMode,os=rs|oneTime;let Binding=class{constructor(t,i,s,mode,e,n){connectable.jo(this),this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$scope=void 0,this.ze=n,this.mode=mode,this.ot=e,this.xo=t,this.target=i,this.Vo=s,this.$o=void 0,this.ae=0}Mo(value,t){this.$o.Ys(value,t|=this.ae)}Do(value,t){this.xo.assign(t|=this.ae,this.$scope,this.ze,value)}J(t,i,s){if(Tracer.enabled&&Tracer.rt("Binding","handleChange",ns.call(arguments)),0!=(4&this.$state)){if((16&(s|=this.ae))>0){const i=this.$o.te();return(10082!==this.xo.st||this.nt>1)&&(t=this.xo.evaluate(s,this.$scope,this.ze)),t!==i&&this.Mo(t,s),0==(this.mode&oneTime)&&(this.version++,this.xo.connect(s,this.$scope,this),this.unobserve(0)),void(Tracer.enabled&&Tracer.lt())}if((32&s)>0)return t!==this.xo.evaluate(s,this.$scope,this.ze)&&this.Do(t,s),void(Tracer.enabled&&Tracer.lt());throw Tracer.enabled&&Tracer.lt(),Reporter.error(15,s)}Tracer.enabled&&Tracer.lt()}Fo(t,i){if(Tracer.enabled&&Tracer.rt("Binding","$bind",ns.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.No(4096|t)}this.$state|=1,this.ae=536870927&t,this.$scope=i;let s=this.xo;hasBind(s)&&s.bind(t,i,this);let e=this.$o;e||(e=this.$o=this.mode&hs?this.ot.ht(t,this.target,this.Vo):this.ot.Uo(t,this.target,this.Vo)),this.mode!==BindingMode.oneTime&&e.bind&&e.bind(t),s=this.xo,this.mode&os&&this.Mo(s.evaluate(t,i,this.ze),t),this.mode&rs&&s.connect(t,i,this),this.mode&hs&&(e.subscribe(this),e[this.id]|=32),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}No(t){Tracer.enabled&&Tracer.rt("Binding","$unbind",ns.call(arguments)),4&this.$state?(this.$state|=2,this.ae=0,hasUnbind(this.xo)&&this.xo.He(t,this.$scope,this),this.$scope=void 0,this.$o.He&&this.$o.He(t),this.$o.unsubscribe&&(this.$o.unsubscribe(this),this.$o[this.id]&=-33),this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.lt()):Tracer.enabled&&Tracer.lt()}};Binding=v([connectable()],Binding);const cs=[].slice;class Call{constructor(t,i,s,e,n){this.$state=0,this.ze=n,this.xo=t,this.$o=e.ht(0,i,s)}zo(t){Tracer.enabled&&Tracer.rt("Call","callSource",cs.call(arguments));const i=this.$scope.we;Object.assign(i,t);const s=this.xo.evaluate(2097152,this.$scope,this.ze);for(const s in t)Reflect.deleteProperty(i,s);return Tracer.enabled&&Tracer.lt(),s}Fo(t,i){if(Tracer.enabled&&Tracer.rt("Call","$bind",cs.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.No(4096|t)}this.$state|=1,this.$scope=i,hasBind(this.xo)&&this.xo.bind(t,i,this),this.$o.Ys(t=>this.zo(t),t),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}No(t){Tracer.enabled&&Tracer.rt("Call","$unbind",cs.call(arguments)),4&this.$state?(this.$state|=2,hasUnbind(this.xo)&&this.xo.He(t,this.$scope,this),this.$scope=void 0,this.$o.Ys(null,t),this.$state&=-7,Tracer.enabled&&Tracer.lt()):Tracer.enabled&&Tracer.lt()}ut(t,i,s){}J(t,i,s){}}const IExpressionParser=DI.Di("IExpressionParser").Ui(t=>t.singleton(ls));class ls{constructor(){this.Ho=Object.create(null),this.Ko=Object.create(null),this.qo=Object.create(null)}parse(t,i){switch(i){case 2048:{let s=this.qo[t];return void 0===s&&(s=this.qo[t]=this.Wo(t,i)),s}case 539:{let s=this.Ko[t];return void 0===s&&(s=this.Ko[t]=this.Wo(t,i)),s}default:{if(0===t.length&&55&i)return PrimitiveLiteral.Dn;let s=this.Ho[t];return void 0===s&&(s=this.Ho[t]=this.Wo(t,i)),s}}}cache(t){const{Ko:i,Ho:s,qo:e}=this;for(const n in t){const r=t[n];switch(r.st){case 24:e[n]=r;break;case 6199:i[n]=r;break;default:s[n]=r}}}Wo(t,i){try{const parts=t.split("."),i=parts[0];let s;s=i.endsWith("()")?new CallScope(i.replace("()",""),PLATFORM.ki):new AccessScope(parts[0]);let e=1;for(;parts.length>e;){const t=parts[e];s=t.endsWith("()")?new CallMember(s,t.replace("()",""),PLATFORM.ki):new AccessMember(s,parts[e]),e++}return s}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.Qo=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Go=1280]="IsRef",BindingType[BindingType.Zo=512]="IsIterator",BindingType[BindingType.Xo=256]="IsCustom",BindingType[BindingType._o=128]="IsFunction",BindingType[BindingType.Jo=64]="IsEvent",BindingType[BindingType.Yo=32]="IsProperty",BindingType[BindingType.tc=16]="IsCommand",BindingType[BindingType.ic=48]="IsPropertyCommand",BindingType[BindingType.sc=80]="IsEventCommand",BindingType[BindingType.ec=6]="DelegationStrategyDelta",BindingType[BindingType.nc=15]="Command",BindingType[BindingType.rc=49]="OneTimeCommand",BindingType[BindingType.hc=50]="ToViewCommand",BindingType[BindingType.oc=51]="FromViewCommand",BindingType[BindingType.cc=52]="TwoWayCommand",BindingType[BindingType.lc=53]="BindCommand",BindingType[BindingType.uc=86]="TriggerCommand",BindingType[BindingType.ac=87]="CaptureCommand",BindingType[BindingType.dc=88]="DelegateCommand",BindingType[BindingType.fc=153]="CallCommand",BindingType[BindingType.vc=26]="OptionsCommand",BindingType[BindingType.gc=539]="ForCommand",BindingType[BindingType.bc=284]="CustomCommand"})(BindingType||(BindingType={}));const{We:us,oneTime:as}=BindingMode;class MultiInterpolationBinding{constructor(t,i,s,e,mode,n){this.$state=0,this.$scope=void 0,this.pc=i,this.ze=n,this.mode=mode,this.ot=t,this.target=s,this.Vo=e;const r=i.et,parts=this.parts=Array(r.length);for(let o=0,c=r.length;c>o;++o)parts[o]=new InterpolationBinding(r[o],i,s,e,mode,t,n,0===o)}Fo(t,i){if(4&this.$state){if(this.$scope===i)return;this.No(t)}this.$state|=4,this.$scope=i;const parts=this.parts;for(let s=0,e=parts.length;e>s;++s)parts[s].Fo(t,i)}No(t){if(!(4&this.$state))return;this.$state&=-5,this.$scope=void 0;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].No(t)}}let InterpolationBinding=class{constructor(t,i,s,e,mode,n,r,o){connectable.jo(this),this.$state=0,this.pc=i,this.mc=o,this.mode=mode,this.ze=r,this.ot=n,this.xo=t,this.target=s,this.Vo=e,this.$o=n.Uo(0,s,e)}Mo(value,t){this.$o.Ys(value,16|t)}J(t,i,s){if(!(4&this.$state))return;const e=this.$o.te(),n=this.pc.evaluate(s,this.$scope,this.ze);n!==e&&this.Mo(n,s),0==(this.mode&as)&&(this.version++,this.xo.connect(s,this.$scope,this),this.unobserve(0))}Fo(t,i){if(4&this.$state){if(this.$scope===i)return;this.No(t)}this.$state|=4,this.$scope=i;const s=this.xo;s.bind&&s.bind(t,i,this),this.mode!==BindingMode.oneTime&&this.$o.bind&&this.$o.bind(t),this.mc&&this.Mo(this.pc.evaluate(t,i,this.ze),t),this.mode&us&&s.connect(t,i,this)}No(t){if(!(4&this.$state))return;this.$state&=-5;const i=this.xo;i.He&&i.He(t,this.$scope,this),this.$o.He&&this.$o.He(t),this.$scope=void 0,this.unobserve(1)}};InterpolationBinding=v([connectable()],InterpolationBinding);const ds=[].slice;let LetBinding=class{constructor(t,i,s,e,toViewModel=0){connectable.jo(this),this.$state=0,this.$lifecycle=e.get(ILifecycle),this.$scope=void 0,this.ze=e,this.ot=s,this.xo=t,this.target=null,this.Vo=i,this.toViewModel=toViewModel}J(t,i,s){if(Tracer.enabled&&Tracer.rt("LetBinding","handleChange",ds.call(arguments)),4&this.$state){if(16&s){const{target:t,Vo:i}=this,e=t[i],n=this.xo.evaluate(s,this.$scope,this.ze);return n!==e&&(t[i]=n),void(Tracer.enabled&&Tracer.lt())}throw Reporter.error(15,s)}Tracer.enabled&&Tracer.lt()}Fo(t,i){if(Tracer.enabled&&Tracer.rt("LetBinding","$bind",ds.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.No(4096|t)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.zt:i.we;const s=this.xo;s.bind&&s.bind(t,i,this),this.target[this.Vo]=this.xo.evaluate(4096,i,this.ze),this.xo.connect(t,i,this),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}No(t){if(Tracer.enabled&&Tracer.rt("LetBinding","$unbind",ds.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.lt());this.$state|=2;const i=this.xo;i.He&&i.He(t,this.$scope,this),this.$scope=void 0,this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.lt()}};LetBinding=v([connectable()],LetBinding);const fs=[].slice;class Ref{constructor(t,i,s){this.$state=0,this.$scope=void 0,this.ze=s,this.xo=t,this.target=i}Fo(t,i){if(Tracer.enabled&&Tracer.rt("Ref","$bind",fs.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.No(4096|t)}this.$state|=1,this.$scope=i,hasBind(this.xo)&&this.xo.bind(t,i,this),this.xo.assign(t,this.$scope,this.ze,this.target),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}No(t){if(Tracer.enabled&&Tracer.rt("Ref","$unbind",fs.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.lt());this.$state|=2,this.xo.evaluate(t,this.$scope,this.ze)===this.target&&this.xo.assign(t,this.$scope,this.ze,null);const i=this.xo;hasUnbind(i)&&i.He(t,this.$scope,this),this.$scope=void 0,this.$state&=-7,Tracer.enabled&&Tracer.lt()}ut(t,i,s){}J(t,i,s){}}(function(t){t[t.Qo=0]="None",t[t.wc=1]="Subscriber0",t[t.yc=2]="Subscriber1",t[t.Cc=4]="Subscriber2",t[t.Tc=8]="SubscribersRest",t[t.Ac=15]="Any"})(Ft||(Ft={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.lr=0]="none",DelegationStrategy[DelegationStrategy.Rc=1]="capturing",DelegationStrategy[DelegationStrategy.Bc=2]="bubbling"})(DelegationStrategy||(DelegationStrategy={})),(function(CollectionKind){CollectionKind[CollectionKind.Oc=8]="indexed",CollectionKind[CollectionKind.kc=4]="keyed",CollectionKind[CollectionKind.Ki=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind={}));let CollectionLengthObserver=class{constructor(t){this.ce=t,this.ue=t.length}te(){return this.ce.length}Ys(t,i){const{ue:s}=this;t!==s&&(this.ue=t,this.g(t,s,16|i))}};CollectionLengthObserver=v([subscriberCollection()],CollectionLengthObserver);const vs=Array.prototype,gs=vs.push,bs=vs.unshift,ps=vs.pop,ms=vs.shift,ws=vs.splice,ys=vs.reverse,Cs=vs.sort,Ts={push:gs,unshift:bs,pop:ps,shift:ms,splice:ws,reverse:ys,sort:Cs},As=["push","unshift","pop","shift","splice","reverse","sort"],Rs={push(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return gs.apply(t,arguments);const s=t.length,e=arguments.length;if(0===e)return s;t.length=i.Sc.length=s+e;let n=s;for(;t.length>n;)t[n]=arguments[n-s],i.Sc[n]=-2,n++;return i.Ic(),t.length},unshift(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return bs.apply(t,arguments);const s=arguments.length,e=[];let n=0;for(;s>n;)e[n++]=-2;bs.apply(i.Sc,e);const r=bs.apply(t,arguments);return i.Ic(),r},pop(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return ps.call(t);const s=i.Sc,e=ps.call(t),n=s.length-1;return s[n]>-1&&s.at.push(s[n]),ps.call(s),i.Ic(),e},shift(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return ms.call(t);const s=i.Sc,e=ms.call(t);return s[0]>-1&&s.at.push(s[0]),ms.call(s),i.Ic(),e},splice(t,i){let s=this;void 0!==s.ne&&(s=s.ne);const e=s.ft;if(void 0===e)return ws.apply(s,arguments);const n=e.Sc;if(i>0){let s=isNaN(t)?0:t;const to=s+i;for(;to>s;)n[s]>-1&&n.at.push(n[s]),s++}const r=arguments.length;if(r>2){const s=r-2,e=[];let o=0;for(;s>o;)e[o++]=-2;ws.call(n,t,i,...e)}else 2===r&&ws.call(n,t,i);const o=ws.apply(s,arguments);return e.Ic(),o},reverse(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return ys.call(t),this;const s=t.length,e=s/2|0;let n=0;for(;n!==e;){const e=s-n-1,r=t[n],o=i.Sc[n],c=i.Sc[e];t[n]=t[e],i.Sc[n]=c,t[e]=r,i.Sc[e]=o,n++}return i.Ic(),this},sort(t){let i=this;void 0!==i.ne&&(i=i.ne);const s=i.ft;if(void 0===s)return Cs.call(i,t),this;const e=i.length;if(2>e)return this;K(i,s.Sc,0,e,z);let n=0;for(;e>n&&void 0!==i[n];)n++;return void 0!==t&&"function"==typeof t||(t=U),K(i,s.Sc,0,n,t),s.Ic(),this}},Bs={Pc:1,ve:0,vt:1},def=Reflect.defineProperty;for(const t of As)def(Rs[t],"observing",{value:1,Pc:0,vt:0,ve:0});let Os=0;const ks=[].slice;let ArrayObserver=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("ArrayObserver","constructor",ks.call(arguments)),Os||(Os=1,enableArrayObservation()),this.Xs=0,this.Ec=s,this.ae=536870927&t,this.Sc=createIndexMap(s.length),this.oe=i,this.Lc=void 0,Reflect.defineProperty(s,"$observer",{value:this,ve:0,Pc:1,vt:1}),Tracer.enabled&&Tracer.lt()}Ic(){this.oe.fe.de>0?this.Xs||(this.Xs=1,this.oe.fe.add(this)):this.ie(0)}jc(){return void 0===this.Lc&&(this.Lc=new CollectionLengthObserver(this.Ec)),this.Lc}ie(t){this.Xs=0;const{Sc:i,Ec:s}=this,{length:e}=s;this.Sc=createIndexMap(e),this.j(i,16|this.ae),void 0!==this.Lc&&this.Lc.Ys(e,16)}};ArrayObserver=v([collectionSubscriberCollection()],ArrayObserver);let CollectionSizeObserver=class{constructor(t){this.ce=t,this.ue=t.size}te(){return this.ce.size}Ys(t,i){const{ue:s}=this;t!==s&&(this.ue=t,this.g(t,s,16|i))}};CollectionSizeObserver=v([subscriberCollection()],CollectionSizeObserver);const Ss=Map.prototype,Is=Ss.set,Ps=Ss.clear,Es=Ss.delete,Ls={set:Is,clear:Ps,delete:Es},js=["set","clear","delete"],xs={set(t,value){let i=this;void 0!==i.ne&&(i=i.ne);const s=i.ft;if(void 0===s)return Is.call(i,t,value),this;const e=i.size;if(Is.call(i,t,value),i.size===e){let e=0;for(const n of i.entries()){if(n[0]===t)return n[1]!==value&&(s.Sc[e]=-2),this;e++}return this}return s.Sc[e]=-2,s.Ic(),this},clear(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return Ps.call(t);if(t.size>0){const s=i.Sc;let e=0;for(const i of t.keys())s[e]>-1&&s.at.push(s[e]),e++;Ps.call(t),s.length=0,i.Ic()}},delete(value){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return Es.call(t,value);if(0===t.size)return 0;let s=0;const e=i.Sc;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.at.push(e[s]),e.splice(s,1),Es.call(t,value);s++}return i.Ic(),0}},Vs={Pc:1,ve:0,vt:1},$s=Reflect.defineProperty;for(const t of js)$s(xs[t],"observing",{value:1,Pc:0,vt:0,ve:0});let Ms=0;const Ds=[].slice;let MapObserver=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("MapObserver","constructor",Ds.call(arguments)),Ms||(Ms=1,enableMapObservation()),this.Xs=0,this.Ec=s,this.ae=536870927&t,this.Sc=createIndexMap(s.size),this.oe=i,this.Lc=void 0,s.ft=this,Tracer.enabled&&Tracer.lt()}Ic(){this.oe.fe.de>0?this.Xs||(this.Xs=1,this.oe.fe.add(this)):this.ie(0)}jc(){return void 0===this.Lc&&(this.Lc=new CollectionSizeObserver(this.Ec)),this.Lc}ie(t){this.Xs=0;const{Sc:i,Ec:s}=this,{size:e}=s;this.Sc=createIndexMap(e),this.j(i,16|this.ae),void 0!==this.Lc&&this.Lc.Ys(e,16)}};MapObserver=v([collectionSubscriberCollection()],MapObserver);const Fs=Set.prototype,Ns=Fs.add,Us=Fs.clear,zs=Fs.delete,Hs={add:Ns,clear:Us,delete:zs},Ks=["add","clear","delete"],qs={add(value){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return Ns.call(t,value),this;const s=t.size;return Ns.call(t,value),t.size===s?this:(i.Sc[s]=-2,i.Ic(),this)},clear(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return Us.call(t);if(t.size>0){const s=i.Sc;let e=0;for(const i of t.keys())s[e]>-1&&s.at.push(s[e]),e++;Us.call(t),s.length=0,i.Ic()}},delete(value){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.ft;if(void 0===i)return zs.call(t,value);if(0===t.size)return 0;let s=0;const e=i.Sc;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.at.push(e[s]),e.splice(s,1),zs.call(t,value);s++}return i.Ic(),0}},Ws={Pc:1,ve:0,vt:1},Qs=Reflect.defineProperty;for(const t of Ks)Qs(qs[t],"observing",{value:1,Pc:0,vt:0,ve:0});let Gs=0;const Zs=[].slice;let SetObserver=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("SetObserver","constructor",Zs.call(arguments)),Gs||(Gs=1,enableSetObservation()),this.Xs=0,this.Ec=s,this.ae=536870927&t,this.Sc=createIndexMap(s.size),this.oe=i,this.Lc=void 0,s.ft=this,Tracer.enabled&&Tracer.lt()}Ic(){this.oe.fe.de>0?this.Xs||(this.Xs=1,this.oe.fe.add(this)):this.ie(0)}jc(){return void 0===this.Lc&&(this.Lc=new CollectionSizeObserver(this.Ec)),this.Lc}ie(t){this.Xs=0;const{Sc:i,Ec:s}=this,{size:e}=s;this.Sc=createIndexMap(e),this.j(i,16|this.ae),void 0!==this.Lc&&this.Lc.Ys(e,16)}};SetObserver=v([collectionSubscriberCollection()],SetObserver);const Xs=[].slice,_s={xc:0,bt:0};let CustomSetterObserver=class{constructor(t,i,s){this.ce=t,this.le=i,this.ue=this.oldValue=void 0,this.Vc=s,this.dt=0}Ys(t){Tracer.enabled&&Tracer.rt("CustomSetterObserver","setValue",Xs.call(arguments)),this.Vc.set.call(this.ce,t),this.ue!==t&&(this.oldValue=this.ue,this.ue=t,this.g(t,this.oldValue,16)),Tracer.enabled&&Tracer.lt()}subscribe(t){this.dt||this.$c(),this.o(t)}unsubscribe(t){this.l(t)}$c(){Tracer.enabled&&Tracer.rt("CustomSetterObserver","convertProperty",Xs.call(arguments)),this.dt=1,this.ue=this.ce[this.le],Reflect.defineProperty(this.ce,this.le,{set:t=>{this.Ys(t)}}),Tracer.enabled&&Tracer.lt()}};CustomSetterObserver=v([subscriberCollection()],CustomSetterObserver);let GetterObserver=class{constructor(t,i,s,e,n,r,o){this.ce=s,this.le=e,this.Mc=0,this.ue=this.oldValue=void 0,this.Dc=[],this.Fc=[],this.Nc=i,this.Uc=0,this.Vc=n,this._s=new Proxy(s,(function t(i,s,e){Tracer.enabled&&Tracer.rt("computed","createGetterTraps",Xs.call(arguments));const n={get(n,r,o){if(Tracer.enabled&&Tracer.rt("computed","get",Xs.call(arguments)),e.zc(r))return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,o);switch(Js.call(n)){case"[object Array]":if(e.Hc(s.Kc(i,n)),"length"===r)return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,n);case"[object Map]":if(e.Hc(s.qc(i,n)),"size"===r)return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,n);case"[object Set]":if(e.Hc(s.Wc(i,n)),"size"===r)return Tracer.enabled&&Tracer.lt(),Reflect.get(n,r,n);default:e.Qc(s.ht(i,n,r))}return Tracer.enabled&&Tracer.lt(),(function(i,s,e,n,r){const value=Reflect.get(s,e,s);return"function"==typeof value?s[e].bind(s):"object"!=typeof value||null===value?value:new Proxy(value,t(i,n,r))})(i,n,r,s,e)}};return Tracer.enabled&&Tracer.lt(),n})(t,r,this)),Reflect.defineProperty(s,e,{get:()=>this.te()})}Qc(t){-1===this.Dc.indexOf(t)&&this.Dc.push(t)}Hc(t){-1===this.Fc.indexOf(t)&&this.Fc.push(t)}te(){return Tracer.enabled&&Tracer.rt("GetterObserver","getValue",Xs.call(arguments)),this.ue=0===this.Uc||this.Mc?Reflect.apply(this.Vc.get,this._s,PLATFORM.ki):Reflect.apply(this.Vc.get,this.ce,PLATFORM.ki),Tracer.enabled&&Tracer.lt(),this.ue}subscribe(t){this.o(t),1==++this.Uc&&this.Gc(1)}unsubscribe(t){this.l(t),0==--this.Uc&&this.Zc()}J(){const t=this.ue,i=this.Gc(0);t!==i&&this.g(i,t,16)}tt(){const t=this.ue,i=this.Gc(0);t!==i&&this.g(i,t,16)}Gc(t){Tracer.enabled&&Tracer.rt("GetterObserver","getValueAndCollectDependencies",Xs.call(arguments));const i=!this.Nc.xc||t;return i&&(this.Zc(),this.Mc=1),this.ue=this.te(),i&&(this.Dc.forEach(t=>{t.subscribe(this)}),this.Fc.forEach(t=>{t.V(this)}),this.Mc=0),Tracer.enabled&&Tracer.lt(),this.ue}zc(t){return!this.Mc||"$observers"===t}Zc(){this.Dc.forEach(t=>{t.unsubscribe(this)}),this.Dc.length=0,this.Fc.forEach(t=>{t.$(this)}),this.Fc.length=0}};GetterObserver=v([subscriberCollection()],GetterObserver);const Js={}.toString,IDirtyChecker=DI.Di("IDirtyChecker").Ui(t=>t.singleton(Ys)),DirtyCheckSettings={Xc:6,disabled:0,warn:1,_c:0,Jc(){this.Xc=6,this.disabled=0,this.warn=1,this._c=0}};class Ys{constructor(t){this.Yc=0,this.tl=[],this.oe=t}gt(t,i){if(DirtyCheckSettings._c)throw Reporter.error(800,i);return DirtyCheckSettings.warn&&Reporter.write(801,i),new DirtyCheckProperty(this,t,i)}il(t){this.tl.push(t),1===this.tl.length&&this.oe.Io(this.sl,this,4096)}removeProperty(t){this.tl.splice(this.tl.indexOf(t),1),0===this.tl.length&&this.oe.Po(this.sl,this)}sl(t){if(DirtyCheckSettings.disabled)return;if(++this.Yc<DirtyCheckSettings.Xc)return;this.Yc=0;const i=this.tl,s=i.length;let e,n=0;for(;s>n;++n)(e=i[n]).el()&&e.flush(256)}}Ys.inject=[ILifecycle];const te=[].slice;let DirtyCheckProperty=class{constructor(t,i,s){Tracer.enabled&&Tracer.rt("DirtyCheckProperty","constructor",te.call(arguments)),this.ce=i,this.le=s,this.nl=t,Tracer.enabled&&Tracer.lt()}el(){return this.oldValue!==this.ce[this.le]}flush(t){const i=this.ce[this.le];this.g(i,this.oldValue,16|t),this.oldValue=i}subscribe(t){this.v()||(this.oldValue=this.ce[this.le],this.nl.il(this)),this.o(t)}unsubscribe(t){this.l(t)&&!this.v()&&this.nl.removeProperty(this)}};DirtyCheckProperty=v([subscriberCollection()],DirtyCheckProperty);const ie=[].slice,se=PLATFORM.Si;class PrimitiveObserver{constructor(t,i){this.rl=1,Tracer.enabled&&Tracer.rt("PrimitiveObserver","constructor",ie.call(arguments)),"length"===i?(this.ce=t,this.te=this.hl):this.te=this.ol,Tracer.enabled&&Tracer.lt()}hl(){return this.ce.length}ol(){}}PrimitiveObserver.prototype.Ys=se,PrimitiveObserver.prototype.subscribe=se,PrimitiveObserver.prototype.unsubscribe=se,PrimitiveObserver.prototype.Dt=se;const ee=[].slice;class PropertyAccessor{constructor(t,i){Tracer.enabled&&Tracer.rt("PropertyAccessor","constructor",ee.call(arguments)),this.ce=t,this.le=i,Tracer.enabled&&Tracer.lt()}te(){return this.ce[this.le]}Ys(value){this.ce[this.le]=value}}const ne={}.toString,IObserverLocator=DI.Di("IObserverLocator").Ni(),ITargetObserverLocator=DI.Di("ITargetObserverLocator").Ni(),ITargetAccessorLocator=DI.Di("ITargetAccessorLocator").Ni();class ObserverLocator{constructor(t,i,s,e){this.cl=[],this.nl=i,this.oe=t,this.ll=s,this.ul=e}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}ht(t,i,s){if(2&t&&"object"==typeof i)return ProxyObserver.Js(i,s);if((function(t){return 1==t.me})(i))return i.Ae(t).Js(this.oe,t,i,s);let e,n=i.Re;return n&&s in n?n[s]:((e=this.al(t,i,s)).rl||(void 0===n&&(n=this.dl(i)),n[s]=e),e)}fl(t){this.cl.push(t)}Uo(t,i,s){return this.ul.vl(t,i)?this.ll.gl(t,i,s)?this.ht(t,i,s):this.ul.Uo(t,this.oe,i,s):2&t?ProxyObserver.Js(i,s):new PropertyAccessor(i,s)}Kc(t,i){return q(t,this.oe,i)}qc(t,i){return W(t,this.oe,i)}Wc(t,i){return Q(t,this.oe,i)}dl(t){return t.Re||this.bl(t)}bl(t){const value={};return Reflect.defineProperty(t,"$observers",{ve:0,vt:0,Pc:0,value})||Reporter.write(0,t),value}pl(t,i,s,e){for(let n=0,r=this.cl.length;r>n;n++){const r=this.cl[n].ht(t,i,s,e);if(null!=r)return r}return null}al(t,i,s){if(!(i instanceof Object))return new PrimitiveObserver(i,s);let e=0;if(this.ll.vl(t,i)){const n=this.ll.ht(t,this.oe,this,i,s);if(null!=n)return n;e=1}switch(ne.call(i)){case"[object Array]":return"length"===s?this.Kc(t,i).jc():this.nl.gt(i,s);case"[object Map]":return"size"===s?this.qc(t,i).jc():this.nl.gt(i,s);case"[object Set]":return"size"===s?this.Wc(t,i).jc():this.nl.gt(i,s)}const n=(function(t,name){let i=Object.getOwnPropertyDescriptor(t,name),s=Object.getPrototypeOf(t);for(;null==i&&null!=s;)i=Object.getOwnPropertyDescriptor(s,name),s=Object.getPrototypeOf(s);return i})(i,s);if(n&&(n.get||n.set)){if(n.get&&n.get.ht)return n.get.ht(i);return this.pl(t,i,s,n)||(e?this.nl.gt(i,s):createComputedObserver(t,this,this.nl,this.oe,i,s,n))}return new SetterObserver(this.oe,t,i,s)}}ObserverLocator.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];let SelfObserver=class{constructor(t,i,s,e,n){this.oe=t;let r=0;ProxyObserver.re(s)?(r=1,s.ft.subscribe(this,e),this.ce=s.ne):this.ce=s,this.le=e,this.ue=void 0,this.oldValue=void 0,this.Xs=0,this.Oi=this.ce[n],void 0===this.Oi?this.dt=0:(this.dt=1,this.ue=this.ce[this.le],r||this.ml()),this.ae=536870927&i}J(t,i,s){this.Ys(t,s)}te(){return this.ue}Ys(t,i){if(this.dt){const s=this.ue;this.ue=t,0===this.oe.fe.de?0==(4096&i)&&(this.g(t,s,this.ae|i),void 0!==this.Oi&&this.Oi.call(this.ce,t,s,this.ae|i)):this.Xs||(this.Xs=1,this.oldValue=s,this.oe.fe.add(this))}else this.ce[this.le]=t}subscribe(t){0==this.dt&&(this.dt=1,this.ue=this.ce[this.le],this.ml()),this.o(t)}ml(){Reflect.defineProperty(this.ce,this.le,{ve:1,vt:1,get:()=>this.ue,set:value=>{this.Ys(value,0)}})||Reporter.write(1,this.le,this.ce)}};SelfObserver=v([subscriberCollection()],SelfObserver);const{oneTime:re,We:he,Qe:oe,hr:ce}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,i,s){s.wl=s.mode,s.mode=this.mode}He(t,i,s){s.mode=s.wl,s.wl=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(re)}}BindingBehaviorResource.Ee("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(he)}}BindingBehaviorResource.Ee("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(oe)}}BindingBehaviorResource.Ee("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(ce)}}BindingBehaviorResource.Ee("twoWay",TwoWayBindingBehavior);const le={},ue=BindingMode.Qe;class DebounceBindingBehavior{bind(t,i,s,e=200){let n,r,o;s instanceof Binding?(n="handleChange",o=Z,r=s.mode&ue?32:16):(n="callSource",o=G,r=16),s.Ct=s[n],s.Ct.yl=n,s[n]=o,s.wt={At:r,Tt:e,yt:0,oldValue:le}}He(t,i,s){s[s.Ct.yl]=s.Ct,s.Ct=null,PLATFORM.global.clearTimeout(s.wt.yt),s.wt=null}}BindingBehaviorResource.Ee("debounce",DebounceBindingBehavior);class PriorityBindingBehavior{static register(t){t.register(Registration.singleton("binding-behavior:priority",this)),t.register(Registration.singleton(this,this))}bind(t,i=4096){const{$o:s}=t;if(null!=s)if(this[t.id]=s.Ph,"number"==typeof i)s.Ph=i;else switch(i){case"preempt":s.Ph=32768;break;case"high":s.Ph=28672;break;case"bind":s.Ph=24576;break;case"attach":s.Ph=20480;break;case"normal":s.Ph=16384;break;case"propagate":s.Ph=12288;break;case"connect":s.Ph=8192;break;case"low":s.Ph=4096}}He(t){null!=t.$o&&(t.$o.Ph=this[t.id])}}PriorityBindingBehavior.kind=BindingBehaviorResource,PriorityBindingBehavior.description=Object.freeze({name:"priority"});class SignalBindingBehavior{constructor(t){this.Cl=t}bind(t,i,s,...e){if(!s.Mo)throw Reporter.error(11);if(4===arguments.length){const name=e[0];this.Cl.Ie(name,s),s.Tl=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let i=t.length;for(;i--;)this.Cl.Ie(t[i],s);s.Tl=t}}}He(t,i,s){const name=s.Tl;if(s.Tl=null,Array.isArray(name)){const t=name;let i=t.length;for(;i--;)this.Cl.Pe(t[i],s)}else this.Cl.Pe(name,s)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.Ee("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,i,s,e=200){let n;s.Ot=s[n=s instanceof Binding?s.mode===BindingMode.hr?"updateSource":"updateTarget":"callSource"],s.Ot.yl=n,s[n]=X,s.Rt={Tt:e,Bt:0,yt:-1}}He(t,i,s){s[s.Ot.yl]=s.Ot,s.Ot=null,PLATFORM.global.clearTimeout(s.Rt.yt),s.Rt=null}}BindingBehaviorResource.Ee("throttle",ThrottleBindingBehavior);const Bindable={for(t){const i={add(i){let s=void 0;i instanceof Object?s=i:"string"==typeof i&&(s={Al:i});const e=s.Al;if(!e)throw Reporter.error(0);return s.Rl||(s.Rl=kebabCase(e)),s.Oi||(s.Oi=`${e}Changed`),void 0===s.mode&&(s.mode=BindingMode.We),t.bindables[e]=s,this},get:()=>t.bindables};if(void 0===t.bindables)t.bindables={};else if(Array.isArray(t.bindables)){const s=t.bindables;t.bindables={},s.forEach(i.add)}return i}},ae="custom-element",de="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.Bl="ra",TargetedInstructionType.Ol="rb",TargetedInstructionType.kl="rc",TargetedInstructionType.Sl="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.pc="rf",TargetedInstructionType.Il="rg",TargetedInstructionType.Pl="rh",TargetedInstructionType.El="ri",TargetedInstructionType.Ll="rj",TargetedInstructionType.jl="rk"})(TargetedInstructionType||(TargetedInstructionType={}));const ITargetedInstruction=DI.Di("createInterface").Ni(),fe=Object.freeze({required:1,compiler:"default"}),ve=Object.freeze({required:0,compiler:"default"});class HooksDefinition{constructor(t){this.Wr="render"in t,this.Mr="created"in t,this.Dr="binding"in t,this.Fr="bound"in t,this.Kr="unbinding"in t,this.qr="unbound"in t,this.Nr="attaching"in t,this.Ur="attached"in t,this.zr="detaching"in t,this.Hr="detached"in t,this.Qr="caching"in t}}HooksDefinition.lr=Object.freeze(new HooksDefinition({}));class ge{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=ve,this.bindables=PLATFORM.It,this.instructions=PLATFORM.ki,this.dependencies=PLATFORM.ki,this.surrogates=PLATFORM.ki,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.strategy=1,this.St=HooksDefinition.lr}}const be=["name","template","cache","build","containerless","shadowOptions","hasSlots"],pe=["instructions","dependencies","surrogates"],CustomAttributeResource={name:de,it:tt,ui(t){return t.kind===this},Ee(t,i){const s=i,e=s,n=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.ki:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.We:defaultBindingMode,Et:void 0===def.Et?0:def.Et,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:{...Bindable.for(t).get(),...Bindable.for(def).get()},strategy:V(def.strategy),St:new HooksDefinition(t.prototype)}})("string"==typeof t?{name:t}:t,s);return e.kind=CustomAttributeResource,e.description=n,s.register=it,s}},INode=DI.Di("INode").Ni(),IRenderLocation=DI.Di("IRenderLocation").Ni(),IDOM=DI.Di("IDOM").Ni(),me=function(){throw Reporter.error(1e3)},we={addEventListener:me,appendChild:me,cloneNode:me,xl:me,createDocumentFragment:me,createElement:me,Vl:me,dispatchEvent:me,$l:me,Ml:me,createTextNode:me,insertBefore:me,Dl:me,ai:me,Fl:me,Yt:me,jt:me,remove:me,removeEventListener:me,setAttribute:me},DOM={...we,get Nl(){return 1==Reflect.get(this,"$initialized")},initialize(dom){if(this.Nl)throw Reporter.error(1001);const t={},i=[dom];let s=Object.getPrototypeOf(dom);for(;s&&s!==Object.prototype;)i.unshift(s),s=Object.getPrototypeOf(s);for(s of i)Object.assign(t,Object.getOwnPropertyDescriptors(s));const e=[];let n,r;for(n in t)(r=t[n]).vt&&r.Pc&&(Reflect.defineProperty(this,n,r),e.push(n));Reflect.set(this,"$domKeys",e),Reflect.set(this,"$initialized",1)},Ul(){if(!this.Nl)throw Reporter.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,we),Reflect.set(this,"$domKeys",PLATFORM.ki),Reflect.set(this,"$initialized",0)}},NodeSequence={empty:{Cr:0,zl:0,next:void 0,childNodes:PLATFORM.ki,firstChild:null,lastChild:null,Hl:()=>PLATFORM.ki,insertBefore(t){},Kl(t){},remove(){},ql(){},xh(){},link(t){}}},LifecycleTask={done:{done:1,Wl:()=>0,cancel(){},Ql:()=>Promise.resolve()}};class PromiseTask{constructor(t,i,s,...e){this.done=0,this.Gl=0,this.Zl=0,this.Xl=t.then(value=>{if(1!=this.Gl&&(this.Zl=1,null!==i)){const t=i.call(s,value,...e);if(void 0!==t)return(t.then instanceof Function?t:t.Ql()).then(()=>{this.done=1});this.done=1}})}Wl(){return!this.Zl}cancel(){this.Wl()&&(this.Gl=1)}Ql(){return this.Xl}}class ContinuationTask{constructor(t,i,s,...e){this.done=0,this.Zl=0,this.Gl=0;const n=t.then instanceof Function?t:t.Ql();this.Xl=n.then(()=>{if(1==this.Gl)return;this.Zl=1;const t=i.call(s,...e);if(void 0!==t)return(t.then instanceof Function?t:t.Ql()).then(()=>{this.done=1});this.done=1})}Wl(){return!this.Zl}cancel(){this.Wl()&&(this.Gl=1)}Ql(){return this.Xl}}class AggregateContinuationTask{constructor(t,i,s,...e){this.done=0,this.Zl=0,this.Gl=0,this.Xl=Promise.all(t.map(t=>t.Ql())).then(()=>{if(1==this.Gl)return;this.Zl=1;const t=i.call(s,...e);if(void 0!==t)return t.Ql().then(()=>{this.done=1});this.done=1})}Wl(){return!this.Zl}cancel(){this.Wl()&&(this.Gl=1)}Ql(){return this.Xl}}class If{constructor(t,i){this.Re={value:this},this.id=nextId("au$component"),this._l=void 0,this.Jl=void 0,this.Yl=t,this.tu=void 0,this.location=i,this.iu=1,this.su=LifecycleTask.done,this.view=void 0,this.eu=0}get value(){return this.eu}set value(t){const i=this.eu;i!==t&&(this.eu=t,this.nu(t,i,this.kt.flags))}static register(t){t.register(Registration.transient("custom-attribute:if",this)),t.register(Registration.transient(this,this))}te(){return this.eu}Ys(t,i){const s=this.eu;s!==t&&(this.eu=t,this.nu(t,s,i|this.kt.flags))}ru(t){return this.su=this.su.done?this.hu(this.value,t):new ContinuationTask(this.su,this.hu,this,this.value,t),this.su}ou(t){this.su.done?this.cu(t):this.su=new ContinuationTask(this.su,this.cu,this,t)}lu(t){return void 0!==this.view&&(this.su.done?this.view.detach(t):this.su=new ContinuationTask(this.su,this.view.detach,this.view,t)),this.su}uu(t){return void 0!==this.view&&(this.su=this.su.done?this.view.He(t):new ContinuationTask(this.su,this.view.He,this.view,t)),this.su}du(t){void 0!==this.tu&&this.tu.release(t)&&(this.tu=void 0),void 0!==this.Jl&&this.Jl.release(t)&&(this.Jl=void 0),this.view=void 0}nu(t,i,s){0!=(4&this.kt.state)&&(this.su=this.su.done?this.hu(this.value,s):new ContinuationTask(this.su,this.hu,this,this.value,s))}fu(value,t){return value?this.tu=this.vu(this.tu,this.Yl,t):null!=this._l?this.Jl=this.vu(this.Jl,this._l,t):void 0}vu(t,i,s){return void 0===t&&(t=i.create(s)),t.gu(this.location),t}hu(value,t){let i=LifecycleTask.done;if((1==value&&void 0!==this.Jl||1!=value&&void 0!==this.tu)&&(i=this.bu(t)),i.done){const s=this.fu(value,t);i=this.pu(s,t)}else i=new PromiseTask(i.Ql().then(()=>this.fu(value,t)),this.pu,this,t);return i}bu(t){const i=this.view;return void 0===i?LifecycleTask.done:(i.detach(t),i.He(t))}pu(t,i){if(this.view=t,void 0===t)return LifecycleTask.done;let s=this.mu(i);return 0==(32&this.kt.state)?s:(s.done?this.cu(i):s=new ContinuationTask(s,this.cu,this,i),s)}mu(t){return void 0!==this.view&&(5&this.kt.state)>0?this.view.bind(t,this.kt.scope):LifecycleTask.done}cu(t){void 0!==this.view&&(40&this.kt.state)>0&&this.view.$h(t)}}If.inject=[IViewFactory,IRenderLocation],If.kind=CustomAttributeResource,If.description=Object.freeze({name:"if",aliases:PLATFORM.ki,defaultBindingMode:BindingMode.We,Et:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,St:Object.freeze(new HooksDefinition(If.prototype))});class Else{constructor(t){this.wu=t}static register(t){t.register(Registration.transient("custom-attribute:else",this))}link(t){if(t instanceof If)t._l=this.wu;else{if(!(t.yu instanceof If))throw Error("Unsupported IfBehavior");t.yu._l=this.wu}}}Else.inject=[IViewFactory],Else.kind=CustomAttributeResource,Else.description={name:"else",aliases:PLATFORM.ki,defaultBindingMode:BindingMode.We,Et:0,isTemplateController:1,bindables:PLATFORM.It,strategy:1,St:HooksDefinition.lr};class Repeat{constructor(t,i,s){this.Re={Cu:this},this.id=nextId("au$component"),this.wu=s,this.Tu=0,this.location=t,this.Au=void 0,this.Ru=i,this.Bu=[],this.key=void 0,this.iu=1,this.su=LifecycleTask.done}get Cu(){return this.Ou}set Cu(t){this.Ou!==t&&(this.Ou=t,this.ku(this.kt.flags))}static register(t){t.register(Registration.transient("custom-attribute:repeat",this)),t.register(Registration.transient(this,this))}ru(t){this.Su(t);const i=this.Ru.Nt,{length:s}=i;let e;for(let t=0;s>t;++t)if((e=i[t]).target===this&&"items"===e.Vo){this.Iu=e.xo;break}return this.Pu=this.Iu.Qn.evaluate(t,this.kt.scope,null),this.Eu(void 0,t),this.su}ou(t){this.su.done?this.Lu(void 0,t):this.su=new ContinuationTask(this.su,this.Lu,this,void 0,t)}lu(t){this.su.done?this.ju(0,this.Bu.length,t):this.su=new ContinuationTask(this.su,this.ju,this,0,this.Bu.length,t)}uu(t){return this.Su(t),this.su=this.su.done?this.xu(0,this.Bu.length,t,0):new ContinuationTask(this.su,this.xu,this,0,this.Bu.length,t,0),this.su}ku(t){this.Su(t|=this.kt.flags),this.Eu(void 0,t|=16)}tt(t,i){i|=this.kt.flags,this.Eu(t,i|=976)}Eu(t,i){if(void 0===t){if((5&this.kt.state)>0){const t=this.Bu.length;this.ju(0,t,i),this.su=this.su.done?this.xu(0,t,i,0):new ContinuationTask(this.su,this.xu,this,0,t,i,0),this.su=this.su.done?this.Vu(i):new ContinuationTask(this.su,this.Vu,this,i)}(40&this.kt.state)>0&&(this.su.done?this.$u(i):this.su=new ContinuationTask(this.su,this.$u,this,i))}else(function(t){let i=0,s=0;const e=t.length;for(let n=0;e>n;++n){for(;n-i>=t.at[s];)++s,--i;-2===t[n]?++i:t[n]+=i}})(t),(5&this.kt.state)>0&&(t.at.length>0&&(t.at.sort(compareNumber),this.su.done?this.Mu(t,i):this.su=new ContinuationTask(this.su,this.Mu,this,t,i),this.su=this.su.done?this.Du(t,i):new ContinuationTask(this.su,this.Du,this,t,i)),this.su=this.su.done?this.Fu(t,i):new ContinuationTask(this.su,this.Fu,this,t,i)),(40&this.kt.state)>0&&(this.su.done?this.Nu(t,i):this.su=new ContinuationTask(this.su,this.Nu,this,t,i))}Su(t){const i=this.Au;if((5&this.kt.state)>0){const s=this.Au=getCollectionObserver(t,this.kt.oe,this.Cu);i!==s&&i&&i.$(this),s&&s.V(this)}else i&&i.$(this)}ju(t,i,s){const e=this.Bu;let n;this.kt.oe.Jh.Nh();for(let r=t;i>r;++r)(n=e[r]).release(s),n.detach(s);this.kt.oe.Jh.end(s)}xu(t,i,s,e){const n=this.Bu;let r,o,c=void 0;this.kt.oe.Wh.Nh();for(let e=t;i>e;++e)(r=(o=n[e]).He(s)).done||(void 0===c&&(c=[]),c.push(r));return e&&(this.Bu.length=t),void 0===c?(this.kt.oe.Wh.end(s),LifecycleTask.done):new AggregateContinuationTask(c,this.kt.oe.Wh.end,this.kt.oe.Wh,s)}Mu(t,i){const s=this.Bu;this.kt.oe.Jh.Nh();const e=t.at,n=e.length;let r;for(let t=0;n>t;++t)(r=s[e[t]]).release(i),r.detach(i);this.kt.oe.Jh.end(i)}Du(t,i){const s=this.Bu;let e,n=void 0;this.kt.oe.Wh.Nh();const r=t.at,o=r.length;let c,l=0;for(;o>l;++l)(e=(c=s[r[l]]).He(i)).done||(void 0===n&&(n=[]),n.push(e));l=0;let u=0;for(;o>l;++l)this.Bu.splice(u=r[l]-l,1);return void 0===n?(this.kt.oe.Wh.end(i),LifecycleTask.done):new AggregateContinuationTask(n,this.kt.oe.Wh.end,this.kt.oe.Wh,i)}Vu(t){let i,s,e=void 0;this.kt.oe.bound.Nh();const n=this.wu,r=this.Pu,o=this.Cu,c=this.Iu.count(t,o),l=this.Bu=Array(c);return this.Iu.Zn(t,o,(o,c,u)=>{s=l[c]=n.create(t),(i=s.bind(t,this.Uu(t,r,u,s))).done||(void 0===e&&(e=[]),e.push(i))}),void 0===e?(this.kt.oe.bound.end(t),LifecycleTask.done):new AggregateContinuationTask(e,this.kt.oe.bound.end,this.kt.oe.bound,t)}Fu(t,i){let s,e,n=void 0;const r=this.wu,o=this.Bu,c=this.Pu,l=this.Cu;this.kt.oe.bound.Nh();const u=t.length;for(let a=0;u>a;++a)-2===t[a]&&(s=(e=r.create(i)).bind(i,this.Uu(i,c,l[a],e)),o.splice(a,0,e),s.done||(void 0===n&&(n=[]),n.push(s)));if(o.length!==u)throw Error(`viewsLen=${o.length}, mapLen=${u}`);return void 0===n?(this.kt.oe.bound.end(i),LifecycleTask.done):new AggregateContinuationTask(n,this.kt.oe.bound.end,this.kt.oe.bound,i)}Uu(t,i,s,e){const n=this.kt,r=n.scope,o=BindingContext.create(t,i,s);o.zu=e;const c=Scope.Oe(t,r,o);if(n.Hu!==PLATFORM.ki){c.Ce=void 0!==r.Ce&&r.Ce!==PLATFORM.It?{...r.Ce}:{};for(const t of n.Hu)c.Ce[t]=c}return c}Lu(t,i){let s;const{Bu:e,location:n}=this;if(this.kt.oe.Zh.Nh(),void 0===t)for(let t=0,r=e.length;r>t;++t)(s=e[t]).gu(n),s.Ku.xh(),s.$h(i);else for(let r=0,o=e.length;o>r;++r)t[r]!==r&&((s=e[r]).gu(n),s.Ku.xh(),s.$h(i));this.kt.oe.Zh.end(i)}$u(t){let i;const{Bu:s,location:e}=this;this.kt.oe.Zh.Nh();for(let n=0,r=s.length;r>n;++n)(i=s[n]).gu(e),i.Ku.xh(),i.$h(t);this.kt.oe.Zh.end(t)}Nu(t,i){const s=this.location,e=this.Bu;(function(t,i){const s=t.slice(),e=i.length;let to=0,from=0;for(;e>to;)-2!==(from=i[to])&&(t[to]=s[from]),++to})(e,t);const n=(function(t){const i=t.length;i>Te&&(Te=i,ye=new Int32Array(i),Ce=new Int32Array(i));let s=0,e=0,n=0,r=0,o=0,c=0,l=0,u=0;for(;i>r;r++)if(-2!==(e=t[r])){if(-2!==(n=t[o=ye[s]])&&e>n){Ce[r]=o,ye[++s]=r;continue}for(c=0,l=s;l>c;)-2!==(n=t[ye[u=c+l>>1]])&&e>n?c=u+1:l=u;((n=t[ye[c]])>e||-2===n)&&(c>0&&(Ce[r]=ye[c-1]),ye[c]=r)}r=++s;const a=new Int32Array(r);for(e=ye[s-1];s-- >0;)a[s]=e,e=Ce[e];for(;r-- >0;)ye[r]=0;return a})(t),r=n.length;let o;this.kt.oe.Zh.Nh(),i|=268435456;let c=r-1,l=t.length-1;for(;l>=0;--l)-2===t[l]?(e[l].gu(s),e[l].$h(i)):0>c||1===r||l!==n[c]?e[l].$h(i):--c,e[l].Ku.link(void 0!==(o=e[l+1])?o.Ku:s);this.kt.oe.Zh.end(i)}}let ye,Ce;Repeat.inject=[IRenderLocation,IController,IViewFactory],Repeat.kind=CustomAttributeResource,Repeat.description=Object.freeze({name:"repeat",aliases:PLATFORM.ki,defaultBindingMode:BindingMode.We,Et:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["items"]}).get()),strategy:1,St:Object.freeze(new HooksDefinition(Repeat.prototype))});let Te=0;class Replaceable{constructor(t,i){this.id=nextId("au$component"),this.wu=t,this.view=this.wu.create(),this.view.gu(i)}static register(t){t.register(Registration.transient("custom-attribute:replaceable",this)),t.register(Registration.transient(this,this))}ru(t){const i=BindingContext.Te;BindingContext.Te=this.wu.name;const s=this.view.bind(536870912|t,this.kt.scope);return s.done?BindingContext.Te=i:s.Ql().then(()=>{BindingContext.Te=i}),s}ou(t){this.view.$h(t)}lu(t){this.view.detach(t)}uu(t){return this.view.He(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],Replaceable.kind=CustomAttributeResource,Replaceable.description=Object.freeze({name:"replaceable",aliases:PLATFORM.ki,defaultBindingMode:BindingMode.We,Et:0,isTemplateController:1,bindables:PLATFORM.It,strategy:1,St:Object.freeze(new HooksDefinition(Replaceable.prototype))});class With{constructor(t,i){this.Re={value:this},this.id=nextId("au$component"),this.wu=t,this.view=this.wu.create(),this.view.gu(i),this.eu=void 0}get value(){return this.eu}set value(t){const i=this.eu;i!==t&&(this.eu=t,this.nu(t,i,0))}static register(t){t.register(Registration.transient("custom-attribute:with",this)),t.register(Registration.transient(this,this))}nu(t,i,s){(5&this.kt.state)>0&&this.qu(4096)}ru(t){this.qu(t)}ou(t){this.view.$h(t)}lu(t){this.view.detach(t)}uu(t){this.view.He(t)}qu(t){const i=Scope.Oe(t,this.kt.scope,void 0===this.value?{}:this.value);this.view.bind(t,i)}}With.inject=[IViewFactory,IRenderLocation],With.kind=CustomAttributeResource,With.description=Object.freeze({name:"with",aliases:PLATFORM.ki,defaultBindingMode:BindingMode.We,Et:0,isTemplateController:1,bindables:Object.freeze(Bindable.for({bindables:["value"]}).get()),strategy:1,St:Object.freeze(new HooksDefinition(With.prototype))});const IProjectorLocator=DI.Di("IProjectorLocator").Ni(),CustomElementResource={name:ae,it:J,ui(t){return t.kind===this},Wu:Y,Ee(t,i=null){if(!t)throw Reporter.error(70);const s=null==i?class{}:i,e=s,n=buildTemplateDefinition(s,t);return e.kind=CustomElementResource,s.description=n,s.register=nt,s}},Ae={mode:"open"},ISanitizer=DI.Di("ISanitizer").Ui(t=>t.singleton(class{Qu(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.Gu=t}We(t){return null==t?null:this.Gu.Qu(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.Ee("sanitize",SanitizeValueConverter);class ViewFactory{constructor(name,template,t){this.Zu=0,this.Xu=-1,this.cache=null,this.oe=t,this.name=name,this.template=template,this.parts=PLATFORM.It}_u(t,i){t&&("*"===t?t=ViewFactory.Ju:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.Xu&&i||(this.Xu=t)),this.cache=this.Xu>0?[]:null,this.Zu=this.Xu>0}Yu(t){return null!=this.cache&&this.Xu>this.cache.length}ta(t){return this.Yu(t)?(t.cache(0),this.cache.push(t),1):0}create(t){const cache=this.cache;let i;if(null!=cache&&cache.length>0)return(i=cache.pop()).state=128^(128|i.state),i;if(i=Controller.ia(this,this.oe,t),this.template.Vt(i,null,this.parts,t),!i.Ku)throw Reporter.error(90);return i}sa(parts){this.parts===PLATFORM.It?this.parts={...parts}:Object.assign(this.parts,parts)}}ViewFactory.Ju=65535;const ITemplateCompiler=DI.Di("ITemplateCompiler").Ni();(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.lr=1]="none",ViewCompileFlags[ViewCompileFlags.ea=2]="surrogate",ViewCompileFlags[ViewCompileFlags.na=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags={}));const ITemplateFactory=DI.Di("ITemplateFactory").Ni();class CompiledTemplate{constructor(dom,t,i,s){this.dom=dom,this.ra=t,this.wu=i,this.ha=s}Vt(t,host,parts,i=0){const s=t instanceof Controller?t:t.kt;if(null==s)throw Error("Controller is missing from the view model");const e=s.Ku=this.wu.oa();s.context=this.ha,this.ha.Vt(i|=this.ra.strategy,s,e.Hl(),this.ra,host,parts)}}const Re={ha:void 0,dom:void 0,ra:void 0,Vt(t){const i=t instanceof Controller?t:t.kt;i.Ku=NodeSequence.empty,i.context=void 0}},Be="default",IInstructionRenderer=DI.Di("IInstructionRenderer").Ni(),IRenderer=DI.Di("IRenderer").Ni(),IRenderingEngine=DI.Di("IRenderingEngine").Ui(t=>t.singleton(Oe));class Oe{constructor(t,i,s,e){this.ca=t,this.la=i,this.ua=new Map,this.oe=s,this.aa=new Map,this.da=e.reduce((t,i)=>(t[i.name]=i,t),Object.create(null))}fa(dom,t,i,s){if(null==t)return;let e=this.aa.get(t);return e||(e=this.va(dom,t,i,s),this.aa.set(t,e)),e}ga(dom,t,i){if(null==t)throw Error("No definition provided");let s=this.ua.get(t);if(!s){const e=buildTemplateDefinition(null,t),template=this.va(dom,e,i,void 0);(s=new ViewFactory(e.name,template,this.oe))._u(e.cache,1),this.ua.set(t,s)}return s}va(dom,t,i,s){if(null==i&&(i=this.ca),null!=t.template){const e=createRenderContext(dom,i,t.dependencies,s);if(t.build.required){const i=t.build.compiler||Be,compiler=this.da[i];if(void 0===compiler)throw Reporter.error(20,i);t=compiler.compile(dom,t,new RuntimeCompilationResources(e),ViewCompileFlags.ea)}return this.la.create(e,t)}return Re}}Oe.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class ke{Mt(t,parts){this.wu=t,t.sa(parts)}resolve(t,i){const s=this.wu;if(null==s)throw Reporter.error(50);if(!s.name||!s.name.length)throw Reporter.error(51);const e=s.parts[s.name];if(e){const s=t.get(IRenderingEngine),dom=t.get(IDOM);return s.ga(dom,e,i)}return s}Dt(){this.wu=null}}let Se=class{constructor(t,i){this.ba=0,this.children=void 0,this.controller=i,this.oe=t,this.controller=Controller.pa(i,void 0,void 0),this.ma=this.controller.ma,this.dt=0,this.wa=0}te(){return this.dt||(this.dt=1,this.ma.ya(()=>{this.Ca()}),this.children=ht(this.ma.children)),this.children}Ys(t){}Ta(t){this.ba&&(this.g(this.children,void 0,16|t),this.ba=0)}subscribe(t){this.wa||(this.wa=1,this.oe.Io(this.Ta,this,24576)),this.o(t)}unsubscribe(t){this.l(t),this.wa&&!this.v()&&(this.wa=0,this.oe.Po(this.Ta,this))}Ca(){var t;this.children=ht(this.ma.children),null!=(t=this.controller.yu)&&"$childrenChanged"in t&&this.controller.yu.Aa(),this.ba=1}};Se=v([subscriberCollection()],Se);class Controller{constructor(t,i,s,e,n,host,r,o){if(this.id=nextId("au$component"),this.Hh=void 0,this.qh=void 0,this.zh=void 0,this.Kh=void 0,this.Gh=void 0,this._h=void 0,this.Qh=void 0,this.Xh=void 0,this.io=void 0,this.eo=void 0,this.Yh=void 0,this.so=void 0,this.flags=t,this.Ra=i,this.Nt=void 0,this.Ut=void 0,this.state=0,this.Hu=o,null==e){if(null==i)throw Error("No IViewCache was provided when rendering a synthetic view.");if(null==s)throw Error("No ILifecycle was provided when rendering a synthetic view.");this.oe=s,this.St=HooksDefinition.lr,this.yu=void 0,this.zt=void 0,this.host=void 0,this.Ba=2,this.scope=void 0,this.ma=void 0,this.Ku=void 0,this.context=void 0,this.location=void 0}else{if(null==n)throw Error("No parentContext was provided when rendering a custom element or attribute.");this.oe=n.get(ILifecycle),e.kt=this;const i=e.constructor;if(null==i.description)throw Error("The provided viewModel does not have a (valid) description.");const{description:s}=i;switch((function(t,i,s,e){const n=null!=e.Re?e.Re:{},bindables=i.bindables,r=Object.getOwnPropertyNames(bindables),o=(2&s)>0,{length:c}=r;let name;for(let i=0;c>i;++i)null==n[name=r[i]]&&(n[name]=new SelfObserver(t,s,o?ProxyObserver.Js(e)._s:e,name,bindables[name].Oi));o||Reflect.defineProperty(e,"$observers",{ve:0,value:n})})(this.oe,s,t|=s.strategy,e),this.St=s.St,this.yu=e,this.zt=(function(t){return 1==e.iu||0==(2&t)?e:ProxyObserver.Js(e)._s})(t),this.host=host,i.kind.name){case"custom-element":if(null==host)throw Error("No host element was provided when rendering a custom element.");this.Ba=0;const c=n.get(IRenderingEngine);let template=void 0;if(this.St.Wr){const s=this.zt.Vt(t,host,null==r.parts?PLATFORM.It:r.parts,n);null!=s&&"getElementTemplate"in s&&(template=s.fa(c,i,n))}else{const dom=n.get(IDOM);template=c.fa(dom,s,n,i)}if(void 0!==template){let parts;if(null==template.ra||0===template.ra.instructions.length||0===template.ra.instructions[0].length||null==template.ra.instructions[0][0].parts)parts=null==r.parts?PLATFORM.It:r.parts;else{const t=template.ra.instructions[0][0];parts=null==r.parts?t.parts:{...r.parts,...t.parts},o===PLATFORM.ki&&(this.Hu=Object.keys(t.parts))}template.Vt(this,host,parts)}this.scope=Scope.create(t,this.zt,null),this.ma=n.get(IProjectorLocator).Oa(n.get(IDOM),this,host,s),this.location=void 0;break;case"custom-attribute":this.Ba=1,this.scope=void 0,this.ma=void 0,this.Ku=void 0,this.context=void 0,this.location=void 0;break;default:throw Error(`Invalid resource kind: '${i.kind.name}'`)}this.St.Mr&&this.zt.ka(t)}}static pa(t,i,host,s=0,e=PLATFORM.It){let n=Controller.Sa.get(t);return void 0===n&&(n=new Controller(s,void 0,void 0,t,i,host,e,PLATFORM.ki),this.Sa.set(t,n)),n}static Ia(t,i,s=0,e=PLATFORM.ki){let n=Controller.Sa.get(t);return void 0===n&&(n=new Controller(s,void 0,void 0,t,i,void 0,PLATFORM.It,e),this.Sa.set(t,n)),n}static ia(t,i,s=0){return new Controller(s,t,i,void 0,void 0,void 0,PLATFORM.It,PLATFORM.ki)}Pa(t){this.scope=t,this.state|=16384}gu(t){this.state=32768^(32768|this.state),this.location=t}release(t){return this.state|=32768,(32&this.state)>0?this.Ra.Yu(this):this.Ea(t)}bind(t,i){switch(t|=4096,this.Ba){case 0:return this.La(t,i);case 1:return this.ja(t,i);case 2:return this.xa(t,i)}}He(t){switch(t|=8192,this.Ba){case 0:return this.Va(t);case 1:return this.$a(t);case 2:return this.Ma(t)}}bound(t){this.zt.bound(t)}Wh(t){this.zt.Wh(t)}$h(t){if(0>=(40&this.state)||0!=(268435456&t))switch(t|=16384,this.Ba){case 0:this.Da(t);break;case 1:this.Fa(t);break;case 2:this.Na(t)}}detach(t){if(0!=(40&this.state))switch(t|=32768,this.Ba){case 0:this.Ua(t);break;case 1:this.za(t);break;case 2:this.Ha(t)}}Zh(t){this.zt.Zh(t)}Jh(t){this.zt.Jh(t)}mount(t){switch(this.Ba){case 0:this.Ka(t);break;case 2:this.qa(t)}}unmount(t){switch(this.Ba){case 0:this.Wa(t);break;case 2:this.Ea(t)}}cache(t){switch(this.Ba){case 0:this.Qa(t);break;case 1:this.Ga(t);break;case 2:this.Za(t)}}Xa(t){const{Nt:i}=this;if(void 0!==i){const s=i.find(i=>i.Vo===t);if(void 0!==s)return s.$o}}La(t,i){const $scope=this.scope;if(null==$scope.Ce)if(null!=i&&null!=i.Ce&&i.Ce!==PLATFORM.It?$scope.Ce={...i.Ce}:this.Hu!==PLATFORM.ki&&($scope.Ce={}),null==$scope.Ce)$scope.Ce=PLATFORM.It;else for(const t of this.Hu)$scope.Ce[t]=$scope;if((134217728&t)>0)return this._a(t,$scope),LifecycleTask.done;if((4&this.state)>0)return LifecycleTask.done;if(t|=4096,this.state|=1,this.oe.bound.Nh(),this._a(t,$scope),this.St.Dr){const i=this.zt.ru(t);if(et(i))return new ContinuationTask(i,this.Ja,this,t,$scope)}return this.Ja(t,$scope)}ja(t,i){if((4&this.state)>0){if(this.scope===i)return LifecycleTask.done;const s=this.He(t|=4096);if(!s.done)return new ContinuationTask(s,this.bind,this,t,i)}else t|=4096;if(this.state|=1,this.scope=i,this.oe.bound.Nh(),this.St.Dr){const i=this.zt.ru(t);if(et(i))return new ContinuationTask(i,this.Ya,this,t)}return this.Ya(t),LifecycleTask.done}xa(t,i){if(null==i)throw Error("Scope is null or undefined");if((134217728&t)>0)return this._a(t,i),LifecycleTask.done;if((4&this.state)>0){if(this.scope===i||(16384&this.state)>0)return LifecycleTask.done;const s=this.He(t|=4096);if(!s.done)return new ContinuationTask(s,this.bind,this,t,i)}else t|=4096;return 0==(16384&this.state)&&(this.scope=i),this.state|=1,this.oe.bound.Nh(),this._a(t,i),this.Ja(t,i)}_a(t,i){const{Nt:s}=this;if(void 0!==s){const{length:e}=s;for(let n=0;e>n;++n)s[n].Fo(t,i)}}Ja(t,i){let s,e=void 0;const{Ut:n}=this;if(void 0!==n){const{length:r}=n;for(let o=0;r>o;++o)(s=n[o].bind(t,i)).done||(void 0===e&&(e=[]),e.push(s))}return void 0===e?(this.Ya(t),LifecycleTask.done):new AggregateContinuationTask(e,this.Ya,this,t)}Ya(t){this.St.Fr&&this.oe.bound.add(this),this.state=1^this.state|4,this.oe.bound.end(t)}Va(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.oe.Wh.Nh(),this.St.Kr){const i=this.zt.uu(t);if(et(i))return new ContinuationTask(i,this.td,this,t)}return this.td(t)}$a(t){if(0==(4&this.state))return LifecycleTask.done;if(this.state|=2,t|=8192,this.oe.Wh.Nh(),this.St.Kr){const i=this.zt.uu(t);if(et(i))return new ContinuationTask(i,this.sd,this,t)}return this.sd(t),LifecycleTask.done}Ma(t){return 0==(4&this.state)?LifecycleTask.done:(this.state|=2,t|=8192,this.oe.Wh.Nh(),this.td(t))}ed(t){const{Nt:i}=this;if(void 0!==i)for(let s=i.length-1;s>=0;--s)i[s].No(t);this.sd(t)}td(t){let i,s=void 0;const{Ut:e}=this;if(void 0!==e)for(let n=e.length-1;n>=0;--n)(i=e[n].He(t)).done||(void 0===s&&(s=[]),s.push(i));return void 0===s?(this.ed(t),LifecycleTask.done):new AggregateContinuationTask(s,this.ed,this,t)}sd(t){switch(this.Ba){case 1:this.scope=void 0;break;case 2:0==(16384&this.state)&&(this.scope=void 0)}this.St.qr&&this.oe.Wh.add(this),this.state=6^(6|this.state),this.oe.Wh.end(t)}Da(t){t|=16384,this.state|=8,this.oe.mount.add(this),this.oe.Zh.Nh(),this.St.Nr&&this.zt.ou(t),this.nd(t),this.St.Ur&&this.oe.Zh.add(this),this.state=8^this.state|32,this.oe.Zh.end(t)}Fa(t){t|=16384,this.state|=8,this.oe.Zh.Nh(),this.St.Nr&&this.zt.ou(t),this.St.Ur&&this.oe.Zh.add(this),this.state=8^this.state|32,this.oe.Zh.end(t)}Na(t){((32&this.state)>0&&268435456&t)>0?this.oe.mount.add(this):(t|=16384,this.state|=8,this.oe.mount.add(this),this.oe.Zh.Nh(),this.nd(t),this.state=8^this.state|32,this.oe.Zh.end(t))}Ua(t){t|=32768,this.state|=16,this.oe.Jh.Nh(),this.oe.unmount.add(this),this.St.zr&&this.zt.lu(t),this.rd(t),this.St.Hr&&this.oe.Jh.add(this),this.state=48^(48|this.state),this.oe.Jh.end(t)}za(t){t|=32768,this.state|=16,this.oe.Jh.Nh(),this.St.zr&&this.zt.lu(t),this.St.Hr&&this.oe.Jh.add(this),this.state=48^(48|this.state),this.oe.Jh.end(t)}Ha(t){t|=32768,this.state|=16,this.oe.Jh.Nh(),this.oe.unmount.add(this),this.rd(t),this.state=48^(48|this.state),this.oe.Jh.end(t)}nd(t){const{Ut:i}=this;if(void 0!==i){const{length:s}=i;for(let e=0;s>e;++e)i[e].$h(t)}}rd(t){const{Ut:i}=this;if(void 0!==i)for(let s=i.length-1;s>=0;--s)i[s].detach(t)}Ka(t){(64&this.state)>0||(this.state|=64,this.ma.hd(this.Ku))}qa(t){this.state|=64,this.Ku.insertBefore(this.location)}Wa(t){0!=(64&this.state)&&(this.state=64^(64|this.state),this.ma.od(this.Ku))}Ea(t){return 0==(64&this.state)?0:(this.state=64^(64|this.state),this.Ku.remove(),this.Ku.xh(),(32768&this.state)>0&&(this.state=32768^(32768|this.state),this.Ra.ta(this))?(this.state|=128,1):0)}Qa(t){this.St.Qr&&this.zt.du(t|=65536)}Ga(t){t|=65536,this.St.Qr&&this.zt.du(t);const{Ut:i}=this;if(void 0!==i){const{length:s}=i;for(let e=s-1;e>=0;--e)i[e].cache(t)}}Za(t){const{Ut:i}=this;if(void 0!==i){const{length:s}=i;for(let e=s-1;e>=0;--e)i[e].cache(t)}}}Controller.Sa=new WeakMap;const Ie=DI.Di("IActivator").Ui(t=>t.singleton(Pe));class Pe{static register(t){return Registration.singleton(Ie,this).register(t)}pu(host,component,t,i=1024,s){const e=Controller.pa(component,t,host,i=void 0===i?0:i);let n=e.bind(4096|i,s);return n.done?e.$h(16384|i):n=new ContinuationTask(n,e.$h,e,16384|i),n}bu(component,t=2048){const i=Controller.pa(component,void 0,void 0);return i.detach(32768|t),i.He(8192|t)}}const{rt:Ee,lt:Le}=Profiler.os("Aurelia.start"),{rt:je,lt:xe}=Profiler.os("Aurelia.stop");class CompositionRoot{constructor(t,i){if(this.ld=t,null!=t.host)this.ca=i.has(INode,0)?i.Lt():i,Registration.zi(INode,t.host).register(this.ca),this.host=t.host;else{if(!i.has(INode,1))throw Error("No host element found.");this.ca=i,this.host=i.get(INode)}this.strategy=null!=t.strategy?t.strategy:1;const s=this.ca.get(IDOMInitializer);this.dom=s.initialize(t),this.yu=CustomElementResource.ui(t.component)?this.ca.get(t.component):t.component,this.controller=Controller.pa(this.yu,this.ca,this.host,this.strategy),this.oe=this.ca.get(ILifecycle),this.ud=this.ca.get(Ie),1==t.ad?this.oe.Eo(t.dd):this.oe.Lo(),this.su=LifecycleTask.done,this.fd=1,this.vd=1}pu(t){const{su:i,host,yu:s,ca:e,ud:n,strategy}=this,r=1024|strategy;if(i.done)this.su=null==t||t.done?n.pu(host,s,e,r,void 0):new ContinuationTask(t,n.pu,n,host,s,e,r,void 0);else if(null==t||t.done)this.su=new ContinuationTask(i,n.pu,n,host,s,e,r,void 0);else{const o=new ContinuationTask(i,t.Ql,t);this.su=new ContinuationTask(o,n.pu,n,host,s,e,r,void 0)}return this.su}bu(t){const{su:i,yu:s,ud:e,strategy}=this,n=2048|strategy;if(i.done)this.su=null==t||t.done?e.bu(s,n):new ContinuationTask(t,e.bu,e,s,n);else if(null==t||t.done)this.su=new ContinuationTask(i,e.bu,e,s,n);else{const r=new ContinuationTask(i,t.Ql,t);this.su=new ContinuationTask(r,e.bu,e,s,n)}return this.su}}class Aurelia{constructor(t=DI.Vi()){this.ca=t,this.su=LifecycleTask.done,this.gd=0,this.bd=0,this.pd=0,this.md=void 0,this.next=void 0,Registration.zi(Aurelia,this).register(t)}get wd(){return this.gd}get yd(){return this.bd}get Cd(){return this.pd}get root(){if(null==this.md){if(null==this.next)throw Error("root is not defined");return this.next}return this.md}register(...t){return this.ca.register(...t),this}app(t){return this.next=new CompositionRoot(t,this.ca),this.wd&&this.start(),this}start(t=this.next){if(null==t)throw Error("There is no composition root");return this.stop(t),this.su.done?this.Td(t):this.su=new ContinuationTask(this.su,this.Td,this,t),this.su=this.root.pu(this.su),this.su=this.su.done?this.Ad(t):new ContinuationTask(this.su,this.Ad,this,t),this.su}stop(t=this.md){return this.gd&&null!=t&&(this.su.done?this.Rd(t):this.su=new ContinuationTask(this.su,this.Rd,this,t),this.su=t.bu(this.su),this.su=this.su.done?this.Bd(t):new ContinuationTask(this.su,this.Bd,this,t)),this.su}Ql(){return this.su.Ql()}Td(t){Reflect.set(t.host,"$au",this),this.md=t,this.bd=1,Profiler.enabled&&Ee()}Ad(t){return this.gd=1,this.bd=0,this.dispatchEvent(t,"aurelia-composed",t.dom),this.dispatchEvent(t,"au-started",t.host),Profiler.enabled&&Le(),LifecycleTask.done}Rd(t){this.gd=0,this.pd=1,Profiler.enabled&&je()}Bd(t){return Reflect.deleteProperty(t.host,"$au"),this.md=void 0,this.pd=0,this.dispatchEvent(t,"au-stopped",t.host),Profiler.enabled&&xe(),LifecycleTask.done}dispatchEvent(t,name,i){(i="dispatchEvent"in i?i:t.dom).dispatchEvent(t.dom.Vl(name,{detail:this,bubbles:1,cancelable:1}))}}PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=DI.Di("IDOMInitializer").Ni(),Ve=[].slice;class $e{constructor(t){const i=this.Od={};t.forEach(t=>{i[t.Ft]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Vt(t,dom,i,s,targets,e,host,parts){Tracer.enabled&&Tracer.rt("Renderer","render",Ve.call(arguments));const n=e.instructions,r=this.Od;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);let instructions,o,c;for(let e=0,l=targets.length;l>e;++e){o=targets[e];for(let l=0,u=(instructions=n[e]).length;u>l;++l)r[(c=instructions[l]).type].Vt(t,dom,i,s,o,c,parts)}if(host){const n=e.surrogates;for(let e=0,o=n.length;o>e;++e)r[(c=n[e]).type].Vt(t,dom,i,s,host,c,parts)}Tracer.enabled&&Tracer.lt()}}$e.inject=[all(IInstructionRenderer)];let Me=class{Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("SetPropertyRenderer","render",Ve.call(arguments)),getTarget(e)[n.to]=n.value,Tracer.enabled&&Tracer.lt()}};Me=v([instructionRenderer("re")],Me);let De=class{Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("CustomElementRenderer","render",Ve.call(arguments));const r=i.$t(s,e,n,null,null,e,1),component=i.get(J(n.res)),o=i.get(IRenderer).Od,c=n.instructions,l=Controller.pa(component,i,e,t,n);let u;for(let e=0,n=c.length;n>e;++e)o[(u=c[e]).type].Vt(t,dom,i,s,l,u);addComponent(s,l),r.Dt(),Tracer.enabled&&Tracer.lt()}};De=v([instructionRenderer("ra")],De);let Fe=class{Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("CustomAttributeRenderer","render",Ve.call(arguments));const r=i.$t(s,e,n),component=i.get(tt(n.res)),o=i.get(IRenderer).Od,c=n.instructions,l=Controller.Ia(component,i,t);let u;for(let e=0,n=c.length;n>e;++e)o[(u=c[e]).type].Vt(t,dom,i,s,l,u);addComponent(s,l),r.Dt(),Tracer.enabled&&Tracer.lt()}};Fe=v([instructionRenderer("rb")],Fe);let Ne=class{constructor(t){this.kd=t}Vt(t,dom,i,s,e,n,parts){Tracer.enabled&&Tracer.rt("TemplateControllerRenderer","render",Ve.call(arguments));const r=this.kd.ga(dom,n.def,i),o=i.$t(s,e,n,r,parts,dom.xl(e),0),component=i.get(tt(n.res)),c=i.get(IRenderer).Od,l=n.instructions,u=Controller.Ia(component,i,t,null==n.parts?PLATFORM.ki:Object.keys(n.parts));if(n.link){const t=s.Ut;component.link(t[t.length-1])}let a;for(let e=0,n=l.length;n>e;++e)c[(a=l[e]).type].Vt(t,dom,i,s,u,a);addComponent(s,u),o.Dt(),Tracer.enabled&&Tracer.lt()}};Ne.inject=[IRenderingEngine],Ne=v([instructionRenderer("rc")],Ne);let Ue=class{constructor(t,i){this.Sd=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("LetElementRenderer","render",Ve.call(arguments)),dom.remove(e);const r=n.instructions,toViewModel=n.toViewModel;let o,c,l;for(let t=0,e=r.length;e>t;++t)c=ensureExpression(this.Sd,(o=r[t]).from,48),addBinding(s,l=new LetBinding(c,o.to,this.ot,i,toViewModel));Tracer.enabled&&Tracer.lt()}};Ue.inject=[IExpressionParser,IObserverLocator],Ue=v([instructionRenderer("rd")],Ue);let ze=class{constructor(t,i){this.Sd=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("CallBindingRenderer","render",Ve.call(arguments));const r=ensureExpression(this.Sd,n.from,153);addBinding(s,new Call(r,getTarget(e),n.to,this.ot,i)),Tracer.enabled&&Tracer.lt()}};ze.inject=[IExpressionParser,IObserverLocator],ze=v([instructionRenderer("rh")],ze);let He=class{constructor(t){this.Sd=t}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("RefBindingRenderer","render",Ve.call(arguments));const r=ensureExpression(this.Sd,n.from,1280);addBinding(s,new Ref(r,getTarget(e),i)),Tracer.enabled&&Tracer.lt()}};He.inject=[IExpressionParser],He=v([instructionRenderer("rj")],He);let Ke=class{constructor(t,i){this.Sd=t,this.ot=i}Vt(t,dom,i,s,e,n){let r;Tracer.enabled&&Tracer.rt("InterpolationBindingRenderer","render",Ve.call(arguments));const o=ensureExpression(this.Sd,n.from,2048);addBinding(s,r=o._n?new MultiInterpolationBinding(this.ot,o,getTarget(e),n.to,BindingMode.We,i):new InterpolationBinding(o.Jn,o,getTarget(e),n.to,BindingMode.We,this.ot,i,1)),Tracer.enabled&&Tracer.lt()}};Ke.inject=[IExpressionParser,IObserverLocator],Ke=v([instructionRenderer("rf")],Ke);let qe=class{constructor(t,i){this.Sd=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("PropertyBindingRenderer","render",Ve.call(arguments));const r=ensureExpression(this.Sd,n.from,48|n.mode);addBinding(s,new Binding(r,getTarget(e),n.to,n.mode,this.ot,i)),Tracer.enabled&&Tracer.lt()}};qe.inject=[IExpressionParser,IObserverLocator],qe=v([instructionRenderer("rg")],qe);let We=class{constructor(t,i){this.Sd=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("IteratorBindingRenderer","render",Ve.call(arguments));const r=ensureExpression(this.Sd,n.from,539);addBinding(s,new Binding(r,getTarget(e),n.to,BindingMode.We,this.ot,i)),Tracer.enabled&&Tracer.lt()}};We.inject=[IExpressionParser,IObserverLocator],We=v([instructionRenderer("rk")],We);const DefaultComponents=[ObserverLocator,Yi,$e],DefaultResources=[If,Else,Repeat,Replaceable,With,SanitizeValueConverter,DebounceBindingBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,SignalBindingBehavior,PriorityBindingBehavior,ThrottleBindingBehavior,TwoWayBindingBehavior],DefaultRenderers=[qe,We,ze,He,Ke,Me,De,Fe,Ne,Ue],RuntimeBasicConfiguration={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Vi(){return this.register(DI.Vi())}};class InterpolationInstruction{constructor(from,to){this.type="rf",this.from=from,this.to=to}}class OneTimeBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}class ToViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.We,this.oneTime=0,this.to=to}}class FromViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Qe,this.oneTime=0,this.to=to}}class TwoWayBindingInstruction{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.hr,this.oneTime=0,this.to=to}}class IteratorBindingInstruction{constructor(from,to){this.type="rk",this.from=from,this.to=to}}class CallBindingInstruction{constructor(from,to){this.type="rh",this.from=from,this.to=to}}class RefBindingInstruction{constructor(from){this.type="rj",this.from=from}}class SetPropertyInstruction{constructor(value,to){this.type="re",this.to=to,this.value=value}}class HydrateElementInstruction{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}class HydrateAttributeInstruction{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}class HydrateTemplateController{constructor(def,res,instructions,link,parts){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.parts=parts,this.res=res}}class LetElementInstruction{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}class LetBindingInstruction{constructor(from,to){this.type="ri",this.from=from,this.to=to}}Nt=Object.freeze({CallFunction,connects:t=>32==(32&t.st),observes:t=>64==(64&t.st),callsFunction:t=>128==(128&t.st),hasAncestor:t=>256==(256&t.st),isAssignable:t=>8192==(8192&t.st),isLeftHandSide:t=>1024==(1024&t.st),isPrimary:t=>512==(512&t.st),isResource:t=>32768==(32768&t.st),hasBind,hasUnbind,isLiteral,arePureLiterals,isPureLiteral,BindingBehavior,ValueConverter,Assign,Conditional,AccessThis,AccessScope,AccessMember,AccessKeyed,CallScope,CallMember,Binary,Unary,PrimitiveLiteral,HtmlLiteral:class{constructor(parts){this.st=51,this.assign=PLATFORM.Si,this.parts=parts}evaluate(t,i,s){const e=this.parts;let value,n="";for(let r=0,o=e.length;o>r;++r)null!=(value=e[r].evaluate(t,i,s))&&(n+=value);return n}connect(t,i,s){for(let e=0,n=this.parts.length;n>e;++e)this.parts[e].connect(t,i,s)}accept(t){return t.Id(this)}},ArrayLiteral,ObjectLiteral,Template,TaggedTemplate,ArrayBindingPattern,ObjectBindingPattern,BindingIdentifier,ForOfStatement,Interpolation,get Binding(){return Binding},Call,connectable,IExpressionParser,get BindingType(){return BindingType},MultiInterpolationBinding,get InterpolationBinding(){return InterpolationBinding},get LetBinding(){return LetBinding},Ref,get ArrayObserver(){return ArrayObserver},enableArrayObservation,disableArrayObservation(){for(const t of As)1==vs[t].dt&&def(vs,t,{...Bs,value:Ts[t]})},get MapObserver(){return MapObserver},enableMapObservation,disableMapObservation(){for(const t of js)1==Ss[t].dt&&$s(Ss,t,{...Vs,value:Ls[t]})},get SetObserver(){return SetObserver},enableSetObservation,disableSetObservation(){for(const t of Ks)1==Fs[t].dt&&Qs(Fs,t,{...Ws,value:Hs[t]})},BindingContext,Scope,OverrideContext,get CollectionLengthObserver(){return CollectionLengthObserver},get CollectionSizeObserver(){return CollectionSizeObserver},computed:t=>(function(i,s){(i.computed||(i.computed={}))[s]=t}),createComputedObserver,get CustomSetterObserver(){return CustomSetterObserver},get GetterObserver(){return GetterObserver},IDirtyChecker,get DirtyCheckProperty(){return DirtyCheckProperty},DirtyCheckSettings,IObserverLocator,ITargetObserverLocator,ITargetAccessorLocator,getCollectionObserver,ObserverLocator,PrimitiveObserver,PropertyAccessor,get ProxyObserver(){return ProxyObserver},get SelfObserver(){return SelfObserver},get SetterObserver(){return SetterObserver},ISignaler,subscriberCollection,collectionSubscriberCollection,proxySubscriberCollection,bindingBehavior:t=>i=>BindingBehaviorResource.Ee(t,i),BindingBehaviorResource,BindingModeBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,TwoWayBindingBehavior,DebounceBindingBehavior,PriorityBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,customAttribute:t=>i=>CustomAttributeResource.Ee(t,i),CustomAttributeResource,dynamicOptions:t=>void 0===t?st:st(t),templateController:t=>i=>CustomAttributeResource.Ee("string"==typeof t?{isTemplateController:1,name:t}:{isTemplateController:1,...t},i),If,Else,Repeat,Replaceable,With,containerless:t=>void 0===t?rt:rt(t),customElement:t=>i=>CustomElementResource.Ee(t,i),CustomElementResource,IProjectorLocator,useShadowDOM(t){function i(t){return t.shadowOptions=s,t}const s="function"!=typeof t&&t?t:Ae;return"function"==typeof t?i(t):i},valueConverter:t=>i=>ValueConverterResource.Ee(t,i),ValueConverterResource,ISanitizer,SanitizeValueConverter,bindable(t,i){let s;const e=function(t,i){arguments.length>1&&(s.Al=i),Bindable.for(t.constructor).add(s)};return arguments.length>1?(s={},void e(t,i)):"string"==typeof t?(s={},e):(s=t||{},e)},Bindable,Controller,ViewFactory,Aurelia,IDOMInitializer,CompositionRoot,IfRegistration:If,ElseRegistration:Else,RepeatRegistration:Repeat,ReplaceableRegistration:Replaceable,WithRegistration:With,SanitizeValueConverterRegistration:SanitizeValueConverter,DebounceBindingBehaviorRegistration:DebounceBindingBehavior,OneTimeBindingBehaviorRegistration:OneTimeBindingBehavior,ToViewBindingBehaviorRegistration:ToViewBindingBehavior,FromViewBindingBehaviorRegistration:FromViewBindingBehavior,PriorityBindingBehaviorRegistration:PriorityBindingBehavior,SignalBindingBehaviorRegistration:SignalBindingBehavior,ThrottleBindingBehaviorRegistration:ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration:TwoWayBindingBehavior,RefBindingRendererRegistration:He,CallBindingRendererRegistration:ze,CustomAttributeRendererRegistration:Fe,CustomElementRendererRegistration:De,InterpolationBindingRendererRegistration:Ke,IteratorBindingRendererRegistration:We,LetElementRendererRegistration:Ue,PropertyBindingRendererRegistration:qe,SetPropertyRendererRegistration:Me,TemplateControllerRendererRegistration:Ne,DefaultResources,IObserverLocatorRegistration:ObserverLocator,ILifecycleRegistration:Yi,IRendererRegistration:$e,RuntimeBasicConfiguration,buildTemplateDefinition,HooksDefinition,isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},ITargetedInstruction,get TargetedInstructionType(){return TargetedInstructionType},DOM,INode,IRenderLocation,IDOM,NodeSequence,get BindingMode(){return BindingMode},get BindingStrategy(){return BindingStrategy},get ExpressionKind(){return ExpressionKind},get Hooks(){return Hooks},get LifecycleFlags(){return LifecycleFlags},get State(){return Dt},CallBindingInstruction,FromViewBindingInstruction,HydrateAttributeInstruction,HydrateElementInstruction,HydrateTemplateController,InterpolationInstruction,IteratorBindingInstruction,LetBindingInstruction,LetElementInstruction,OneTimeBindingInstruction,RefBindingInstruction,SetPropertyInstruction,ToViewBindingInstruction,TwoWayBindingInstruction,get ViewModelKind(){return ViewModelKind},ILifecycle,IController,IViewFactory,get Priority(){return Priority},AggregateContinuationTask,TerminalTask:class{constructor(t){this.done=0,this.Xl=t.then instanceof Function?t:t.Ql(),this.Xl.then(()=>{this.done=1}).catch(t=>{throw t})}Wl(){return 0}cancel(){}Ql(){return this.Xl}},AggregateTerminalTask:class{constructor(t){this.done=0,this.Xl=Promise.all(t.map(t=>t.Ql())).then(()=>{this.done=1})}Wl(){return 0}cancel(){}Ql(){return this.Xl}},ContinuationTask,LifecycleTask,PromiseTask,get CollectionKind(){return CollectionKind},get DelegationStrategy(){return DelegationStrategy},isIndexMap:value=>value instanceof Array&&1==value.isIndexMap,copyIndexMap(t,i){const{length:s}=t,e=Array(s);let n=0;for(;s>n;)e[n]=t[n],++n;return e.at=void 0!==i?i.slice(0):void 0!==t.at?t.at.slice(0):[],e.isIndexMap=1,e},cloneIndexMap(t){const i=t.slice();return i.at=t.at.slice(),i.isIndexMap=1,i},createIndexMap,instructionRenderer,ensureExpression,addComponent,addBinding,CompiledTemplate,createRenderContext,IInstructionRenderer,IRenderer,IRenderingEngine,ITemplateCompiler,ITemplateFactory,get ViewCompileFlags(){return ViewCompileFlags}});const BindingCommandResource={name:"binding-command",it(name){return`${this.name}:${name}`},ui(t){return t.kind===this},Ee(t,i){const s=i,e=s,n="string"==typeof t?{name:t,target:null}:t;return e.kind=BindingCommandResource,e.description=n,s.register=ot,s}};class OneTimeBindingCommand{constructor(){this.Pd=49}compile(t){return new OneTimeBindingInstruction(t.Fe,ct(t,0))}}BindingCommandResource.Ee("one-time",OneTimeBindingCommand);class ToViewBindingCommand{constructor(){this.Pd=50}compile(t){return new ToViewBindingInstruction(t.Fe,ct(t,0))}}BindingCommandResource.Ee("to-view",ToViewBindingCommand);class FromViewBindingCommand{constructor(){this.Pd=51}compile(t){return new FromViewBindingInstruction(t.Fe,ct(t,0))}}BindingCommandResource.Ee("from-view",FromViewBindingCommand);class TwoWayBindingCommand{constructor(){this.Pd=52}compile(t){return new TwoWayBindingInstruction(t.Fe,ct(t,0))}}BindingCommandResource.Ee("two-way",TwoWayBindingCommand);const Qe=["","$1","$2","","$4","","$6"],Ge={bind:BindingMode.We,Ed:BindingMode.oneTime,Ld:BindingMode.We,jd:BindingMode.Qe,xd:BindingMode.hr};class DefaultBindingCommand{constructor(){this.Pd=53,this.$1=OneTimeBindingCommand.prototype.compile,this.$2=ToViewBindingCommand.prototype.compile,this.$4=FromViewBindingCommand.prototype.compile,this.$6=TwoWayBindingCommand.prototype.compile}compile(t){return this[Qe[getMode(t)]](t)}}BindingCommandResource.Ee("bind",DefaultBindingCommand);class CallBindingCommand{constructor(){this.Pd=153}compile(t){return new CallBindingInstruction(t.Fe,ct(t,1))}}BindingCommandResource.Ee("call",CallBindingCommand);class ForBindingCommand{constructor(){this.Pd=539}compile(t){return new IteratorBindingInstruction(t.Fe,ct(t,0))}}BindingCommandResource.Ee("for",ForBindingCommand),(function(Access){Access[Access.Vd=0]="Reset",Access[Access.$d=511]="Ancestor",Access[Access.Md=512]="This",Access[Access.Scope=1024]="Scope",Access[Access.Dd=2048]="Member",Access[Access.Fd=4096]="Keyed"})(Access||(Access={})),(function(Precedence){Precedence[Precedence.Nd=61]="Variadic",Precedence[Precedence.Assign=62]="Assign",Precedence[Precedence.Conditional=63]="Conditional",Precedence[Precedence.Ud=64]="LogicalOR",Precedence[Precedence.zd=128]="LogicalAND",Precedence[Precedence.Hd=192]="Equality",Precedence[Precedence.Kd=256]="Relational",Precedence[Precedence.qd=320]="Additive",Precedence[Precedence.Wd=384]="Multiplicative",Precedence[Precedence.Binary=448]="Binary",Precedence[Precedence.Qd=449]="LeftHandSide",Precedence[Precedence.Gd=450]="Primary",Precedence[Precedence.Unary=451]="Unary"})(Precedence||(Precedence={})),(function(t){t[t.Zd=1572864]="EOF",t[t.Xd=1048576]="ExpressionTerminal",t[t._d=524288]="AccessScopeTerminal",t[t.Jd=262144]="ClosingToken",t[t.Yd=131072]="OpeningToken",t[t.tf=65536]="BinaryOp",t[t.if=32768]="UnaryOp",t[t.Qd=16384]="LeftHandSide",t[t.sf=12288]="StringOrNumericLiteral",t[t.ef=8192]="NumericLiteral",t[t.nf=4096]="StringLiteral",t[t.rf=3072]="IdentifierName",t[t.hf=2048]="Keyword",t[t.cf=1024]="Identifier",t[t.lf=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Wi=63]="Type",t[t.uf=2048]="FalseKeyword",t[t.af=2049]="TrueKeyword",t[t.df=2050]="NullKeyword",t[t.ff=2051]="UndefinedKeyword",t[t.vf=3076]="ThisScope",t[t.gf=3077]="ParentScope",t[t.bf=671750]="OpenParen",t[t.pf=131079]="OpenBrace",t[t.mf=16392]="Dot",t[t.wf=1835017]="CloseBrace",t[t.yf=1835018]="CloseParen",t[t.Cf=1572875]="Comma",t[t.Tf=671756]="OpenBracket",t[t.Af=1835021]="CloseBracket",t[t.Rf=1572878]="Colon",t[t.Bf=1572879]="Question",t[t.Of=1572880]="Ampersand",t[t.kf=1572883]="Bar",t[t.Sf=1638548]="BarBar",t[t.Pf=1638613]="AmpersandAmpersand",t[t.Ef=1638678]="EqualsEquals",t[t.Lf=1638679]="ExclamationEquals",t[t.jf=1638680]="EqualsEqualsEquals",t[t.xf=1638681]="ExclamationEqualsEquals",t[t.Vf=1638746]="LessThan",t[t.$f=1638747]="GreaterThan",t[t.Mf=1638748]="LessThanEquals",t[t.Df=1638749]="GreaterThanEquals",t[t.Ff=1640798]="InKeyword",t[t.Nf=1640799]="InstanceOfKeyword",t[t.Uf=623008]="Plus",t[t.zf=623009]="Minus",t[t.Hf=34850]="TypeofKeyword",t[t.Kf=34851]="VoidKeyword",t[t.qf=1638884]="Asterisk",t[t.Wf=1638885]="Percent",t[t.Qf=1638886]="Slash",t[t.Gf=1048615]="Equals",t[t.Zf=32808]="Exclamation",t[t.Xf=540713]="TemplateTail",t[t._f=540714]="TemplateContinuation",t[t.Jf=1051179]="OfKeyword"})(Ut||(Ut={})),(function(Char){Char[Char.Yf=0]="Null",Char[Char.tv=8]="Backspace",Char[Char.iv=9]="Tab",Char[Char.sv=10]="LineFeed",Char[Char.ev=11]="VerticalTab",Char[Char.nv=12]="FormFeed",Char[Char.rv=13]="CarriageReturn",Char[Char.hv=32]="Space",Char[Char.Zf=33]="Exclamation",Char[Char.ov=34]="DoubleQuote",Char[Char.cv=36]="Dollar",Char[Char.Wf=37]="Percent",Char[Char.Of=38]="Ampersand",Char[Char.lv=39]="SingleQuote",Char[Char.bf=40]="OpenParen",Char[Char.yf=41]="CloseParen",Char[Char.qf=42]="Asterisk",Char[Char.Uf=43]="Plus",Char[Char.Cf=44]="Comma",Char[Char.zf=45]="Minus",Char[Char.mf=46]="Dot",Char[Char.Qf=47]="Slash",Char[Char.uv=59]="Semicolon",Char[Char.av=96]="Backtick",Char[Char.Tf=91]="OpenBracket",Char[Char.dv=92]="Backslash",Char[Char.Af=93]="CloseBracket",Char[Char.fv=94]="Caret",Char[Char.vv=95]="Underscore",Char[Char.pf=123]="OpenBrace",Char[Char.kf=124]="Bar",Char[Char.wf=125]="CloseBrace",Char[Char.Rf=58]="Colon",Char[Char.Vf=60]="LessThan",Char[Char.Gf=61]="Equals",Char[Char.$f=62]="GreaterThan",Char[Char.Bf=63]="Question",Char[Char.gv=48]="Zero",Char[Char.bv=49]="One",Char[Char.pv=50]="Two",Char[Char.mv=51]="Three",Char[Char.wv=52]="Four",Char[Char.yv=53]="Five",Char[Char.Cv=54]="Six",Char[Char.Tv=55]="Seven",Char[Char.Av=56]="Eight",Char[Char.Rv=57]="Nine",Char[Char.Bv=65]="UpperA",Char[Char.Ov=66]="UpperB",Char[Char.kv=67]="UpperC",Char[Char.Sv=68]="UpperD",Char[Char.Iv=69]="UpperE",Char[Char.Pv=70]="UpperF",Char[Char.Ev=71]="UpperG",Char[Char.Lv=72]="UpperH",Char[Char.jv=73]="UpperI",Char[Char.xv=74]="UpperJ",Char[Char.Vv=75]="UpperK",Char[Char.$v=76]="UpperL",Char[Char.Mv=77]="UpperM",Char[Char.Dv=78]="UpperN",Char[Char.Fv=79]="UpperO",Char[Char.Nv=80]="UpperP",Char[Char.Uv=81]="UpperQ",Char[Char.zv=82]="UpperR",Char[Char.Hv=83]="UpperS",Char[Char.Kv=84]="UpperT",Char[Char.qv=85]="UpperU",Char[Char.Wv=86]="UpperV",Char[Char.Qv=87]="UpperW",Char[Char.Gv=88]="UpperX",Char[Char.Zv=89]="UpperY",Char[Char.Xv=90]="UpperZ",Char[Char._v=97]="LowerA",Char[Char.Jv=98]="LowerB",Char[Char.Yv=99]="LowerC",Char[Char.tg=100]="LowerD",Char[Char.ig=101]="LowerE",Char[Char.sg=102]="LowerF",Char[Char.eg=103]="LowerG",Char[Char.ng=104]="LowerH",Char[Char.rg=105]="LowerI",Char[Char.hg=106]="LowerJ",Char[Char.og=107]="LowerK",Char[Char.cg=108]="LowerL",Char[Char.lg=109]="LowerM",Char[Char.ug=110]="LowerN",Char[Char.ag=111]="LowerO",Char[Char.dg=112]="LowerP",Char[Char.fg=113]="LowerQ",Char[Char.vg=114]="LowerR",Char[Char.gg=115]="LowerS",Char[Char.bg=116]="LowerT",Char[Char.pg=117]="LowerU",Char[Char.mg=118]="LowerV",Char[Char.wg=119]="LowerW",Char[Char.yg=120]="LowerX",Char[Char.Cg=121]="LowerY",Char[Char.Tg=122]="LowerZ"})(Char||(Char={}));const{rt:Ze,lt:Xe}=Profiler.os("ExpressionParser"),_e=PrimitiveLiteral.Mn,Je=PrimitiveLiteral.$n,Ye=PrimitiveLiteral.Vn,tn=PrimitiveLiteral.xn,sn=AccessThis.in,en=AccessThis.sn;class ParserState{get Xt(){return this.input.slice(this._t,this.index)}constructor(t){this.index=0,this._t=0,this.lastIndex=0,this.input=t,this.length=t.length,this.Wt=1572864,this.Gt="",this.qt=t.charCodeAt(0),this.Qt=1}}const $state=new ParserState("");(function(t){t[t.Ag=100]="InvalidExpressionStart",t[t.Rg=101]="UnconsumedToken",t[t.Bg=102]="DoubleDot",t[t.Og=103]="InvalidMemberExpression",t[t.kg=104]="UnexpectedEndOfExpression",t[t.Sg=105]="ExpectedIdentifier",t[t.Ig=106]="InvalidForDeclaration",t[t.Pg=107]="InvalidObjectLiteralPropertyDefinition",t[t.Eg=108]="UnterminatedQuote",t[t.Lg=109]="UnterminatedTemplate",t[t.jg=110]="MissingExpectedToken",t[t.xg=111]="UnexpectedCharacter",t[t.Vg=112]="MissingValueConverter",t[t.$g=113]="MissingBindingBehavior"})(zt||(zt={})),(function(t){t[t.Mg=150]="NotAssignable",t[t.Dg=151]="UnexpectedForOf"})(Ht||(Ht={}));const nn=[_e,Je,Ye,tn,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540713,540714,"of"],rn=Object.create(null);rn.true=2049,rn.null=2050,rn.false=2048,rn.undefined=2051,rn.in=3076,rn.sn=3077,rn.mn=1640798,rn.pn=1640799,rn.Pn=34850,rn.In=34851,rn.of=1051179;const hn=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],on=[48,58],cn=t=>{throw Reporter.error(111,{state:t})};cn.Fg=1,mt(null,new Set,[36,0,48,58,65,91,95,0,97,123],1);const ln=new Uint8Array(65535);mt(ln,null,hn,1),mt(ln,null,on,1);const un=Array(65535);un.fill(cn,0,65535),mt(un,null,[0,33,127,161],t=>(dt(t),null)),mt(un,null,hn,function(t){for(;ln[dt(t)];);const i=rn[t.Gt=t.Xt];return void 0===i?1024:i}),mt(un,null,on,t=>ft(t,0)),un[34]=un[39]=(t=>(function(t){const i=t.qt;dt(t);let s=0;const e=[];let n=t.index;for(;t.qt!==i;)if(92===t.qt)e.push(t.input.slice(n,t.index)),dt(t),s=lt(t.qt),dt(t),e.push(String.fromCharCode(s)),n=t.index;else{if(t.index>=t.length)throw Reporter.error(108,{state:t});dt(t)}const r=t.input.slice(n,t.index);dt(t),e.push(r);const o=e.join("");return t.Gt=o,4096})(t)),un[96]=(t=>vt(t)),un[33]=(t=>61!==dt(t)?32808:61!==dt(t)?1638679:(dt(t),1638681)),un[61]=(t=>61!==dt(t)?1048615:61!==dt(t)?1638678:(dt(t),1638680)),un[38]=(t=>38!==dt(t)?1572880:(dt(t),1638613)),un[124]=(t=>124!==dt(t)?1572883:(dt(t),1638548)),un[46]=(t=>dt(t)>57||48>t.qt?16392:ft(t,1)),un[60]=(t=>61!==dt(t)?1638746:(dt(t),1638748)),un[62]=(t=>61!==dt(t)?1638747:(dt(t),1638749)),un[37]=wt(1638885),un[40]=wt(671750),un[41]=wt(1835018),un[42]=wt(1638884),un[43]=wt(623008),un[44]=wt(1572875),un[45]=wt(623009),un[47]=wt(1638886),un[58]=wt(1572878),un[63]=wt(1572879),un[91]=wt(671756),un[93]=wt(1835021),un[123]=wt(131079),un[125]=wt(1835017);const IExpressionParserRegistration={register(t){t._i(IExpressionParser,t=>(Reflect.set(t,"parseCore",parseExpression),t))}},an=[IExpressionParserRegistration],AtPrefixedTriggerAttributePatternRegistration=AtPrefixedTriggerAttributePattern,ColonPrefixedBindAttributePatternRegistration=ColonPrefixedBindAttributePattern,RefAttributePatternRegistration=RefAttributePattern,DotSeparatedAttributePatternRegistration=DotSeparatedAttributePattern,DefaultBindingSyntax=[RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration],ShortHandBindingSyntax=[AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration],CallBindingCommandRegistration=CallBindingCommand,DefaultBindingCommandRegistration=DefaultBindingCommand,ForBindingCommandRegistration=ForBindingCommand,FromViewBindingCommandRegistration=FromViewBindingCommand,OneTimeBindingCommandRegistration=OneTimeBindingCommand,ToViewBindingCommandRegistration=ToViewBindingCommand,TwoWayBindingCommandRegistration=TwoWayBindingCommand,DefaultBindingLanguage=[DefaultBindingCommandRegistration,OneTimeBindingCommandRegistration,FromViewBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,CallBindingCommandRegistration,ForBindingCommandRegistration],BasicConfiguration={register:t=>RuntimeBasicConfiguration.register(t).register(...an,...DefaultBindingSyntax,...DefaultBindingLanguage),Vi(){return this.register(DI.Vi())}};class ResourceModel{constructor(t){this.Ng=t,this.Ug={},this.zg={},this.Hg={}}Kg(name){let t=this.Ug[name];if(void 0===t){const def=this.Ng.find(CustomElementResource,name);t=null==def?null:(function(def){const t=new ElementInfo(def.name,def.containerless),bindables=def.bindables,defaultBindingMode=BindingMode.We;let bindable,i,s,mode;for(i in bindables)void 0!==(bindable=bindables[i]).Al&&(i=bindable.Al),s=void 0!==bindable.Rl?bindable.Rl:kebabCase(i),t.bindables[s]=new BindableInfo(i,mode=void 0!==bindable.mode&&bindable.mode!==BindingMode.default?bindable.mode:defaultBindingMode);return t})(def),this.Ug[name]=t}return t}qg(t){const name=camelCase(t.target);let i=this.zg[name];if(void 0===i){const def=this.Ng.find(CustomAttributeResource,name);i=null==def?null:(function(def){const t=new AttrInfo(def.name,def.isTemplateController),bindables=def.bindables,defaultBindingMode=void 0!==def.defaultBindingMode&&def.defaultBindingMode!==BindingMode.default?def.defaultBindingMode:BindingMode.We;let bindable,i,mode,s=0;for(i in bindables)++s,void 0!==(bindable=bindables[i]).Al&&(i=bindable.Al),t.bindables[i]=new BindableInfo(i,mode=void 0!==bindable.mode&&bindable.mode!==BindingMode.default?bindable.mode:defaultBindingMode),null===t.bindable&&(t.bindable=t.bindables[i]);return null===t.bindable&&(t.bindable=new BindableInfo("value",defaultBindingMode)),(def.Et||s>1)&&(t.Et=1),t})(def),this.zg[name]=i}return i}Wg(t){const name=t.command;if(null===name)return null;let i=this.Hg[name];if(void 0===i){if(null==(i=this.Ng.create(BindingCommandResource,name)))throw Reporter.error(0);this.Hg[name]=i}return i}}class BindableInfo{constructor(t,mode){this.Ht=t,this.mode=mode}}class ElementInfo{constructor(name,containerless){this.name=name,this.containerless=containerless,this.bindables={}}}class AttrInfo{constructor(name,isTemplateController){this.name=name,this.bindables={},this.bindable=null,this.isTemplateController=isTemplateController,this.Et=0}}(function(SymbolFlags){SymbolFlags[SymbolFlags.type=511]="type",SymbolFlags[SymbolFlags.isTemplateController=1]="isTemplateController",SymbolFlags[SymbolFlags.Qg=2]="isReplacePart",SymbolFlags[SymbolFlags.Gg=4]="isCustomAttribute",SymbolFlags[SymbolFlags.Zg=8]="isPlainAttribute",SymbolFlags[SymbolFlags.Xg=16]="isCustomElement",SymbolFlags[SymbolFlags._g=32]="isLetElement",SymbolFlags[SymbolFlags.Jg=64]="isPlainElement",SymbolFlags[SymbolFlags.Yg=128]="isText",SymbolFlags[SymbolFlags.ur=256]="isBinding",SymbolFlags[SymbolFlags.tb=512]="hasMarker",SymbolFlags[SymbolFlags.ib=1024]="hasTemplate",SymbolFlags[SymbolFlags.hasAttributes=2048]="hasAttributes",SymbolFlags[SymbolFlags.sb=4096]="hasBindings",SymbolFlags[SymbolFlags.hasChildNodes=8192]="hasChildNodes",SymbolFlags[SymbolFlags.eb=16384]="hasParts"})(SymbolFlags||(SymbolFlags={}));class TemplateControllerSymbol{get Nt(){return null==this.nb&&(this.nb=[],this.flags|=4096),this.nb}get parts(){return null==this.rb&&(this.rb=[],this.flags|=16384),this.rb}constructor(dom,t,i,s){this.flags=513,this.res=i.name,this.Te=s,this.hb=null,this.Kt=t,this.template=null,this.templateController=null,this.marker=yt(dom),this.nb=null,this.rb=null}}class ReplacePartSymbol{constructor(name){this.flags=2,this.name=name,this.hb=null,this.parent=null,this.template=null}}class CustomAttributeSymbol{get Nt(){return null==this.nb&&(this.nb=[],this.flags|=4096),this.nb}constructor(t,i){this.flags=4,this.res=i.name,this.Kt=t,this.nb=null}}class PlainAttributeSymbol{constructor(t,i,s){this.flags=8,this.Kt=t,this.command=i,this.Fe=s}}class BindingSymbol{constructor(t,bindable,i,s,e){this.flags=256,this.command=t,this.bindable=bindable,this.Fe=i,this.vi=s,this.target=e}}class CustomElementSymbol{get attributes(){return null==this.ob&&(this.ob=[],this.flags|=2048),this.ob}get Nt(){return null==this.nb&&(this.nb=[],this.flags|=4096),this.nb}get childNodes(){return null==this.cb&&(this.cb=[],this.flags|=8192),this.cb}get parts(){return null==this.rb&&(this.rb=[],this.flags|=16384),this.rb}constructor(dom,t,i){this.flags=16,this.res=i.name,this.hb=t,this.bindables=i.bindables,this.lb=1,this.templateController=null,i.containerless?(this.ub=1,this.marker=yt(dom),this.flags|=512):(this.ub=0,this.marker=null),this.ob=null,this.nb=null,this.cb=null,this.rb=null}}class LetElementSymbol{get Nt(){return null==this.nb&&(this.nb=[],this.flags|=4096),this.nb}constructor(dom,t){this.flags=544,this.hb=t,this.toViewModel=0,this.marker=yt(dom),this.nb=null}}class PlainElementSymbol{get attributes(){return null==this.ob&&(this.ob=[],this.flags|=2048),this.ob}get childNodes(){return null==this.cb&&(this.cb=[],this.flags|=8192),this.cb}constructor(t){this.flags=64,this.hb=t,this.lb=0,this.templateController=null,this.ob=null,this.cb=null}}class TextSymbol{constructor(dom,t,i){this.flags=640,this.hb=t,this.pc=i,this.marker=yt(dom)}}Kt=Object.freeze({AttrSyntax,IAttributeParser,AtPrefixedTriggerAttributePattern,attributePattern,ColonPrefixedBindAttributePattern,DotSeparatedAttributePattern,IAttributePattern,Interpretation,ISyntaxInterpreter,RefAttributePattern,bindingCommand:t=>i=>BindingCommandResource.Ee(t,i),BindingCommandResource,CallBindingCommand,DefaultBindingCommand,ForBindingCommand,FromViewBindingCommand,getMode,getTarget:ct,OneTimeBindingCommand,ToViewBindingCommand,TwoWayBindingCommand,IExpressionParserRegistration,DefaultComponents:an,RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration,DefaultBindingSyntax,AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration,ShortHandBindingSyntax,CallBindingCommandRegistration,DefaultBindingCommandRegistration,ForBindingCommandRegistration,FromViewBindingCommandRegistration,OneTimeBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,DefaultBindingLanguage,BasicConfiguration,get Access(){return Access},get Precedence(){return Precedence},get Char(){return Char},parseExpression,parse,ParserState,ResourceModel,BindableInfo,ElementInfo,AttrInfo,BindingSymbol,CustomAttributeSymbol,CustomElementSymbol,LetElementSymbol,PlainAttributeSymbol,PlainElementSymbol,ReplacePartSymbol,get SymbolFlags(){return SymbolFlags},TemplateControllerSymbol,TextSymbol});const dn=[].slice;class Listener{constructor(dom,t,i,s,e,preventDefault,n,r){this.dom=dom,this.$state=0,this.ab=i,this.ze=r,this.preventDefault=preventDefault,this.xo=s,this.target=e,this.fb=t,this.vb=n}zo(t){Tracer.enabled&&Tracer.rt("Listener","callSource",dn.call(arguments));const i=this.$scope.we;i.gb=t;const s=this.xo.evaluate(2097152,this.$scope,this.ze);return Reflect.deleteProperty(i,"$event"),1!=s&&this.preventDefault&&t.preventDefault(),Tracer.enabled&&Tracer.lt(),s}hi(t){this.zo(t)}Fo(t,i){if(Tracer.enabled&&Tracer.rt("Listener","$bind",dn.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.No(4096|t)}this.$state|=1,this.$scope=i;const s=this.xo;hasBind(s)&&s.bind(t,i,this),this.bb=this.vb.addEventListener(this.dom,this.target,this.fb,this,this.ab),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}No(t){if(Tracer.enabled&&Tracer.rt("Listener","$unbind",dn.call(arguments)),!(4&this.$state))return void(Tracer.enabled&&Tracer.lt());this.$state|=2;const i=this.xo;hasUnbind(i)&&i.He(t,this.$scope,this),this.$scope=null,this.bb.Dt(),this.bb=null,this.$state&=-7,Tracer.enabled&&Tracer.lt()}ut(t,i,s){}J(t,i,s){}}let fn=class{constructor(t,i,s,e,n){this.ot=i,this.oe=t,this.ce=s,this.le=e,this.pb=n,this.ue=null,this.oldValue=null,this.ba=0,this.Ph=12288}te(){return this.ue}Ys(t,i){this.ue=t,this.ba=t!==this.oldValue,(4096&i)>0&&this.Ta(i)}Ta(t){if(this.ba){this.ba=0;const{ue:t}=this;switch(this.oldValue=t,this.pb){case"class":t?this.ce.classList.add(this.le):this.ce.classList.remove(this.le);break;case"style":{let i="",s=t;"string"==typeof s&&s.includes("!important")&&(i="important",s=s.replace("!important","")),this.ce.style.setProperty(this.le,s,i)}}}}ti(t){let i=0;for(let s=0,e=t.length;e>s;++s){const e=t[s];if("attributes"===e.type&&e.attributeName===this.le){i=1;break}}if(i){let t;switch(this.pb){case"class":t=this.ce.classList.contains(this.le);break;case"style":t=this.ce.style.getPropertyValue(this.le);break;default:throw Error(`Unsupported targetAttribute: ${this.pb}`)}if(t!==this.ue){const{ue:i}=this;this.ue=this.oldValue=t,this.ba=0,this.g(t,i,131072)}}}subscribe(t){this.v()||(this.ue=this.oldValue=this.ce.getAttribute(this.le),vn(this.ce,this)),this.o(t)}unsubscribe(t){this.l(t),this.v()||gn(this.ce,this)}bind(t){this.oe.Io(this.Ta,this,this.Ph)}He(t){this.oe.Po(this.Ta,this)}};fn=v([subscriberCollection()],fn);const vn=(t,i)=>{void 0===t.mb&&(t.mb=new Set),void 0===t.wb&&(t.wb=DOM.$l(t,bn,{attributes:1})),t.mb.add(i)},gn=(t,i)=>{const s=t.mb;return s.delete(i)?(0===s.size&&(t.wb.disconnect(),t.wb=void 0),1):0},bn=t=>{t[0].target.mb.forEach(Ct,t)},pn=[].slice,{oneTime:mn,We:wn,Qe:yn}=BindingMode,Cn=wn|mn;let AttributeBinding=class{constructor(t,i,s,e,mode,n,r){connectable.jo(this),this.$state=0,this.$lifecycle=r.get(ILifecycle),this.$scope=null,this.ze=r,this.mode=mode,this.ot=n,this.xo=t,this.target=i,this.pb=s,this.Vo=e,this.ae=0}Mo(value,t){this.$o.Ys(value,16|(t|=this.ae))}Do(value,t){this.xo.assign(32|(t|=this.ae),this.$scope,this.ze,value)}J(t,i,s){if(Tracer.enabled&&Tracer.rt("Binding","handleChange",pn.call(arguments)),4&this.$state){if(s|=this.ae,this.mode===BindingMode.Qe&&(s&=-17,s|=32),16&s){const i=this.$o.te();return(10082!==this.xo.st||this.nt>1)&&(t=this.xo.evaluate(s,this.$scope,this.ze)),t!==i&&this.Mo(t,s),0==(this.mode&mn)&&(this.version++,this.xo.connect(s,this.$scope,this),this.unobserve(0)),void(Tracer.enabled&&Tracer.lt())}if(32&s)return t!==this.xo.evaluate(s,this.$scope,this.ze)&&this.Do(t,s),void(Tracer.enabled&&Tracer.lt());throw Reporter.error(15,s)}Tracer.enabled&&Tracer.lt()}Fo(t,i){if(Tracer.enabled&&Tracer.rt("Binding","$bind",pn.call(arguments)),4&this.$state){if(this.$scope===i)return void(Tracer.enabled&&Tracer.lt());this.No(4096|t)}this.$state|=1,this.ae=536870927&t,this.$scope=i;let s=this.xo;hasBind(s)&&s.bind(t,i,this);let e=this.$o;e||(e=this.$o=new fn(this.$lifecycle,this.ot,this.target,this.Vo,this.pb)),e.bind&&e.bind(t),s=this.xo,this.mode&Cn&&this.Mo(s.evaluate(t,i,this.ze),t),this.mode&wn&&s.connect(t,i,this),this.mode&yn&&(e[this.id]|=32,e.subscribe(this)),this.$state|=4,this.$state&=-2,Tracer.enabled&&Tracer.lt()}No(t){Tracer.enabled&&Tracer.rt("Binding","$unbind",pn.call(arguments)),4&this.$state?(this.$state|=2,this.ae=0,hasUnbind(this.xo)&&this.xo.He(t,this.$scope,this),this.$scope=null,this.$o.He&&this.$o.He(t),this.$o.unsubscribe&&(this.$o.unsubscribe(this),this.$o[this.id]&=-33),this.unobserve(1),this.$state&=-7,Tracer.enabled&&Tracer.lt()):Tracer.enabled&&Tracer.lt()}connect(t){Tracer.enabled&&Tracer.rt("Binding","connect",pn.call(arguments)),4&this.$state&&this.xo.connect(2097152|(t|=this.ae),this.$scope,this),Tracer.enabled&&Tracer.lt()}};AttributeBinding=v([connectable()],AttributeBinding);class AttributeNSAccessor{constructor(t,i,s,e){this.oe=t,this.ce=i,this.le=s,this.ue=null,this.oldValue=null,this.yb=e,this.ba=0,this.Ph=12288}te(){return this.ue}Ys(t,i){this.ue=t,this.ba=t!==this.oldValue,(4096&i)>0&&this.Ta(i)}Ta(t){if(this.ba){this.ba=0;const{ue:t}=this;this.oldValue=t,null==t?this.ce.removeAttributeNS(this.yb,this.le):this.ce.setAttributeNS(this.yb,this.le,t)}}bind(t){this.oe.Io(this.Ta,this,this.Ph),this.ue=this.oldValue=this.ce.getAttributeNS(this.yb,this.le)}He(t){this.oe.Po(this.Ta,this)}}let CheckedObserver=class{constructor(t,i,s,e){this.oe=t,this.ot=i,this.bb=s,this.ce=e,this.ue=void 0,this.oldValue=void 0,this.ba=0,this.Ph=12288,this.Cb=void 0,this.Tb=void 0}te(){return this.ue}Ys(t,i){this.ue=t,this.ba=t!==this.oldValue,(4096&i)>0&&this.Ta(i)}Ta(t){if(this.ba){this.ba=0;const{ue:i}=this;this.oldValue=i,void 0===this.Tb&&(void 0!==this.ce.Re&&(void 0!==this.ce.Re.Ab?this.Tb=this.ce.Re.Ab:void 0!==this.ce.Re.value&&(this.Tb=this.ce.Re.value)),void 0!==this.Tb&&this.Tb.subscribe(this)),void 0!==this.Cb&&(this.Cb.$(this),this.Cb=void 0),"checkbox"===this.ce.type&&Array.isArray(i)&&(this.Cb=this.ot.Kc(t,i),this.Cb.V(this)),this.Rb()}}tt(t,i){const{ue:s,oldValue:e}=this;(4096&i)>0?(this.oldValue=s,this.Rb()):this.ba=1,this.g(s,e,i)}J(t,i,s){(4096&s)>0?this.Rb():this.ba=1,this.g(t,i,s)}Rb(){const{ue:t,ce:i}=this,s=i.hasOwnProperty("model")?i.Ab:i.value,e=void 0!==i.Bb?i.Bb:Tt;i.checked="radio"===i.type?!!e(t,s):1==t?1:Array.isArray(t)?-1!==t.findIndex(t=>!!e(t,s)):0}hi(){this.oldValue=this.ue;let{ue:t}=this;const{ce:i}=this,s=i.hasOwnProperty("model")?i.Ab:i.value;let e;const n=void 0!==i.Bb?i.Bb:Tt;if("checkbox"===i.type){if(Array.isArray(t))return e=t.findIndex(t=>!!n(t,s)),void(i.checked&&-1===e?t.push(s):i.checked||-1===e||t.splice(e,1));t=i.checked}else{if(!i.checked)return;t=s}this.ue=t,this.g(this.ue,this.oldValue,655360)}bind(t){this.oe.Io(this.Ta,this,this.Ph),this.ue=this.ce.checked}He(t){void 0!==this.Cb&&(this.Cb.$(this),this.Cb=void 0),void 0!==this.Tb&&this.Tb.unsubscribe(this),this.oe.Po(this.Ta,this)}subscribe(t){this.v()||this.bb.subscribe(this.ce,this),this.o(t)}unsubscribe(t){this.l(t),this.v()||this.bb.Dt()}};CheckedObserver=v([subscriberCollection()],CheckedObserver);class ClassAttributeAccessor{constructor(t,i){this.oe=t,this.ce=i,this.ue="",this.oldValue="",this.rl=1,this.Ob={},this.version=0,this.kb=0,this.ba=0,this.Ph=12288}te(){return this.ue}Ys(t,i){this.ue=t,this.ba=t!==this.oldValue,(4096&i)>0&&this.Ta(i)}Ta(t){if(this.ba){this.ba=0;const{ue:t,Ob:i}=this;let s,name,{version:e}=this;if(this.oldValue=t,t.length){const n=this.ce;for(let r=0,o=(s=t.split(/\s+/)).length;o>r;r++)(name=s[r]).length&&(i[name]=e,n.classList.add(name))}if(this.Ob=i,this.version+=1,0===e)return;for(name in e-=1,i)i.hasOwnProperty(name)&&i[name]===e&&this.ce.classList.remove(name)}}bind(t){this.oe.Io(this.Ta,this,this.Ph)}He(t){this.oe.Po(this.Ta,this)}}class DataAttributeAccessor{constructor(t,i,s){this.oe=t,this.ce=i,this.le=s,this.ue=null,this.oldValue=null,this.ba=0,this.Ph=12288}te(){return this.ue}Ys(t,i){this.ue=t,this.ba=t!==this.oldValue,(4096&i)>0&&this.Ta(i)}Ta(t){if(this.ba){this.ba=0;const{ue:t}=this;this.oldValue=t,null==t?this.ce.removeAttribute(this.le):this.ce.setAttribute(this.le,t)}}bind(t){this.oe.Io(this.Ta,this,this.Ph),this.ue=this.oldValue=this.ce.getAttribute(this.le)}He(t){this.oe.Po(this.Ta,this)}}class ElementPropertyAccessor{constructor(t,i,s){this.oe=t,this.ce=i,this.le=s,this.ue=void 0,this.oldValue=void 0,this.ba=0,this.Ph=12288}te(){return this.ue}Ys(t,i){this.ue=t,this.ba=t!==this.oldValue,(4096&i)>0&&this.Ta(i)}Ta(t){if(this.ba){this.ba=0;const{ue:t}=this;this.oldValue=t,this.ce[this.le]=t}}bind(t){this.oe.Io(this.Ta,this,this.Ph),this.ue=this.oldValue=this.ce[this.le]}He(t){this.oe.Po(this.Ta,this)}}class ListenerTracker{constructor(dom,t,i,s){this.dom=dom,this.Sb=s,this.count=0,this.Ib=t,this.listener=i}Pb(){this.count++,1===this.count&&this.dom.addEventListener(this.Ib,this.listener,null,this.Sb)}Eb(){this.count--,0===this.count&&this.dom.removeEventListener(this.Ib,this.listener,null,this.Sb)}Dt(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.Ib,this.listener,null,this.Sb))}}class DelegateOrCaptureSubscription{constructor(t,i,s,e){this.Lb=t,this.Sa=i,this.fb=s,i[s]=e}Dt(){this.Lb.Eb(),this.Sa[this.fb]=null}}class TriggerSubscription{constructor(dom,t,i,s){this.dom=dom,this.target=t,this.fb=i,this.Oi=s,dom.addEventListener(i,s,t)}Dt(){this.dom.removeEventListener(this.fb,this.Oi,this.target)}}class EventSubscriber{constructor(dom,t){this.dom=dom,this.jb=t,this.target=null,this.bb=null}subscribe(t,i){this.target=t,this.bb=i;const s=this.dom.addEventListener,e=this.jb;for(let n=0,r=e.length;r>n;++n)s(e[n],i,t)}Dt(){const t=this.target,i=this.bb,s=this.jb,e=this.dom.removeEventListener;for(let n=0,r=s.length;r>n;++n)e(s[n],i,t);this.target=this.bb=null}}const IEventManager=DI.Di("IEventManager").Ui(t=>t.singleton(EventManager));class EventManager{constructor(){this.xb={},this.Vb={},this.xb={},this.Vb={}}addEventListener(dom,t,i,s,strategy){let e,n,r;if(strategy===DelegationStrategy.Bc){(r=(e=this.xb)[i]||(e[i]=new ListenerTracker(dom,i,Ot,0))).Pb();const n=t.oi||(t.oi={});return new DelegateOrCaptureSubscription(r,n,i,s)}if(strategy===DelegationStrategy.Rc){(r=(n=this.Vb)[i]||(n[i]=new ListenerTracker(dom,i,Bt,1))).Pb();const e=t.ri||(t.ri={});return new DelegateOrCaptureSubscription(r,e,i,s)}return new TriggerSubscription(dom,t,i,s)}Dt(){let t;const{xb:i,Vb:s}=this;for(t in i)i[t].Dt();for(t in s)s[t].Dt()}}const Tn={$b:1,Mb:1,Db:1};let SelectValueObserver=class{constructor(t,i,dom,s,e){this.oe=t,this.ot=i,this.dom=dom,this.ce=e,this.bb=s,this.ue=void 0,this.oldValue=void 0,this.ba=0,this.Ph=12288,this.Cb=void 0,this.Fb=void 0,this.Nb=this.Nb.bind(this)}te(){return this.ue}Ys(t,i){this.ue=t,this.ba=t!==this.oldValue,(4096&i)>0&&this.Ta(i)}Ta(t){if(this.ba){this.ba=0;const{ue:i}=this;this.oldValue=i;const s=Array.isArray(i);if(!s&&null!=i&&this.ce.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.Cb&&(this.Cb.$(this),this.Cb=void 0),s&&(this.Cb=this.ot.Kc(t,i),this.Cb.V(this)),this.Ub(),this.Ic(t)}}tt(t,i){(4096&i)>0?this.Ub():this.ba=1,this.g(this.ue,this.oldValue,i)}J(t,i,s){(4096&s)>0?this.Ub():this.ba=1,this.g(t,i,s)}Ic(t){if((4096&t)>0)return;const i=this.oldValue,s=this.ue;s!==i&&this.g(s,i,t)}hi(){this.zb()&&this.g(this.ue,this.oldValue,655360)}Ub(t){const{ue:i,ce:s}=this,e=Array.isArray(i),n=void 0!==s.Bb?s.Bb:kt,r=s.options;let o=r.length;for(;o-- >0;){const t=r[o],s=t.hasOwnProperty("model")?t.Ab:t.value;t.selected=e?-1!==i.findIndex(t=>!!n(s,t)):!!n(s,i)}}zb(){const t=this.ce,i=t.options,s=i.length,e=this.ue;let n=0;if(t.multiple){if(!Array.isArray(e))return 1;let r;const o=t.Bb||kt,c=[];for(;s>n;)(r=i[n]).selected&&c.push(r.hasOwnProperty("model")?r.Ab:r.value),++n;for(n=0;e.length>n;){const t=e[n];-1===c.findIndex(i=>!!o(t,i))?e.splice(n,1):++n}for(n=0;c.length>n;){const t=c[n];-1===e.findIndex(i=>!!o(t,i))&&e.push(t),++n}return 0}let value=null;for(;s>n;){const t=i[n];if(t.selected){value=t.hasOwnProperty("model")?t.Ab:t.value;break}++n}return this.oldValue=this.ue,this.ue=value,1}bind(){this.Fb=this.dom.$l(this.ce,this.Nb,Tn),this.oe.Io(this.Ta,this,this.Ph)}He(){this.Fb.disconnect(),this.Fb=null,this.oe.Po(this.Ta,this),this.Cb&&(this.Cb.$(this),this.Cb=null)}Nb(){this.Ub(),this.zb()&&this.Ic(131072)}subscribe(t){this.v()||this.bb.subscribe(this.ce,this),this.o(t)}unsubscribe(t){this.l(t),this.v()||this.bb.Dt()}};SelectValueObserver=v([subscriberCollection()],SelectValueObserver);class StyleAttributeAccessor{constructor(t,i){this.oe=t,this.ce=i,this.ue="",this.oldValue="",this.Hb={},this.version=0,this.ba=0,this.Ph=12288}te(){return this.ce.style.cssText}Ys(t,i){this.ue=t,this.ba=t!==this.oldValue,(4096&i)>0&&this.Ta(i)}Ta(t){if(this.ba){this.ba=0;const{ue:t}=this;this.oldValue=t;const i=this.Hb;let s,e=this.version;if(t instanceof Object){let value;for(s in t)t.hasOwnProperty(s)&&(value=t[s],i[s=s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=e,this.setProperty(s,value))}else if("string"==typeof t){const n=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let r;for(;null!=(r=n.exec(t));)(s=r[1])&&(i[s]=e,this.setProperty(s,r[2]))}if(this.Hb=i,this.version+=1,0===e)return;for(s in e-=1,i)i.hasOwnProperty(s)&&i[s]===e&&this.ce.style.removeProperty(s)}}setProperty(t,value){let i="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(i="important",value=value.replace("!important","")),this.ce.style.setProperty(t,value,i)}bind(t){this.oe.Io(this.Ta,this,this.Ph),this.oldValue=this.ue=this.ce.style.cssText}He(t){this.oe.Po(this.Ta,this)}}const ISVGAnalyzer=DI.Di("ISVGAnalyzer").Ui(t=>t.singleton(class{ci(t,i){return 0}}));let ValueAttributeObserver=class{constructor(t,i,s,e){this.oe=t,this.bb=i,this.ce=s,this.le=e,this.ue="",this.oldValue="",this.ba=0,this.Ph=12288}te(){return this.ue}Ys(t,i){this.ue=t,this.ba=t!==this.oldValue,(4096&i)>0&&this.Ta(i)}Ta(t){if(this.ba){this.ba=0;const{ue:i,oldValue:s}=this;this.oldValue=i,this.ce[this.le]=null==i?"":i,0==(4096&t)&&this.g(i,s,t)}}hi(){const t=this.oldValue=this.ue,i=this.ue=this.ce[this.le];t!==i&&(this.oldValue=i,this.g(i,t,655360))}subscribe(t){this.v()||(this.bb.subscribe(this.ce,this),this.ue=this.oldValue=this.ce[this.le]),this.o(t)}unsubscribe(t){this.l(t),this.v()||this.bb.Dt()}bind(t){this.oe.Io(this.Ta,this,this.Ph)}He(t){this.oe.Po(this.Ta,this)}};ValueAttributeObserver=v([subscriberCollection()],ValueAttributeObserver);const An="http://www.w3.org/1999/xlink",Rn="http://www.w3.org/XML/1998/namespace",Bn="http://www.w3.org/2000/xmlns/",On=Object.assign(Object.create(null),{Kb:["actuate",An],qb:["arcrole",An],Wb:["href",An],Qb:["role",An],Gb:["show",An],Zb:["title",An],Xb:["type",An],_b:["lang",Rn],Jb:["space",Rn],Yb:["xmlns",Bn],tp:["xlink",Bn]}),kn=["change","input"],Sn=["change"],In=["change","input","blur","keyup","paste"],Pn=["scroll"],En=Object.assign(Object.create(null),{ip:1,style:1,sp:1,checked:1,value:1,Ab:1,Kb:1,qb:1,Wb:1,Qb:1,Gb:1,Zb:1,Xb:1,_b:1,Jb:1,Yb:1,tp:1});class TargetObserverLocator{constructor(dom,t){this.dom=dom,this.ep=t}static register(t){return Registration.singleton(ITargetObserverLocator,this).register(t)}ht(t,i,s,e,n){switch(n){case"checked":return new CheckedObserver(i,s,new EventSubscriber(this.dom,kn),e);case"value":return"SELECT"===e.tagName?new SelectValueObserver(i,s,this.dom,new EventSubscriber(this.dom,Sn),e):new ValueAttributeObserver(i,new EventSubscriber(this.dom,kn),e,n);case"files":return new ValueAttributeObserver(i,new EventSubscriber(this.dom,kn),e,n);case"textContent":case"innerHTML":return new ValueAttributeObserver(i,new EventSubscriber(this.dom,In),e,n);case"scrollTop":case"scrollLeft":return new ValueAttributeObserver(i,new EventSubscriber(this.dom,Pn),e,n);case"class":return new ClassAttributeAccessor(i,e);case"style":case"css":return new StyleAttributeAccessor(i,e);case"model":return new SetterObserver(i,t,e,n);case"role":return new DataAttributeAccessor(i,e,n);default:if(void 0!==On[n]){const t=On[n];return new AttributeNSAccessor(i,e,t[0],t[1])}if(St(e,n,this.ep))return new DataAttributeAccessor(i,e,n)}return null}gl(t,i,s){return 1==En[s]}vl(t,i){return this.dom.ai(i)}}TargetObserverLocator.inject=[IDOM,ISVGAnalyzer];class TargetAccessorLocator{constructor(dom,t){this.dom=dom,this.ep=t}static register(t){return Registration.singleton(ITargetAccessorLocator,this).register(t)}Uo(t,i,s,e){switch(e){case"textContent":return new ElementPropertyAccessor(i,s,e);case"class":return new ClassAttributeAccessor(i,s);case"style":case"css":return new StyleAttributeAccessor(i,s);case"src":case"href":case"role":return new DataAttributeAccessor(i,s,e);default:if(void 0!==On[e]){const t=On[e];return new AttributeNSAccessor(i,s,t[0],t[1])}return St(s,e,this.ep)?new DataAttributeAccessor(i,s,e):new ElementPropertyAccessor(i,s,e)}}vl(t,i){return this.dom.ai(i)}}TargetAccessorLocator.inject=[IDOM,ISVGAnalyzer];const Ln={};class AttrBindingBehavior{bind(t,i,s){s.$o=new DataAttributeAccessor(s.ze.get(ILifecycle),s.target,s.Vo)}He(t,i,s){}}BindingBehaviorResource.Ee("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,i,s){if(!s.zo||!s.fb)throw Reporter.error(8);s.li=s.zo,s.zo=It}He(t,i,s){s.zo=s.li,s.li=null}}BindingBehaviorResource.Ee("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.ot=t}bind(t,i,s,...e){if(0===e.length)throw Reporter.error(9);if(s.mode!==BindingMode.hr&&s.mode!==BindingMode.Qe)throw Reporter.error(10);this.ae=536870927&t;const n=this.ot.ht(this.ae|t,s.target,s.Vo);if(!n.bb)throw Reporter.error(10);s.$o=n,n.np=s.$o.bb,n.bb=new EventSubscriber(s.ze.get(IDOM),e)}He(t,i,s){s.$o.bb.Dt(),s.$o.bb=s.$o.np,s.$o.np=null}}UpdateTriggerBindingBehavior.inject=[IObserverLocator],BindingBehaviorResource.Ee("updateTrigger",UpdateTriggerBindingBehavior),(function(HTMLTargetedInstructionType){HTMLTargetedInstructionType.rp="ha",HTMLTargetedInstructionType.hp="hb",HTMLTargetedInstructionType.op="hc",HTMLTargetedInstructionType.cp="hd",HTMLTargetedInstructionType.setAttribute="he"})(HTMLTargetedInstructionType||(HTMLTargetedInstructionType={}));class TextBindingInstruction{constructor(from){this.type="ha",this.from=from}}class TriggerBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=DelegationStrategy.lr,this.to=to}}class DelegateBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Bc,this.to=to}}class CaptureBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Rc,this.to=to}}class SetAttributeInstruction{constructor(value,to){this.type="he",this.to=to,this.value=value}}class AttributeBindingInstruction{constructor(t,from,to){this.type="hc",this.from=from,this.lp=t,this.to=to}}const jn=[].slice;class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.up=t,this.ap=void 0}get ra(){return void 0===this.ap&&(this.ap=buildTemplateDefinition(null,null,this.up,null,"string"==typeof this.up,null,this.instructions,this.dependencies)),this.ap}fa(t,i){return t.fa(this.dom,this.ra,void 0,i)}dp(t,i,s){return this.ga(i,s).create()}ga(t,i){return t.ga(this.dom,this.ra,i)}di(t,instructions,dependencies){this.dom.appendChild(t,this.up),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}const bindables=["subject","composing"];class Compose{constructor(dom,t,i,s){this.id=nextId("au$component"),this.subject=void 0,this.fp=0,this.dom=dom,this.Ru=t,this.kd=s,this.properties=i.instructions.filter(t=>!bindables.includes(t.to)).reduce((t,i)=>(i.to&&(t[i.to]=i),t),{}),this.su=LifecycleTask.done,this.vp=void 0,this.view=void 0}static register(t){t.register(Registration.transient("custom-element:au-compose",this)),t.register(Registration.transient(this,this))}ru(t){return this.su=this.su.done?this.gp(this.subject,t):new ContinuationTask(this.su,this.gp,this,this.subject,t),this.su=this.su.done?this.mu(t):new ContinuationTask(this.su,this.mu,this,t),this.su}ou(t){this.su.done?this.cu(t):this.su=new ContinuationTask(this.su,this.cu,this,t)}lu(t){null!=this.view&&(this.su.done?this.view.detach(t):this.su=new ContinuationTask(this.su,this.view.detach,this.view,t))}uu(t){return this.vp=void 0,null!=this.view&&(this.su=this.su.done?this.view.He(t):new ContinuationTask(this.su,this.view.He,this.view,t)),this.su}du(t){this.view=void 0}bp(t,i,s){s|=this.kt.flags,this.su=this.su.done?this.gp(t,s):new ContinuationTask(this.su,this.gp,this,t,s)}gp(t,i){if(this.vp===t)return LifecycleTask.done;this.vp=t,this.fp=1;let s=this.bu(i);if(t instanceof Promise){let e;e=s.done?t.then(t=>this.pp(t,i)):s.Ql().then(()=>t.then(t=>this.pp(t,i))),s=new PromiseTask(e,this.pu,this,i)}else{const e=this.pp(t,i);s=s.done?this.pu(e,i):new ContinuationTask(s,this.pu,this,e,i)}return s.done?this.mp():s=new ContinuationTask(s,this.mp,this),s}bu(t){const i=this.view;return null==i?LifecycleTask.done:(i.detach(t),i.He(t))}pu(t,i){if(this.view=t,null==t)return LifecycleTask.done;let s=this.mu(i);return s.done?this.cu(i):s=new ContinuationTask(s,this.cu,this,i),s}mu(t){return null!=this.view&&(5&this.kt.state)>0?this.view.bind(t,this.Ru.scope):LifecycleTask.done}cu(t){null!=this.view&&(40&this.kt.state)>0&&this.view.$h(t)}mp(){this.fp=0}pp(t,i){const s=this.wp(t,i);if(s)return s.gu(this.kt.ma.host),s.Pa(this.Ru.scope),s}wp(t,i){if(t)return"lockScope"in t?t:"createView"in t?t.dp(i,this.kd,this.Ru.context):"create"in t?t.create():"template"in t?this.kd.ga(this.dom,t,this.Ru.context).create():createElement(this.dom,t,this.properties,void 0===this.kt.ma?PLATFORM.ki:this.kt.ma.children).dp(i,this.kd,this.Ru.context)}}Compose.inject=[IDOM,IController,ITargetedInstruction,IRenderingEngine],Compose.kind=CustomElementResource,Compose.description=Object.freeze({name:"au-compose",template:null,cache:0,build:Object.freeze({compiler:"default",required:0}),bindables:Object.freeze({subject:Bindable.for({bindables:["subject"]}).get().subject,fp:{...Bindable.for({bindables:["composing"]}).get().fp,mode:BindingMode.Qe}}),instructions:PLATFORM.ki,dependencies:PLATFORM.ki,surrogates:PLATFORM.ki,containerless:1,shadowOptions:null,hasSlots:0,strategy:1,St:Object.freeze(new HooksDefinition(Compose.prototype))}),(function(NodeType){NodeType[NodeType.Element=1]="Element",NodeType[NodeType.Attr=2]="Attr",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATASection=4]="CDATASection",NodeType[NodeType.EntityReference=5]="EntityReference",NodeType[NodeType.Entity=6]="Entity",NodeType[NodeType.ProcessingInstruction=7]="ProcessingInstruction",NodeType[NodeType.Comment=8]="Comment",NodeType[NodeType.Document=9]="Document",NodeType[NodeType.DocumentType=10]="DocumentType",NodeType[NodeType.DocumentFragment=11]="DocumentFragment",NodeType[NodeType.Notation=12]="Notation"})(NodeType||(NodeType={}));class HTMLDOM{constructor(t,i,s,e,n,r){this.window=t,this.document=i,this.Node=s,this.Element=e,this.HTMLElement=n,this.CustomEvent=r,DOM.Nl&&(Reporter.write(1001),DOM.Ul()),DOM.initialize(this)}static register(t){return Registration.Pt(IDOM,this).register(t)}addEventListener(t,i,s,e){(s||this.document).addEventListener(t,i,e)}appendChild(t,i){t.appendChild(i)}cloneNode(t,i){return t.cloneNode(0!=i)}xl(t){if(this.Fl(t))return t;if(null==t.parentNode)throw Reporter.error(52);const i=this.document.createComment("au-end"),s=this.document.createComment("au-start");return t.parentNode.replaceChild(i,t),i.parentNode.insertBefore(s,i),i.yp=s,s.$nodes=null,i}createDocumentFragment(t){if(null==t)return this.document.createDocumentFragment();if(this.ai(t)){if(void 0!==t.content)return t.content;const i=this.document.createDocumentFragment();return i.appendChild(t),i}return this.Ml(t).content}createElement(name){return this.document.createElement(name)}fetch(t,i){return this.window.fetch(t,i)}Vl(t,i){return new this.CustomEvent(t,i)}dispatchEvent(t){this.document.dispatchEvent(t)}$l(t,i,s){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>PLATFORM.ki};const e=new MutationObserver(i);return e.observe(t,s),e}Ml(t){if(null==t)return this.document.createElement("template");const template=this.document.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.document.createTextNode(t)}insertBefore(t,i){i.parentNode.insertBefore(t,i)}Dl(t){return"AU-M"===t.nodeName}ai(t){return null!=t&&t.nodeType>0}Fl(t){return"au-end"===t.textContent}Yt(t){t.className="au"}jt(t,i){t.xt(INode,i),t.xt(this.Node,i),t.xt(this.Element,i),t.xt(this.HTMLElement,i)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,i,s,e){(s||this.document).removeEventListener(t,i,e)}setAttribute(t,name,value){t.setAttribute(name,value)}}const xn=DOM;class Vn{constructor(dom,t){this.Cr=0,this.zl=0,this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new $n(t)],this.next=void 0,this.Cp=void 0}Hl(){return this.targets}insertBefore(t){this.zl&&this.Cp?this.ql():(this.Cr=1,t.parentNode.insertBefore(this.firstChild,t))}Kl(t){this.zl&&this.Cp?this.ql():(this.Cr=1,t.appendChild(this.firstChild))}remove(){this.Cr=0,this.firstChild.remove()}ql(){const t=this.Cp;this.Cr=1,t.parentNode.insertBefore(this.firstChild,t)}xh(){this.zl=0,this.next=void 0,this.Cp=void 0}link(t){this.zl=1,this.dom.Fl(t)?this.Cp=t:(this.next=t,this.Tp())}Tp(){this.Cp=void 0!==this.next?this.next.firstChild:void 0}}class FragmentNodeSequence{constructor(dom,t){this.Cr=0,this.zl=0,this.dom=dom,this.Ap=t;const i=t.querySelectorAll(".au");let s=0,e=i.length;const targets=this.targets=Array(e);for(;e>s;){const t=i[s];targets[s]="AU-M"===t.nodeName?this.dom.xl(t):t,++s}const n=t.childNodes;s=0;const childNodes=this.childNodes=Array(e=n.length);for(;e>s;)childNodes[s]=n[s],++s;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.next=void 0,this.Cp=void 0}Hl(){return this.targets}insertBefore(t){if(this.zl&&this.Cp)this.ql();else{const i=t.parentNode;if(this.Cr){let s=this.firstChild;const e=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,i.insertBefore(s,t),s!==e);)s=n}else this.Cr=1,t.parentNode.insertBefore(this.Ap,t)}}Kl(t){if(this.Cr){let i=this.firstChild;const s=this.lastChild;let e;for(;null!=i&&(e=i.nextSibling,t.appendChild(i),i!==s);)i=e}else this.Cr=1,t.appendChild(this.Ap)}remove(){if(this.Cr){this.Cr=0;const t=this.Ap,i=this.lastChild;let s,e=this.firstChild;for(;null!==e&&(s=e.nextSibling,t.appendChild(e),e!==i);)e=s}}ql(){const t=this.Cp,i=t.parentNode;if(this.Cr){let s=this.firstChild;const e=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,i.insertBefore(s,t),s!==e);)s=n}else this.Cr=1,i.insertBefore(this.Ap,t)}xh(){this.zl=0,this.next=void 0,this.Cp=void 0}link(t){this.zl=1,this.dom.Fl(t)?this.Cp=t:(this.next=t,this.Tp())}Tp(){this.Cp=void 0!==this.next?this.next.firstChild:void 0}}class NodeSequenceFactory{constructor(dom,t){this.dom=dom;const i=dom.createDocumentFragment(t),childNodes=i.childNodes;switch(childNodes.length){case 0:return void(this.oa=(()=>NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.Rp=0,this.up=t,void(this.Wi=Vn)}default:this.Rp=1,this.up=i,this.Wi=FragmentNodeSequence}}oa(){return new this.Wi(this.dom,this.up.cloneNode(this.Rp))}}class $n{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(t=>{t.previousSibling=null,t.childNodes=PLATFORM.ki,t.nodeName="AU-M",t.nodeType=1})($n.prototype);class Mn{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITemplateFactory,this).register(t)}create(t,i){return new CompiledTemplate(this.dom,i,new NodeSequenceFactory(this.dom,i.template),t)}}Mn.inject=[IDOM];const Dn=[].slice;let Fn=class{constructor(t,i){this.Sd=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("TextBindingRenderer","render",Dn.call(arguments));const r=e.nextSibling;let o;dom.Dl(e)&&dom.remove(e);const c=ensureExpression(this.Sd,n.from,2048);addBinding(s,o=c._n?new MultiInterpolationBinding(this.ot,c,r,"textContent",BindingMode.We,i):new InterpolationBinding(c.Jn,c,r,"textContent",BindingMode.We,this.ot,i,1)),Tracer.enabled&&Tracer.lt()}};Fn.inject=[IExpressionParser,IObserverLocator],Fn=v([instructionRenderer("ha")],Fn);let Nn=class{constructor(t,i){this.Sd=t,this.vb=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("ListenerBindingRenderer","render",Dn.call(arguments));const r=ensureExpression(this.Sd,n.from,80|n.strategy+6);addBinding(s,new Listener(dom,n.to,n.strategy,r,e,n.preventDefault,this.vb,i)),Tracer.enabled&&Tracer.lt()}};Nn.inject=[IExpressionParser,IEventManager],Nn=v([instructionRenderer("hb")],Nn);let Un=class{Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("SetAttributeRenderer","render",Dn.call(arguments)),e.setAttribute(n.to,n.value),Tracer.enabled&&Tracer.lt()}};Un=v([instructionRenderer("he")],Un);let zn=class{constructor(t,i){this.Sd=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("StylePropertyBindingRenderer","render",Dn.call(arguments));const r=ensureExpression(this.Sd,n.from,48|BindingMode.We);addBinding(s,new Binding(r,e.style,n.to,BindingMode.We,this.ot,i)),Tracer.enabled&&Tracer.lt()}};zn.inject=[IExpressionParser,IObserverLocator],zn=v([instructionRenderer("hd")],zn);let Hn=class{constructor(t,i){this.Sd=t,this.ot=i}Vt(t,dom,i,s,e,n){Tracer.enabled&&Tracer.rt("StylePropertyBindingRenderer","render",Dn.call(arguments));const r=ensureExpression(this.Sd,n.from,48|BindingMode.We);addBinding(s,new AttributeBinding(r,e,n.lp,n.to,BindingMode.We,this.ot,i)),Tracer.enabled&&Tracer.lt()}};Hn.inject=[IExpressionParser,IObserverLocator],Hn=v([instructionRenderer("hc")],Hn);const Kn=[].slice,qn={mode:"open"};class HTMLProjectorLocator{static register(t){return Registration.singleton(IProjectorLocator,this).register(t)}Oa(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw Reporter.error(21);return new ShadowDOMProjector(dom,t,host,def)}return def.containerless?new ContainerlessProjector(dom,t,host):new HostProjector(t,host)}}const Wn={$b:1};class ShadowDOMProjector{constructor(dom,t,host,i){let shadowOptions;this.dom=dom,this.host=host,this.shadowRoot=host.Bp(shadowOptions=i.shadowOptions instanceof Object&&"mode"in i.shadowOptions?i.shadowOptions:qn),this.host.kt=t,this.shadowRoot.kt=t}get children(){return this.shadowRoot.childNodes}ya(t){this.dom.$l(this.shadowRoot,t,Wn)}Op(){return this.shadowRoot}hd(t){Tracer.enabled&&Tracer.rt("ShadowDOMProjector","project",Kn.call(arguments)),t.Kl(this.shadowRoot),Tracer.enabled&&Tracer.lt()}od(t){Tracer.enabled&&Tracer.rt("ShadowDOMProjector","take",Kn.call(arguments)),t.remove(),t.xh(),Tracer.enabled&&Tracer.lt()}}class ContainerlessProjector{constructor(dom,t,host){this.childNodes=host.childNodes.length?toArray(host.childNodes):PLATFORM.ki,this.host=dom.xl(host),this.host.kt=t}get children(){return this.childNodes}ya(t){new MutationObserver(t).observe(this.host,Wn)}Op(){return this.host.kp()}hd(t){Tracer.enabled&&Tracer.rt("ContainerlessProjector","project",Kn.call(arguments)),t.insertBefore(this.host),Tracer.enabled&&Tracer.lt()}od(t){Tracer.enabled&&Tracer.rt("ContainerlessProjector","take",Kn.call(arguments)),t.remove(),t.xh(),Tracer.enabled&&Tracer.lt()}}class HostProjector{constructor(t,host){this.host=host,this.host.kt=t}get children(){return this.host.childNodes}ya(t){}Op(){return this.host.kp()}hd(t){Tracer.enabled&&Tracer.rt("HostProjector","project",Kn.call(arguments)),t.Kl(this.host),Tracer.enabled&&Tracer.lt()}od(t){Tracer.enabled&&Tracer.rt("HostProjector","take",Kn.call(arguments)),t.remove(),t.xh(),Tracer.enabled&&Tracer.lt()}}const Qn=[HTMLProjectorLocator,TargetAccessorLocator,TargetObserverLocator,Mn],Gn=[AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose],Zn=[Nn,Hn,Un,zn,Fn],Xn={register:t=>RuntimeBasicConfiguration.register(t).register(...Qn,...Gn,...Zn),Vi(){return this.register(DI.Vi())}};qt=Object.freeze({Listener,get AttributeBinding(){return AttributeBinding},AttributeNSAccessor,get CheckedObserver(){return CheckedObserver},ClassAttributeAccessor,DataAttributeAccessor,ElementPropertyAccessor,ListenerTracker,DelegateOrCaptureSubscription,TriggerSubscription,IEventManager,EventSubscriber,EventManager,TargetAccessorLocator,TargetObserverLocator,get SelectValueObserver(){return SelectValueObserver},StyleAttributeAccessor,ISVGAnalyzer,get ValueAttributeObserver(){return ValueAttributeObserver},AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose,IProjectorLocatorRegistration:HTMLProjectorLocator,ITargetAccessorLocatorRegistration:TargetAccessorLocator,ITargetObserverLocatorRegistration:TargetObserverLocator,ITemplateFactoryRegistration:Mn,DefaultComponents:Qn,AttrBindingBehaviorRegistration:AttrBindingBehavior,SelfBindingBehaviorRegistration:SelfBindingBehavior,UpdateTriggerBindingBehaviorRegistration:UpdateTriggerBindingBehavior,ComposeRegistration:Compose,DefaultResources:Gn,AttributeBindingRendererRegistration:Hn,ListenerBindingRendererRegistration:Nn,SetAttributeRendererRegistration:Un,StylePropertyBindingRendererRegistration:zn,TextBindingRendererRegistration:Fn,DefaultRenderers:Zn,BasicConfiguration:Xn,createElement,RenderPlan,get HTMLTargetedInstructionType(){return HTMLTargetedInstructionType},isHTMLTargetedInstruction,get NodeType(){return NodeType},HTMLDOM,DOM:xn,NodeSequenceFactory,FragmentNodeSequence,AttributeBindingInstruction,CaptureBindingInstruction,DelegateBindingInstruction,SetAttributeInstruction,StylePropertyBindingInstruction:class{constructor(from,to){this.type="hd",this.from=from,this.to=to}},TextBindingInstruction,TriggerBindingInstruction,ContainerlessProjector,HostProjector,HTMLProjectorLocator,ShadowDOMProjector});class TriggerBindingCommand{constructor(){this.Pd=86}compile(t){return new TriggerBindingInstruction(t.Fe,ct(t,0))}}BindingCommandResource.Ee("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.Pd=88}compile(t){return new DelegateBindingInstruction(t.Fe,ct(t,0))}}BindingCommandResource.Ee("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.Pd=87}compile(t){return new CaptureBindingInstruction(t.Fe,ct(t,0))}}BindingCommandResource.Ee("capture",CaptureBindingCommand);class AttrBindingCommand{constructor(){this.Pd=32}compile(t){const i=ct(t,0);return new AttributeBindingInstruction(i,t.Fe,i)}}BindingCommandResource.Ee("attr",AttrBindingCommand);class StyleBindingCommand{constructor(){this.Pd=32}compile(t){return new AttributeBindingInstruction("style",t.Fe,ct(t,0))}}BindingCommandResource.Ee("style",StyleBindingCommand);class ClassBindingCommand{constructor(){this.Pd=32}compile(t){return new AttributeBindingInstruction("class",t.Fe,ct(t,0))}}BindingCommandResource.Ee("class",ClassBindingCommand);class _n{Sp(t,i,parts){return new AttrSyntax(t,i,parts[1],"attr")}Ip(t,i,parts){return new AttrSyntax(t,i,parts[0],"attr")}}attributePattern({pattern:"attr.PART",symbols:"."},{pattern:"PART.attr",symbols:"."})(_n);class Jn{Pp(t,i,parts){return new AttrSyntax(t,i,parts[1],"style")}Ep(t,i,parts){return new AttrSyntax(t,i,parts[0],"style")}}attributePattern({pattern:"style.PART",symbols:"."},{pattern:"PART.style",symbols:"."})(Jn);class Yn{Lp(t,i,parts){return new AttrSyntax(t,i,parts[1],"class")}jp(t,i,parts){return new AttrSyntax(t,i,parts[0],"class")}}attributePattern({pattern:"class.PART",symbols:"."},{pattern:"PART.class",symbols:"."})(Yn);const tr=[].slice,{rt:ir,lt:sr}=Profiler.os("TemplateBinder"),er={id:1,xp:1,Vp:1},nr={$p:1,xp:1,Vp:1};class TemplateBinder{constructor(dom,t,i,s){this.dom=dom,this.Ng=t,this.Mp=i,this.Dp=s,this.ea=null,this.manifest=null,this.Fp=null,this.Np=null,this.Te=null}bind(t){Tracer.enabled&&Tracer.rt("TemplateBinder","bind",tr.call(arguments)),Profiler.enabled&&ir();const i=this.ea,s=this.Np,e=this.Fp,n=this.manifest,r=this.ea=this.manifest=new PlainElementSymbol(t),o=t.attributes;let c=0;for(;o.length>c;){const t=o[c],i=this.Mp.parse(t.name,t.value);if(1==er[i.target])throw Profiler.enabled&&sr(),Error(`Invalid surrogate attribute: ${i.target}`);const s=this.Ng.qg(i);if(null==s)this.Up(i,t);else{if(s.isTemplateController)throw Profiler.enabled&&sr(),Error("Cannot have template controller on surrogate element.");this.ja(i,s)}++c}return this.zp(t),this.ea=i,this.Np=s,this.Fp=e,this.manifest=n,Profiler.enabled&&sr(),Tracer.enabled&&Tracer.lt(),r}Hp(t,i){switch(Tracer.enabled&&Tracer.rt("TemplateBinder","bindManifest",tr.call(arguments)),i.nodeName){case"LET":return this.Kp(t,i),void(Tracer.enabled&&Tracer.lt());case"SLOT":this.ea.hasSlots=1}const s=this.Np,e=this.Fp,n=this.manifest;this.Te=i.getAttribute("part");let r=void 0,name=i.getAttribute("as-element");null==name&&(name=i.nodeName.toLowerCase());const o=this.Ng.Kg(name);null==o?this.manifest=new PlainElementSymbol(i):(this.Np=this.Fp,r=this.Fp=this.manifest=new CustomElementSymbol(this.dom,i,o)),this.zp(i),this.qp(i,t),null!=r&&r.ub?i.parentNode.replaceChild(r.marker,i):this.manifest.lb&&i.classList.add("au"),this.Np=s,this.Fp=e,this.manifest=n,Tracer.enabled&&Tracer.lt()}Kp(t,i){const s=new LetElementSymbol(this.dom,i);t.childNodes.push(s);const e=i.attributes;let n=0;for(;e.length>n;){const t=e[n];if("to-view-model"===t.name){i.removeAttribute("to-view-model"),s.toViewModel=1;continue}const r=this.Mp.parse(t.name,t.value),o=this.Ng.Wg(r),c=this.Dp.parse(r.vi,null==o?2048:o.Pd),to=camelCase(r.target),l=new BindableInfo(to,BindingMode.We);s.Nt.push(new BindingSymbol(o,l,c,r.vi,to)),++n}i.parentNode.replaceChild(s.marker,i)}qp(t,i){Tracer.enabled&&Tracer.rt("TemplateBinder","bindAttributes",tr.call(arguments));const{Np:s,Fp:e,manifest:n}=this;let r=n;const o=this.Wp(t);let c=void 0,l=void 0;const u=t.attributes;let a=0;for(;u.length>a;){const t=u[a];if(++a,1==nr[t.name])continue;const i=this.Mp.parse(t.name,t.value),s=this.Ng.qg(i);null==s?this.Up(i,t):s.isTemplateController?(l=n.templateController=this.Qp(i,s),r===n?(l.template=n,r=l):(l.templateController=c,l.template=c.template,c.template=l),c=l):this.ja(i,s)}(function(dom,t,i){const s=i.hb;let e,n=t;for(;n!==i;)n.template===i?(s.parentNode.replaceChild(n.marker,s),"TEMPLATE"===s.nodeName?(n.hb=s,s.remove()):(e=n.hb=dom.Ml()).content.appendChild(s)):(e=n.hb=dom.Ml()).content.appendChild(n.marker),s.removeAttribute(n.Kt.fi),n=n.template})(this.dom,r,n),null==o?i.childNodes.push(r):(o.parent=i,o.template=r,(n===e?s:e).parts.push(o),null!=i.templateController&&i.templateController.parts.push(o),(function(dom,t,i){let s,e;"TEMPLATE"===(s=512&i.flags?i.marker:i.hb).nodeName?t.hb=s:(e=t.hb=dom.Ml()).content.appendChild(s)})(this.dom,o,r)),Tracer.enabled&&Tracer.lt()}zp(t){let i,s;for(Tracer.enabled&&Tracer.rt("TemplateBinder","bindChildNodes",tr.call(arguments)),i="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!=i;)switch(i.nodeType){case 1:s=i.nextSibling,this.Hp(this.manifest,i),i=s;break;case 3:i=this.Gp(i).nextSibling;break;case 4:case 7:case 8:case 10:i=i.nextSibling;break;case 9:case 11:i=i.firstChild}Tracer.enabled&&Tracer.lt()}Gp(t){Tracer.enabled&&Tracer.rt("TemplateBinder","bindText",tr.call(arguments));const i=this.Dp.parse(t.wholeText,2048);if(null!=i){const s=new TextSymbol(this.dom,t,i);this.manifest.childNodes.push(s),(function(t){const i=t.hb,s=i.parentNode;for(;null!=i.nextSibling&&3===i.nextSibling.nodeType;)s.removeChild(i.nextSibling);i.textContent="",s.insertBefore(t.marker,i)})(s)}for(;null!=t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return Tracer.enabled&&Tracer.lt(),t}Qp(t,i){let s;Tracer.enabled&&Tracer.rt("TemplateBinder","declareTemplateController",tr.call(arguments));const e=this.Ng.Wg(t);if(null==e&&i.Et)s=new TemplateControllerSymbol(this.dom,t,i,this.Te),this.Te=null,this.Zp(s,i,t.vi);else{s=new TemplateControllerSymbol(this.dom,t,i,this.Te);const n=this.Dp.parse(t.vi,null==e?2048:e.Pd);s.Nt.push(new BindingSymbol(e,i.bindable,n,t.vi,t.target)),this.Te=null}return Tracer.enabled&&Tracer.lt(),s}ja(t,i){Tracer.enabled&&Tracer.rt("TemplateBinder","bindCustomAttribute",tr.call(arguments));const s=this.Ng.Wg(t);let e;if(null==s&&i.Et)e=new CustomAttributeSymbol(t,i),this.Zp(e,i,t.vi);else{e=new CustomAttributeSymbol(t,i);const n=this.Dp.parse(t.vi,null==s?2048:s.Pd);e.Nt.push(new BindingSymbol(s,i.bindable,n,t.vi,t.target))}this.manifest.attributes.push(e),this.manifest.lb=1,Tracer.enabled&&Tracer.lt()}Zp(t,i,value){Tracer.enabled&&Tracer.rt("TemplateBinder","bindMultiAttribute",tr.call(arguments));const s=(function(t){const i=[],s=new rr(t),e=s.length;let name,value;for(;e>s.index;){if(0===(name=Et(s)).length)return i;value=Lt(s),i.push({name,value})}return i})(value);let e;for(let n=0,r=s.length;r>n;++n){const r=this.Mp.parse((e=s[n]).name,e.value),o=this.Ng.Wg(r),c=this.Dp.parse(r.vi,null==o?2048:o.Pd);let bindable=i.bindables[r.target];void 0===bindable&&(bindable=i.bindables[r.target]=new BindableInfo(r.target,BindingMode.We)),t.Nt.push(new BindingSymbol(o,bindable,c,r.vi,r.target))}Tracer.enabled&&Tracer.lt()}Up(t,i){if(Tracer.enabled&&Tracer.rt("TemplateBinder","bindPlainAttribute",tr.call(arguments)),0===t.vi.length)return void(Tracer.enabled&&Tracer.lt());const s=this.Ng.Wg(t),e=this.manifest,n=this.Dp.parse(t.vi,null==s?2048:s.Pd);if(16&e.flags){const bindable=e.bindables[t.target];null!=bindable?(e.Nt.push(new BindingSymbol(s,bindable,n,t.vi,t.target)),e.lb=1):null==n&&"ref"!==t.target||(e.attributes.push(new PlainAttributeSymbol(t,s,n)),e.lb=1)}else null!=n||"ref"===t.target?(e.attributes.push(new PlainAttributeSymbol(t,s,n)),e.lb=1):e===this.ea&&e.attributes.push(new PlainAttributeSymbol(t,s,n));null==s&&null!=n&&(i.value=""),Tracer.enabled&&Tracer.lt()}Wp(t){Tracer.enabled&&Tracer.rt("TemplateBinder","declareReplacePart",tr.call(arguments));const name=t.getAttribute("replace-part");if(null==name)return Tracer.enabled&&Tracer.lt(),null;t.removeAttribute("replace-part");const i=new ReplacePartSymbol(name);return this.zp(t),Tracer.enabled&&Tracer.lt(),i}}class rr{constructor(t){this.input=t,this.index=0,this.length=t.length}}const hr=String.fromCharCode;(function(Char){Char[Char.ov=34]="DoubleQuote",Char[Char.lv=39]="SingleQuote",Char[Char.Qf=47]="Slash",Char[Char.uv=59]="Semicolon",Char[Char.Rf=58]="Colon"})(Wt||(Wt={}));const ITemplateElementFactory=DI.Di("ITemplateElementFactory").Ni(),{rt:or,lt:cr}=Profiler.os("TemplateElementFactory"),lr={};class ur{constructor(dom){this.dom=dom,this.template=dom.Ml()}static register(t){return Registration.singleton(ITemplateElementFactory,this).register(t)}Ml(t){if(Profiler.enabled&&or(),"string"==typeof t){let i=lr[t];if(void 0===i){const template=this.template;template.innerHTML=t;const s=template.content.firstElementChild;null==s||"TEMPLATE"!==s.nodeName||null!=s.nextElementSibling?(this.template=this.dom.Ml(),i=template):(template.content.removeChild(s),i=s),lr[t]=i}return Profiler.enabled&&cr(),i.cloneNode(1)}if("TEMPLATE"!==t.nodeName){const template=this.dom.Ml();return template.content.appendChild(t),Profiler.enabled&&cr(),template}return null!=t.parentNode&&t.parentNode.removeChild(t),Profiler.enabled&&cr(),t}}ur.inject=[IDOM];const ar=Object.freeze({required:0,compiler:"default"}),{rt:dr,lt:fr}=Profiler.os("TemplateCompiler");class vr{constructor(t,i,s){this.wu=t,this.Mp=i,this.Dp=s,this.Xp=null,this.parts=null}get name(){return"default"}static register(t){return Registration.singleton(ITemplateCompiler,this).register(t)}compile(dom,t,i){Profiler.enabled&&dr();const s=new TemplateBinder(dom,new ResourceModel(i),this.Mp,this.Dp),template=t.template=this.wu.Ml(t.template),e=s.bind(template);void 0!==t.instructions&&t.instructions!==PLATFORM.ki||(t.instructions=[]),1==e.hasSlots&&(t.hasSlots=1),this.Xp=t.instructions,this.parts={};const n=e.attributes,r=n.length;if(r>0){let surrogates;void 0!==t.surrogates&&t.surrogates!==PLATFORM.ki||(t.surrogates=Array(r)),surrogates=t.surrogates;for(let t=0;r>t;++t)surrogates[t]=this._p(n[t])}return this.Jp(e),this.Xp=null,this.parts=null,Profiler.enabled&&fr(),t}Jp(t){if(8192&t.flags){const{childNodes}=t;let i;const s=childNodes.length;for(let t=0;s>t;++t)if(128&(i=childNodes[t]).flags)this.Xp.push([new TextBindingInstruction(i.pc)]);else if(32&i.flags){const t=i.Nt,instructions=[];let s;const e=t.length;for(let i=0;e>i;++i)instructions[i]=new LetBindingInstruction((s=t[i]).Fe,s.target);this.Xp.push([new LetElementInstruction(instructions,i.toViewModel)])}else this.Yp(i)}}tm(t){const i=this.im(t,1);i[0]=new HydrateElementInstruction(t.res,this.sm(t),this.em(t)),this.Xp.push(i),this.Jp(t)}nm(t){const i=this.im(t,0);i.length>0&&this.Xp.push(i),this.Jp(t)}Yp(t){switch(511&t.flags){case 16:this.tm(t);break;case 64:this.nm(t);break;case 1:this.rm(t)}}rm(t){const i=this.sm(t),s=this.Xp,e=this.Xp=[];this.Yp(t.template),this.Xp=s;const def={name:null==t.Te?t.res:t.Te,template:t.hb,instructions:e,build:ar};let parts=void 0;if((16384&t.flags)>0){parts={};for(const i of t.parts)parts[i.name]=this.parts[i.name]}this.Xp.push([new HydrateTemplateController(def,t.res,i,"else"===t.res,parts)])}sm(t){let i;if(4096&t.flags){const{Nt:s}=t,e=s.length;i=Array(e);let n=0;for(;e>n;++n)i[n]=this.hm(s[n])}else i=PLATFORM.ki;return i}hm(t){return null==t.command?null==t.Fe?new SetPropertyInstruction(t.vi,t.bindable.Ht):new InterpolationInstruction(t.Fe,t.bindable.Ht):t.command.compile(t)}im(t,i){let s;if(2048&t.flags){const{attributes:e}=t,n=e.length;s=Array(i+n);for(let t=0;n>t;++t)s[t+i]=this._p(e[t])}else s=i>0?Array(i):PLATFORM.ki;return s}om(t){const i=this.sm(t);return new HydrateAttributeInstruction(t.res,i)}cm(t){return null==t.command?null==t.Fe?new SetAttributeInstruction(t.Kt.vi,t.Kt.target):new InterpolationInstruction(t.Fe,t.Kt.target):t.command.compile(t)}_p(t){return"ref"===t.Kt.target?new RefBindingInstruction(t.Kt.vi):4&t.flags?this.om(t):this.cm(t)}em(t){let parts;if(16384&t.flags){parts={};const i=t.parts,s=i.length;let e,n,r;for(let t=0;s>t;++t)r=i[t],e=this.Xp,n=this.Xp=[],this.Yp(r.template),this.parts[r.name]=parts[r.name]={name:r.name,template:r.hb,instructions:n,build:ar},this.Xp=e}else parts=PLATFORM.It;return parts}}vr.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const gr=[vr,ur],br=[Jn,Yn,_n],pr=[TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand,ClassBindingCommand,StyleBindingCommand,AttrBindingCommand];Qt=Object.freeze({TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand,AttrBindingCommand,ClassBindingCommand,StyleBindingCommand,ITemplateCompilerRegistration:vr,ITemplateElementFactoryRegistration:ur,DefaultComponents:gr,TriggerBindingCommandRegistration:TriggerBindingCommand,DelegateBindingCommandRegistration:DelegateBindingCommand,CaptureBindingCommandRegistration:CaptureBindingCommand,AttrBindingCommandRegistration:AttrBindingCommand,ClassBindingCommandRegistration:ClassBindingCommand,StyleBindingCommandRegistration:StyleBindingCommand,DefaultBindingLanguage:pr,BasicConfiguration:{register:t=>Xn.register(t).register(...an,...DefaultBindingSyntax,...br,...DefaultBindingLanguage,...gr,...pr),Vi(){return this.register(DI.Vi())}},stringifyDOM,stringifyInstructions,stringifyTemplateDefinition,TemplateBinder,ITemplateElementFactory});class mr{constructor(t){this.ca=t}static register(t){return Registration.singleton(IDOMInitializer,this).register(t)}initialize(t){if(this.ca.has(IDOM,0))return this.ca.get(IDOM);let dom;return dom=void 0!==t?void 0!==t.dom?t.dom:new HTMLDOM(window,null!==t.host.ownerDocument?t.host.ownerDocument:document,Node,Element,HTMLElement,CustomEvent):new HTMLDOM(window,document,Node,Element,HTMLElement,CustomEvent),Registration.zi(IDOM,dom).register(this.ca),dom}}mr.inject=[IContainer];const wr=[mr],yr={register:t=>Xn.register(t).register(...wr),Vi(){return this.register(DI.Vi())}};Gt=Object.freeze({lm:mr,DefaultComponents:wr,BasicConfiguration:yr});const{rt:Cr,lt:Tr}=Profiler.os("BasicConfiguration");return Zt=Object.freeze({BasicConfiguration:{register:t=>(Profiler.enabled&&Cr(),yr.register(t).register(...DefaultBindingLanguage,...DefaultBindingSyntax,...an,...pr,...gr),Profiler.enabled&&Tr(),t),Vi(){Profiler.enabled&&Cr();const t=this.register(DI.Vi());return Profiler.enabled&&Tr(),t}}}),t.jit=Kt,t.jitHtml=Qt,t.jitHtmlBrowser=Zt,t.kernel=xt,t.runtime=Nt,t.runtimeHtml=qt,t.runtimeHtmlBrowser=Gt,t})({});
