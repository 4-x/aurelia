{"version":3,"file":"index.umd.js","sources":["../src/processing.ts","../src/component.ts","../src/view.ts","../src/configuration.ts"],"sourcesContent":["export interface ITemplateImport {\n  plugin: string | null;\n  extension: string | null;\n  basename: string;\n  path: string;\n}\n\nexport interface ITemplateDescription {\n  template: string;\n  imports: ITemplateImport[];\n}\n\nexport function processImports(toProcess: ITemplateImport[], relativeTo: string): string[] {\n  return toProcess.map(x => {\n    if (x.extension === '.html' && !x.plugin) {\n      return `component!${relativeToFile(x.path, relativeTo) + x.extension}`;\n    }\n\n    const relativePath = relativeToFile(x.path, relativeTo);\n    return x.plugin ? `${x.plugin}!${relativePath}` : relativePath;\n  });\n}\n\nconst capitalMatcher = /([A-Z])/g;\n\n/** @internal */\nexport function addHyphenAndLower(char: string): string {\n  return `-${char.toLowerCase()}`;\n}\n\nexport function kebabCase(name: string): string {\n  return (name.charAt(0).toLowerCase() + name.slice(1)).replace(capitalMatcher, addHyphenAndLower);\n}\n\nexport function escape(content: string): string {\n  return content.replace(/(['\\\\])/g, '\\\\$1')\n            .replace(/[\\f]/g, '\\\\f')\n            .replace(/[\\b]/g, '\\\\b')\n            .replace(/[\\n]/g, '\\\\n')\n            .replace(/[\\t]/g, '\\\\t')\n            .replace(/[\\r]/g, '\\\\r')\n            .replace(/[\\u2028]/g, '\\\\u2028')\n            .replace(/[\\u2029]/g, '\\\\u2029');\n}\n\nexport function createTemplateDescription(template: string): ITemplateDescription {\n  const imports: ITemplateImport[] = [];\n  const cleanedTemplate = template.replace(/^@import\\s+\\'([a-zA-z\\/.\\-_!%&\\?=0-9]*)\\'\\s*;/gm, (match: string, url: string) => {\n    imports.push(parseImport(url));\n    return '';\n  });\n\n  return {\n    template: cleanedTemplate.trim(),\n    imports\n  };\n}\n\nexport function parseImport(value: string): ITemplateImport {\n  const result: Partial<ITemplateImport> & Pick<ITemplateImport, 'path'> = {\n    path: value\n  };\n\n  const pluginIndex = result.path.lastIndexOf('!');\n  if (pluginIndex !== -1) {\n    result.plugin = result.path.slice(pluginIndex + 1);\n    result.path = result.path.slice(0, pluginIndex);\n  } else {\n    result.plugin = null;\n  }\n\n  const extensionIndex = result.path.lastIndexOf('.');\n  if (extensionIndex !== -1) {\n    result.extension = result.path.slice(extensionIndex).toLowerCase();\n    result.path = result.path.slice(0, extensionIndex);\n  } else {\n    result.extension = null;\n  }\n\n  const slashIndex = result.path.lastIndexOf('/');\n  if (slashIndex !== -1) {\n    result.basename = result.path.slice(slashIndex + 1);\n  } else {\n    result.basename = result.path;\n  }\n\n  return result as ITemplateImport;\n}\n\nexport function relativeToFile(name: string, file?: string): string {\n  const fileParts = file ? file.split('/') : undefined;\n  const nameParts = name.trim().split('/');\n\n  if (nameParts[0].charAt(0) === '.' && fileParts !== undefined) {\n    //Convert file to array, and lop off the last part,\n    //so that . matches that 'directory' and not name of the file's\n    //module. For instance, file of 'one/two/three', maps to\n    //'one/two/three.js', but we want the directory, 'one/two' for\n    //this normalization.\n    const normalizedBaseParts = fileParts.slice(0, fileParts.length - 1);\n    nameParts.unshift(...normalizedBaseParts);\n  }\n\n  trimDots(nameParts);\n\n  return nameParts.join('/');\n}\n\ninterface Require {\n  nodeRequire(name: string): unknown;\n}\n\ndeclare const require: Require;\n\nexport function loadFromFile(url: string, callback: (content: string) => void, errback?: (error: Error) => void): void {\n  const fs = require.nodeRequire('fs') as {readFileSync(path: string, options?: { encoding?: string } | string): string};\n\n  try {\n    // tslint:disable-next-line:non-literal-fs-path\n    let file = fs.readFileSync(url, 'utf8');\n\n    //Remove BOM (Byte Mark Order) from utf8 files if it is there.\n    if (file[0] === '\\uFEFF') {\n        file = file.substring(1);\n    }\n\n    callback(file);\n  } catch (e) {\n    if (errback !== undefined) {\n      errback(e);\n    }\n  }\n}\n\n/** @internal */\nexport function trimDots(ary: string[]): void {\n  for (let i = 0; i < ary.length; ++i) {\n    const part = ary[i];\n    if (part === '.') {\n      ary.splice(i, 1);\n      i -= 1;\n    } else if (part === '..') {\n      // If at the start, or previous value is still ..,\n      // keep them so that when converted to a path it may\n      // still work when converted to a path, even though\n      // as an ID it is less than ideal. In larger point\n      // releases, may be better to just kick out an error.\n      if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {\n        // tslint:disable-next-line:no-redundant-jump\n        continue;\n      } else if (i > 0) {\n        ary.splice(i - 1, 2);\n        i -= 2;\n      }\n    }\n  }\n}\n","import { CustomElementResource } from '@aurelia/runtime';\nimport { createTemplateDescription, escape, kebabCase, loadFromFile, parseImport, processImports } from './processing';\nimport { Require, RequireConfig, RequireOnLoad } from './types';\n\nconst buildMap: Record<string, string> = {};\n\nfunction finishLoad(name: string, content: string, onLoad: (content: string) => void): void {\n  buildMap[name] = content;\n  onLoad(content);\n}\n\nexport function load(name: string, req: Require, onLoad: RequireOnLoad, config: RequireConfig): void {\n  if (config.isBuild) {\n    loadFromFile(\n      req.toUrl(name),\n      function(content: string): void { finishLoad(name, content, onLoad); },\n      function(err: Error): void { if (onLoad.error) { onLoad.error(err); } }\n    );\n  } else {\n    req([`text!${name}`], function(text: string): void {\n      const description = createTemplateDescription(text);\n      const depsToLoad = processImports(description.imports, name);\n\n      req(depsToLoad, function (): void {\n        const templateImport = parseImport(name);\n        const templateSource = {\n          name: kebabCase(templateImport.basename),\n          template: description.template,\n          build: {\n            required: true,\n            compiler: 'default'\n          },\n          dependencies: Array.prototype.slice.call(arguments, 1)\n        };\n\n        onLoad({default: CustomElementResource.define(templateSource)});\n      });\n    });\n  }\n}\n\nexport function write(pluginName: string, moduleName: string, writer: (content: string) => void, _config: RequireConfig): void {\n  if (buildMap.hasOwnProperty(moduleName)) {\n    const templateImport = parseImport(moduleName);\n    const text = buildMap[moduleName];\n    const description = createTemplateDescription(text);\n    const depsToLoad = processImports(description.imports, moduleName);\n    const depsToLoadMapped = depsToLoad.map(x => `\"${x}\"`).join(',');\n\n    depsToLoad.unshift('@aurelia/runtime');\n\n    writer(`define(\"${pluginName}!${moduleName}\", [${depsToLoadMapped}], function () {\n      var Component = arguments[0].Component;\n      var templateSource = {\n        name: '${kebabCase(templateImport.basename)}',\n        template: '${escape(description.template)}',\n        build: {\n          required: true,\n          compiler: 'default'\n        },\n        dependencies: Array.prototype.slice.call(arguments, 1)\n      };\n\n      return { default: Component.element(templateSource) };\n    });\\n`);\n  }\n}\n","import { createTemplateDescription, escape, kebabCase, loadFromFile, parseImport, processImports } from './processing';\nimport { Require, RequireConfig, RequireOnLoad } from './types';\n\nconst buildMap: Record<string, string> = {};\n\n/** @internal */\nexport function finishLoad(name: string, content: string, onLoad: (content: string) => void): void {\n  buildMap[name] = content;\n  onLoad(content);\n}\n\nexport function load(name: string, req: Require, onLoad: RequireOnLoad, config: RequireConfig): void {\n  if (config.isBuild) {\n    loadFromFile(\n      req.toUrl(name),\n      function(content: string): void { finishLoad(name, content, onLoad); },\n      function(error: Error): void { if (onLoad.error) { onLoad.error(error); } }\n    );\n  } else {\n    req([`text!${name}`], function(text: string): void {\n      const description = createTemplateDescription(text);\n      const depsToLoad = processImports(description.imports, name);\n      const templateImport = parseImport(name);\n\n      req(depsToLoad, function (): void {\n        const templateSource = {\n          name: kebabCase(templateImport.basename),\n          template: description.template,\n          build: {\n            required: true,\n            compiler: 'default'\n          },\n          dependencies: Array.prototype.slice.call(arguments)\n        };\n\n        onLoad({default: templateSource});\n      });\n    });\n  }\n}\n\nexport function write(pluginName: string, moduleName: string, writer: (content: string) => void, _config: RequireConfig): void {\n  if (buildMap.hasOwnProperty(moduleName)) {\n    const text = buildMap[moduleName];\n    const description = createTemplateDescription(text);\n    const depsToLoad = processImports(description.imports, moduleName);\n    const depsToLoadMapped = depsToLoad.map(x => `\"${x}\"`).join(',');\n    const templateImport = parseImport(moduleName);\n\n    writer(`define(\"${pluginName}!${moduleName}\", [${depsToLoadMapped}], function () {\n      var templateSource = {\n        name: '${kebabCase(templateImport.basename)}',\n        template: '${escape(description.template)}',\n        build: {\n          required: true,\n          compiler: 'default'\n        },\n        dependencies: Array.prototype.slice.call(arguments)\n      };\n\n      return { default: templateSource };\n    });\\n`);\n  }\n}\n","import * as componentPlugin from './component';\nimport * as viewPlugin from './view';\n\ndeclare function define(name: string, deps: unknown[], moduleObject: {}): void;\nconst nonAnonDefine = define;\n\nexport function installRequireJSPlugins(): void {\n  nonAnonDefine('view', [], viewPlugin);\n  nonAnonDefine('component', [], componentPlugin);\n}\n"],"names":["CustomElementResource","buildMap","finishLoad","load","write"],"mappings":"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"}